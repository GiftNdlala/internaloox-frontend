/*! For license information please see main.2172d165.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},45:(e,t,n)=>{var s=n(738).default;e.exports=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},139:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)s.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},153:(e,t,n)=>{"use strict";var s=n(43),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,i={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var y=b.prototype=new x;y.constructor=b,f(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,r,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return a=a(l=e),e=""===i?"."+A(l,0):i,w(a)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),E(a,t,r,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+A(o=e[c],c);l+=E(o,t,r,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,r,d=i+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var s=[],r=0;return E(e,s,"","",function(e){return t.call(n,e,r++)}),s}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},L={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:L,ReactCurrentOwner:_};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<i(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,a=r>>>1;s<a;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<r&&0>i(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>i(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=s(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=s(d)}}function w(e){if(g=!1,y(e),!f)if(null!==s(c))f=!0,L(j);else{var t=s(d);null!==t&&R(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,x(C),C=-1),p=!0;var i=m;try{for(y(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&r(c),y(n)}else r(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&R(w,u.startTime-n),l=!1}return l}finally{h=null,m=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,k=null,C=-1,S=5,A=-1;function E(){return!(t.unstable_now()-A<S)}function T(){if(null!==k){var e=t.unstable_now();A=e;var n=!0;try{n=k(!0,e)}finally{n?_():(N=!1,k=null)}}else N=!1}if("function"===typeof b)_=function(){b(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=T,_=function(){M.postMessage(null)}}else _=function(){v(T,0)};function L(e){k=e,N||(N=!0,_())}function R(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,L(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,r,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(d,e),null===s(c)&&e===s(d)&&(g?(x(C),C=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),f||p||(f=!0,L(j))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},391:(e,t,n)=>{"use strict";var s=n(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},440:e=>{"use strict";var t=function(){};e.exports=t},497:(e,t,n)=>{"use strict";var s=n(218);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(153)},693:(e,t,n)=>{var s=n(736);e.exports=function(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},730:(e,t,n)=>{"use strict";var s=n(43),r=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,s,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,s){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,s)&&(n=null),s||null===r?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,s=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,I=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),i=s.stack.split("\n"),a=r.length-1,o=i.length-1;1<=a&&0<=o&&r[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==i[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case j:return"Portal";case k:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=G(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=V(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),s=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),r=fe(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,_e=null,Ne=null;function ke(e){if(e=br(e)){if("function"!==typeof je)throw Error(i(280));var t=e.stateNode;t&&(t=wr(t),je(e.stateNode,e.type,t))}}function Ce(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function Se(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Te=!1;function Pe(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ae(e,t,n)}finally{Te=!1,(null!==_e||null!==Ne)&&(Ee(),Se())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var s=wr(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Le=!1}function Oe(e,t,n,s,r,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var De=!1,Ie=null,Fe=!1,ze=null,Be={onError:function(e){De=!0,Ie=e}};function We(e,t,n,s,r,i,a,o,l){De=!1,Ie=null,Oe.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(s=r.return)){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ve(r),e;if(a===s)return Ve(r),t;a=a.sibling}throw Error(i(188))}if(n.return!==s.return)n=r,s=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=a;break}if(l===s){o=!0,s=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=r;break}if(l===s){o=!0,s=a,n=r;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Qe=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,st=r.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?s=ut(o):0!==(i&=a)&&(s=ut(i))}else 0!==(a=n&~r)?s=ut(a):0!==i&&(s=ut(i));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)r=1<<(n=31-at(t)),s|=e[n],t&=~r;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-at(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,_t,Nt,kt,Ct=!1,St=[],At=null,Et=null,Tt=null,Pt=new Map,Mt=new Map,Lt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,s,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&jt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function It(e){var t=xr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&jt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);ye=s,n.target.dispatchEvent(s),ye=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Ct=!1,null!==At&&Ft(At)&&(At=null),null!==Et&&Ft(Et)&&(Et=null),null!==Tt&&Ft(Tt)&&(Tt=null),Pt.forEach(zt),Mt.forEach(zt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Wt(t,e)}if(0<St.length){Wt(St[0],e);for(var n=1;n<St.length;n++){var s=St[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==At&&Wt(At,e),null!==Et&&Wt(Et,e),null!==Tt&&Wt(Tt,e),Pt.forEach(t),Mt.forEach(t),n=0;n<Lt.length;n++)(s=Lt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)It(n),null===n.blockedOn&&Lt.shift()}var Ut=y.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,s){var r=bt,i=Ut.transition;Ut.transition=null;try{bt=1,Kt(e,t,n,s)}finally{bt=r,Ut.transition=i}}function qt(e,t,n,s){var r=bt,i=Ut.transition;Ut.transition=null;try{bt=4,Kt(e,t,n,s)}finally{bt=r,Ut.transition=i}}function Kt(e,t,n,s){if(Vt){var r=Yt(e,t,n,s);if(null===r)Vs(e,t,s,Xt,n),Ot(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return At=Dt(At,e,t,n,s,r),!0;case"dragenter":return Et=Dt(Et,e,t,n,s,r),!0;case"mouseover":return Tt=Dt(Tt,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Pt.set(i,Dt(Pt.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Mt.set(i,Dt(Mt.get(i)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(Ot(e,s),4&t&&-1<Rt.indexOf(e)){for(;null!==r;){var i=br(r);if(null!==i&&wt(i),null===(i=Yt(e,t,n,s))&&Vs(e,t,s,Xt,n),i===r)break;r=i}null!==r&&s.stopPropagation()}else Vs(e,t,s,null,n)}}var Xt=null;function Yt(e,t,n,s){if(Xt=null,null!==(e=xr(e=we(s))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,s=n.length,r="value"in $t?$t.value:$t.textContent,i=r.length;for(e=0;e<s&&n[e]===r[e];e++);var a=s-e;for(t=1;t<=a&&n[s-t]===r[i-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,s,r,i){for(var a in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=I({},cn,{view:0,detail:0}),hn=rn(un),mn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(mn),fn=rn(I({},mn,{dataTransfer:0})),gn=rn(I({},un,{relatedTarget:0})),vn=rn(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(xn),yn=rn(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return Nn}var Cn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=rn(Cn),An=rn(I({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Tn=rn(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=I({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=rn(Pn),Ln=[9,13,27,32],Rn=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var Dn=d&&"TextEvent"in window&&!On,In=d&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,s){Ce(s),0<(t=qs(t,"onChange")).length&&(n=new dn("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Xn(e){Fs(e,0)}function Yn(e){if(K(yr(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Zn="function"===typeof es.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ts(){qn&&(qn.detachEvent("onpropertychange",ns),Kn=qn=null)}function ns(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,we(e)),Pe(Xn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Kn=n,(qn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function rs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function is(e,t){if("click"===e)return Yn(t)}function as(e,t){if("input"===e||"change"===e)return Yn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!u.call(t,r)||!os(e[r],t[r]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&us(n.ownerDocument.documentElement,n)){if(null!==s&&ms(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=void 0===s.end?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=ds(n,i);var a=ds(n,s);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=d&&"documentMode"in document&&11>=document.documentMode,gs=null,vs=null,xs=null,bs=!1;function ys(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bs||null==gs||gs!==X(s)||("selectionStart"in(s=gs)&&ms(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},xs&&ls(xs,s)||(xs=s,0<(s=qs(vs,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=gs)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},_s={},Ns={};function ks(e){if(_s[e])return _s[e];if(!js[e])return e;var t,n=js[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ns)return _s[e]=n[t];return e}d&&(Ns=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var Cs=ks("animationend"),Ss=ks("animationiteration"),As=ks("animationstart"),Es=ks("transitionend"),Ts=new Map,Ps="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){Ts.set(e,t),l(t,[e])}for(var Ls=0;Ls<Ps.length;Ls++){var Rs=Ps[Ls];Ms(Rs.toLowerCase(),"on"+(Rs[0].toUpperCase()+Rs.slice(1)))}Ms(Cs,"onAnimationEnd"),Ms(Ss,"onAnimationIteration"),Ms(As,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(Es,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ds=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Is(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,r,a,o,l,c){if(We.apply(this,arguments),De){if(!De)throw Error(i(198));var d=Ie;De=!1,Ie=null,Fe||(Fe=!0,ze=d)}}(s,t,void 0,e),e.currentTarget=null}function Fs(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&r.isPropagationStopped())break e;Is(r,o,c),i=l}else for(a=0;a<s.length;a++){if(l=(o=s[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&r.isPropagationStopped())break e;Is(r,o,c),i=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zs(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var s=e+"__bubble";n.has(s)||(Us(t,e,2,!1),n.add(s))}function Bs(e,t,n){var s=0;t&&(s|=4),Us(n,e,s,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function Hs(e){if(!e[Ws]){e[Ws]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ds.has(t)||Bs(t,!1,e),Bs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ws]||(t[Ws]=!0,Bs("selectionchange",!1,t))}}function Us(e,t,n,s){switch(Qt(t)){case 1:var r=Gt;break;case 4:r=qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vs(e,t,n,s,r){var i=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var a=s.tag;if(3===a||4===a){var o=s.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=s.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=xr(o)))return;if(5===(l=a.tag)||6===l){s=i=a;continue e}o=o.parentNode}}s=s.return}Pe(function(){var s=i,r=we(n),a=[];e:{var o=Ts.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Cs:case Ss:case As:l=vn;break;case Es:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=s;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Me(p,h))&&d.push(Gs(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!xr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?xr(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=An,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:yr(l),m=null==c?o:yr(c),(o=new d(f,p+"leave",l,n,r)).target=u,o.relatedTarget=m,f=null,xr(r)===s&&((d=new d(h,p+"enter",c,n,r)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Ks(m))p++;for(m=0,f=h;f;f=Ks(f))m++;for(;0<p-m;)d=Ks(d),p--;for(;0<m-p;)h=Ks(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ks(d),h=Ks(h)}d=null}else d=null;null!==l&&Xs(a,o,l,d,!1),null!==c&&null!==u&&Xs(a,u,c,d,!0)}if("select"===(l=(o=s?yr(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Vn(o))if($n)g=as;else{g=rs;var v=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=is);switch(g&&(g=g(e,s))?Gn(a,g,n,r):(v&&v(e,o,s),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=s?yr(s):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gs=v,vs=s,xs=null);break;case"focusout":xs=vs=gs=null;break;case"mousedown":bs=!0;break;case"contextmenu":case"mouseup":case"dragend":bs=!1,ys(a,n,r);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":ys(a,n,r)}var x;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(x=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,Hn=!0)),0<(v=qs(s,b)).length&&(b=new yn(b,e,null,n,r),a.push({event:b,listeners:v}),x?b.data=x:null!==(x=Wn(n))&&(b.data=x))),(x=Dn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=qs(s,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:s}),r.data=x))}Fs(a,t)})}function Gs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qs(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=Me(e,n))&&s.unshift(Gs(e,i,r)),null!=(i=Me(e,t))&&s.push(Gs(e,i,r))),e=e.return}return s}function Ks(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xs(e,t,n,s,r){for(var i=t._reactName,a=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Me(n,i))&&a.unshift(Gs(n,l,o)):r||null!=(l=Me(n,i))&&a.push(Gs(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ys=/\r\n?/g,Qs=/\u0000|\uFFFD/g;function $s(e){return("string"===typeof e?e:""+e).replace(Ys,"\n").replace(Qs,"")}function Js(e,t,n){if(t=$s(t),$s(e)!==t&&n)throw Error(i(425))}function Zs(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ir="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ir?function(e){return ir.resolve(null).then(e).catch(or)}:sr;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===s)return e.removeChild(r),void Ht(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=r}while(n);Ht(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,pr="__reactContainer$"+ur,fr="__reactEvents$"+ur,gr="__reactListeners$"+ur,vr="__reactHandles$"+ur;function xr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[hr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wr(e){return e[mr]||null}var jr=[],_r=-1;function Nr(e){return{current:e}}function kr(e){0>_r||(e.current=jr[_r],jr[_r]=null,_r--)}function Cr(e,t){_r++,jr[_r]=e.current,e.current=t}var Sr={},Ar=Nr(Sr),Er=Nr(!1),Tr=Sr;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){kr(Er),kr(Ar)}function Rr(e,t,n){if(Ar.current!==Sr)throw Error(i(168));Cr(Ar,t),Cr(Er,n)}function Or(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(i(108,U(e)||"Unknown",r));return I({},n,s)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Tr=Ar.current,Cr(Ar,e),Cr(Er,Er.current),!0}function Ir(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=Or(e,t,Tr),s.__reactInternalMemoizedMergedChildContext=e,kr(Er),kr(Ar),Cr(Ar,e)):kr(Er),Cr(Er,n)}var Fr=null,zr=!1,Br=!1;function Wr(e){null===Fr?Fr=[e]:Fr.push(e)}function Hr(){if(!Br&&null!==Fr){Br=!0;var e=0,t=bt;try{var n=Fr;for(bt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Fr=null,zr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ke(Ze,Hr),r}finally{bt=t,Br=!1}}return null}var Ur=[],Vr=0,Gr=null,qr=0,Kr=[],Xr=0,Yr=null,Qr=1,$r="";function Jr(e,t){Ur[Vr++]=qr,Ur[Vr++]=Gr,Gr=e,qr=t}function Zr(e,t,n){Kr[Xr++]=Qr,Kr[Xr++]=$r,Kr[Xr++]=Yr,Yr=e;var s=Qr;e=$r;var r=32-at(s)-1;s&=~(1<<r),n+=1;var i=32-at(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Qr=1<<32-at(t)+r|n<<r|s,$r=i+e}else Qr=1<<i|n<<r|s,$r=e}function ei(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ti(e){for(;e===Gr;)Gr=Ur[--Vr],Ur[Vr]=null,qr=Ur[--Vr],Ur[Vr]=null;for(;e===Yr;)Yr=Kr[--Xr],Kr[Xr]=null,$r=Kr[--Xr],Kr[Xr]=null,Qr=Kr[--Xr],Kr[Xr]=null}var ni=null,si=null,ri=!1,ii=null;function ai(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,si=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,si=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Qr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,si=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ri){var t=si;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cr(n.nextSibling);var s=ni;t&&oi(e,t)?ai(s,n):(e.flags=-4097&e.flags|2,ri=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ri=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!ri)return di(e),ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=si)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cr(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){si=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}si=null}}else si=ni?cr(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=si;e;)e=cr(e.nextSibling)}function mi(){si=ni=null,ri=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var fi=y.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var r=s,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function a(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Ic(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var i=n.type;return i===_?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&xi(i)===t.type)?((s=r(t,n.props)).ref=gi(e,t,n),s.return=e,s):((s=Rc(n.type,n.key,n.props,null,e.mode,s)).ref=gi(e,t,n),s.return=e,s)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,s,i){return null===t||7!==t.tag?((t=Oc(n,e.mode,s,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function m(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,s):null;case j:return n.key===r?d(e,t,n,s):null;case M:return m(e,t,(r=n._init)(n._payload),s)}if(te(n)||O(n))return null!==r?null:u(e,t,n,s,null);vi(e,n)}return null}function p(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case j:return d(t,e=e.get(null===s.key?n:s.key)||null,s,r);case M:return p(e,t,n,(0,s._init)(s._payload),r)}if(te(s)||O(s))return u(t,e=e.get(n)||null,s,r,null);vi(t,s)}return null}function f(r,i,o,l){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=m(r,u,o[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(r,u),i=a(v,i,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===o.length)return n(r,u),ri&&Jr(r,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(r,o[f],l))&&(i=a(u,i,f),null===d?c=u:d.sibling=u,d=u);return ri&&Jr(r,f),c}for(u=s(r,u);f<o.length;f++)null!==(g=p(u,r,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=a(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(r,e)}),ri&&Jr(r,f),c}function g(r,o,l,c){var d=O(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,f=o,g=o=0,v=null,x=l.next();null!==f&&!x.done;g++,x=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=m(r,f,x.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(r,f),o=a(b,o,g),null===u?d=b:u.sibling=b,u=b,f=v}if(x.done)return n(r,f),ri&&Jr(r,g),d;if(null===f){for(;!x.done;g++,x=l.next())null!==(x=h(r,x.value,c))&&(o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return ri&&Jr(r,g),d}for(f=s(r,f);!x.done;g++,x=l.next())null!==(x=p(f,r,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return t(r,e)}),ri&&Jr(r,g),d}return function e(s,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=i;null!==d;){if(d.key===c){if((c=a.type)===_){if(7===d.tag){n(s,d.sibling),(i=r(d,a.props.children)).return=s,s=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&xi(c)===d.type){n(s,d.sibling),(i=r(d,a.props)).ref=gi(s,d,a),i.return=s,s=i;break e}n(s,d);break}t(s,d),d=d.sibling}a.type===_?((i=Oc(a.props.children,s.mode,l,a.key)).return=s,s=i):((l=Rc(a.type,a.key,a.props,null,s.mode,l)).ref=gi(s,i,a),l.return=s,s=l)}return o(s);case j:e:{for(d=a.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(s,i.sibling),(i=r(i,a.children||[])).return=s,s=i;break e}n(s,i);break}t(s,i),i=i.sibling}(i=Fc(a,s.mode,l)).return=s,s=i}return o(s);case M:return e(s,i,(d=a._init)(a._payload),l)}if(te(a))return f(s,i,a,l);if(O(a))return g(s,i,a,l);vi(s,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(s,i.sibling),(i=r(i,a)).return=s,s=i):(n(s,i),(i=Ic(a,s.mode,l)).return=s,s=i),o(s)):n(s,i)}}var yi=bi(!0),wi=bi(!1),ji=Nr(null),_i=null,Ni=null,ki=null;function Ci(){ki=Ni=_i=null}function Si(e){var t=ji.current;kr(ji),e._currentValue=t}function Ai(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){_i=e,ki=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===_i)throw Error(i(308));Ni=e,_i.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Pi=null;function Mi(e){null===Pi?Pi=[e]:Pi.push(e)}function Li(e,t,n,s){var r=t.interleaved;return null===r?(n.next=n,Mi(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ri(e,s)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Al)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Ri(e,n)}return null===(r=s.interleaved)?(t.next=t,Mi(s)):(t.next=r.next,r.next=t),s.interleaved=t,Ri(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Wi(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,s){var r=e.updateQueue;Oi=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=r.baseState;for(a=0,d=c=l=null,o=i;;){var h=o.lane,m=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=I({},u,h);break e;case 2:Oi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=u}}function Ui(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(null!==r){if(s.callback=null,s=n,"function"!==typeof r)throw Error(i(191,r));r.call(s)}}}var Vi={},Gi=Nr(Vi),qi=Nr(Vi),Ki=Nr(Vi);function Xi(e){if(e===Vi)throw Error(i(174));return e}function Yi(e,t){switch(Cr(Ki,t),Cr(qi,e),Cr(Gi,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kr(Gi),Cr(Gi,t)}function Qi(){kr(Gi),kr(qi),kr(Ki)}function $i(e){Xi(Ki.current);var t=Xi(Gi.current),n=le(t,e.type);t!==n&&(Cr(qi,e),Cr(Gi,n))}function Ji(e){qi.current===e&&(kr(Gi),kr(qi))}var Zi=Nr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var sa=y.ReactCurrentDispatcher,ra=y.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function ma(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function fa(e,t,n,s,r,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Ja:Za,e=n(s,r),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,sa.current=eo,e=n(s,r)}while(da)}if(sa.current=$a,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==ua;return ua=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function xa(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function ya(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=oa,r=s.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}s.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,s=s.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ia&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,aa.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==a);null===c?o=s:c.next=l,os(s,t.memoizedState)||(bo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Dl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);os(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function ja(){}function _a(e,t){var n=aa,s=xa(),r=t(),a=!os(s.memoizedState,r);if(a&&(s.memoizedState=r,bo=!0),s=s.queue,Oa(Ca.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ta(9,ka.bind(null,n,s,r,t),void 0,null),null===El)throw Error(i(349));0!==(30&ia)||Na(n,t,r)}return r}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,s){t.value=n,t.getSnapshot=s,Sa(t)&&Aa(e)}function Ca(e,t,n){return n(function(){Sa(t)&&Aa(e)})}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Aa(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ta(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Pa(){return xa().memoizedState}function Ma(e,t,n,s){var r=va();aa.flags|=e,r.memoizedState=Ta(1|t,n,void 0,void 0===s?null:s)}function La(e,t,n,s){var r=xa();s=void 0===s?null:s;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==s&&pa(s,a.deps))return void(r.memoizedState=Ta(t,n,i,s))}aa.flags|=e,r.memoizedState=Ta(1|t,n,i,s)}function Ra(e,t){return Ma(8390656,8,e,t)}function Oa(e,t){return La(2048,8,e,t)}function Da(e,t){return La(4,2,e,t)}function Ia(e,t){return La(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Fa.bind(null,t,e),n)}function Ba(){}function Wa(e,t){var n=xa();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=xa();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Ua(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(os(n,t)||(n=ft(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function Va(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var s=ra.transition;ra.transition={};try{e(!1),t()}finally{bt=n,ra.transition=s}}function Ga(){return xa().memoizedState}function qa(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,n);else if(null!==(n=Li(e,t,n,s))){nc(n,e,s,ec()),Qa(n,t,s)}}function Ka(e,t,n){var s=tc(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,os(o,a)){var l=t.interleaved;return null===l?(r.next=r,Mi(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Li(e,t,r,s))&&(nc(n,e,s,r=ec()),Qa(n,t,s))}}function Xa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,xt(e,n)}}var $a={readContext:Ti,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},Ja={readContext:Ti,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=va();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=qa.bind(null,aa,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ea,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Va.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=aa,r=va();if(ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&ia)||Na(s,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ra(Ca.bind(null,s,a,e),[e]),s.flags|=2048,Ta(9,ka.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=va(),t=El.identifierPrefix;if(ri){var n=$r;t=":"+t+"R"+(n=(Qr&~(1<<32-at(Qr)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ti,useCallback:Wa,useContext:Ti,useEffect:Oa,useImperativeHandle:za,useInsertionEffect:Da,useLayoutEffect:Ia,useMemo:Ha,useReducer:ya,useRef:Pa,useState:function(){return ya(ba)},useDebugValue:Ba,useDeferredValue:function(e){return Ua(xa(),oa.memoizedState,e)},useTransition:function(){return[ya(ba)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:_a,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Ti,useCallback:Wa,useContext:Ti,useEffect:Oa,useImperativeHandle:za,useInsertionEffect:Da,useLayoutEffect:Ia,useMemo:Ha,useReducer:wa,useRef:Pa,useState:function(){return wa(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=xa();return null===oa?t.memoizedState=e:Ua(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:_a,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),i=Fi(s,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,r))&&(nc(t,e,r,s),Bi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),i=Fi(s,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,r))&&(nc(t,e,r,s),Bi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),r=Fi(n,s);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zi(e,r,s))&&(nc(t,e,s,n),Bi(t,e,s))}};function ro(e,t,n,s,r,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(r,i))}function io(e,t,n){var s=!1,r=Sr,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(r=Mr(t)?Tr:Ar.current,i=(s=null!==(s=t.contextTypes)&&void 0!==s)?Pr(e,r):Sr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=Ti(i):(i=Mr(t)?Tr:Ar.current,r.context=Pr(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&so.enqueueReplaceState(r,r.state,null),Hi(e,n,r,s),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=W(s),s=s.return}while(s);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=s),uo(0,t)},n}function po(e,t,n){(n=Fi(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,s,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var xo=y.ReactCurrentOwner,bo=!1;function yo(e,t,n,s){t.child=null===e?wi(t,null,n,s):yi(t,e.child,n,s)}function wo(e,t,n,s,r){n=n.render;var i=t.ref;return Ei(t,r),s=fa(e,t,n,s,i,r),n=ga(),null===e||bo?(ri&&n&&ei(t),t.flags|=1,yo(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Vo(e,t,r))}function jo(e,t,n,s,r){if(null===e){var i=n.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,_o(e,t,i,s,r))}if(i=e.child,0===(e.lanes&r)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(a,s)&&e.ref===t.ref)return Vo(e,t,r)}return t.flags|=1,(e=Lc(i,s)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,s,r){if(null!==e){var i=e.memoizedProps;if(ls(i,s)&&e.ref===t.ref){if(bo=!1,t.pendingProps=s=i,0===(e.lanes&r))return t.lanes=e.lanes,Vo(e,t,r);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,s,r)}function No(e,t,n){var s=t.pendingProps,r=s.children,i=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Ll,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Ll,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==i?i.baseLanes:n,Cr(Ll,Ml),Ml|=s}else null!==i?(s=i.baseLanes|n,t.memoizedState=null):s=n,Cr(Ll,Ml),Ml|=s;return yo(e,t,r,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,s,r){var i=Mr(n)?Tr:Ar.current;return i=Pr(t,i),Ei(t,r),n=fa(e,t,n,s,i,r),s=ga(),null===e||bo?(ri&&s&&ei(t),t.flags|=1,yo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Vo(e,t,r))}function So(e,t,n,s,r){if(Mr(n)){var i=!0;Dr(t)}else i=!1;if(Ei(t,r),null===t.stateNode)Uo(e,t),io(t,n,s),oo(t,n,s,r),s=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Pr(t,c=Mr(n)?Tr:Ar.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==s||l!==c)&&ao(t,a,s,c),Oi=!1;var h=t.memoizedState;a.state=h,Hi(t,s,a,r),l=t.memoizedState,o!==s||h!==l||Er.current||Oi?("function"===typeof d&&(no(t,n,d,s),l=t.memoizedState),(o=Oi||ro(t,n,o,s,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),a.props=s,a.state=l,a.context=c,s=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Ii(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ti(l):l=Pr(t,l=Mr(n)?Tr:Ar.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,s,l),Oi=!1,h=t.memoizedState,a.state=h,Hi(t,s,a,r);var p=t.memoizedState;o!==u||h!==p||Er.current||Oi?("function"===typeof m&&(no(t,n,m,s),p=t.memoizedState),(c=Oi||ro(t,n,c,s,h,p,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(s,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=l,s=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ao(e,t,n,s,i,r)}function Ao(e,t,n,s,r,i){ko(e,t);var a=0!==(128&t.flags);if(!s&&!a)return r&&Ir(t,n,!1),Vo(e,t,i);s=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&a?(t.child=yi(t,e.child,null,i),t.child=yi(t,null,o,i)):yo(e,t,o,i),t.memoizedState=s.state,r&&Ir(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Rr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rr(0,t.context,!1),Yi(e,t.containerInfo)}function To(e,t,n,s,r){return mi(),pi(r),t.flags|=256,yo(e,t,n,s),t.child}var Po,Mo,Lo,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var s,r=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&a)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cr(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,r,0,null),e=Oc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(s=a.dehydrated))return function(e,t,n,s,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,s=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=s.fallback,r=t.mode,s=Dc({mode:"visible",children:s.children},r,0,null),(a=Oc(a,r,o,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,0!==(1&t.mode)&&yi(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===r.data){if(s=r.nextSibling&&r.nextSibling.dataset)var l=s.dgst;return s=l,zo(e,t,o,s=co(a=Error(i(419)),s,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(s=El)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(s.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ri(e,r),nc(s,e,r,-1))}return fc(),zo(e,t,o,s=co(Error(i(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,si=cr(r.nextSibling),ni=t,ri=!0,ii=null,null!==e&&(Kr[Xr++]=Qr,Kr[Xr++]=$r,Kr[Xr++]=Yr,Qr=e.id,$r=e.overflow,Yr=t),t=Fo(t,s.children),t.flags|=4096,t)}(e,t,l,r,s,a,n);if(o){o=r.fallback,l=t.mode,s=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==s?o=Lc(s,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,r}return e=(o=e.child).sibling,r=Lc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,s){return null!==s&&pi(s),yi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ai(e.return,t,n)}function Wo(e,t,n,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Ho(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(yo(e,t,s.children,n),0!==(2&(s=Zi.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cr(Zi,s),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Wo(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Wo(t,!0,n,null,i);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=14680064&r.subtreeFlags,s|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ko(e,t,n){var s=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Mr(t.type)&&Lr(),qo(t),null;case 3:return s=t.stateNode,Qi(),kr(Er),kr(Ar),na(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Mo(e,t),qo(t),null;case 5:Ji(t);var r=Xi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(i(166));return qo(t),null}if(e=Xi(Gi.current),ui(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[hr]=t,s[mr]=a,e=0!==(1&t.mode),n){case"dialog":zs("cancel",s),zs("close",s);break;case"iframe":case"object":case"embed":zs("load",s);break;case"video":case"audio":for(r=0;r<Os.length;r++)zs(Os[r],s);break;case"source":zs("error",s);break;case"img":case"image":case"link":zs("error",s),zs("load",s);break;case"details":zs("toggle",s);break;case"input":Q(s,a),zs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},zs("invalid",s);break;case"textarea":re(s,a),zs("invalid",s)}for(var l in xe(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==a.suppressHydrationWarning&&Js(s.textContent,c,e),r=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Js(s.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zs("scroll",s)}switch(n){case"input":q(s),Z(s,a,!0);break;case"textarea":q(s),ae(s);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(s.onclick=Zs)}s=r,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hr]=t,e[mr]=s,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,s),n){case"dialog":zs("cancel",e),zs("close",e),r=s;break;case"iframe":case"object":case"embed":zs("load",e),r=s;break;case"video":case"audio":for(r=0;r<Os.length;r++)zs(Os[r],e);r=s;break;case"source":zs("error",e),r=s;break;case"img":case"image":case"link":zs("error",e),zs("load",e),r=s;break;case"details":zs("toggle",e),r=s;break;case"input":Q(e,s),r=Y(e,s),zs("invalid",e);break;case"option":default:r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=I({},s,{value:void 0}),zs("invalid",e);break;case"textarea":re(e,s),r=se(e,s),zs("invalid",e)}for(a in xe(n,r),c=r)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zs("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":q(e),Z(e,s,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=s.value&&e.setAttribute("value",""+V(s.value));break;case"select":e.multiple=!!s.multiple,null!=(a=s.value)?ne(e,!!s.multiple,a,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(i(166));if(n=Xi(Ki.current),Xi(Gi.current),ui(t)){if(s=t.stateNode,n=t.memoizedProps,s[hr]=t,(a=s.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Js(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Js(s.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hr]=t,t.stateNode=s}return qo(t),null;case 13:if(kr(Zi),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ri&&null!==si&&0!==(1&t.mode)&&0===(128&t.flags))hi(),mi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hr]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Qi(),Mo(e,t),null===e&&Hs(t.stateNode.containerInfo),qo(t),null;case 10:return Si(t.type._context),qo(t),null;case 19:if(kr(Zi),null===(a=t.memoizedState))return qo(t),null;if(s=0!==(128&t.flags),null===(l=a.rendering))if(s)Go(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Hl&&(t.flags|=128,s=!0,Go(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ea(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ri)return qo(t),null}else 2*$e()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,s=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zi.current,Cr(Zi,s?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xo(e,t){switch(ti(t),t.tag){case 1:return Mr(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qi(),kr(Er),kr(Ar),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(kr(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kr(Zi),null;case 4:return Qi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},Lo=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Xi(Gi.current);var i,a=null;switch(n){case"input":r=Y(e,r),s=Y(e,s),a=[];break;case"select":r=I({},r,{value:void 0}),s=I({},s,{value:void 0}),a=[];break;case"textarea":r=se(e,r),s=se(e,s),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof s.onClick&&(e.onclick=Zs)}for(d in xe(n,s),n=null,r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=r?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zs("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,s){n!==s&&(t.flags|=4)};var Yo=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Nc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Nc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&el(t,n,i)}r=r.next}while(r!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[fr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var s=dl,r=ul;dl=null,hl(e,t,n),ul=r,null!==(dl=s)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(dl,n.stateNode));break;case 4:s=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=s,ul=r;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),r=r.next}while(r!==s)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(s=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=s):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var s=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));ml(a,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Nc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Nc(e,e.return,g)}}if(4&s&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(r,a),be(l,o);var d=be(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):b(r,u,h,d)}switch(l){case"input":J(r,a);break;case"textarea":ie(r,a);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):m!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[mr]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(i(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Wl=$e())),4&s&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),vl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(h=Jo=u;null!==Jo;){switch(p=(m=Jo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){s=m,n=m.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nc(s,n,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Jo=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&s&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var r=s.stateNode;32&s.flags&&(he(r,""),s.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=s.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Jo=e,bl(e,t,n)}function bl(e,t,n){for(var s=0!==(1&e.mode);null!==Jo;){var r=Jo,i=r.child;if(22===r.tag&&s){var a=null!==r.memoizedState||Yo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Yo;var c=Qo;if(Yo=a,(Qo=l)&&!c)for(Jo=r;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?jl(r):null!==l?(l.return=a,Jo=l):jl(r);for(;null!==i;)Jo=i,bl(i,t,n),i=i.sibling;Jo=r,Yo=o,Qo=c}yl(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,Jo=i):yl(e)}}function yl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qo)if(null===n)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ui(t,a,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ui(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(i(163))}Qo||512&t.flags&&rl(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function jl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var r=t.return;try{s.componentDidMount()}catch(l){Nc(t,r,l)}}var i=t.return;try{rl(t)}catch(l){Nc(t,i,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Nc(t,a,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var _l,Nl=Math.ceil,kl=y.ReactCurrentDispatcher,Cl=y.ReactCurrentOwner,Sl=y.ReactCurrentBatchConfig,Al=0,El=null,Tl=null,Pl=0,Ml=0,Ll=Nr(0),Rl=0,Ol=null,Dl=0,Il=0,Fl=0,zl=null,Bl=null,Wl=0,Hl=1/0,Ul=null,Vl=!1,Gl=null,ql=null,Kl=!1,Xl=null,Yl=0,Ql=0,$l=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Al)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==fi.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,s){if(50<Ql)throw Ql=0,$l=null,Error(i(185));vt(e,n,s),0!==(2&Al)&&e===El||(e===El&&(0===(2&Al)&&(Il|=n),4===Rl&&oc(e,Pl)),sc(e,s),1===n&&0===Al&&0===(1&t.mode)&&(Hl=$e()+500,zr&&Hr()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&s)||(r[a]=mt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var s=ht(e,e===El?Pl:0);if(0===s)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zr=!0,Wr(e)}(lc.bind(null,e)):Wr(lc.bind(null,e)),ar(function(){0===(6&Al)&&Hr()}),n=null;else{switch(yt(s)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Ec(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,Zl=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=ht(e,e===El?Pl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var r=Al;Al|=2;var a=pc();for(El===e&&Pl===t||(Ul=null,Hl=$e()+500,hc(e,t));;)try{xc();break}catch(l){mc(e,l)}Ci(),kl.current=a,Al=r,null!==Tl?t=0:(El=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(s=r,t=ic(e,r))),1===t)throw n=Ol,hc(e,0),oc(e,s),sc(e,$e()),n;if(6===t)oc(e,s);else{if(r=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!os(i(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,s))&&(0!==(a=pt(e))&&(s=a,t=ic(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,s),sc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Bl,Ul);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=sr(wc.bind(null,e,Bl,Ul),t);break}wc(e,Bl,Ul);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-at(s);a=1<<o,(o=t[o])>r&&(r=o),s&=~a}if(s=r,10<(s=(120>(s=$e()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nl(s/1960))-s)){e.timeoutHandle=sr(wc.bind(null,e,Bl,Ul),s);break}wc(e,Bl,Ul);break;default:throw Error(i(329))}}}return sc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&Al))throw Error(i(327));jc();var t=ht(e,0);if(0===(1&t))return sc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var s=pt(e);0!==s&&(t=s,n=ic(e,s))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),sc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Ul),sc(e,$e()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Hl=$e()+500,zr&&Hr())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var n=Sl.transition,s=bt;try{if(Sl.transition=null,bt=1,e)return e()}finally{bt=s,Sl.transition=n,0===(6&(Al=t))&&Hr()}}function uc(){Ml=Ll.current,kr(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Tl)for(n=Tl.return;null!==n;){var s=n;switch(ti(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Lr();break;case 3:Qi(),kr(Er),kr(Ar),na();break;case 5:Ji(s);break;case 4:Qi();break;case 13:case 19:kr(Zi);break;case 10:Si(s.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Tl=e=Lc(e.current,null),Pl=Ml=t,Rl=0,Ol=null,Fl=Il=Dl=0,Bl=zl=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(s=(n=Pi[t]).interleaved)){n.interleaved=null;var r=s.next,i=n.pending;if(null!==i){var a=i.next;i.next=r,s.next=a}n.pending=s}Pi=null}return e}function mc(e,t){for(;;){var n=Tl;try{if(Ci(),sa.current=$a,ca){for(var s=aa.memoizedState;null!==s;){var r=s.queue;null!==r&&(r.pending=null),s=s.next}ca=!1}if(ia=0,la=oa=aa=null,da=!1,ua=0,Cl.current=null,null===n||null===n.return){Rl=1,Ol=t,Tl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&fo(a,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(i(426))}else if(ri&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Wi(a,mo(0,c,t));break e;case 1:l=c;var x=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Wi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}yc(n)}catch(y){t=y,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=$a,null===e?$a:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===El||0===(268435455&Dl)&&0===(268435455&Il)||oc(El,Pl)}function gc(e,t){var n=Al;Al|=2;var s=pc();for(El===e&&Pl===t||(Ul=null,hc(e,t));;)try{vc();break}catch(r){mc(e,r)}if(Ci(),Al=n,kl.current=s,null!==Tl)throw Error(i(261));return El=null,Pl=0,Rl}function vc(){for(;null!==Tl;)bc(Tl)}function xc(){for(;null!==Tl&&!Ye();)bc(Tl)}function bc(e){var t=_l(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?yc(e):Tl=t,Cl.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Ml)))return void(Tl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Rl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var s=bt,r=Sl.transition;try{Sl.transition=null,bt=1,function(e,t,n,s){do{jc()}while(null!==Xl);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}(e,a),e===El&&(Tl=El=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ec(tt,function(){return jc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var o=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(er=Vt,ms(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===a&&++u===s&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Vt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(i(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}f=tl,tl=!1}(e,n),gl(n,e),ps(tr),Vt=!!er,tr=er=null,e.current=n,xl(n,e,r),Qe(),Al=l,bt=o,Sl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,$e()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&jc(),a=e.pendingLanes,0!==(1&a)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Hr()}(e,t,n,s)}finally{Sl.transition=r,bt=s}return null}function jc(){if(null!==Xl){var e=yt(Yl),t=Sl.transition,n=bt;try{if(Sl.transition=null,bt=16>e?16:e,null===Xl)var s=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Al))throw Error(i(331));var r=Al;for(Al|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Jo=h;else for(;null!==Jo;){var m=(u=Jo).sibling,p=u.return;if(il(u),u===d){Jo=null;break}if(null!==m){m.return=p,Jo=m;break}Jo=p}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Jo=x;break e}Jo=a.return}}var b=e.current;for(Jo=b;null!==Jo;){var y=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Jo=y;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Al=r,Hr(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(j){}s=!0}return s}finally{bt=n,Sl.transition=t}}return!1}function _c(e,t,n){e=zi(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),sc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===ql||!ql.has(s))){t=zi(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>$e()-Wl?hc(e,0):Fl|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ri(e,t))&&(vt(e,t,n),sc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}null!==s&&s.delete(t),Cc(e,n)}function Ec(e,t){return Ke(e,t)}function Tc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,s){return new Tc(e,t,n,s)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,s,r,a){var o=2;if(s=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Oc(n.children,r,a,t);case N:o=8,r|=8;break;case k:return(e=Pc(12,n,t,2|r)).elementType=k,e.lanes=a,e;case E:return(e=Pc(13,n,t,r)).elementType=E,e.lanes=a,e;case T:return(e=Pc(19,n,t,r)).elementType=T,e.lanes=a,e;case L:return Dc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case S:o=9;break e;case A:o=11;break e;case P:o=14;break e;case M:o=16,s=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,r)).elementType=e,t.type=s,t.lanes=a,t}function Oc(e,t,n,s){return(e=Pc(7,e,s,t)).lanes=n,e}function Dc(e,t,n,s){return(e=Pc(22,e,s,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,s,r,i,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Wc(e){if(!e)return Sr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Mr(n))return Or(e,n,t)}return t}function Hc(e,t,n,s,r,i,a,o,l){return(e=Bc(n,s,!0,e,0,i,0,o,l)).context=Wc(null),n=e.current,(i=Fi(s=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,r),e.current.lanes=r,vt(e,r,s),sc(e,s),e}function Uc(e,t,n,s){var r=t.current,i=ec(),a=tc(r);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=zi(r,t,a))&&(nc(e,r,a,i),Bi(e,r,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),mi();break;case 5:$i(t);break;case 1:Mr(t.type)&&Dr(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Cr(ji,s._currentValue),s._currentValue=r;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Cr(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(Cr(Zi,1&Zi.current),null!==(e=Vo(e,t,n))?e.sibling:null);Cr(Zi,1&Zi.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Ho(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Zi,Zi.current),s)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Vo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ri&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Uo(e,t),e=t.pendingProps;var r=Pr(t,Ar.current);Ei(t,n),r=fa(null,t,s,e,r,n);var a=ga();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(s)?(a=!0,Dr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Di(t),r.updater=so,t.stateNode=r,r._reactInternals=t,oo(t,s,e,n),t=Ao(null,t,s,!0,a,n)):(t.tag=0,ri&&a&&ei(t),yo(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,s=(r=s._init)(s._payload),t.type=s,r=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(s),e=to(s,e),r){case 0:t=Co(null,t,s,e,n);break e;case 1:t=So(null,t,s,e,n);break e;case 11:t=wo(null,t,s,e,n);break e;case 14:t=jo(null,t,s,to(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,Co(e,t,s,r=t.elementType===s?r:to(s,r),n);case 1:return s=t.type,r=t.pendingProps,So(e,t,s,r=t.elementType===s?r:to(s,r),n);case 3:e:{if(Eo(t),null===e)throw Error(i(387));s=t.pendingProps,r=(a=t.memoizedState).element,Ii(e,t),Hi(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=To(e,t,s,n,r=lo(Error(i(423)),t));break e}if(s!==r){t=To(e,t,s,n,r=lo(Error(i(424)),t));break e}for(si=cr(t.stateNode.containerInfo.firstChild),ni=t,ri=!0,ii=null,n=wi(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),s===r){t=Vo(e,t,n);break e}yo(e,t,s,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),s=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(s,r)?o=null:null!==a&&nr(s,a)&&(t.flags|=32),ko(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Io(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=yi(t,null,s,n):yo(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,wo(e,t,s,r=t.elementType===s?r:to(s,r),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Cr(ji,s._currentValue),s._currentValue=o,null!==a)if(os(a.value,o)){if(a.children===r.children&&!Er.current){t=Vo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ai(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ai(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}yo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ei(t,n),s=s(r=Ti(r)),t.flags|=1,yo(e,t,s,n),t.child;case 14:return r=to(s=t.type,t.pendingProps),jo(e,t,s,r=to(s.type,r),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:to(s,r),Uo(e,t),t.tag=1,Mr(s)?(e=!0,Dr(t)):e=!1,Ei(t,n),io(t,s,r),oo(t,s,r,n),Ao(null,t,s,!0,e,n);case 19:return Ho(e,t,n);case 22:return No(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof r){var o=r;r=function(){var e=Vc(a);o.call(e)}}Uc(t,a,e,r)}else a=function(e,t,n,s,r){if(r){if("function"===typeof s){var i=s;s=function(){var e=Vc(a);i.call(e)}}var a=Hc(t,s,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pr]=a.current,Hs(8===e.nodeType?e.parentNode:e),dc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof s){var o=s;s=function(){var e=Vc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pr]=l.current,Hs(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,l,n,s)}),l}(n,t,e,r,s);return Vc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[pr]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),sc(t,$e()),0===(6&Al)&&(Hl=$e()+500,Hr()))}break;case 13:dc(function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},jt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Nt=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=wr(s);if(!r)throw Error(i(90));K(s),J(s,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[br,yr,wr,Ce,Se,cc]},td={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{rt=sd.inject(nd),it=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(i(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(i(299));var n=!1,s="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,s,r),e[pr]=t.current,Hs(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(i(405));var s=null!=n&&n.hydratedSources||null,r=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,a,o),e[pr]=t.current,Hs(e),s)for(e=0;e<s.length;e++)r=(r=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,n)=>{var s=n(738).default,r=n(45);e.exports=function(e){var t=r(e,"string");return"symbol"==s(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},740:e=>{"use strict";e.exports=function(e,t,n,s,r,i,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,s,r,i,a,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},885:function(e,t,n){var s=n(897).default;e.exports=function(){"use strict";const e=new Map,t={set(t,n,s){e.has(t)||e.set(t,new Map);const r=e.get(t);r.has(n)||0===r.size?r.set(n,s):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(r.keys())[0],"."))},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;const s=e.get(t);s.delete(n),0===s.size&&e.delete(t)}},n="transitionend",r=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>"#".concat(CSS.escape(t)))),e),i=e=>{e.dispatchEvent(new Event(n))},a=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>a(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(r(e)):null,l=e=>{if(!a(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),d=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null},u=()=>{},h=e=>{e.offsetHeight},m=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,p=[],f=()=>"rtl"===document.documentElement.dir,g=e=>{var t;t=()=>{const t=m();if(t){const n=e.NAME,s=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=s,e.jQueryInterface)}},"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of p)e()}),p.push(t)):t()},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?e.call(...t):n},x=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void v(e);const s=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const s=Number.parseFloat(t),r=Number.parseFloat(n);return s||r?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let r=!1;const a=s=>{let{target:i}=s;i===t&&(r=!0,t.removeEventListener(n,a),v(e))};t.addEventListener(n,a),setTimeout(()=>{r||i(t)},s)},b=(e,t,n,s)=>{const r=e.length;let i=e.indexOf(t);return-1===i?!n&&s?e[r-1]:e[0]:(i+=n?1:-1,s&&(i=(i+r)%r),e[Math.max(0,Math.min(i,r-1))])},y=/[^.]*(?=\..*)\.|.*/,w=/\..*/,j=/::\d+$/,_={};let N=1;const k={mouseenter:"mouseover",mouseleave:"mouseout"},C=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function S(e,t){return t&&"".concat(t,"::").concat(N++)||e.uidEvent||N++}function A(e){const t=S(e);return e.uidEvent=t,_[t]=_[t]||{},_[t]}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===n)}function T(e,t,n){const s="string"==typeof t,r=s?n:t||n;let i=R(e);return C.has(i)||(i=e),[s,r,i]}function P(e,t,n,s,r){if("string"!=typeof t||!e)return;let[i,a,o]=T(t,n,s);if(t in k){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};a=e(a)}const l=A(e),c=l[o]||(l[o]={}),d=E(c,a,i?n:null);if(d)return void(d.oneOff=d.oneOff&&r);const u=S(a,t.replace(y,"")),h=i?function(e,t,n){return function s(r){const i=e.querySelectorAll(t);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const o of i)if(o===a)return D(r,{delegateTarget:a}),s.oneOff&&O.off(e,r.type,t,n),n.apply(a,[r])}}(e,n,a):function(e,t){return function n(s){return D(s,{delegateTarget:e}),n.oneOff&&O.off(e,s.type,t),t.apply(e,[s])}}(e,a);h.delegationSelector=i?n:null,h.callable=a,h.oneOff=r,h.uidEvent=u,c[u]=h,e.addEventListener(o,h,i)}function M(e,t,n,s,r){const i=E(t[n],s,r);i&&(e.removeEventListener(n,i,Boolean(r)),delete t[n][i.uidEvent])}function L(e,t,n,s){const r=t[n]||{};for(const[i,a]of Object.entries(r))i.includes(s)&&M(e,t,n,a.callable,a.delegationSelector)}function R(e){return e=e.replace(w,""),k[e]||e}const O={on(e,t,n,s){P(e,t,n,s,!1)},one(e,t,n,s){P(e,t,n,s,!0)},off(e,t,n,s){if("string"!=typeof t||!e)return;const[r,i,a]=T(t,n,s),o=a!==t,l=A(e),c=l[a]||{},d=t.startsWith(".");if(void 0===i){if(d)for(const n of Object.keys(l))L(e,l,n,t.slice(1));for(const[n,s]of Object.entries(c)){const r=n.replace(j,"");o&&!t.includes(r)||M(e,l,a,s.callable,s.delegationSelector)}}else{if(!Object.keys(c).length)return;M(e,l,a,i,r?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const s=m();let r=null,i=!0,a=!0,o=!1;t!==R(t)&&s&&(r=s.Event(t,n),s(e).trigger(r),i=!r.isPropagationStopped(),a=!r.isImmediatePropagationStopped(),o=r.isDefaultPrevented());const l=D(new Event(t,{bubbles:i,cancelable:!0}),n);return o&&l.preventDefault(),a&&e.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[n,s]of Object.entries(t))try{e[n]=s}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>s})}return e}function I(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function F(e){return e.replace(/[A-Z]/g,e=>"-".concat(e.toLowerCase()))}const z={setDataAttribute(e,t,n){e.setAttribute("data-bs-".concat(F(t)),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-".concat(F(t)))},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const s of n){let n=s.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1),t[n]=I(e.dataset[s])}return t},getDataAttribute:(e,t)=>I(e.getAttribute("data-bs-".concat(F(t))))};class B{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=a(t)?z.getDataAttribute(t,"config"):{};return s(s(s(s({},this.constructor.Default),"object"==typeof n?n:{}),a(t)?z.getDataAttributes(t):{}),"object"==typeof e?e:{})}_typeCheckConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[s,r]of Object.entries(t)){const t=e[s],i=a(t)?"element":null==(n=t)?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(i))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(s,'" provided type "').concat(i,'" but expected type "').concat(r,'".'))}var n}}class W extends B{constructor(e,n){super(),(e=o(e))&&(this._element=e,this._config=this._getConfig(n),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),O.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t){x(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(o(e),this.DATA_KEY)}static getOrCreateInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(e){return"".concat(e).concat(this.EVENT_KEY)}}const H=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map(e=>r(e)).join(","):null},U={find:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const n=[];let s=e.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>"".concat(e,':not([tabindex^="-"])')).join(",");return this.find(t,e).filter(e=>!c(e)&&l(e))},getSelectorFromElement(e){const t=H(e);return t&&U.findOne(t)?t:null},getElementFromSelector(e){const t=H(e);return t?U.findOne(t):null},getMultipleElementsFromSelector(e){const t=H(e);return t?U.find(t):[]}},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(e.EVENT_KEY),s=e.NAME;O.on(document,n,'[data-bs-dismiss="'.concat(s,'"]'),function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const r=U.getElementFromSelector(this)||this.closest(".".concat(s));e.getOrCreateInstance(r)[t]()})},G=".bs.alert",q="close".concat(G),K="closed".concat(G);class X extends W{static get NAME(){return"alert"}close(){if(O.trigger(this._element,q).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),O.trigger(this._element,K),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=X.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}})}}V(X,"close"),g(X);const Y='[data-bs-toggle="button"]';class Q extends W{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Q.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}O.on(document,"click.bs.button.data-api",Y,e=>{e.preventDefault();const t=e.target.closest(Y);Q.getOrCreateInstance(t).toggle()}),g(Q);const $=".bs.swipe",J="touchstart".concat($),Z="touchmove".concat($),ee="touchend".concat($),te="pointerdown".concat($),ne="pointerup".concat($),se={endCallback:null,leftCallback:null,rightCallback:null},re={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ie extends B{constructor(e,t){super(),this._element=e,e&&ie.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return se}static get DefaultType(){return re}static get NAME(){return"swipe"}dispose(){O.off(this._element,$)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),v(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&v(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(O.on(this._element,te,e=>this._start(e)),O.on(this._element,ne,e=>this._end(e)),this._element.classList.add("pointer-event")):(O.on(this._element,J,e=>this._start(e)),O.on(this._element,Z,e=>this._move(e)),O.on(this._element,ee,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ae=".bs.carousel",oe=".data-api",le="ArrowLeft",ce="ArrowRight",de="next",ue="prev",he="left",me="right",pe="slide".concat(ae),fe="slid".concat(ae),ge="keydown".concat(ae),ve="mouseenter".concat(ae),xe="mouseleave".concat(ae),be="dragstart".concat(ae),ye="load".concat(ae).concat(oe),we="click".concat(ae).concat(oe),je="carousel",_e="active",Ne=".active",ke=".carousel-item",Ce=Ne+ke,Se={[le]:me,[ce]:he},Ae={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ee={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Te extends W{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=U.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===je&&this.cycle()}static get Default(){return Ae}static get DefaultType(){return Ee}static get NAME(){return"carousel"}next(){this._slide(de)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(ue)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?O.one(this._element,fe,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void O.one(this._element,fe,()=>this.to(e));const n=this._getItemIndex(this._getActive());if(n===e)return;const s=e>n?de:ue;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&O.on(this._element,ge,e=>this._keydown(e)),"hover"===this._config.pause&&(O.on(this._element,ve,()=>this.pause()),O.on(this._element,xe,()=>this._maybeEnableCycle())),this._config.touch&&ie.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of U.find(".carousel-item img",this._element))O.on(t,be,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(he)),rightCallback:()=>this._slide(this._directionToOrder(me)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ie(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Se[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=U.findOne(Ne,this._indicatorsElement);t.classList.remove(_e),t.removeAttribute("aria-current");const n=U.findOne('[data-bs-slide-to="'.concat(e,'"]'),this._indicatorsElement);n&&(n.classList.add(_e),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),s=e===de,r=t||b(this._getItems(),n,s,this._config.wrap);if(r===n)return;const i=this._getItemIndex(r),a=t=>O.trigger(this._element,t,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:i});if(a(pe).defaultPrevented)return;if(!n||!r)return;const o=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=r;const l=s?"carousel-item-start":"carousel-item-end",c=s?"carousel-item-next":"carousel-item-prev";r.classList.add(c),h(r),n.classList.add(l),r.classList.add(l),this._queueCallback(()=>{r.classList.remove(l,c),r.classList.add(_e),n.classList.remove(_e,c,l),this._isSliding=!1,a(fe)},n,this._isAnimated()),o&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return U.findOne(Ce,this._element)}_getItems(){return U.find(ke,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===he?ue:de:e===he?de:ue}_orderToDirection(e){return f()?e===ue?he:me:e===ue?me:he}static jQueryInterface(e){return this.each(function(){const t=Te.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}else t.to(e)})}}O.on(document,we,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=U.getElementFromSelector(this);if(!t||!t.classList.contains(je))return;e.preventDefault();const n=Te.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(n.to(s),void n._maybeEnableCycle()):"next"===z.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())}),O.on(window,ye,()=>{const e=U.find('[data-bs-ride="carousel"]');for(const t of e)Te.getOrCreateInstance(t)}),g(Te);const Pe=".bs.collapse",Me="show".concat(Pe),Le="shown".concat(Pe),Re="hide".concat(Pe),Oe="hidden".concat(Pe),De="click".concat(Pe,".data-api"),Ie="show",Fe="collapse",ze="collapsing",Be=":scope .".concat(Fe," .").concat(Fe),We='[data-bs-toggle="collapse"]',He={parent:null,toggle:!0},Ue={parent:"(null|element)",toggle:"boolean"};class Ve extends W{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=U.find(We);for(const s of n){const e=U.getSelectorFromElement(s),t=U.find(e).filter(e=>e===this._element);null!==e&&t.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return He}static get DefaultType(){return Ue}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>Ve.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(O.trigger(this._element,Me).defaultPrevented)return;for(const s of e)s.hide();const t=this._getDimension();this._element.classList.remove(Fe),this._element.classList.add(ze),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n="scroll".concat(t[0].toUpperCase()+t.slice(1));this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(Fe,Ie),this._element.style[t]="",O.trigger(this._element,Le)},this._element,!0),this._element.style[t]="".concat(this._element[n],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(O.trigger(this._element,Re).defaultPrevented)return;const e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),h(this._element),this._element.classList.add(ze),this._element.classList.remove(Fe,Ie);for(const t of this._triggerArray){const e=U.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(Fe),O.trigger(this._element,Oe)},this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(Ie)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=o(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(We);for(const t of e){const e=U.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=U.find(Be,this._config.parent);return U.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const n=Ve.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e]()}})}}O.on(document,De,We,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of U.getMultipleElementsFromSelector(this))Ve.getOrCreateInstance(t,{toggle:!1}).toggle()}),g(Ve);var Ge="top",qe="bottom",Ke="right",Xe="left",Ye="auto",Qe=[Ge,qe,Ke,Xe],$e="start",Je="end",Ze="clippingParents",et="viewport",tt="popper",nt="reference",st=Qe.reduce(function(e,t){return e.concat([t+"-"+$e,t+"-"+Je])},[]),rt=[].concat(Qe,[Ye]).reduce(function(e,t){return e.concat([t,t+"-"+$e,t+"-"+Je])},[]),it="beforeRead",at="read",ot="afterRead",lt="beforeMain",ct="main",dt="afterMain",ut="beforeWrite",ht="write",mt="afterWrite",pt=[it,at,ot,lt,ct,dt,ut,ht,mt];function ft(e){return e?(e.nodeName||"").toLowerCase():null}function gt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vt(e){return e instanceof gt(e).Element||e instanceof Element}function xt(e){return e instanceof gt(e).HTMLElement||e instanceof HTMLElement}function bt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof gt(e).ShadowRoot||e instanceof ShadowRoot)}const yt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];xt(r)&&ft(r)&&(Object.assign(r.style,n),Object.keys(s).forEach(function(e){var t=s[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],r=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});xt(s)&&ft(s)&&(Object.assign(s.style,i),Object.keys(r).forEach(function(e){s.removeAttribute(e)}))})}},requires:["computeStyles"]};function wt(e){return e.split("-")[0]}var jt=Math.max,_t=Math.min,Nt=Math.round;function kt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ct(){return!/^((?!chrome|android).)*safari/i.test(kt())}function St(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&xt(e)&&(r=e.offsetWidth>0&&Nt(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Nt(s.height)/e.offsetHeight||1);var a=(vt(e)?gt(e):window).visualViewport,o=!Ct()&&n,l=(s.left+(o&&a?a.offsetLeft:0))/r,c=(s.top+(o&&a?a.offsetTop:0))/i,d=s.width/r,u=s.height/i;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function At(e){var t=St(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function Et(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&bt(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Tt(e){return gt(e).getComputedStyle(e)}function Pt(e){return["table","td","th"].indexOf(ft(e))>=0}function Mt(e){return((vt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lt(e){return"html"===ft(e)?e:e.assignedSlot||e.parentNode||(bt(e)?e.host:null)||Mt(e)}function Rt(e){return xt(e)&&"fixed"!==Tt(e).position?e.offsetParent:null}function Ot(e){for(var t=gt(e),n=Rt(e);n&&Pt(n)&&"static"===Tt(n).position;)n=Rt(n);return n&&("html"===ft(n)||"body"===ft(n)&&"static"===Tt(n).position)?t:n||function(e){var t=/firefox/i.test(kt());if(/Trident/i.test(kt())&&xt(e)&&"fixed"===Tt(e).position)return null;var n=Lt(e);for(bt(n)&&(n=n.host);xt(n)&&["html","body"].indexOf(ft(n))<0;){var s=Tt(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(e)||t}function Dt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function It(e,t,n){return jt(e,_t(t,n))}function Ft(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function zt(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}const Bt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=wt(n.placement),l=Dt(o),c=[Xe,Ke].indexOf(o)>=0?"height":"width";if(i&&a){var d=function(e,t){return Ft("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:zt(e,Qe))}(r.padding,n),u=At(i),h="y"===l?Ge:Xe,m="y"===l?qe:Ke,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],f=a[l]-n.rects.reference[l],g=Ot(i),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=p/2-f/2,b=d[h],y=v-u[c]-d[m],w=v/2-u[c]/2+x,j=It(b,w,y),_=l;n.modifiersData[s]=((t={})[_]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&Et(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Wt(e){return e.split("-")[1]}var Ht={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ut(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=a.x,m=void 0===h?0:h,p=a.y,f=void 0===p?0:p,g="function"==typeof d?d({x:m,y:f}):{x:m,y:f};m=g.x,f=g.y;var v=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),b=Xe,y=Ge,w=window;if(c){var j=Ot(n),_="clientHeight",N="clientWidth";j===gt(n)&&"static"!==Tt(j=Mt(n)).position&&"absolute"===o&&(_="scrollHeight",N="scrollWidth"),(r===Ge||(r===Xe||r===Ke)&&i===Je)&&(y=qe,f-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[_])-s.height,f*=l?1:-1),r!==Xe&&(r!==Ge&&r!==qe||i!==Je)||(b=Ke,m-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[N])-s.width,m*=l?1:-1)}var k,C=Object.assign({position:o},c&&Ht),S=!0===d?function(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Nt(n*r)/r||0,y:Nt(s*r)/r||0}}({x:m,y:f},gt(n)):{x:m,y:f};return m=S.x,f=S.y,l?Object.assign({},C,((k={})[y]=x?"0":"",k[b]=v?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+f+"px)":"translate3d("+m+"px, "+f+"px, 0)",k)):Object.assign({},C,((t={})[y]=x?f+"px":"",t[b]=v?m+"px":"",t.transform="",t))}const Vt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=void 0===s||s,i=n.adaptive,a=void 0===i||i,o=n.roundOffsets,l=void 0===o||o,c={placement:wt(t.placement),variation:Wt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ut(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ut(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Gt={passive:!0};const qt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=void 0===r||r,a=s.resize,o=void 0===a||a,l=gt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach(function(e){e.addEventListener("scroll",n.update,Gt)}),o&&l.addEventListener("resize",n.update,Gt),function(){i&&c.forEach(function(e){e.removeEventListener("scroll",n.update,Gt)}),o&&l.removeEventListener("resize",n.update,Gt)}},data:{}};var Kt={left:"right",right:"left",bottom:"top",top:"bottom"};function Xt(e){return e.replace(/left|right|bottom|top/g,function(e){return Kt[e]})}var Yt={start:"end",end:"start"};function Qt(e){return e.replace(/start|end/g,function(e){return Yt[e]})}function $t(e){var t=gt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Jt(e){return St(Mt(e)).left+$t(e).scrollLeft}function Zt(e){var t=Tt(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function en(e){return["html","body","#document"].indexOf(ft(e))>=0?e.ownerDocument.body:xt(e)&&Zt(e)?e:en(Lt(e))}function tn(e,t){var n;void 0===t&&(t=[]);var s=en(e),r=s===(null==(n=e.ownerDocument)?void 0:n.body),i=gt(s),a=r?[i].concat(i.visualViewport||[],Zt(s)?s:[]):s,o=t.concat(a);return r?o:o.concat(tn(Lt(a)))}function nn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sn(e,t,n){return t===et?nn(function(e,t){var n=gt(e),s=Mt(e),r=n.visualViewport,i=s.clientWidth,a=s.clientHeight,o=0,l=0;if(r){i=r.width,a=r.height;var c=Ct();(c||!c&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:i,height:a,x:o+Jt(e),y:l}}(e,n)):vt(t)?function(e,t){var n=St(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):nn(function(e){var t,n=Mt(e),s=$t(e),r=null==(t=e.ownerDocument)?void 0:t.body,i=jt(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=jt(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-s.scrollLeft+Jt(e),l=-s.scrollTop;return"rtl"===Tt(r||n).direction&&(o+=jt(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:o,y:l}}(Mt(e)))}function rn(e){var t,n=e.reference,s=e.element,r=e.placement,i=r?wt(r):null,a=r?Wt(r):null,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2;switch(i){case Ge:t={x:o,y:n.y-s.height};break;case qe:t={x:o,y:n.y+n.height};break;case Ke:t={x:n.x+n.width,y:l};break;case Xe:t={x:n.x-s.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?Dt(i):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case $e:t[c]=t[c]-(n[d]/2-s[d]/2);break;case Je:t[c]=t[c]+(n[d]/2-s[d]/2)}}return t}function an(e,t){void 0===t&&(t={});var n=t,s=n.placement,r=void 0===s?e.placement:s,i=n.strategy,a=void 0===i?e.strategy:i,o=n.boundary,l=void 0===o?Ze:o,c=n.rootBoundary,d=void 0===c?et:c,u=n.elementContext,h=void 0===u?tt:u,m=n.altBoundary,p=void 0!==m&&m,f=n.padding,g=void 0===f?0:f,v=Ft("number"!=typeof g?g:zt(g,Qe)),x=h===tt?nt:tt,b=e.rects.popper,y=e.elements[p?x:h],w=function(e,t,n,s){var r="clippingParents"===t?function(e){var t=tn(Lt(e)),n=["absolute","fixed"].indexOf(Tt(e).position)>=0&&xt(e)?Ot(e):e;return vt(n)?t.filter(function(e){return vt(e)&&Et(e,n)&&"body"!==ft(e)}):[]}(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce(function(t,n){var r=sn(e,n,s);return t.top=jt(r.top,t.top),t.right=_t(r.right,t.right),t.bottom=_t(r.bottom,t.bottom),t.left=jt(r.left,t.left),t},sn(e,a,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(vt(y)?y:y.contextElement||Mt(e.elements.popper),l,d,a),j=St(e.elements.reference),_=rn({reference:j,element:b,placement:r}),N=nn(Object.assign({},b,_)),k=h===tt?N:j,C={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},S=e.modifiersData.offset;if(h===tt&&S){var A=S[r];Object.keys(C).forEach(function(e){var t=[Ke,qe].indexOf(e)>=0?1:-1,n=[Ge,qe].indexOf(e)>=0?"y":"x";C[e]+=A[n]*t})}return C}function on(e,t){void 0===t&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?rt:l,d=Wt(s),u=d?o?st:st.filter(function(e){return Wt(e)===d}):Qe,h=u.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=u);var m=h.reduce(function(t,n){return t[n]=an(e,{placement:n,boundary:r,rootBoundary:i,padding:a})[wt(n)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}const ln={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=void 0===r||r,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,p=void 0===m||m,f=n.allowedAutoPlacements,g=t.options.placement,v=wt(g),x=l||(v!==g&&p?function(e){if(wt(e)===Ye)return[];var t=Xt(e);return[Qt(e),t,Qt(t)]}(g):[Xt(g)]),b=[g].concat(x).reduce(function(e,n){return e.concat(wt(n)===Ye?on(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:f}):n)},[]),y=t.rects.reference,w=t.rects.popper,j=new Map,_=!0,N=b[0],k=0;k<b.length;k++){var C=b[k],S=wt(C),A=Wt(C)===$e,E=[Ge,qe].indexOf(S)>=0,T=E?"width":"height",P=an(t,{placement:C,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),M=E?A?Ke:Xe:A?qe:Ge;y[T]>w[T]&&(M=Xt(M));var L=Xt(M),R=[];if(i&&R.push(P[S]<=0),o&&R.push(P[M]<=0,P[L]<=0),R.every(function(e){return e})){N=C,_=!1;break}j.set(C,R)}if(_)for(var O=function(e){var t=b.find(function(t){var n=j.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return N=t,"break"},D=p?3:1;D>0&&"break"!==O(D);D--);t.placement!==N&&(t.modifiersData[s]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function cn(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function dn(e){return[Ge,Ke,qe,Xe].some(function(t){return e[t]>=0})}const un={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,a=an(t,{elementContext:"reference"}),o=an(t,{altBoundary:!0}),l=cn(a,s),c=cn(o,r,i),d=dn(l),u=dn(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},hn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=void 0===r?[0,0]:r,a=rt.reduce(function(e,n){return e[n]=function(e,t,n){var s=wt(e),r=[Xe,Ge].indexOf(s)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],o=i[1];return a=a||0,o=(o||0)*r,[Xe,Ke].indexOf(s)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,i),e},{}),o=a[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=a}},mn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=rn({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}},pn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=void 0===r||r,a=n.altAxis,o=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,m=void 0===h||h,p=n.tetherOffset,f=void 0===p?0:p,g=an(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=wt(t.placement),x=Wt(t.placement),b=!x,y=Dt(v),w="x"===y?"y":"x",j=t.modifiersData.popperOffsets,_=t.rects.reference,N=t.rects.popper,k="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,C="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(j){if(i){var E,T="y"===y?Ge:Xe,P="y"===y?qe:Ke,M="y"===y?"height":"width",L=j[y],R=L+g[T],O=L-g[P],D=m?-N[M]/2:0,I=x===$e?_[M]:N[M],F=x===$e?-N[M]:-_[M],z=t.elements.arrow,B=m&&z?At(z):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=W[T],U=W[P],V=It(0,_[M],B[M]),G=b?_[M]/2-D-V-H-C.mainAxis:I-V-H-C.mainAxis,q=b?-_[M]/2+D+V+U+C.mainAxis:F+V+U+C.mainAxis,K=t.elements.arrow&&Ot(t.elements.arrow),X=K?"y"===y?K.clientTop||0:K.clientLeft||0:0,Y=null!=(E=null==S?void 0:S[y])?E:0,Q=L+q-Y,$=It(m?_t(R,L+G-Y-X):R,L,m?jt(O,Q):O);j[y]=$,A[y]=$-L}if(o){var J,Z="x"===y?Ge:Xe,ee="x"===y?qe:Ke,te=j[w],ne="y"===w?"height":"width",se=te+g[Z],re=te-g[ee],ie=-1!==[Ge,Xe].indexOf(v),ae=null!=(J=null==S?void 0:S[w])?J:0,oe=ie?se:te-_[ne]-N[ne]-ae+C.altAxis,le=ie?te+_[ne]+N[ne]-ae-C.altAxis:re,ce=m&&ie?function(e,t,n){var s=It(e,t,n);return s>n?n:s}(oe,te,le):It(m?oe:se,te,m?le:re);j[w]=ce,A[w]=ce-te}t.modifiersData[s]=A}},requiresIfExists:["offset"]};function fn(e,t,n){void 0===n&&(n=!1);var s,r,i=xt(t),a=xt(t)&&function(e){var t=e.getBoundingClientRect(),n=Nt(t.width)/e.offsetWidth||1,s=Nt(t.height)/e.offsetHeight||1;return 1!==n||1!==s}(t),o=Mt(t),l=St(e,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(i||!i&&!n)&&(("body"!==ft(t)||Zt(o))&&(c=(s=t)!==gt(s)&&xt(s)?{scrollLeft:(r=s).scrollLeft,scrollTop:r.scrollTop}:$t(s)),xt(t)?((d=St(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=Jt(o))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function gn(e){var t=new Map,n=new Set,s=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var s=t.get(e);s&&r(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||r(e)}),s}var vn={placement:"bottom",modifiers:[],strategy:"absolute"};function xn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function bn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,s=void 0===n?[]:n,r=t.defaultOptions,i=void 0===r?vn:r;return function(e,t,n){void 0===n&&(n=i);var r,a,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},vn,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:o,setOptions:function(n){var r="function"==typeof n?n(o.options):n;u(),o.options=Object.assign({},i,o.options,r),o.scrollParents={reference:vt(e)?tn(e):e.contextElement?tn(e.contextElement):[],popper:tn(t)};var a,c,h=function(e){var t=gn(e);return pt.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((a=[].concat(s,o.options.modifiers),c=a.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return o.orderedModifiers=h.filter(function(e){return e.enabled}),o.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,s=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var i=r({state:o,name:t,instance:d,options:s});l.push(i||function(){})}}),d.update()},forceUpdate:function(){if(!c){var e=o.elements,t=e.reference,n=e.popper;if(xn(t,n)){o.rects={reference:fn(t,Ot(n),"fixed"===o.options.strategy),popper:At(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(e){return o.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<o.orderedModifiers.length;s++)if(!0!==o.reset){var r=o.orderedModifiers[s],i=r.fn,a=r.options,l=void 0===a?{}:a,u=r.name;"function"==typeof i&&(o=i({state:o,options:l,name:u,instance:d})||o)}else o.reset=!1,s=-1}}},update:(r=function(){return new Promise(function(e){d.forceUpdate(),e(o)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(r())})})),a}),destroy:function(){u(),c=!0}};if(!xn(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}var yn=bn(),wn=bn({defaultModifiers:[qt,mn,Vt,yt]}),jn=bn({defaultModifiers:[qt,mn,Vt,yt,hn,ln,pn,Bt,un]});const _n=Object.freeze(Object.defineProperty({__proto__:null,afterMain:dt,afterRead:ot,afterWrite:mt,applyStyles:yt,arrow:Bt,auto:Ye,basePlacements:Qe,beforeMain:lt,beforeRead:it,beforeWrite:ut,bottom:qe,clippingParents:Ze,computeStyles:Vt,createPopper:jn,createPopperBase:yn,createPopperLite:wn,detectOverflow:an,end:Je,eventListeners:qt,flip:ln,hide:un,left:Xe,main:ct,modifierPhases:pt,offset:hn,placements:rt,popper:tt,popperGenerator:bn,popperOffsets:mn,preventOverflow:pn,read:at,reference:nt,right:Ke,start:$e,top:Ge,variationPlacements:st,viewport:et,write:ht},Symbol.toStringTag,{value:"Module"})),Nn="dropdown",kn=".bs.dropdown",Cn=".data-api",Sn="ArrowUp",An="ArrowDown",En="hide".concat(kn),Tn="hidden".concat(kn),Pn="show".concat(kn),Mn="shown".concat(kn),Ln="click".concat(kn).concat(Cn),Rn="keydown".concat(kn).concat(Cn),On="keyup".concat(kn).concat(Cn),Dn="show",In='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fn="".concat(In,".").concat(Dn),zn=".dropdown-menu",Bn=f()?"top-end":"top-start",Wn=f()?"top-start":"top-end",Hn=f()?"bottom-end":"bottom-start",Un=f()?"bottom-start":"bottom-end",Vn=f()?"left-start":"right-start",Gn=f()?"right-start":"left-start",qn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Kn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Xn extends W{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=U.next(this._element,zn)[0]||U.prev(this._element,zn)[0]||U.findOne(zn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qn}static get DefaultType(){return Kn}static get NAME(){return Nn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!O.trigger(this._element,Pn,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))O.on(e,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Dn),this._element.classList.add(Dn),O.trigger(this._element,Mn,e)}}hide(){if(c(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!O.trigger(this._element,En,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))O.off(e,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(Dn),this._element.classList.remove(Dn),this._element.setAttribute("aria-expanded","false"),z.removeDataAttribute(this._menu,"popper"),O.trigger(this._element,Tn,e),this._element.focus()}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!a(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(Nn.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_createPopper(){if(void 0===_n)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;"parent"===this._config.reference?e=this._parent:a(this._config.reference)?e=o(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=jn(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Dn)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vn;if(e.classList.contains("dropstart"))return Gn;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Wn:Bn:t?Un:Hn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(z.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),s(s({},e),v(this._config.popperConfig,[void 0,e]))}_selectMenuItem(e){let{key:t,target:n}=e;const s=U.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>l(e));s.length&&b(s,n,t===An,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const t=Xn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=U.find(Fn);for(const n of t){const t=Xn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),r=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!r||"outside"===t._config.autoClose&&r)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const i={relatedTarget:t._element};"click"===e.type&&(i.clickEvent=e),t._completeHide(i)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,s=[Sn,An].includes(e.key);if(!s&&!n)return;if(t&&!n)return;e.preventDefault();const r=this.matches(In)?this:U.prev(this,In)[0]||U.next(this,In)[0]||U.findOne(In,e.delegateTarget.parentNode),i=Xn.getOrCreateInstance(r);if(s)return e.stopPropagation(),i.show(),void i._selectMenuItem(e);i._isShown()&&(e.stopPropagation(),i.hide(),r.focus())}}O.on(document,Rn,In,Xn.dataApiKeydownHandler),O.on(document,Rn,zn,Xn.dataApiKeydownHandler),O.on(document,Ln,Xn.clearMenus),O.on(document,On,Xn.clearMenus),O.on(document,Ln,In,function(e){e.preventDefault(),Xn.getOrCreateInstance(this).toggle()}),g(Xn);const Yn="backdrop",Qn="show",$n="mousedown.bs.".concat(Yn),Jn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Zn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class es extends B{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Jn}static get DefaultType(){return Zn}static get NAME(){return Yn}show(e){if(!this._config.isVisible)return void v(e);this._append();const t=this._getElement();this._config.isAnimated&&h(t),t.classList.add(Qn),this._emulateAnimation(()=>{v(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Qn),this._emulateAnimation(()=>{this.dispose(),v(e)})):v(e)}dispose(){this._isAppended&&(O.off(this._element,$n),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=o(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),O.on(e,$n,()=>{v(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){x(e,this._getElement(),this._config.isAnimated)}}const ts=".bs.focustrap",ns="focusin".concat(ts),ss="keydown.tab".concat(ts),rs="backward",is={autofocus:!0,trapElement:null},as={autofocus:"boolean",trapElement:"element"};class os extends B{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return is}static get DefaultType(){return as}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),O.off(document,ts),O.on(document,ns,e=>this._handleFocusin(e)),O.on(document,ss,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,O.off(document,ts))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=U.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===rs?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?rs:"forward")}}const ls=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cs=".sticky-top",ds="padding-right",us="margin-right";class hs{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ds,t=>t+e),this._setElementAttributes(ls,ds,t=>t+e),this._setElementAttributes(cs,us,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ds),this._resetElementAttributes(ls,ds),this._resetElementAttributes(cs,us)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const s=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const r=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,"".concat(n(Number.parseFloat(r)),"px"))})}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&z.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const n=z.getDataAttribute(e,t);null!==n?(z.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(a(e))t(e);else for(const n of U.find(e,this._element))t(n)}}const ms=".bs.modal",ps="hide".concat(ms),fs="hidePrevented".concat(ms),gs="hidden".concat(ms),vs="show".concat(ms),xs="shown".concat(ms),bs="resize".concat(ms),ys="click.dismiss".concat(ms),ws="mousedown.dismiss".concat(ms),js="keydown.dismiss".concat(ms),_s="click".concat(ms,".data-api"),Ns="modal-open",ks="show",Cs="modal-static",Ss={backdrop:!0,focus:!0,keyboard:!0},As={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Es extends W{constructor(e,t){super(e,t),this._dialog=U.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new hs,this._addEventListeners()}static get Default(){return Ss}static get DefaultType(){return As}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||O.trigger(this._element,vs,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ns),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(O.trigger(this._element,ps).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ks),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){O.off(window,ms),O.off(this._dialog,ms),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new es({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new os({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=U.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),h(this._element),this._element.classList.add(ks),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,O.trigger(this._element,xs,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){O.on(this._element,js,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),O.on(window,bs,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),O.on(this._element,ws,e=>{O.one(this._element,ys,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ns),this._resetAdjustments(),this._scrollBar.reset(),O.trigger(this._element,gs)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(O.trigger(this._element,fs).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Cs)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Cs),this._queueCallback(()=>{this._element.classList.remove(Cs),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]="".concat(t,"px")}if(!n&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]="".concat(t,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const n=Es.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}})}}O.on(document,_s,'[data-bs-toggle="modal"]',function(e){const t=U.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),O.one(t,vs,e=>{e.defaultPrevented||O.one(t,gs,()=>{l(this)&&this.focus()})});const n=U.findOne(".modal.show");n&&Es.getInstance(n).hide(),Es.getOrCreateInstance(t).toggle(this)}),V(Es),g(Es);const Ts=".bs.offcanvas",Ps=".data-api",Ms="load".concat(Ts).concat(Ps),Ls="show",Rs="showing",Os="hiding",Ds=".offcanvas.show",Is="show".concat(Ts),Fs="shown".concat(Ts),zs="hide".concat(Ts),Bs="hidePrevented".concat(Ts),Ws="hidden".concat(Ts),Hs="resize".concat(Ts),Us="click".concat(Ts).concat(Ps),Vs="keydown.dismiss".concat(Ts),Gs={backdrop:!0,keyboard:!0,scroll:!1},qs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ks extends W{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Gs}static get DefaultType(){return qs}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||O.trigger(this._element,Is,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new hs).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Rs),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ls),this._element.classList.remove(Rs),O.trigger(this._element,Fs,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(O.trigger(this._element,zs).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Os),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ls,Os),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new hs).reset(),O.trigger(this._element,Ws)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new es({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():O.trigger(this._element,Bs)}:null})}_initializeFocusTrap(){return new os({trapElement:this._element})}_addEventListeners(){O.on(this._element,Vs,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():O.trigger(this._element,Bs))})}static jQueryInterface(e){return this.each(function(){const t=Ks.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}})}}O.on(document,Us,'[data-bs-toggle="offcanvas"]',function(e){const t=U.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;O.one(t,Ws,()=>{l(this)&&this.focus()});const n=U.findOne(Ds);n&&n!==t&&Ks.getInstance(n).hide(),Ks.getOrCreateInstance(t).toggle(this)}),O.on(window,Ms,()=>{for(const e of U.find(Ds))Ks.getOrCreateInstance(e).show()}),O.on(window,Hs,()=>{for(const e of U.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ks.getOrCreateInstance(e).hide()}),V(Ks),g(Ks);const Xs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ys=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Qs=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,$s=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Ys.has(n)||Boolean(Qs.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(n))},Js={allowList:Xs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Zs={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},er={entry:"(string|element|function|null)",selector:"(string|element)"};class tr extends B{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Js}static get DefaultType(){return Zs}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content=s(s({},this._config.content),e),this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(e,r,s);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},er)}_setContent(e,t,n){const s=U.findOne(n,e);s&&((t=this._resolvePossibleFunction(t))?a(t)?this._putElementInTemplate(o(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const i of r){const e=i.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){i.remove();continue}const n=[].concat(...i.attributes),s=[].concat(t["*"]||[],t[e]||[]);for(const t of n)$s(t,s)||i.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return v(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const nr=new Set(["sanitize","allowList","sanitizeFn"]),sr="fade",rr="show",ir=".tooltip-inner",ar=".modal",or="hide.bs.modal",lr="hover",cr="focus",dr="click",ur={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},hr={allowList:Xs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},mr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class pr extends W{constructor(e,t){if(void 0===_n)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return hr}static get DefaultType(){return mr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),O.off(this._element.closest(ar),or,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=O.trigger(this._element,this.constructor.eventName("show")),t=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(n),O.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(rr),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))O.on(r,"mouseover",u);this._queueCallback(()=>{O.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!O.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(rr),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))O.off(e,"mouseover",u);this._activeTrigger[dr]=!1,this._activeTrigger[cr]=!1,this._activeTrigger[lr]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),O.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(sr,rr),t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(sr),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new tr(s(s({},this._config),{},{content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{[ir]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(sr)}_isShown(){return this.tip&&this.tip.classList.contains(rr)}_createPopper(e){const t=v(this._config.placement,[this,e,this._element]),n=ur[t.toUpperCase()];return jn(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return v(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return s(s({},t),v(this._config.popperConfig,[void 0,t]))}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)O.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[dr]=!(t._isShown()&&t._activeTrigger[dr]),t.toggle()});else if("manual"!==t){const e=t===lr?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===lr?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");O.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?cr:lr]=!0,t._enter()}),O.on(this._element,n,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?cr:lr]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},O.on(this._element.closest(ar),or,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=z.getDataAttributes(this._element);for(const n of Object.keys(t))nr.has(n)&&delete t[n];return e=s(s({},t),"object"==typeof e&&e?e:{}),e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:o(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=pr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}g(pr);const fr=".popover-header",gr=".popover-body",vr=s(s({},pr.Default),{},{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),xr=s(s({},pr.DefaultType),{},{content:"(null|string|element|function)"});class br extends pr{static get Default(){return vr}static get DefaultType(){return xr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fr]:this._getTitle(),[gr]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=br.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}g(br);const yr=".bs.scrollspy",wr="activate".concat(yr),jr="click".concat(yr),_r="load".concat(yr,".data-api"),Nr="active",kr="[href]",Cr=".nav-link",Sr="".concat(Cr,", .nav-item > ").concat(Cr,", .list-group-item"),Ar={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Er={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Tr extends W{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ar}static get DefaultType(){return Er}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=o(e.target)||document.body,e.rootMargin=e.offset?"".concat(e.offset,"px 0px -30%"):e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(O.off(this._config.target,jr),O.on(this._config.target,jr,kr,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:s,behavior:"smooth"});n.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get("#".concat(e.target.id)),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(i));continue}const e=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&e){if(n(i),!s)return}else r||e||n(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=U.find(kr,this._config.target);for(const t of e){if(!t.hash||c(t))continue;const e=U.findOne(decodeURI(t.hash),this._element);l(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Nr),this._activateParents(e),O.trigger(this._element,wr,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))U.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(Nr);else for(const t of U.parents(e,".nav, .list-group"))for(const e of U.prev(t,Sr))e.classList.add(Nr)}_clearActiveClass(e){e.classList.remove(Nr);const t=U.find("".concat(kr,".").concat(Nr),e);for(const n of t)n.classList.remove(Nr)}static jQueryInterface(e){return this.each(function(){const t=Tr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}O.on(window,_r,()=>{for(const e of U.find('[data-bs-spy="scroll"]'))Tr.getOrCreateInstance(e)}),g(Tr);const Pr=".bs.tab",Mr="hide".concat(Pr),Lr="hidden".concat(Pr),Rr="show".concat(Pr),Or="shown".concat(Pr),Dr="click".concat(Pr),Ir="keydown".concat(Pr),Fr="load".concat(Pr),zr="ArrowLeft",Br="ArrowRight",Wr="ArrowUp",Hr="ArrowDown",Ur="Home",Vr="End",Gr="active",qr="fade",Kr="show",Xr=".dropdown-toggle",Yr=":not(".concat(Xr,")"),Qr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',$r=".nav-link".concat(Yr,", .list-group-item").concat(Yr,', [role="tab"]').concat(Yr,", ").concat(Qr),Jr=".".concat(Gr,'[data-bs-toggle="tab"], .').concat(Gr,'[data-bs-toggle="pill"], .').concat(Gr,'[data-bs-toggle="list"]');class Zr extends W{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),O.on(this._element,Ir,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?O.trigger(t,Mr,{relatedTarget:e}):null;O.trigger(e,Rr,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Gr),this._activate(U.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),O.trigger(e,Or,{relatedTarget:t})):e.classList.add(Kr)},e,e.classList.contains(qr)))}_deactivate(e,t){e&&(e.classList.remove(Gr),e.blur(),this._deactivate(U.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),O.trigger(e,Lr,{relatedTarget:t})):e.classList.remove(Kr)},e,e.classList.contains(qr)))}_keydown(e){if(![zr,Br,Wr,Hr,Ur,Vr].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!c(e));let n;if([Ur,Vr].includes(e.key))n=t[e.key===Ur?0:t.length-1];else{const s=[Br,Hr].includes(e.key);n=b(t,e.target,s,!0)}n&&(n.focus({preventScroll:!0}),Zr.getOrCreateInstance(n).show())}_getChildren(){return U.find($r,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=U.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby","".concat(e.id)))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const s=(e,s)=>{const r=U.findOne(e,n);r&&r.classList.toggle(s,t)};s(Xr,Gr),s(".dropdown-menu",Kr),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Gr)}_getInnerElement(e){return e.matches($r)?e:U.findOne($r,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=Zr.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}O.on(document,Dr,Qr,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||Zr.getOrCreateInstance(this).show()}),O.on(window,Fr,()=>{for(const e of U.find(Jr))Zr.getOrCreateInstance(e)}),g(Zr);const ei=".bs.toast",ti="mouseover".concat(ei),ni="mouseout".concat(ei),si="focusin".concat(ei),ri="focusout".concat(ei),ii="hide".concat(ei),ai="hidden".concat(ei),oi="show".concat(ei),li="shown".concat(ei),ci="hide",di="show",ui="showing",hi={animation:"boolean",autohide:"boolean",delay:"number"},mi={animation:!0,autohide:!0,delay:5e3};class pi extends W{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return mi}static get DefaultType(){return hi}static get NAME(){return"toast"}show(){O.trigger(this._element,oi).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ci),h(this._element),this._element.classList.add(di,ui),this._queueCallback(()=>{this._element.classList.remove(ui),O.trigger(this._element,li),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(O.trigger(this._element,ii).defaultPrevented||(this._element.classList.add(ui),this._queueCallback(()=>{this._element.classList.add(ci),this._element.classList.remove(ui,di),O.trigger(this._element,ai)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(di),super.dispose()}isShown(){return this._element.classList.contains(di)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){O.on(this._element,ti,e=>this._onInteraction(e,!0)),O.on(this._element,ni,e=>this._onInteraction(e,!1)),O.on(this._element,si,e=>this._onInteraction(e,!0)),O.on(this._element,ri,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=pi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}})}}return V(pi),g(pi),{Alert:X,Button:Q,Carousel:Te,Collapse:Ve,Dropdown:Xn,Modal:Es,Offcanvas:Ks,Popover:br,ScrollSpy:Tr,Tab:Zr,Toast:pi,Tooltip:pr}}()},897:(e,t,n)=>{var s=n(693);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&s;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>s[e]);return a.default=()=>s,n.d(i,a),i}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{dU:()=>Ek,ng:()=>Bp,EA:()=>Ow,Tm:()=>p_,D6:()=>qj,YE:()=>a_,rE:()=>K_});var t,s=n(43),r=n.t(s,2),i=n(391);n(885);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,s){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function p(e,n,s,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:c=!1}=r,m=i.history,p=t.Pop,f=null,g=v();function v(){return(m.state||{idx:null}).idx}function x(){p=t.Pop;let e=v(),n=null==e?null:e-g;g=e,f&&f({action:p,location:y.location,delta:n})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,m.replaceState(a({},m.state,{idx:g}),""));let y={get action(){return p},get location(){return e(i,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(o,x),f=e,()=>{i.removeEventListener(o,x),f=null}},createHref:e=>n(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let r=u(y.location,e,n);s&&s(r,e),g=v()+1;let a=d(r,g),o=y.createHref(r);try{m.pushState(a,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(o)}c&&f&&f({action:p,location:y.location,delta:1})},replace:function(e,n){p=t.Replace;let r=u(y.location,e,n);s&&s(r,e),g=v();let i=d(r,g),a=y.createHref(r);m.replaceState(i,"",a),c&&f&&f({action:p,location:y.location,delta:0})},go:e=>m.go(e)};return y}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,s){let r=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=T(r);a=A(i[o],e,s)}return a}function x(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let r=(e,r,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(s),'Absolute route path "'+a.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(s.length));let o=D([s,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:S(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of b(e.path))r(e,t,s);else r(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===s.length)return r?[i,""]:[i];let a=b(s.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),r&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,w=3,j=2,_=1,N=10,k=-2,C=e=>"*"===e;function S(e,t){let n=e.split("/"),s=n.length;return n.some(C)&&(s+=k),t&&(s+=j),n.filter(e=>!C(e)).reduce((e,t)=>e+(y.test(t)?w:""===t?_:N),s)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,r={},i="/",a=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===i?t:t.slice(i.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!s[s.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:D([i,d.pathname]),pathnameBase:I(D([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=D([i,d.pathnameBase]))}return a}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let i=new RegExp(r,t?void 0:"i");return[i,s]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((e,t,n)=>{let{paramName:s,isOptional:r}=t;if("*"===s){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[s]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function M(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function O(e,t,n,s){let r;void 0===s&&(s=!1),"string"===typeof e?r=m(e):(r=a({},e),l(!r.pathname||!r.pathname.includes("?"),M("?","pathname","search",r)),l(!r.pathname||!r.pathname.includes("#"),M("#","pathname","hash",r)),l(!r.search||!r.search.includes("#"),M("#","search","hash",r)));let i,o=""===e||""===r.pathname,c=o?"/":r.pathname;if(null==c)i=n;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:s="",hash:r=""}="string"===typeof e?m(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:F(s),hash:z(r)}}(r,i),u=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},U.apply(this,arguments)}const V=s.createContext(null);const G=s.createContext(null);const q=s.createContext(null);const K=s.createContext(null);const X=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=s.createContext(null);function Q(){return null!=s.useContext(K)}function $(){return Q()||l(!1),s.useContext(K).location}function J(e){s.useContext(q).static||s.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=s.useContext(X);return e?function(){let{router:e}=de(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=s.useRef(!1);J(()=>{n.current=!0});let r=s.useCallback(function(s,r){void 0===r&&(r={}),n.current&&("number"===typeof s?e.navigate(s):e.navigate(s,U({fromRouteId:t},r)))},[e,t]);return r}():function(){Q()||l(!1);let e=s.useContext(V),{basename:t,future:n,navigator:r}=s.useContext(q),{matches:i}=s.useContext(X),{pathname:a}=$(),o=JSON.stringify(R(i,n.v7_relativeSplatPath)),c=s.useRef(!1);J(()=>{c.current=!0});let d=s.useCallback(function(n,s){if(void 0===s&&(s={}),!c.current)return;if("number"===typeof n)return void r.go(n);let i=O(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:D([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e]);return d}()}const ee=s.createContext(null);function te(){return s.useContext(ee)}function ne(e,n,r,i){Q()||l(!1);let{navigator:a}=s.useContext(q),{matches:o}=s.useContext(X),c=o[o.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=$();if(n){var f;let e="string"===typeof n?m(n):n;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||l(!1),h=e}else h=p;let v=h.pathname||"/",x=v;if("/"!==u){let e=u.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=g(e,{pathname:x});let y=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:D([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,i);return n&&y?s.createElement(K.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function se(){let e=function(){var e;let t=s.useContext(Y),n=ue(ce.UseRouteError),r=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const re=s.createElement(se,null);class ie extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(X.Provider,{value:this.props.routeContext},s.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(V);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(X.Provider,{value:t},r)}function oe(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,c=null==(i=n)?void 0:i.errors;if(null!=c){let e=o.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:s}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||r){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,l=!1,h=null,m=null;var p;n&&(a=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||re,d&&(u<0&&0===i?(p="route-fallback",!1||me[p]||(me[p]=!0),l=!0,m=null):u===i&&(l=!0,m=r.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:l?m:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ae,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=s.useContext(V);return t||l(!1),t}function ue(e){let t=s.useContext(G);return t||l(!1),t}function he(e){let t=function(){let e=s.useContext(X);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function fe(e){let{to:t,replace:n,state:r,relative:i}=e;Q()||l(!1);let{future:a,static:o}=s.useContext(q),{matches:c}=s.useContext(X),{pathname:d}=$(),u=Z(),h=O(t,R(c,a.v7_relativeSplatPath),d,"path"===i),m=JSON.stringify(h);return s.useEffect(()=>u(JSON.parse(m),{replace:n,state:r,relative:i}),[u,m,i,n,r]),null}function ge(e){return function(e){let t=s.useContext(X).outlet;return t?s.createElement(ee.Provider,{value:e},t):t}(e.context)}function ve(e){l(!1)}function xe(e){let{basename:n="/",children:r=null,location:i,navigationType:a=t.Pop,navigator:o,static:c=!1,future:d}=e;Q()&&l(!1);let u=n.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:u,navigator:o,static:c,future:U({v7_relativeSplatPath:!1},d)}),[u,d,o,c]);"string"===typeof i&&(i=m(i));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:x="default"}=i,b=s.useMemo(()=>{let e=P(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:x},navigationType:a}},[u,p,f,g,v,x,a]);return null==b?null:s.createElement(q.Provider,{value:h},s.createElement(K.Provider,{children:r,value:b}))}function be(e){let{children:t,location:n}=e;return ne(ye(t),n)}new Promise(()=>{});s.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,ye(e.props.children,i));e.type!==ve&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ye(e.props.children,i)),n.push(a)}),n}var we=n(950),je=n.t(we,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(zP){}new Map;const _e=r.startTransition;je.flushSync,r.useId;function Ne(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),p(function(e,t){let{pathname:n="/",search:s="",hash:r=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),u("",{pathname:n,search:s,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),s="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");s=-1===n?t:t.slice(0,n)}return s+"#"+("string"===typeof t?t:h(t))},function(e,t){c("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}({window:i,v5Compat:!0}));let o=a.current,[l,d]=s.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},g=s.useCallback(e=>{f&&_e?_e(()=>d(e)):d(e)},[d,f]);return s.useLayoutEffect(()=>o.listen(g),[o,g]),s.useEffect(()=>pe(r),[r]),s.createElement(xe,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ae(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Se(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}function Ee(e,t,n){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach(function(t){Ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Me(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}function Le(e,t){if(null==e)return{};var n,s,r=Me(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Re=n(139),Oe=n.n(Re),De=n(579);const Ie=["xxl","xl","lg","md","sm","xs"],Fe="xs",ze=s.createContext({prefixes:{},breakpoints:Ie,minBreakpoint:Fe}),{Consumer:Be,Provider:We}=ze;function He(e,t){const{prefixes:n}=(0,s.useContext)(ze);return e||n[t]||t}function Ue(){const{breakpoints:e}=(0,s.useContext)(ze);return e}function Ve(){const{minBreakpoint:e}=(0,s.useContext)(ze);return e}function Ge(){const{dir:e}=(0,s.useContext)(ze);return"rtl"===e}const qe=["bsPrefix","fluid","as","className"],Ke=s.forwardRef((e,t)=>{let{bsPrefix:n,fluid:s=!1,as:r="div",className:i}=e,a=Le(e,qe);const o=He(n,"container"),l="string"===typeof s?"-".concat(s):"-fluid";return(0,De.jsx)(r,Pe(Pe({ref:t},a),{},{className:Oe()(i,s?"".concat(o).concat(l):o)}))});Ke.displayName="Container";const Xe=Ke;function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ye.apply(null,arguments)}n(740);function Qe(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function $e(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!==typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Je(e,t,n){var r=(0,s.useRef)(void 0!==e),i=(0,s.useState)(t),a=i[0],o=i[1],l=void 0!==e,c=r.current;return r.current=l,!l&&c&&a!==t&&o(t),[l?e:a,(0,s.useCallback)(function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];n&&n.apply(void 0,[e].concat(s)),o(e)},[n])]}function Ze(e,t){return Object.keys(t).reduce(function(n,s){var r,i=n,a=i[Qe(s)],o=i[s],l=Me(i,[Qe(s),s].map($e)),c=t[s],d=Je(o,a,e[c]),u=d[0],h=d[1];return Ye({},l,((r={})[s]=u,r[c]=h,r))},e)}function et(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function tt(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function nt(e,t){try{var n=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,s)}finally{this.props=n,this.state=s}}et.__suppressDeprecationWarning=!0,tt.__suppressDeprecationWarning=!0,nt.__suppressDeprecationWarning=!0;const st=function(e){const t=(0,s.useRef)(e);return(0,s.useEffect)(()=>{t.current=e},[e]),t};function rt(e){const t=st(e);return(0,s.useCallback)(function(){return t.current&&t.current(...arguments)},[t])}const it=e=>s.forwardRef((t,n)=>(0,De.jsx)("div",Pe(Pe({},t),{},{ref:n,className:Oe()(t.className,e)}))),at=["className","bsPrefix","as"],ot=it("h4");ot.displayName="DivStyledAsH4";const lt=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r=ot}=e,i=Le(e,at);return s=He(s,"alert-heading"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});lt.displayName="AlertHeading";const ct=lt;function dt(){return(0,s.useState)(null)}const ut=function(e){const t=(0,s.useRef)(e);return(0,s.useEffect)(()=>{t.current=e},[e]),t};function ht(e){const t=ut(e);return(0,s.useCallback)(function(){return t.current&&t.current(...arguments)},[t])}function mt(){const e=(0,s.useRef)(!0),t=(0,s.useRef)(()=>e.current);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function pt(e){const t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{t.current=e}),t.current}const ft="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,gt="undefined"!==typeof document||ft?s.useLayoutEffect:s.useEffect;new WeakMap;const vt=["as","disabled"];function xt(e){let{tagName:t,disabled:n,href:s,target:r,rel:i,role:a,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=s||null!=r||null!=i?"a":"button");const d={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},d];const u=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(s||(s="#"),n&&(s=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:n?void 0:l,href:s,target:"a"===t?r:void 0,"aria-disabled":n||void 0,rel:"a"===t?i:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const bt=s.forwardRef((e,t)=>{let{as:n,disabled:s}=e,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,vt);const[i,{tagName:a}]=xt(Object.assign({tagName:n,disabled:s},r));return(0,De.jsx)(a,Object.assign({},r,i,{ref:t}))});bt.displayName="Button";const yt=bt,wt=["onKeyDown"];const jt=s.forwardRef((e,t)=>{let{onKeyDown:n}=e,s=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,wt);const[r]=xt(Object.assign({tagName:"a"},s)),i=ht(e=>{r.onKeyDown(e),null==n||n(e)});return(a=s.href)&&"#"!==a.trim()&&"button"!==s.role?(0,De.jsx)("a",Object.assign({ref:t},s,{onKeyDown:n})):(0,De.jsx)("a",Object.assign({ref:t},s,r,{onKeyDown:i}));var a});jt.displayName="Anchor";const _t=jt,Nt=["className","bsPrefix","as"],kt=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r=_t}=e,i=Le(e,Nt);return s=He(s,"alert-link"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});kt.displayName="AlertLink";const Ct=kt;function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}const At=!1,Et=s.createContext(null);var Tt="unmounted",Pt="exited",Mt="entering",Lt="entered",Rt="exiting",Ot=function(e){var t,n;function r(t,n){var s;s=e.call(this,t,n)||this;var r,i=n&&!n.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?i?(r=Pt,s.appearStatus=Mt):r=Lt:r=t.unmountOnExit||t.mountOnEnter?Tt:Pt,s.state={status:r},s.nextCallback=null,s}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,St(t,n),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Tt?{status:Pt}:null};var i=r.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Mt&&n!==Lt&&(t=Mt):n!==Mt&&n!==Lt||(t=Rt)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,s=this.props.timeout;return e=t=n=s,null!=s&&"number"!==typeof s&&(e=s.exit,t=s.enter,n=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Mt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:we.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pt&&this.setState({status:Tt})},i.performEnter=function(e){var t=this,n=this.props.enter,s=this.context?this.context.isMounting:e,r=this.props.nodeRef?[s]:[we.findDOMNode(this),s],i=r[0],a=r[1],o=this.getTimeouts(),l=s?o.appear:o.enter;!e&&!n||At?this.safeSetState({status:Lt},function(){t.props.onEntered(i)}):(this.props.onEnter(i,a),this.safeSetState({status:Mt},function(){t.props.onEntering(i,a),t.onTransitionEnd(l,function(){t.safeSetState({status:Lt},function(){t.props.onEntered(i,a)})})}))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),s=this.props.nodeRef?void 0:we.findDOMNode(this);t&&!At?(this.props.onExit(s),this.safeSetState({status:Rt},function(){e.props.onExiting(s),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:Pt},function(){e.props.onExited(s)})})})):this.safeSetState({status:Pt},function(){e.props.onExited(s)})},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(s){n&&(n=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:we.findDOMNode(this),s=null==e&&!this.props.addEndListener;if(n&&!s){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=r[0],a=r[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===Tt)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Me(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(Et.Provider,{value:null},"function"===typeof n?n(e,r):s.cloneElement(s.Children.only(n),r))},r}(s.Component);function Dt(){}Ot.contextType=Et,Ot.propTypes={},Ot.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Dt,onEntering:Dt,onEntered:Dt,onExit:Dt,onExiting:Dt,onExited:Dt},Ot.UNMOUNTED=Tt,Ot.EXITED=Pt,Ot.ENTERING=Mt,Ot.ENTERED=Lt,Ot.EXITING=Rt;const It=Ot;function Ft(e){return"Escape"===e.code||27===e.keyCode}function zt(e){if(!e||"function"===typeof e)return null;const{major:t}=function(){const e=s.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return t>=19?e.props.ref:e.ref}function Bt(e){return e&&e.ownerDocument||document}function Wt(e,t){return function(e){var t=Bt(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Ht=/([A-Z])/g;var Ut=/^ms-/;function Vt(e){return function(e){return e.replace(Ht,"-$1").toLowerCase()}(e).replace(Ut,"-ms-")}var Gt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const qt=function(e,t){var n="",s="";if("string"===typeof t)return e.style.getPropertyValue(Vt(t))||Wt(e).getPropertyValue(Vt(t));Object.keys(t).forEach(function(r){var i=t[r];i||0===i?!function(e){return!(!e||!Gt.test(e))}(r)?n+=Vt(r)+": "+i+";":s+=r+"("+i+") ":e.style.removeProperty(Vt(r))}),s&&(n+="transform: "+s+";"),e.style.cssText+=";"+n},Kt=!("undefined"===typeof window||!window.document||!window.document.createElement);var Xt=!1,Yt=!1;try{var Qt={get passive(){return Xt=!0},get once(){return Yt=Xt=!0}};Kt&&(window.addEventListener("test",Qt,Qt),window.removeEventListener("test",Qt,!0))}catch(zP){}const $t=function(e,t,n,s){if(s&&"boolean"!==typeof s&&!Yt){var r=s.once,i=s.capture,a=n;!Yt&&r&&(a=n.__once||function e(s){this.removeEventListener(t,e,i),n.call(this,s)},n.__once=a),e.addEventListener(t,a,Xt?s:i)}e.addEventListener(t,n,s)};const Jt=function(e,t,n,s){var r=s&&"boolean"!==typeof s?s.capture:s;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)};const Zt=function(e,t,n,s){return $t(e,t,n,s),function(){Jt(e,t,n,s)}};function en(e,t,n){void 0===n&&(n=5);var s=!1,r=setTimeout(function(){s||function(e,t,n,s){if(void 0===n&&(n=!1),void 0===s&&(s=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,s),e.dispatchEvent(r)}}(e,"transitionend",!0)},t+n),i=Zt(e,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(r),i()}}function tn(e,t,n,s){null==n&&(n=function(e){var t=qt(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var r=en(e,n,s),i=Zt(e,"transitionend",t);return function(){r(),i()}}function nn(e,t){const n=qt(e,t)||"",s=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*s}function sn(e,t){const n=nn(e,"transitionDuration"),s=nn(e,"transitionDelay"),r=tn(e,n=>{n.target===e&&(r(),t(n))},n+s)}function rn(e){e.offsetHeight}const an=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const on=function(e,t){return(0,s.useMemo)(()=>function(e,t){const n=an(e),s=an(t);return e=>{n&&n(e),s&&s(e)}}(e,t),[e,t])};function ln(e){return e&&"setState"in e?we.findDOMNode(e):null!=e?e:null}const cn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],dn=s.forwardRef((e,t)=>{let{onEnter:n,onEntering:r,onEntered:i,onExit:a,onExiting:o,onExited:l,addEndListener:c,children:d,childRef:u}=e,h=Le(e,cn);const m=(0,s.useRef)(null),p=on(m,u),f=e=>{p(ln(e))},g=e=>t=>{e&&m.current&&e(m.current,t)},v=(0,s.useCallback)(g(n),[n]),x=(0,s.useCallback)(g(r),[r]),b=(0,s.useCallback)(g(i),[i]),y=(0,s.useCallback)(g(a),[a]),w=(0,s.useCallback)(g(o),[o]),j=(0,s.useCallback)(g(l),[l]),_=(0,s.useCallback)(g(c),[c]);return(0,De.jsx)(It,Pe(Pe({ref:t},h),{},{onEnter:v,onEntered:b,onEntering:x,onExit:y,onExited:j,onExiting:w,addEndListener:_,nodeRef:m,children:"function"===typeof d?(e,t)=>d(e,Pe(Pe({},t),{},{ref:f})):s.cloneElement(d,{ref:f})}))});dn.displayName="TransitionWrapper";const un=dn,hn=["className","children","transitionClasses","onEnter"],mn={[Mt]:"show",[Lt]:"show"},pn=s.forwardRef((e,t)=>{let{className:n,children:r,transitionClasses:i={},onEnter:a}=e;const o=Pe({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Le(e,hn)),l=(0,s.useCallback)((e,t)=>{rn(e),null==a||a(e,t)},[a]);return(0,De.jsx)(un,Pe(Pe({ref:t,addEndListener:sn},o),{},{onEnter:l,childRef:zt(r),children:(e,t)=>s.cloneElement(r,Pe(Pe({},t),{},{className:Oe()("fade",n,r.props.className,mn[e],i[e])}))}))});pn.displayName="Fade";const fn=pn;var gn=n(173),vn=n.n(gn);const xn=["className","variant","aria-label"],bn={"aria-label":vn().string,onClick:vn().func,variant:vn().oneOf(["white"])},yn=s.forwardRef((e,t)=>{let{className:n,variant:s,"aria-label":r="Close"}=e,i=Le(e,xn);return(0,De.jsx)("button",Pe({ref:t,type:"button",className:Oe()("btn-close",s&&"btn-close-".concat(s),n),"aria-label":r},i))});yn.displayName="CloseButton",yn.propTypes=bn;const wn=yn,jn=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],_n=s.forwardRef((e,t)=>{const n=Ze(e,{show:"onClose"}),{bsPrefix:s,show:r=!0,closeLabel:i="Close alert",closeVariant:a,className:o,children:l,variant:c="primary",onClose:d,dismissible:u,transition:h=fn}=n,m=Le(n,jn),p=He(s,"alert"),f=rt(e=>{d&&d(!1,e)}),g=!0===h?fn:h,v=(0,De.jsxs)("div",Pe(Pe({role:"alert"},g?void 0:m),{},{ref:t,className:Oe()(o,p,c&&"".concat(p,"-").concat(c),u&&"".concat(p,"-dismissible")),children:[u&&(0,De.jsx)(wn,{onClick:f,"aria-label":i,variant:a}),l]}));return g?(0,De.jsx)(g,Pe(Pe({unmountOnExit:!0},m),{},{ref:void 0,in:r,children:v})):r?v:null});_n.displayName="Alert";const Nn=Object.assign(_n,{Link:Ct,Heading:ct}),kn=["bsPrefix","className","as"],Cn=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:r="div"}=e,i=Le(e,kn);const a=He(n,"row"),o=Ue(),l=Ve(),c="".concat(a,"-cols"),d=[];return o.forEach(e=>{const t=i[e];let n;delete i[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const s=e!==l?"-".concat(e):"";null!=n&&d.push("".concat(c).concat(s,"-").concat(n))}),(0,De.jsx)(r,Pe(Pe({ref:t},i),{},{className:Oe()(s,a,...d)}))});Cn.displayName="Row";const Sn=Cn,An=["as","bsPrefix","className"],En=["className"];const Tn=s.forwardRef((e,t)=>{const[n,{as:s="div",bsPrefix:r,spans:i}]=function(e){let{as:t,bsPrefix:n,className:s}=e,r=Le(e,An);n=He(n,"col");const i=Ue(),a=Ve(),o=[],l=[];return i.forEach(e=>{const t=r[e];let s,i,c;delete r[e],"object"===typeof t&&null!=t?({span:s,offset:i,order:c}=t):s=t;const d=e!==a?"-".concat(e):"";s&&o.push(!0===s?"".concat(n).concat(d):"".concat(n).concat(d,"-").concat(s)),null!=c&&l.push("order".concat(d,"-").concat(c)),null!=i&&l.push("offset".concat(d,"-").concat(i))}),[Pe(Pe({},r),{},{className:Oe()(s,...o,...l)}),{as:t,bsPrefix:n,spans:o}]}(e),{className:a}=n,o=Le(n,En);return(0,De.jsx)(s,Pe(Pe({},o),{},{ref:t,className:Oe()(a,!i.length&&r)}))});Tn.displayName="Col";const Pn=Tn,Mn=["bsPrefix","bg","pill","text","className","as"],Ln=s.forwardRef((e,t)=>{let{bsPrefix:n,bg:s="primary",pill:r=!1,text:i,className:a,as:o="span"}=e,l=Le(e,Mn);const c=He(n,"badge");return(0,De.jsx)(o,Pe(Pe({ref:t},l),{},{className:Oe()(a,c,r&&"rounded-pill",i&&"text-".concat(i),s&&"bg-".concat(s))}))});Ln.displayName="Badge";const Rn=Ln,On=["className","bsPrefix","as"],Dn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,On);return s=He(s,"card-body"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Dn.displayName="CardBody";const In=Dn,Fn=["className","bsPrefix","as"],zn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,Fn);return s=He(s,"card-footer"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});zn.displayName="CardFooter";const Bn=zn,Wn=s.createContext(null);Wn.displayName="CardHeaderContext";const Hn=Wn,Un=["bsPrefix","className","as"],Vn=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:i="div"}=e,a=Le(e,Un);const o=He(n,"card-header"),l=(0,s.useMemo)(()=>({cardHeaderBsPrefix:o}),[o]);return(0,De.jsx)(Hn.Provider,{value:l,children:(0,De.jsx)(i,Pe(Pe({ref:t},a),{},{className:Oe()(r,o)}))})});Vn.displayName="CardHeader";const Gn=Vn,qn=["bsPrefix","className","variant","as"],Kn=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,variant:r,as:i="img"}=e,a=Le(e,qn);const o=He(n,"card-img");return(0,De.jsx)(i,Pe({ref:t,className:Oe()(r?"".concat(o,"-").concat(r):o,s)},a))});Kn.displayName="CardImg";const Xn=Kn,Yn=["className","bsPrefix","as"],Qn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,Yn);return s=He(s,"card-img-overlay"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Qn.displayName="CardImgOverlay";const $n=Qn,Jn=["className","bsPrefix","as"],Zn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="a"}=e,i=Le(e,Jn);return s=He(s,"card-link"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Zn.displayName="CardLink";const es=Zn,ts=["className","bsPrefix","as"],ns=it("h6"),ss=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r=ns}=e,i=Le(e,ts);return s=He(s,"card-subtitle"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});ss.displayName="CardSubtitle";const rs=ss,is=["className","bsPrefix","as"],as=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="p"}=e,i=Le(e,is);return s=He(s,"card-text"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});as.displayName="CardText";const os=as,ls=["className","bsPrefix","as"],cs=it("h5"),ds=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r=cs}=e,i=Le(e,ls);return s=He(s,"card-title"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});ds.displayName="CardTitle";const us=ds,hs=["bsPrefix","className","bg","text","border","body","children","as"],ms=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,bg:r,text:i,border:a,body:o=!1,children:l,as:c="div"}=e,d=Le(e,hs);const u=He(n,"card");return(0,De.jsx)(c,Pe(Pe({ref:t},d),{},{className:Oe()(s,u,r&&"bg-".concat(r),i&&"text-".concat(i),a&&"border-".concat(a)),children:o?(0,De.jsx)(In,{children:l}):l}))});ms.displayName="Card";const ps=Object.assign(ms,{Img:Xn,Title:us,Subtitle:rs,Body:In,Link:es,Text:os,Header:Gn,Footer:Bn,ImgOverlay:$n});var fs=Function.prototype.bind.call(Function.prototype.call,[].slice);function gs(e,t){return fs(e.querySelectorAll(t))}function vs(){const[,e]=(0,s.useReducer)(e=>e+1,0);return e}const xs=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const bs=function(e,t){return(0,s.useMemo)(()=>function(e,t){const n=xs(e),s=xs(t);return e=>{n&&n(e),s&&s(e)}}(e,t),[e,t])},ys=s.createContext(null);ys.displayName="NavContext";const ws=ys,js=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},_s=s.createContext(null),Ns=s.createContext(null);function ks(e){return"".concat("data-rr-ui-").concat(e)}const Cs=["as","active","eventKey"];function Ss(e){let{key:t,onClick:n,active:r,id:i,role:a,disabled:o}=e;const l=(0,s.useContext)(_s),c=(0,s.useContext)(ws),d=(0,s.useContext)(Ns);let u=r;const h={role:a};if(c){a||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=t?t:null),n=c.getControlledId(null!=t?t:null);h[ks("event-key")]=t,h.id=e||i,u=null==r&&null!=t?c.activeKey===t:r,!u&&(null!=d&&d.unmountOnExit||null!=d&&d.mountOnEnter)||(h["aria-controls"]=n)}return"tab"===h.role&&(h["aria-selected"]=u,u||(h.tabIndex=-1),o&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=ht(e=>{o||(null==n||n(e),null!=t&&l&&!e.isPropagationStopped()&&l(t,e))}),[h,{isActive:u}]}const As=s.forwardRef((e,t)=>{let{as:n=yt,active:s,eventKey:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Cs);const[a,o]=Ss(Object.assign({key:js(r,i.href),active:s},i));return a[ks("active")]=o.isActive,(0,De.jsx)(n,Object.assign({},i,a,{ref:t}))});As.displayName="NavItem";const Es=As,Ts=["as","onSelect","activeKey","role","onKeyDown"];const Ps=()=>{},Ms=ks("event-key"),Ls=s.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:i,role:a,onKeyDown:o}=e,l=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Ts);const c=vs(),d=(0,s.useRef)(!1),u=(0,s.useContext)(_s),h=(0,s.useContext)(Ns);let m,p;h&&(a=a||"tablist",i=h.activeKey,m=h.getControlledId,p=h.getControllerId);const f=(0,s.useRef)(null),g=e=>{const t=f.current;if(!t)return null;const n=gs(t,"[".concat(Ms,"]:not([aria-disabled=true])")),s=t.querySelector("[aria-selected=true]");if(!s||s!==document.activeElement)return null;const r=n.indexOf(s);if(-1===r)return null;let i=r+e;return i>=n.length&&(i=0),i<0&&(i=n.length-1),n[i]},v=(e,t)=>{null!=e&&(null==r||r(e,t),null==u||u(e,t))};(0,s.useEffect)(()=>{if(f.current&&d.current){const e=f.current.querySelector("[".concat(Ms,"][aria-selected=true]"));null==e||e.focus()}d.current=!1});const x=bs(t,f);return(0,De.jsx)(_s.Provider,{value:v,children:(0,De.jsx)(ws.Provider,{value:{role:a,activeKey:js(i),getControlledId:m||Ps,getControllerId:p||Ps},children:(0,De.jsx)(n,Object.assign({},l,{onKeyDown:e=>{if(null==o||o(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,c())},ref:x,role:a}))})})});Ls.displayName="Nav";const Rs=Object.assign(Ls,{Item:Es}),Os=s.createContext(null);Os.displayName="NavbarContext";const Ds=Os,Is=["className","bsPrefix","as"],Fs=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,Is);return s=He(s,"nav-item"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Fs.displayName="NavItem";const zs=Fs,Bs=["bsPrefix","className","as","active","eventKey","disabled"],Ws=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:r=_t,active:i,eventKey:a,disabled:o=!1}=e,l=Le(e,Bs);n=He(n,"nav-link");const[c,d]=Ss(Pe({key:js(a,l.href),active:i,disabled:o},l));return(0,De.jsx)(r,Pe(Pe(Pe({},l),c),{},{ref:t,disabled:o,className:Oe()(s,n,o&&"disabled",d.isActive&&"active")}))});Ws.displayName="NavLink";const Hs=Ws,Us=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Vs=s.forwardRef((e,t)=>{const n=Ze(e,{activeKey:"onSelect"}),{as:r="div",bsPrefix:i,variant:a,fill:o=!1,justify:l=!1,navbar:c,navbarScroll:d,className:u,activeKey:h}=n,m=Le(n,Us),p=He(i,"nav");let f,g,v=!1;const x=(0,s.useContext)(Ds),b=(0,s.useContext)(Hn);return x?(f=x.bsPrefix,v=null==c||c):b&&({cardHeaderBsPrefix:g}=b),(0,De.jsx)(Rs,Pe({as:r,ref:t,activeKey:h,className:Oe()(u,{[p]:!v,["".concat(f,"-nav")]:v,["".concat(f,"-nav-scroll")]:v&&d,["".concat(g,"-").concat(a)]:!!g,["".concat(p,"-").concat(a)]:!!a,["".concat(p,"-fill")]:o,["".concat(p,"-justified")]:l})},m))});Vs.displayName="Nav";const Gs=Object.assign(Vs,{Item:zs,Link:Hs}),qs=["as","bsPrefix","variant","size","active","disabled","className"],Ks=s.forwardRef((e,t)=>{let{as:n,bsPrefix:s,variant:r="primary",size:i,active:a=!1,disabled:o=!1,className:l}=e,c=Le(e,qs);const d=He(s,"btn"),[u,{tagName:h}]=xt(Pe({tagName:n,disabled:o},c)),m=h;return(0,De.jsx)(m,Pe(Pe(Pe({},u),c),{},{ref:t,disabled:o,className:Oe()(l,d,a&&"active",r&&"".concat(d,"-").concat(r),i&&"".concat(d,"-").concat(i),c.href&&o&&"disabled")}))});Ks.displayName="Button";const Xs=Ks;var Ys={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qs=s.createContext&&s.createContext(Ys),$s=function(){return $s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},$s.apply(this,arguments)},Js=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};function Zs(e){return e&&e.map(function(e,t){return s.createElement(e.tag,$s({key:t},e.attr),Zs(e.child))})}function er(e){return function(t){return s.createElement(tr,$s({attr:$s({},e.attr)},t),Zs(e.child))}}function tr(e){var t=function(t){var n,r=e.attr,i=e.size,a=e.title,o=Js(e,["attr","size","title"]),l=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),s.createElement("svg",$s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:n,style:$s($s({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&s.createElement("title",null,a),e.children)};return void 0!==Qs?s.createElement(Qs.Consumer,null,function(e){return t(e)}):t(Ys)}function nr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"}}]})(e)}function sr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function rr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function ir(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function ar(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(e)}function or(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function lr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(e)}function cr(e){return er({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"}}]})(e)}function dr(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(e)}function ur(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"}}]})(e)}function hr(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M560 288h-80v96l-32-21.3-32 21.3v-96h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16zm-384-64h224c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16h-80v96l-32-21.3L256 96V0h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16zm64 64h-80v96l-32-21.3L96 384v-96H16c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16z"}}]})(e)}function mr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"}}]})(e)}function pr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function fr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160H12c-6.627 0-12-5.373-12-12v-36c0-26.51 21.49-48 48-48h48V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h128V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h48c26.51 0 48 21.49 48 48v36c0 6.627-5.373 12-12 12zM12 192h424c6.627 0 12 5.373 12 12v260c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V204c0-6.627 5.373-12 12-12zm333.296 95.947l-28.169-28.398c-4.667-4.705-12.265-4.736-16.97-.068L194.12 364.665l-45.98-46.352c-4.667-4.705-12.266-4.736-16.971-.068l-28.397 28.17c-4.705 4.667-4.736 12.265-.068 16.97l82.601 83.269c4.667 4.705 12.265 4.736 16.97.068l142.953-141.805c4.705-4.667 4.736-12.265.068-16.97z"}}]})(e)}function gr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function vr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}]})(e)}function xr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(e)}function br(e){return er({tag:"svg",attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"}}]})(e)}function yr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function wr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function jr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function _r(e){return er({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function Nr(e){return er({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function kr(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"}}]})(e)}function Cr(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(e)}function Sr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function Ar(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function Er(e){return er({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"}}]})(e)}function Tr(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M160 224v64h320v-64c0-35.3 28.7-64 64-64h32c0-53-43-96-96-96H160c-53 0-96 43-96 96h32c35.3 0 64 28.7 64 64zm416-32h-32c-17.7 0-32 14.3-32 32v96H128v-96c0-17.7-14.3-32-32-32H64c-35.3 0-64 28.7-64 64 0 23.6 13 44 32 55.1V432c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-16h384v16c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16V311.1c19-11.1 32-31.5 32-55.1 0-35.3-28.7-64-64-64z"}}]})(e)}function Pr(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"}}]})(e)}function Mr(e){return er({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"}}]})(e)}function Lr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Rr(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function Or(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function Dr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 304H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32zm0-192H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function Ir(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"}}]})(e)}function Fr(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function zr(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function Br(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function Wr(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function Hr(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"}}]})(e)}function Ur(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function Vr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"}}]})(e)}function Gr(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M485.5 0L576 160H474.9L405.7 0h79.8zm-128 0l69.2 160H149.3L218.5 0h139zm-267 0h79.8l-69.2 160H0L90.5 0zM0 192h100.7l123 251.7c1.5 3.1-2.7 5.9-5 3.3L0 192zm148.2 0h279.6l-137 318.2c-1 2.4-4.5 2.4-5.5 0L148.2 192zm204.1 251.7l123-251.7H576L357.3 446.9c-2.3 2.7-6.5-.1-5-3.2z"}}]})(e)}function qr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}}]})(e)}function Kr(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function Xr(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"}}]})(e)}function Yr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(e)}function Qr(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"}}]})(e)}function $r(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"}}]})(e)}function Jr(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function Zr(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function ei(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function ti(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(e)}function ni(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]})(e)}function si(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(e)}function ri(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"}}]})(e)}function ii(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(e)}function ai(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function oi(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function li(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}}]})(e)}function ci(e){return er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}}]})(e)}function di(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"}}]})(e)}function ui(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]})(e)}function hi(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M635.7 167.2L556.1 31.7c-8.8-15-28.3-20.1-43.5-11.5l-69 39.1L503.3 161c2.2 3.8.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9L416 75l-55.2 31.3 27.9 47.4c2.2 3.8.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9L333.2 122 278 153.3 337.8 255c2.2 3.7.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9l-59.7-101.7-55.2 31.3 27.9 47.4c2.2 3.8.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9l-27.9-47.5-55.2 31.3 59.7 101.7c2.2 3.7.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9L84.9 262.9l-69 39.1C.7 310.7-4.6 329.8 4.2 344.8l79.6 135.6c8.8 15 28.3 20.1 43.5 11.5L624.1 210c15.2-8.6 20.4-27.8 11.6-42.8z"}}]})(e)}function mi(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function pi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(e)}function fi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(e)}function gi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function vi(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function xi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function bi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 416h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-128-64h-48V48a16 16 0 0 0-16-16H80a16 16 0 0 0-16 16v304H16c-14.19 0-21.37 17.24-11.29 27.31l80 96a16 16 0 0 0 22.62 0l80-96C197.35 369.26 190.22 352 176 352zm256-192H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-64 128H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM496 32H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(e)}function yi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 416h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h48v304a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16V160h48c14.21 0 21.38-17.24 11.31-27.31l-80-96a16 16 0 0 0-22.62 0l-80 96C-5.35 142.74 1.77 160 16 160zm416 0H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-64 128H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM496 32H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(e)}function wi(e){return er({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}}]})(e)}function ji(e){return er({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"}}]})(e)}function _i(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)}function Ni(e){return er({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(e)}function ki(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M312 320h136V56c0-13.3-10.7-24-24-24H24C10.7 32 0 42.7 0 56v400c0 13.3 10.7 24 24 24h264V344c0-13.2 10.8-24 24-24zm129 55l-98 98c-4.5 4.5-10.6 7-17 7h-6V352h128v6.1c0 6.3-2.5 12.4-7 16.9z"}}]})(e)}function Ci(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"}}]})(e)}function Si(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"}}]})(e)}function Ai(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}}]})(e)}function Ei(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function Ti(e){return er({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function Pi(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function Mi(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function Li(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"}}]})(e)}function Ri(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"}}]})(e)}function Oi(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Di(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"}}]})(e)}function Ii(e){return er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Fi(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(e)}function zi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"}}]})(e)}function Bi(e){return er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M504 352H136.4c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0 96H136.1c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0-192H136.6c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm106.5-139L338.4 3.7a48.15 48.15 0 0 0-36.9 0L29.5 117C11.7 124.5 0 141.9 0 161.3V504c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V256c0-17.6 14.6-32 32.6-32h382.8c18 0 32.6 14.4 32.6 32v248c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V161.3c0-19.4-11.7-36.8-29.5-44.3z"}}]})(e)}function Wi(e){return er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}}]})(e)}const Hi=["bsPrefix","variant","animation","size","as","className"],Ui=s.forwardRef((e,t)=>{let{bsPrefix:n,variant:s,animation:r="border",size:i,as:a="div",className:o}=e,l=Le(e,Hi);n=He(n,"spinner");const c="".concat(n,"-").concat(r);return(0,De.jsx)(a,Pe(Pe({ref:t},l),{},{className:Oe()(o,c,i&&"".concat(c,"-").concat(i),s&&"text-".concat(s))}))});Ui.displayName="Spinner";const Vi=Ui,Gi=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],qi=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,striped:r,bordered:i,borderless:a,hover:o,size:l,variant:c,responsive:d}=e,u=Le(e,Gi);const h=He(n,"table"),m=Oe()(s,h,c&&"".concat(h,"-").concat(c),l&&"".concat(h,"-").concat(l),r&&"".concat(h,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),i&&"".concat(h,"-bordered"),a&&"".concat(h,"-borderless"),o&&"".concat(h,"-hover")),p=(0,De.jsx)("table",Pe(Pe({},u),{},{className:m,ref:t}));if(d){let e="".concat(h,"-responsive");return"string"===typeof d&&(e="".concat(e,"-").concat(d)),(0,De.jsx)("div",{className:e,children:p})}return p});qi.displayName="Table";const Ki=qi,Xi=e=>{let{customers:t,loading:n,onEdit:s,onDelete:r}=e;return n?(0,De.jsxs)("div",{className:"text-center my-4",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("div",{className:"text-muted mt-2",children:"Loading customers..."})]}):t&&0!==t.length?(0,De.jsxs)(Ki,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Customer Name"}),(0,De.jsx)("th",{children:"Phone"}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsx)("th",{children:"Address"}),(0,De.jsx)("th",{children:"Orders"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:t.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.name}),(0,De.jsx)("td",{children:e.phone}),(0,De.jsx)("td",{children:e.email}),(0,De.jsx)("td",{children:e.address}),(0,De.jsx)("td",{children:e.orders_count||0}),(0,De.jsxs)("td",{children:[(0,De.jsx)(Xs,{size:"sm",variant:"outline-secondary",onClick:()=>s(e),className:"me-2",children:(0,De.jsx)(Rr,{})}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>r(e),children:(0,De.jsx)(Pi,{})})]})]},e.id))})]}):(0,De.jsx)("div",{className:"text-center text-muted my-4",children:"No customers found."})},Yi=e=>{let{payments:t,loading:n}=e;return n?(0,De.jsxs)("div",{className:"text-center my-4",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("div",{className:"text-muted mt-2",children:"Loading payments..."})]}):t&&0!==t.length?(0,De.jsxs)(Ki,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Payment #"}),(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Amount"}),(0,De.jsx)("th",{children:"Method"}),(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:t.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.id}),(0,De.jsx)("td",{children:e.order_number||e.order}),(0,De.jsx)("td",{children:e.amount}),(0,De.jsx)("td",{children:e.payment_method||e.method}),(0,De.jsx)("td",{children:e.payment_date||e.date}),(0,De.jsx)("td",{children:e.status||"-"}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"text-muted",children:"(Actions)"})})]},e.id))})]}):(0,De.jsx)("div",{className:"text-center text-muted my-4",children:"No payments found."})},Qi=e=>{let{reports:t,loading:n}=e;return n?(0,De.jsxs)("div",{className:"text-center my-4",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("div",{className:"text-muted mt-2",children:"Loading reports..."})]}):t&&0!==t.length?(0,De.jsxs)(Ki,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Report"}),(0,De.jsx)("th",{children:"Value"}),(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:t.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.name||e.report}),(0,De.jsx)("td",{children:e.value}),(0,De.jsx)("td",{children:e.date}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"text-muted",children:"(Actions)"})})]},e.id))})]}):(0,De.jsx)("div",{className:"text-center text-muted my-4",children:"No reports found."})},$i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"https://internaloox-1.onrender.com/api";async function Ji(e){let{method:t="GET",data:n,isForm:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="".concat($i).concat(e),i={method:t,headers:{}},a=localStorage.getItem("oox_token");a&&(i.headers.Authorization="Bearer ".concat(a)),n&&(s?i.body=n:(i.headers["Content-Type"]="application/json",i.body=JSON.stringify(n)));const o=await fetch(r,i);if(!o.ok){let e="Unknown error",t={};try{if(t=await o.json(),e=t.error||t.detail||o.statusText,400===o.status&&"object"===typeof t&&!t.error){const n=[];Object.keys(t).forEach(e=>{(Array.isArray(t[e])?t[e]:[t[e]]).forEach(t=>{n.push("".concat(e,": ").concat(t))})}),n.length>0&&(e=n.join("; "))}400===o.status&&t.required_fields&&(e+=" (Required: ".concat(t.required_fields.join(", "),")")),400===o.status&&t.valid_roles&&(e+=" (Valid roles: ".concat(t.valid_roles.join(", "),")")),403===o.status&&t.required_role&&(e+=" (Required role: ".concat(t.required_role,")"))}catch(l){}const n=new Error(e);throw n.status=o.status,n.data=t,n}return o.json()}const Zi=()=>Ji("/orders/"),ea=(e,t)=>Ji("/orders/".concat(e,"/"),{method:"PUT",data:t}),ta=()=>Ji("/orders/management_data/"),na=e=>Ji("/orders/".concat(e,"/advance_workflow/"),{method:"POST"}),sa=(e,t)=>Ji("/orders/".concat(e,"/update_status/"),{method:"PATCH",data:t}),ra=(e,t)=>Ji("/orders/".concat(e,"/update_payment/"),{method:"PATCH",data:t}),ia=()=>Ji("/customers/"),aa=e=>Ji("/customers/",{method:"POST",data:e}),oa=function(e){return Ji("/payment-proofs/",{method:"POST",data:e,isForm:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})},la=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t&&null!==t&&""!==t});if(0===t.length)return"";const n=t.map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");return"?".concat(n)},ca=function(){const e=la(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return Ji("/payments/transactions/".concat(e))},da=e=>"".concat($i,"/payment-proofs/").concat(e,"/file/"),ua=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Ji("/payment-proofs/".concat(e,"/signed_url/?expires=").concat(t))},ha=()=>Ji("/users/users/"),ma=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?e.startsWith("?")?e:"?".concat(e):"";return Ji("/users/users/".concat(t))},pa=()=>Ji("/users/users/warehouse_workers/"),fa=e=>Ji("/users/users/",{method:"POST",data:e}),ga=(e,t)=>Ji("/users/users/".concat(e,"/"),{method:"PUT",data:t}),va=e=>Ji("/users/users/".concat(e,"/"),{method:"DELETE"}),xa=()=>Ji("/products/"),ba=()=>Ji("/color-references/"),ya=()=>Ji("/fabric-references/"),wa=(e,t)=>Ji("/products/".concat(e,"/"),{method:"PUT",data:t}),ja=(e,t)=>Ji("/orders/".concat(e,"/update_production_status/"),{method:"POST",data:t}),_a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ji("/tasks/tasks/".concat(e,"/perform_action/"),{method:"POST",data:Pe({action:t},n)})},Na=()=>Ji("/tasks/dashboard/worker_dashboard/"),ka=()=>Ji("/tasks/dashboard/supervisor_dashboard/"),Ca=()=>Ji("/orders/warehouse_orders/"),Sa=e=>Ji("/orders/".concat(e,"/order_details_for_tasks/")),Aa=(e,t)=>Ji("/orders/".concat(e,"/assign_tasks_to_order/"),{method:"POST",data:t}),Ea=()=>Ji("/inventory/materials/"),Ta=()=>Ji("/inventory/materials/warehouse_dashboard/"),Pa=()=>Ji("/inventory/materials/low_stock/"),Ma=()=>Ji("/inventory/material-categories/"),La=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?e.startsWith("?")?e:"?".concat(e):"";return Ji("/tasks/task_types/".concat(t))},Ra=()=>Ji("/tasks/templates/"),Oa=e=>Ji(e&&"all"!==e?"/tasks/tasks/?status=".concat(e):"/tasks/tasks/"),Da=async e=>{switch(e){case"warehouse":case"admin":case"owner":return await ka();default:return await Na()}},Ia=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return{success:!0,data:await _a(e,t,n)}}catch(s){return{success:!1,error:s.message}}},Fa=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ji("/tasks/tasks/".concat(e,"/manager_action/"),{method:"POST",data:Pe({action:t},n)})},za=e=>{let{user:t,onLogout:n}=e;const r=Z(),[i,a]=(0,s.useState)("overview"),[o,l]=(0,s.useState)(new Date),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)("");(0,s.useEffect)(()=>{const e=setInterval(()=>l(new Date),6e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{_();const e=setInterval(_,3e4);return()=>clearInterval(e)},[]);const _=async()=>{x(!0);try{const[e,t,n,s]=await Promise.all([Zi(),ia(),Ji("/payment-proofs/"),ha()]);d(e.results||e),h(t.results||t),p(n.results||n),g(s.results||s)}catch(zP){y(zP.message)}finally{x(!1)}},N=()=>{var e;return(0,De.jsx)("div",{className:"admin-header mb-4",style:{background:"linear-gradient(135deg, #64748b 0%, #475569 100%)",color:"white",borderRadius:"15px",padding:"2rem",boxShadow:"0 10px 25px rgba(100, 116, 139, 0.2)",border:"2px solid #3b82f6"},children:(0,De.jsxs)(Sn,{className:"align-items-center",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,De.jsx)("div",{className:"p-3 rounded-circle me-3",style:{backgroundColor:"#3b82f6",color:"white"},children:(0,De.jsx)(Di,{size:35})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"mb-0",style:{fontWeight:"700",fontSize:"2.3rem",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"OOX Operations Control"}),(0,De.jsxs)("p",{className:"mb-0 text-primary",style:{fontSize:"1.1rem",fontWeight:"500",color:"#93c5fd !important"},children:["OOX Furniture Admin Dashboard \u2022 ",o.toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]})}),(0,De.jsx)(Pn,{md:4,className:"text-end",children:(0,De.jsxs)("div",{className:"d-flex flex-column",children:[(0,De.jsxs)(Rn,{style:{backgroundColor:"#3b82f6",color:"white",fontSize:"0.9rem",padding:"8px 16px",borderRadius:"25px",marginBottom:"8px"},children:[(0,De.jsx)(Di,{className:"me-2"}),(null===t||void 0===t?void 0:t.first_name)||"Admin"," \u2022 ",null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.toUpperCase()]}),(0,De.jsxs)("div",{style:{color:"#e2e8f0",fontSize:"1rem",fontWeight:"600"},children:[(0,De.jsx)(Sr,{className:"me-2"}),o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})})]})})},k=e=>{let{title:t,value:n,icon:r,color:i,bgColor:a,change:o}=e;return(0,De.jsx)(ps,{className:"h-100 shadow-sm border-0",style:{background:"linear-gradient(135deg, ".concat(a,"15 0%, ").concat(a,"05 100%)"),borderLeft:"4px solid ".concat(i),borderRadius:"12px"},children:(0,De.jsxs)(ps.Body,{className:"p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h3",{className:"mb-1",style:{fontWeight:"700",color:i,fontSize:"2.2rem",fontFamily:"monospace"},children:n}),(0,De.jsx)("p",{className:"mb-0",style:{fontSize:"0.9rem",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},children:t})]}),(0,De.jsx)("div",{className:"p-3 rounded-circle",style:{backgroundColor:"".concat(i,"20")},children:s.createElement(r,{size:30,color:i})})]}),void 0!==o&&(0,De.jsxs)("div",{className:"small ".concat(o>=0?"text-success":"text-danger"),children:[o>=0?"\u2197":"\u2198"," ",Math.abs(o),"% from last month"]})]})})},C=()=>{const e=c.slice(0,5);return(0,De.jsxs)(ps,{className:"h-100 shadow-sm",children:[(0,De.jsxs)(ps.Header,{className:"bg-info text-white d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(lr,{className:"me-2"}),"Recent Activity"]}),(0,De.jsx)(Rn,{bg:"light",text:"dark",children:"LIVE"})]}),(0,De.jsx)(ps.Body,{style:{maxHeight:"300px",overflowY:"auto"},children:e.map((e,t)=>{var n;return(0,De.jsxs)("div",{className:"d-flex align-items-center mb-3 p-2",children:[(0,De.jsx)("div",{className:"me-3",children:(0,De.jsx)("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"35px",height:"35px",fontSize:"0.8rem"},children:t+1})}),(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("div",{className:"fw-bold small",children:e.order_number}),(0,De.jsxs)("small",{className:"text-muted",children:[null===(n=e.customer)||void 0===n?void 0:n.name," \u2022 ",new Date(e.created_at).toLocaleDateString()]})]}),(0,De.jsx)(Rn,{bg:"completed"===e.production_status||"order_ready"===e.order_status?"success":"in_production"===e.production_status?"warning":"secondary",className:"small",children:"completed"===e.production_status?"COMPLETED":"order_ready"===e.order_status?"ORDER READY":(e.production_status||"pending").replace("_"," ").toUpperCase()})]},e.id)})})]})},S=()=>(0,De.jsx)(Gs,{variant:"pills",className:"mb-4 flex-nowrap",style:{overflowX:"auto"},children:[{key:"overview",label:"Overview",icon:vr,isTab:!0},{key:"orders",label:"Orders",icon:Cr,isTab:!1,route:"/admin/orders"},{key:"customers",label:"Customers",icon:Wr,isTab:!1,route:"/admin/customers"},{key:"payments",label:"Payments",icon:ti,isTab:!1,route:"/admin/payments"},{key:"reports",label:"Reports",icon:Wr,isTab:!1,route:"/admin/warehouse"}].map(e=>(0,De.jsxs)(Gs.Link,{active:i===e.key,onClick:()=>e.isTab?a(e.key):r(e.route),className:"d-flex align-items-center text-nowrap me-2",style:{backgroundColor:i===e.key?"#3b82f6":"transparent",color:i===e.key?"white":"#64748b",border:"2px solid ".concat(i===e.key?"#3b82f6":"#e2e8f0"),borderRadius:"20px",padding:"10px 20px",fontWeight:"600"},children:[(0,De.jsx)(e.icon,{className:"me-2"}),e.label]},e.key))});return v?(0,De.jsx)(Xe,{fluid:!0,className:"p-4",children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("div",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading admin dashboard..."})]})}):(0,De.jsxs)(Xe,{fluid:!0,className:"admin-dashboard",style:{backgroundColor:"#f8fafc",minHeight:"100vh",padding:"1rem"},children:[(0,De.jsx)(N,{}),(0,De.jsx)(Sn,{className:"mb-4",children:(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsx)(ps.Body,{className:"py-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h5",{className:"mb-0 text-primary",children:[(0,De.jsx)(Cr,{className:"me-2"}),"Quick Actions"]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"primary",size:"lg",onClick:()=>r("/admin/orders"),className:"d-flex align-items-center",children:[(0,De.jsx)(Cr,{className:"me-2"}),"Manage Orders"]}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:()=>r("/admin/customers"),children:[(0,De.jsx)(oi,{className:"me-1"}),"Add Customer"]}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>r("/admin/deliveries"),children:"Deliveries"}),(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>r("/admin/transactions"),children:"Transactions"}),(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>r("/admin/warehouse"),children:"Warehouse Overview"})]})]})})})})}),(0,De.jsx)(S,{}),b&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>y(""),children:b}),w&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>j(""),children:w}),"overview"===i&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{xl:4,md:6,className:"mb-3",children:(0,De.jsx)(k,{title:"In Production",value:c.filter(e=>"in_production"===e.production_status).length,icon:Cr,color:"#3b82f6",bgColor:"#3b82f6"})}),(0,De.jsx)(Pn,{xl:4,md:6,className:"mb-3",children:(0,De.jsx)(k,{title:"Ready for Delivery",value:c.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,icon:yr,color:"#10b981",bgColor:"#10b981"})}),(0,De.jsx)(Pn,{xl:4,md:12,className:"mb-3",children:(0,De.jsx)(k,{title:"Deposit Pending",value:c.filter(e=>"deposit_pending"===e.payment_status||"deposit_pending"===e.order_status).length,icon:Fr,color:"#f59e0b",bgColor:"#f59e0b"})})]}),(0,De.jsx)(Sn,{className:"mb-4",children:(0,De.jsx)(Pn,{lg:12,children:(0,De.jsx)(ps,{className:"shadow-sm border-success",children:(0,De.jsxs)(ps.Body,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:"Warehouse Analytics"}),(0,De.jsx)("div",{className:"text-muted",children:"View low stock, production snapshot, and task overview"})]}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>r("/admin/warehouse"),children:"Open"})]})})})}),(0,De.jsx)(Sn,{className:"mb-4",children:(0,De.jsx)(Pn,{lg:12,className:"mb-3",children:(0,De.jsx)(C,{})})})]}),"customers"===i&&(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-success text-white",children:(0,De.jsx)("h5",{className:"mb-0",children:"Customer Management"})}),(0,De.jsx)(ps.Body,{children:(0,De.jsx)(Xi,{customers:u,loading:v})})]}),"payments"===i&&(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-warning text-dark",children:(0,De.jsx)("h5",{className:"mb-0",children:"Payment Tracking"})}),(0,De.jsx)(ps.Body,{children:(0,De.jsx)(Yi,{payments:m,loading:v})})]}),"reports"===i&&(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-secondary text-white",children:(0,De.jsx)("h5",{className:"mb-0",children:"Reports & Analytics"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("div",{className:"text-muted mb-3",children:"Warehouse reports only"}),(0,De.jsx)(Qi,{reports:c.map(e=>({id:e.id,name:"Order ".concat(e.order_number," \u2022 ").concat(e.production_status||e.order_status),value:e.total_amount||"-",date:new Date(e.created_at).toLocaleDateString()})),loading:v})]})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .admin-dashboard {\n          font-family: 'Inter', sans-serif;\n        }\n        .admin-header {\n          animation: slideInDown 0.8s ease-out;\n        }\n        @keyframes slideInDown {\n          from {\n            opacity: 0;\n            transform: translateY(-30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        .card {\n          transition: transform 0.2s ease, box-shadow 0.2s ease;\n        }\n        .card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;\n        }\n        .nav-link {\n          transition: all 0.2s ease;\n        }\n        .nav-link:hover {\n          transform: translateY(-1px);\n        }\n        @media (max-width: 768px) {\n          .admin-header {\n            padding: 1.5rem !important;\n          }\n          .admin-header h1 {\n            font-size: 1.8rem !important;\n          }\n        }\n      "})]})};var Ba;function Wa(e){if((!Ba&&0!==Ba||e)&&Kt){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Ba=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ba}function Ha(e){const t=function(e){const t=(0,s.useRef)(e);return t.current=e,t}(e);(0,s.useEffect)(()=>()=>t.current(),[])}function Ua(e){void 0===e&&(e=Bt());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(zP){return e.body}}function Va(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Ga(e){const t=function(e){const t=(0,s.useRef)(e);return t.current=e,t}(e);(0,s.useEffect)(()=>()=>t.current(),[])}const qa=ks("modal-open");const Ka=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[n]:s.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(qt(s,n)||"0",10)+e.scrollBarWidth,"px")),s.setAttribute(qa,""),qt(s,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(qa),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Xa=(0,s.createContext)(Kt?window:void 0);Xa.Provider;function Ya(){return(0,s.useContext)(Xa)}const Qa=(e,t)=>Kt?null==e?(t||Bt()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function $a(e,t){const n=Ya(),[r,i]=(0,s.useState)(()=>Qa(e,null==n?void 0:n.document));if(!r){const t=Qa(e);t&&i(t)}return(0,s.useEffect)(()=>{t&&r&&t(r)},[t,r]),(0,s.useEffect)(()=>{const t=Qa(e);t!==r&&i(t)},[e,r]),r}const Ja=function(e){let{children:t,in:n,onExited:r,mountOnEnter:i,unmountOnExit:a}=e;const o=(0,s.useRef)(null),l=(0,s.useRef)(n),c=ht(r);(0,s.useEffect)(()=>{n?l.current=!0:c(o.current)},[n,c]);const d=bs(o,zt(t)),u=(0,s.cloneElement)(t,{ref:d});return n?u:a||!l.current&&i?null:u},Za=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const eo=["component"];const to=s.forwardRef((e,t)=>{let{component:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,eo);const i=function(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:i,onExiting:a,onExited:o,addEndListener:l,children:c}=e,d=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Za);const u=(0,s.useRef)(null),h=bs(u,zt(c)),m=e=>t=>{e&&u.current&&e(u.current,t)},p=(0,s.useCallback)(m(t),[t]),f=(0,s.useCallback)(m(n),[n]),g=(0,s.useCallback)(m(r),[r]),v=(0,s.useCallback)(m(i),[i]),x=(0,s.useCallback)(m(a),[a]),b=(0,s.useCallback)(m(o),[o]),y=(0,s.useCallback)(m(l),[l]);return Object.assign({},d,{nodeRef:u},t&&{onEnter:p},n&&{onEntering:f},r&&{onEntered:g},i&&{onExit:v},a&&{onExiting:x},o&&{onExited:b},l&&{addEndListener:y},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:h})):(0,s.cloneElement)(c,{ref:h})})}(r);return(0,De.jsx)(n,Object.assign({ref:t},i))}),no=to;function so(e){let{children:t,in:n,onExited:r,onEntered:i,transition:a}=e;const[o,l]=(0,s.useState)(!n);n&&o&&l(!1);const c=function(e){let{in:t,onTransition:n}=e;const r=(0,s.useRef)(null),i=(0,s.useRef)(!0),a=ht(n);return gt(()=>{if(!r.current)return;let e=!1;return a({in:t,element:r.current,initial:i.current,isStale:()=>e}),()=>{e=!0}},[t,a]),gt(()=>(i.current=!1,()=>{i.current=!0}),[]),r}({in:!!n,onTransition:e=>{Promise.resolve(a(e)).then(()=>{e.isStale()||(e.in?null==i||i(e.element,e.initial):(l(!0),null==r||r(e.element)))},t=>{throw e.in||l(!0),t})}}),d=bs(c,zt(t));return o&&!n?null:(0,s.cloneElement)(t,{ref:d})}function ro(e,t,n){return e?(0,De.jsx)(no,Object.assign({},n,{component:e})):t?(0,De.jsx)(so,Object.assign({},n,{transition:t})):(0,De.jsx)(Ja,Object.assign({},n))}const io=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let ao;function oo(e){const t=Ya(),n=e||function(e){return ao||(ao=new Ka({ownerDocument:null==e?void 0:e.document})),ao}(t),r=(0,s.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:(0,s.useCallback)(e=>{r.current.dialog=e},[]),setBackdropRef:(0,s.useCallback)(e=>{r.current.backdrop=e},[])})}const lo=(0,s.forwardRef)((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:a,children:o,backdrop:l=!0,keyboard:c=!0,onBackdropClick:d,onEscapeKeyDown:u,transition:h,runTransition:m,backdropTransition:p,runBackdropTransition:f,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:x=!0,restoreFocusOptions:b,renderDialog:y,renderBackdrop:w=e=>(0,De.jsx)("div",Object.assign({},e)),manager:j,container:_,onShow:N,onHide:k=()=>{},onExit:C,onExited:S,onExiting:A,onEnter:E,onEntering:T,onEntered:P}=e,M=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,io);const L=Ya(),R=$a(_),O=oo(j),D=mt(),I=pt(n),[F,z]=(0,s.useState)(!n),B=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,()=>O,[O]),Kt&&!I&&n&&(B.current=Ua(null==L?void 0:L.document)),n&&F&&z(!1);const W=ht(()=>{if(O.add(),K.current=Zt(document,"keydown",G),q.current=Zt(document,"focus",()=>setTimeout(U),!0),N&&N(),g){var e,t;const n=Ua(null!=(e=null==(t=O.dialog)?void 0:t.ownerDocument)?e:null==L?void 0:L.document);O.dialog&&n&&!Va(O.dialog,n)&&(B.current=n,O.dialog.focus())}}),H=ht(()=>{var e;(O.remove(),null==K.current||K.current(),null==q.current||q.current(),x)&&(null==(e=B.current)||null==e.focus||e.focus(b),B.current=null)});(0,s.useEffect)(()=>{n&&R&&W()},[n,R,W]),(0,s.useEffect)(()=>{F&&H()},[F,H]),Ga(()=>{H()});const U=ht(()=>{if(!v||!D()||!O.isTopModal())return;const e=Ua(null==L?void 0:L.document);O.dialog&&e&&!Va(O.dialog,e)&&O.dialog.focus()}),V=ht(e=>{e.target===e.currentTarget&&(null==d||d(e),!0===l&&k())}),G=ht(e=>{c&&Ft(e)&&O.isTopModal()&&(null==u||u(e),e.defaultPrevented||k())}),q=(0,s.useRef)(),K=(0,s.useRef)();if(!R)return null;const X=Object.assign({role:r,ref:O.setDialogRef,"aria-modal":"dialog"===r||void 0},M,{style:a,className:i,tabIndex:-1});let Y=y?y(X):(0,De.jsx)("div",Object.assign({},X,{children:s.cloneElement(o,{role:"document"})}));Y=ro(h,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:C,onExiting:A,onExited:function(){z(!0),null==S||S(...arguments)},onEnter:E,onEntering:T,onEntered:P,children:Y});let Q=null;return l&&(Q=w({ref:O.setBackdropRef,onClick:V}),Q=ro(p,f,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Q})),(0,De.jsx)(De.Fragment,{children:we.createPortal((0,De.jsxs)(De.Fragment,{children:[Q,Y]}),R)})});lo.displayName="Modal";const co=Object.assign(lo,{Manager:Ka});function uo(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}function ho(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const mo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",po=".sticky-top",fo=".navbar-toggler";class go extends Ka{adjustAndStore(e,t,n){const s=t.style[e];t.dataset[e]=s,qt(t,{[e]:"".concat(parseFloat(qt(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],qt(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,s;if(s="modal-open",(n=t).classList?n.classList.add(s):uo(n,s)||("string"===typeof n.className?n.className=n.className+" "+s:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+s)),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";gs(t,mo).forEach(t=>this.adjustAndStore(r,t,e.scrollBarWidth)),gs(t,po).forEach(t=>this.adjustAndStore(i,t,-e.scrollBarWidth)),gs(t,fo).forEach(t=>this.adjustAndStore(i,t,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,s;s="modal-open",(n=t).classList?n.classList.remove(s):"string"===typeof n.className?n.className=ho(n.className,s):n.setAttribute("class",ho(n.className&&n.className.baseVal||"",s));const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";gs(t,mo).forEach(e=>this.restore(r,e)),gs(t,po).forEach(e=>this.restore(i,e)),gs(t,fo).forEach(e=>this.restore(i,e))}}let vo;function xo(e){return vo||(vo=new go(e)),vo}const bo=go,yo=["className","bsPrefix","as"],wo=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,yo);return s=He(s,"modal-body"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});wo.displayName="ModalBody";const jo=wo,_o=s.createContext({onHide(){}}),No=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],ko=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,contentClassName:r,centered:i,size:a,fullscreen:o,children:l,scrollable:c}=e,d=Le(e,No);n=He(n,"modal");const u="".concat(n,"-dialog"),h="string"===typeof o?"".concat(n,"-fullscreen-").concat(o):"".concat(n,"-fullscreen");return(0,De.jsx)("div",Pe(Pe({},d),{},{ref:t,className:Oe()(u,s,a&&"".concat(n,"-").concat(a),i&&"".concat(u,"-centered"),c&&"".concat(u,"-scrollable"),o&&h),children:(0,De.jsx)("div",{className:Oe()("".concat(n,"-content"),r),children:l})}))});ko.displayName="ModalDialog";const Co=ko,So=["className","bsPrefix","as"],Ao=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,So);return s=He(s,"modal-footer"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Ao.displayName="ModalFooter";const Eo=Ao,To=["closeLabel","closeVariant","closeButton","onHide","children"],Po=s.forwardRef((e,t)=>{let{closeLabel:n="Close",closeVariant:r,closeButton:i=!1,onHide:a,children:o}=e,l=Le(e,To);const c=(0,s.useContext)(_o),d=rt(()=>{null==c||c.onHide(),null==a||a()});return(0,De.jsxs)("div",Pe(Pe({ref:t},l),{},{children:[o,i&&(0,De.jsx)(wn,{"aria-label":n,variant:r,onClick:d})]}))});Po.displayName="AbstractModalHeader";const Mo=Po,Lo=["bsPrefix","className","closeLabel","closeButton"],Ro=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,closeLabel:r="Close",closeButton:i=!1}=e,a=Le(e,Lo);return n=He(n,"modal-header"),(0,De.jsx)(Mo,Pe(Pe({ref:t},a),{},{className:Oe()(s,n),closeLabel:r,closeButton:i}))});Ro.displayName="ModalHeader";const Oo=Ro,Do=["className","bsPrefix","as"],Io=it("h4"),Fo=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r=Io}=e,i=Le(e,Do);return s=He(s,"modal-title"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Fo.displayName="ModalTitle";const zo=Fo,Bo=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Wo(e){return(0,De.jsx)(fn,Pe(Pe({},e),{},{timeout:null}))}function Ho(e){return(0,De.jsx)(fn,Pe(Pe({},e),{},{timeout:null}))}const Uo=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,style:i,dialogClassName:a,contentClassName:o,children:l,dialogAs:c=Co,"data-bs-theme":d,"aria-labelledby":u,"aria-describedby":h,"aria-label":m,show:p=!1,animation:f=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:x,onShow:b,onHide:y,container:w,autoFocus:j=!0,enforceFocus:_=!0,restoreFocus:N=!0,restoreFocusOptions:k,onEntered:C,onExit:S,onExiting:A,onEnter:E,onEntering:T,onExited:P,backdropClassName:M,manager:L}=e,R=Le(e,Bo);const[O,D]=(0,s.useState)({}),[I,F]=(0,s.useState)(!1),z=(0,s.useRef)(!1),B=(0,s.useRef)(!1),W=(0,s.useRef)(null),[H,U]=(0,s.useState)(null),V=on(t,U),G=rt(y),q=Ge();n=He(n,"modal");const K=(0,s.useMemo)(()=>({onHide:G}),[G]);function X(){return L||xo({isRTL:q})}function Y(e){if(!Kt)return;const t=X().getScrollbarWidth()>0,n=e.scrollHeight>Bt(e).documentElement.clientHeight;D({paddingRight:t&&!n?Wa():void 0,paddingLeft:!t&&n?Wa():void 0})}const Q=rt(()=>{H&&Y(H.dialog)});Ha(()=>{Jt(window,"resize",Q),null==W.current||W.current()});const $=()=>{z.current=!0},J=e=>{z.current&&H&&e.target===H.dialog&&(B.current=!0),z.current=!1},Z=()=>{F(!0),W.current=tn(H.dialog,()=>{F(!1)})},ee=e=>{"static"!==g?B.current||e.target!==e.currentTarget?B.current=!1:null==y||y():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,s.useCallback)(e=>(0,De.jsx)("div",Pe(Pe({},e),{},{className:Oe()("".concat(n,"-backdrop"),M,!f&&"show")})),[f,M,n]),ne=Pe(Pe({},i),O);ne.display="block";return(0,De.jsx)(_o.Provider,{value:K,children:(0,De.jsx)(co,{show:p,ref:V,backdrop:g,container:w,keyboard:!0,autoFocus:j,enforceFocus:_,restoreFocus:N,restoreFocusOptions:k,onEscapeKeyDown:e=>{v?null==x||x(e):(e.preventDefault(),"static"===g&&Z())},onShow:b,onHide:y,onEnter:(e,t)=>{e&&Y(e),null==E||E(e,t)},onEntering:(e,t)=>{null==T||T(e,t),$t(window,"resize",Q)},onEntered:C,onExit:e=>{null==W.current||W.current(),null==S||S(e)},onExiting:A,onExited:e=>{e&&(e.style.display=""),null==P||P(e),Jt(window,"resize",Q)},manager:X(),transition:f?Wo:void 0,backdropTransition:f?Ho:void 0,renderBackdrop:te,renderDialog:e=>(0,De.jsx)("div",Pe(Pe({role:"dialog"},e),{},{style:ne,className:Oe()(r,n,I&&"".concat(n,"-static"),!f&&"show"),onClick:g?ee:void 0,onMouseUp:J,"data-bs-theme":d,"aria-label":m,"aria-labelledby":u,"aria-describedby":h,children:(0,De.jsx)(c,Pe(Pe({},R),{},{onMouseDown:$,className:a,contentClassName:o,children:l}))}))})})});Uo.displayName="Modal";const Vo=Object.assign(Uo,{Body:jo,Header:Oo,Title:zo,Footer:Eo,Dialog:Co,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function Go(e,t){let n=0;return s.Children.map(e,e=>s.isValidElement(e)?t(e,n++):e)}const qo=["min","now","max","label","visuallyHidden","striped","animated","className","style","variant","bsPrefix"],Ko=["isChild"],Xo=["min","now","max","label","visuallyHidden","striped","animated","bsPrefix","variant","className","children"];function Yo(e,t,n){const s=(e-t)/(n-t)*100;return Math.round(1e3*s)/1e3}function Qo(e,t){let{min:n,now:s,max:r,label:i,visuallyHidden:a,striped:o,animated:l,className:c,style:d,variant:u,bsPrefix:h}=e,m=Le(e,qo);return(0,De.jsx)("div",Pe(Pe({ref:t},m),{},{role:"progressbar",className:Oe()(c,"".concat(h,"-bar"),{["bg-".concat(u)]:u,["".concat(h,"-bar-animated")]:l,["".concat(h,"-bar-striped")]:l||o}),style:Pe({width:"".concat(Yo(s,n,r),"%")},d),"aria-valuenow":s,"aria-valuemin":n,"aria-valuemax":r,children:a?(0,De.jsx)("span",{className:"visually-hidden",children:i}):i}))}const $o=s.forwardRef((e,t)=>{let{isChild:n=!1}=e;const r=Pe({min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1},Le(e,Ko));if(r.bsPrefix=He(r.bsPrefix,"progress"),n)return Qo(r,t);const{min:i,now:a,max:o,label:l,visuallyHidden:c,striped:d,animated:u,bsPrefix:h,variant:m,className:p,children:f}=r,g=Le(r,Xo);return(0,De.jsx)("div",Pe(Pe({ref:t},g),{},{className:Oe()(p,h),children:f?Go(f,e=>(0,s.cloneElement)(e,{isChild:!0})):Qo({min:i,now:a,max:o,label:l,visuallyHidden:c,striped:d,animated:u,bsPrefix:h,variant:m},t)}))});$o.displayName="ProgressBar";const Jo=$o,Zo=e=>{let{task:t,onTaskUpdate:n,showOrderInfo:r=!0,compact:i=!1,enableActions:a=!0}=e;const[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0),[u,h]=(0,s.useState)("started"===t.status),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)({name:"",hex:""});(0,s.useEffect)(()=>{let e;return u&&"started"===t.status&&(e=setInterval(()=>{d(e=>e+1)},1e3)),()=>clearInterval(e)},[u,t.status]),(0,s.useEffect)(()=>{t.active_session&&t.active_session.elapsed_time&&d(t.active_session.elapsed_time),h("started"===t.status)},[t]);const v=async e=>{if(!o){l(!0);try{const s=await Ia(t.id,e);s.success&&("start"===e?h(!0):"pause"===e||"complete"===e?h(!1):"resume"===e&&h(!0),n&&n(s.data))}catch(s){console.error("Task action failed:",s)}finally{l(!1)}}},x=()=>p(!1),b="assigned"===t.status&&!1!==t.can_start,y="started"===t.status,w="paused"===t.status,j="started"===t.status||"paused"===t.status;return(0,De.jsxs)(ps,{className:"task-card mb-3 ".concat(i?"compact":""),style:{borderLeft:"4px solid ".concat((e=>{switch(e){case"assigned":default:return"#6c757d";case"started":return"#28a745";case"paused":return"#ffc107";case"completed":return"#17a2b8";case"approved":return"#007bff"}})(t.status)),transition:"all 0.3s ease",cursor:"pointer"},children:[(0,De.jsxs)(ps.Body,{className:i?"p-3":"p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("h6",{className:"mb-1 fw-bold text-truncate",title:t.title,children:t.title}),r&&t.order_info&&(0,De.jsxs)("small",{className:"text-muted",children:[(0,De.jsx)(ur,{className:"me-1"}),t.order_info.order_number," - ",t.order_info.customer_name]})]}),(0,De.jsxs)("div",{className:"d-flex flex-column align-items-end",children:[(0,De.jsx)(Rn,{bg:(_=t.status,{assigned:"secondary",started:"success",paused:"warning",completed:"info",approved:"primary"}[_]||"secondary"),className:"mb-1",children:t.status.toUpperCase()}),t.priority&&(0,De.jsx)(Rn,{style:{backgroundColor:(e=>{switch(e){case"critical":return"#dc3545";case"high":return"#fd7e14";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}})(t.priority)},className:"text-white",children:t.priority.toUpperCase()})]})]}),(0,De.jsxs)(Sn,{className:"mb-3",children:[t.assigned_to&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("small",{className:"text-muted d-block",children:[(0,De.jsx)(Ii,{className:"me-1"}),t.assigned_to.first_name||t.assigned_to.username]})}),t.task_type&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("small",{className:"text-muted d-block",children:["Type: ",t.task_type.name]})})]}),t.order_item_details&&(0,De.jsx)("div",{className:"mb-3",children:t.order_item_details.order_items?(0,De.jsxs)("div",{className:"order-items-section",children:[(0,De.jsxs)("small",{className:"text-muted fw-semibold d-block mb-2",children:["Order Items (",t.order_item_details.total_items,"):"]}),t.order_item_details.note&&(0,De.jsxs)("small",{className:"text-info d-block mb-2",children:[(0,De.jsx)(Yr,{className:"me-1"}),t.order_item_details.note]}),(0,De.jsx)("div",{className:"space-y-2",children:t.order_item_details.order_items.map((e,t)=>{var n,s;return(0,De.jsxs)("div",{className:"p-2 bg-light rounded border",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center flex-wrap gap-2",children:[(0,De.jsx)(ur,{className:"text-primary"}),(0,De.jsxs)("span",{className:"fw-semibold",children:[e.quantity,"x ",e.product_name]}),e.color_name&&(0,De.jsxs)(Rn,{bg:"light",text:"dark",className:"border",style:{backgroundColor:e.hex_color||void 0,color:e.hex_color?"#000":void 0,cursor:"pointer",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.05)"},children:["Color: ",e.color_name]}),e.fabric_name&&(0,De.jsxs)(Rn,{bg:"light",text:"dark",className:"border",children:["Fabric: ",e.fabric_name]})]}),(0,De.jsx)("div",{className:"mt-1",children:(0,De.jsxs)("small",{className:"text-muted",children:["Unit: R",null===(n=e.unit_price)||void 0===n?void 0:n.toFixed(2)," | Total: R",null===(s=e.total_price)||void 0===s?void 0:s.toFixed(2)]})})]},t)})})]}):(0,De.jsx)("div",{className:"assigned-item p-2 rounded border bg-white",children:(0,De.jsxs)("div",{className:"d-flex align-items-center flex-wrap gap-2",children:[(0,De.jsx)(ur,{className:"text-primary"}),(0,De.jsxs)("span",{className:"fw-semibold",children:[t.order_item_details.quantity,"x ",t.order_item_details.product_name]}),t.order_item_details.color_name&&(0,De.jsxs)(Rn,{bg:"light",text:"dark",className:"border",onClick:()=>{const e=t.order_item_details||{};g({name:e.color_name||"Color",hex:e.hex_color||""}),p(!0)},role:"button",title:"Tap to preview color",style:{backgroundColor:t.order_item_details.hex_color||void 0,color:t.order_item_details.hex_color?"#000":void 0,cursor:"pointer",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.05)"},children:["Color: ",t.order_item_details.color_name]}),t.order_item_details.fabric_name&&(0,De.jsxs)(Rn,{bg:"light",text:"dark",className:"border",children:["Fabric: ",t.order_item_details.fabric_name]})]})})}),("started"===t.status||"paused"===t.status||c>0)&&(0,De.jsxs)("div",{className:"timer-display mb-3 p-3 bg-light rounded",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Sr,{className:"me-2 ".concat(u?"text-success":"text-warning")}),(0,De.jsx)("span",{className:"h5 mb-0 font-monospace",children:(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0")):"".concat(n,":").concat(s.toString().padStart(2,"0"))})(c)})]}),u&&(0,De.jsx)("div",{className:"pulse-indicator bg-success rounded-circle",style:{width:"12px",height:"12px"}})]}),t.estimated_duration&&(0,De.jsx)(Jo,{now:c/(3600*t.estimated_duration)*100,variant:c>3600*t.estimated_duration?"danger":"success",size:"sm",className:"mt-2"})]}),t.description&&!i&&(0,De.jsx)("p",{className:"text-muted small mb-3",children:t.description}),t.notes_count>0&&(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("small",{className:"text-info",children:[(0,De.jsx)(ki,{className:"me-1"}),t.notes_count," note",1!==t.notes_count?"s":""]})}),a&&(0,De.jsxs)(Sn,{className:"g-2",children:[b&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)(Xs,{variant:"success",size:"sm",className:"w-100",onClick:()=>v("start"),disabled:o,children:[(0,De.jsx)(ai,{className:"me-1"}),"Start"]})}),y&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)(Xs,{variant:"warning",size:"sm",className:"w-100",onClick:()=>v("pause"),disabled:o,children:[(0,De.jsx)(si,{className:"me-1"}),"Pause"]})}),w&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)(Xs,{variant:"info",size:"sm",className:"w-100",onClick:()=>v("resume"),disabled:o,children:[(0,De.jsx)(ai,{className:"me-1"}),"Resume"]})}),j&&(0,De.jsx)(Pn,{xs:y?6:12,children:(0,De.jsxs)(Xs,{variant:"primary",size:"sm",className:"w-100",onClick:()=>v("complete"),disabled:o,children:[(0,De.jsx)(wr,{className:"me-1"}),"Complete"]})})]}),t.deadline&&new Date(t.deadline)<new Date&&"completed"!==t.status&&(0,De.jsx)("div",{className:"mt-3 p-2 bg-danger bg-opacity-10 border border-danger rounded",children:(0,De.jsxs)("small",{className:"text-danger",children:[(0,De.jsx)(Fr,{className:"me-1"}),"Overdue: ",new Date(t.deadline).toLocaleDateString()]})})]}),(0,De.jsxs)(Vo,{show:m,onHide:x,centered:!0,size:"sm",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Color Preview"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)("div",{className:"d-flex flex-column align-items-center text-center",children:[(0,De.jsx)("div",{className:"mb-3",style:{width:"100%",maxWidth:"320px",height:"160px",borderRadius:"12px",backgroundColor:f.hex||"#f8f9fa",border:"1px solid #dee2e6"}}),f.name&&(0,De.jsx)("div",{className:"fw-semibold mb-1",children:f.name}),(0,De.jsx)("code",{className:"px-2 py-1 bg-light rounded",children:f.hex||"N/A"})]})}),(0,De.jsx)(Vo.Footer,{className:"justify-content-center",children:(0,De.jsx)(Xs,{variant:"secondary",size:"sm",onClick:x,children:"Close"})})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .task-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n        }\n        \n        .task-card.compact .card-body {\n          padding: 0.75rem;\n        }\n        \n        .timer-display {\n          border: 2px solid #e9ecef;\n        }\n        \n        .pulse-indicator {\n          animation: pulse 1.5s infinite;\n        }\n        \n        @keyframes pulse {\n          0% { opacity: 1; }\n          50% { opacity: 0.5; }\n          100% { opacity: 1; }\n        }\n        \n        .font-monospace {\n          font-family: 'Courier New', monospace;\n        }\n        .assigned-item {\n          background-image: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01));\n        }\n      "})]});var _},el=["as","className","type","tooltip"],tl={type:vn().string,tooltip:vn().bool,as:vn().elementType},nl=s.forwardRef((e,t)=>{let{as:n="div",className:s,type:r="valid",tooltip:i=!1}=e,a=Le(e,el);return(0,De.jsx)(n,Pe(Pe({},a),{},{ref:t,className:Oe()(s,"".concat(r,"-").concat(i?"tooltip":"feedback"))}))});nl.displayName="Feedback",nl.propTypes=tl;const sl=nl,rl=s.createContext({}),il=["id","bsPrefix","className","type","isValid","isInvalid","as"],al=s.forwardRef((e,t)=>{let{id:n,bsPrefix:r,className:i,type:a="checkbox",isValid:o=!1,isInvalid:l=!1,as:c="input"}=e,d=Le(e,il);const{controlId:u}=(0,s.useContext)(rl);return r=He(r,"form-check-input"),(0,De.jsx)(c,Pe(Pe({},d),{},{ref:t,type:a,id:n||u,className:Oe()(i,r,o&&"is-valid",l&&"is-invalid")}))});al.displayName="FormCheckInput";const ol=al,ll=["bsPrefix","className","htmlFor"],cl=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,htmlFor:i}=e,a=Le(e,ll);const{controlId:o}=(0,s.useContext)(rl);return n=He(n,"form-check-label"),(0,De.jsx)("label",Pe(Pe({},a),{},{ref:t,htmlFor:i||o,className:Oe()(r,n)}))});cl.displayName="FormCheckLabel";const dl=cl,ul=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],hl=s.forwardRef((e,t)=>{let{id:n,bsPrefix:r,bsSwitchPrefix:i,inline:a=!1,reverse:o=!1,disabled:l=!1,isValid:c=!1,isInvalid:d=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:m,className:p,style:f,title:g="",type:v="checkbox",label:x,children:b,as:y="input"}=e,w=Le(e,ul);r=He(r,"form-check"),i=He(i,"form-switch");const{controlId:j}=(0,s.useContext)(rl),_=(0,s.useMemo)(()=>({controlId:n||j}),[j,n]),N=!b&&null!=x&&!1!==x||function(e,t){return s.Children.toArray(e).some(e=>s.isValidElement(e)&&e.type===t)}(b,dl),k=(0,De.jsx)(ol,Pe(Pe({},w),{},{type:"switch"===v?"checkbox":v,ref:t,isValid:c,isInvalid:d,disabled:l,as:y}));return(0,De.jsx)(rl.Provider,{value:_,children:(0,De.jsx)("div",{style:f,className:Oe()(p,N&&r,a&&"".concat(r,"-inline"),o&&"".concat(r,"-reverse"),"switch"===v&&i),children:b||(0,De.jsxs)(De.Fragment,{children:[k,N&&(0,De.jsx)(dl,{title:g,children:x}),h&&(0,De.jsx)(sl,{type:m,tooltip:u,children:h})]})})})});hl.displayName="FormCheck";const ml=Object.assign(hl,{Input:ol,Label:dl});var pl=n(440),fl=n.n(pl);const gl=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],vl=s.forwardRef((e,t)=>{let{bsPrefix:n,type:r,size:i,htmlSize:a,id:o,className:l,isValid:c=!1,isInvalid:d=!1,plaintext:u,readOnly:h,as:m="input"}=e,p=Le(e,gl);const{controlId:f}=(0,s.useContext)(rl);return n=He(n,"form-control"),(0,De.jsx)(m,Pe(Pe({},p),{},{type:r,size:a,ref:t,readOnly:h,id:o||f,className:Oe()(l,u?"".concat(n,"-plaintext"):n,i&&"".concat(n,"-").concat(i),"color"===r&&"".concat(n,"-color"),c&&"is-valid",d&&"is-invalid")}))});vl.displayName="FormControl";const xl=Object.assign(vl,{Feedback:sl}),bl=["className","bsPrefix","as"],yl=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,bl);return s=He(s,"form-floating"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});yl.displayName="FormFloating";const wl=yl,jl=["controlId","as"],_l=s.forwardRef((e,t)=>{let{controlId:n,as:r="div"}=e,i=Le(e,jl);const a=(0,s.useMemo)(()=>({controlId:n}),[n]);return(0,De.jsx)(rl.Provider,{value:a,children:(0,De.jsx)(r,Pe(Pe({},i),{},{ref:t}))})});_l.displayName="FormGroup";const Nl=_l,kl=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Cl=s.forwardRef((e,t)=>{let{as:n="label",bsPrefix:r,column:i=!1,visuallyHidden:a=!1,className:o,htmlFor:l}=e,c=Le(e,kl);const{controlId:d}=(0,s.useContext)(rl);r=He(r,"form-label");let u="col-form-label";"string"===typeof i&&(u="".concat(u," ").concat(u,"-").concat(i));const h=Oe()(o,r,a&&"visually-hidden",i&&u);return l=l||d,i?(0,De.jsx)(Pn,Pe({ref:t,as:"label",className:h,htmlFor:l},c)):(0,De.jsx)(n,Pe({ref:t,className:h,htmlFor:l},c))});Cl.displayName="FormLabel";const Sl=Cl,Al=["bsPrefix","className","id"],El=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,id:i}=e,a=Le(e,Al);const{controlId:o}=(0,s.useContext)(rl);return n=He(n,"form-range"),(0,De.jsx)("input",Pe(Pe({},a),{},{type:"range",ref:t,className:Oe()(r,n),id:i||o}))});El.displayName="FormRange";const Tl=El,Pl=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Ml=s.forwardRef((e,t)=>{let{bsPrefix:n,size:r,htmlSize:i,className:a,isValid:o=!1,isInvalid:l=!1,id:c}=e,d=Le(e,Pl);const{controlId:u}=(0,s.useContext)(rl);return n=He(n,"form-select"),(0,De.jsx)("select",Pe(Pe({},d),{},{size:i,ref:t,className:Oe()(a,n,r&&"".concat(n,"-").concat(r),o&&"is-valid",l&&"is-invalid"),id:c||u}))});Ml.displayName="FormSelect";const Ll=Ml,Rl=["bsPrefix","className","as","muted"],Ol=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:r="small",muted:i}=e,a=Le(e,Rl);return n=He(n,"form-text"),(0,De.jsx)(r,Pe(Pe({},a),{},{ref:t,className:Oe()(s,n,i&&"text-muted")}))});Ol.displayName="FormText";const Dl=Ol,Il=s.forwardRef((e,t)=>(0,De.jsx)(ml,Pe(Pe({},e),{},{ref:t,type:"switch"})));Il.displayName="Switch";const Fl=Object.assign(Il,{Input:ml.Input,Label:ml.Label}),zl=["bsPrefix","className","children","controlId","label"],Bl=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,children:r,controlId:i,label:a}=e,o=Le(e,zl);return n=He(n,"form-floating"),(0,De.jsxs)(Nl,Pe(Pe({ref:t,className:Oe()(s,n),controlId:i},o),{},{children:[r,(0,De.jsx)("label",{htmlFor:i,children:a})]}))});Bl.displayName="FloatingLabel";const Wl=Bl,Hl=["className","validated","as"],Ul={_ref:vn().any,validated:vn().bool,as:vn().elementType},Vl=s.forwardRef((e,t)=>{let{className:n,validated:s,as:r="form"}=e,i=Le(e,Hl);return(0,De.jsx)(r,Pe(Pe({},i),{},{ref:t,className:Oe()(n,s&&"was-validated")}))});Vl.displayName="Form",Vl.propTypes=Ul;const Gl=Object.assign(Vl,{Group:Nl,Control:xl,Floating:wl,Check:ml,Switch:Fl,Label:Sl,Text:Dl,Range:Tl,Select:Ll,FloatingLabel:Wl}),ql=e=>{var t,n,r;let{show:i,onHide:a,order:o,onTasksAssigned:l}=e;const[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{i&&o&&k()},[i,o]);const k=async()=>{d(!0),j(null);try{const[e,t,n,s]=await Promise.all([Sa(o.id),La(),ha(),Ra().catch(()=>[])]);h(e),p(t),g(n.filter(e=>"warehouse_worker"===e.role||"warehouse"===e.role)),x(s),0===b.length&&y([C()])}catch(e){j("Failed to load assignment data: "+e.message)}finally{d(!1)}},C=()=>({id:Date.now()+Math.random(),task_type_id:"",assigned_to_id:"",title:"",description:"",priority:"medium",estimated_duration:2,deadline:""}),S=(e,t,n)=>{y(b.map(s=>s.id===e?Pe(Pe({},s),{},{[t]:n}):s))},A=async e=>{e.preventDefault(),d(!0),j(null);const t=b.filter(e=>e.task_type_id&&e.assigned_to_id&&e.title.trim());if(0===t.length)return j("Please add at least one valid task with type, assignee, and title."),void d(!1);try{const e=await Aa(o.id,{tasks:t});N("Successfully assigned ".concat(t.length," tasks to order ").concat(o.order_number)),setTimeout(()=>{l&&l(e),a()},1500)}catch(n){j("Failed to assign tasks: "+n.message)}finally{d(!1)}};return o?(0,De.jsxs)(Vo,{show:i,onHide:a,size:"xl",centered:!0,backdrop:"static",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(Ai,{className:"me-2"}),"Assign Tasks to Order ",o.order_number]})}),(0,De.jsx)(Vo.Body,{className:"p-0",children:c&&!u?(0,De.jsxs)("div",{className:"text-center p-5",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-3",children:"Loading order details..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"bg-light p-4 border-bottom",children:[(0,De.jsxs)(Sn,{children:[(0,De.jsxs)(Pn,{md:8,children:[(0,De.jsxs)("h5",{className:"mb-2",children:[(0,De.jsx)(ur,{className:"me-2 text-primary"}),o.customer_name||(null===u||void 0===u||null===(t=u.customer)||void 0===t?void 0:t.name)]}),(0,De.jsxs)("div",{className:"d-flex gap-3 mb-2",children:[(0,De.jsx)(Rn,{bg:(e=>{switch(e){case"critical":return"danger";case"high":return"warning";case"medium":return"info";case"low":return"success";default:return"secondary"}})(null===u||void 0===u?void 0:u.urgency),children:(null===u||void 0===u||null===(n=u.urgency)||void 0===n?void 0:n.toUpperCase())||"NORMAL"}),(0,De.jsxs)("small",{className:"text-muted",children:["Due: ",o.delivery_deadline||"No deadline"]}),(0,De.jsxs)("small",{className:"text-muted",children:["Total: R",o.total_amount]})]})]}),(0,De.jsx)(Pn,{md:4,className:"text-end",children:(null===u||void 0===u||null===(r=u.existing_tasks)||void 0===r?void 0:r.length)>0&&(0,De.jsx)("div",{children:(0,De.jsxs)("small",{className:"text-info",children:[u.existing_tasks.length," existing task(s)"]})})})]}),(null===u||void 0===u?void 0:u.items)&&(0,De.jsxs)("div",{className:"mt-3",children:[(0,De.jsx)("h6",{className:"text-muted mb-2",children:"Order Items:"}),(0,De.jsx)("div",{className:"d-flex flex-wrap gap-2",children:u.items.map((e,t)=>(0,De.jsxs)(Rn,{bg:"outline-secondary",className:"p-2",children:[e.quantity,"x ",e.product_name,e.fabric&&" (".concat(e.fabric,")"),e.color&&" - ".concat(e.color)]},t))})]})]}),(0,De.jsxs)("div",{className:"p-4",children:[w&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>j(null),children:w}),_&&(0,De.jsx)(Nn,{variant:"success",children:_}),v.length>0&&(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsx)("h6",{className:"mb-3",children:"Quick Templates:"}),(0,De.jsx)("div",{className:"d-flex gap-2 flex-wrap",children:v.map(e=>{var t;return(0,De.jsxs)(Xs,{variant:"outline-info",size:"sm",onClick:()=>(e=>{const t=e.tasks.map(e=>({id:Date.now()+Math.random(),task_type_id:e.task_type_id,assigned_to_id:"",title:e.title,description:e.description,priority:e.priority||"medium",estimated_duration:e.estimated_duration||2,deadline:""}));y(t)})(e),disabled:c,children:[e.name," (",(null===(t=e.tasks)||void 0===t?void 0:t.length)||0," tasks)"]},e.id)})})]}),(0,De.jsxs)(Gl,{onSubmit:A,children:[(0,De.jsxs)(Sn,{className:"mb-3",children:[(0,De.jsx)(Pn,{children:(0,De.jsx)("h6",{children:"Tasks to Assign:"})}),(0,De.jsx)(Pn,{xs:"auto",children:(0,De.jsxs)(Xs,{variant:"success",size:"sm",onClick:()=>{y([...b,C()])},disabled:c,children:[(0,De.jsx)(oi,{className:"me-1"}),"Add Task"]})})]}),b.map((e,t)=>(0,De.jsxs)(ps,{className:"mb-3 border",children:[(0,De.jsx)(ps.Header,{className:"bg-light py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("span",{className:"fw-bold",children:["Task #",t+1]}),b.length>1&&(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void y(b.filter(e=>e.id!==t));var t},disabled:c,children:(0,De.jsx)(Pi,{})})]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Task Type *"}),(0,De.jsxs)(Gl.Select,{value:e.task_type_id,onChange:t=>S(e.id,"task_type_id",t.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select task type..."}),m.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Assign to Worker *"}),(0,De.jsxs)(Gl.Select,{value:e.assigned_to_id,onChange:t=>S(e.id,"assigned_to_id",t.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select worker..."}),f.map(e=>(0,De.jsxs)("option",{value:e.id,children:[(0,De.jsx)(Ii,{className:"me-1"}),e.first_name||e.username,"admin"===e.role&&" (Admin)"]},e.id))]})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Task Title *"}),(0,De.jsx)(Gl.Control,{type:"text",value:e.title,onChange:t=>S(e.id,"title",t.target.value),placeholder:"e.g., Cut fabric for L-shaped couch",required:!0})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:2,value:e.description,onChange:t=>S(e.id,"description",t.target.value),placeholder:"Additional task details..."})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Priority"}),(0,De.jsxs)(Gl.Select,{value:e.priority,onChange:t=>S(e.id,"priority",t.target.value),children:[(0,De.jsx)("option",{value:"low",children:"Low"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"critical",children:"Critical"})]})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:[(0,De.jsx)(Sr,{className:"me-1"}),"Est. Hours"]}),(0,De.jsx)(Gl.Control,{type:"number",min:"0.5",max:"24",step:"0.5",value:e.estimated_duration,onChange:t=>S(e.id,"estimated_duration",parseFloat(t.target.value))})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Deadline"}),(0,De.jsx)(Gl.Control,{type:"datetime-local",value:e.deadline,onChange:t=>S(e.id,"deadline",t.target.value)})]})})]})})]},e.id)),b.length>1&&(0,De.jsxs)(Nn,{variant:"info",children:[(0,De.jsx)(Fr,{className:"me-2"}),"Tasks will be created in sequence. Later tasks may depend on earlier ones being completed."]})]})]})]})}),(0,De.jsxs)(Vo.Footer,{className:"bg-light",children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:a,disabled:c,children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",onClick:A,disabled:c||0===b.length,children:c?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Vi,{animation:"border",size:"sm",className:"me-2"}),"Assigning Tasks..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(wr,{className:"me-2"}),"Assign ",b.length," Task",1!==b.length?"s":""]})})]})]}):null},Kl=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],Xl=s.forwardRef((e,t)=>{let{bsPrefix:n,active:s,disabled:r,eventKey:i,className:a,variant:o,action:l,as:c}=e,d=Le(e,Kl);n=He(n,"list-group-item");const[u,h]=Ss(Pe({key:js(i,d.href),active:s},d)),m=rt(e=>{if(r)return e.preventDefault(),void e.stopPropagation();u.onClick(e)});r&&void 0===d.tabIndex&&(d.tabIndex=-1,d["aria-disabled"]=!0);const p=c||(l?d.href?"a":"button":"div");return(0,De.jsx)(p,Pe(Pe(Pe({ref:t},d),u),{},{onClick:m,className:Oe()(a,n,h.isActive&&"active",r&&"disabled",o&&"".concat(n,"-").concat(o),l&&"".concat(n,"-action"))}))});Xl.displayName="ListGroupItem";const Yl=Xl,Ql=["className","bsPrefix","variant","horizontal","numbered","as"],$l=s.forwardRef((e,t)=>{const n=Ze(e,{activeKey:"onSelect"}),{className:s,bsPrefix:r,variant:i,horizontal:a,numbered:o,as:l="div"}=n,c=Le(n,Ql),d=He(r,"list-group");let u;return a&&(u=!0===a?"horizontal":"horizontal-".concat(a)),(0,De.jsx)(Rs,Pe(Pe({ref:t},c),{},{as:l,className:Oe()(s,d,i&&"".concat(d,"-").concat(i),u&&"".concat(d,"-").concat(u),o&&"".concat(d,"-numbered"))}))});$l.displayName="ListGroup";const Jl=Object.assign($l,{Item:Yl}),Zl=e=>{let{show:t,onHide:n,onStockUpdated:r}=e;const[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),[v,x]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[_,N]=(0,s.useState)("in"),[k,C]=(0,s.useState)(""),[S,A]=(0,s.useState)(""),[E,T]=(0,s.useState)(""),[P,M]=(0,s.useState)(""),[L,R]=(0,s.useState)([]);(0,s.useEffect)(()=>{t&&O()},[t]);const O=async()=>{a(!0),p(null);try{const[e,t,n]=await Promise.all([Ea(),Ji("/inventory/materials/stock_locations/"),Ma()]);l(e),d(t),h(n)}catch(e){p("Failed to load stock entry data: "+e.message)}finally{a(!1)}};return(0,De.jsxs)(Vo,{show:t,onHide:n,size:"xl",centered:!0,backdrop:"static",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(hr,{className:"me-2"}),"Quick Stock Entry"]})}),(0,De.jsx)(Vo.Body,{className:"p-0",children:i&&0===o.length?(0,De.jsxs)("div",{className:"text-center p-5",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-3",children:"Loading materials..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"p-4 border-bottom bg-light",children:[(0,De.jsx)("h6",{className:"mb-3",children:"Add Stock Movement"}),m&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>p(null),children:m}),f&&(0,De.jsx)(Nn,{variant:"success",children:f}),(0,De.jsx)(Gl,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Material *"}),(0,De.jsxs)(Gl.Select,{value:v,onChange:e=>x(e.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select material..."}),u.map(e=>{return(0,De.jsx)("optgroup",{label:e.name,children:(t=e.id,o.filter(e=>e.category_id===t)).map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))},e.id);var t})]}),v&&(0,De.jsx)("div",{className:"mt-2",children:(0,De.jsxs)(Rn,{bg:(e=>{switch(e){case"low":return"danger";case"medium":return"warning";case"good":return"success";default:return"secondary"}})((e=>{const t=o.find(t=>t.id===parseInt(e));return t?t.current_stock<=t.minimum_stock?"low":t.current_stock<=1.5*t.minimum_stock?"medium":"good":"unknown"})(v)),children:["Current Stock: ",(e=>{const t=o.find(t=>t.id===parseInt(e));return(null===t||void 0===t?void 0:t.current_stock)||0})(v)]})})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Movement Type *"}),(0,De.jsxs)(Gl.Select,{value:_,onChange:e=>N(e.target.value),required:!0,children:[(0,De.jsx)("option",{value:"in",children:"Stock In (+)"}),(0,De.jsx)("option",{value:"out",children:"Stock Out (-)"})]})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Quantity *"}),(0,De.jsx)(Gl.Control,{type:"number",min:"0",step:"0.01",value:b,onChange:e=>y(e.target.value),placeholder:"0.00",required:!0})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:[(0,De.jsx)(Zr,{className:"me-1"}),"Location *"]}),(0,De.jsxs)(Gl.Select,{value:w,onChange:e=>j(e.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select location..."}),c.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Reason *"}),(0,De.jsx)(Gl.Control,{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"e.g., New stock purchase, Supplier delivery, etc.",required:!0})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:[(0,De.jsx)(ar,{className:"me-1"}),"Batch Number"]}),(0,De.jsx)(Gl.Control,{type:"text",value:S,onChange:e=>A(e.target.value),placeholder:"Optional"})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Expiry Date"}),(0,De.jsx)(Gl.Control,{type:"date",value:E,onChange:e=>T(e.target.value)})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Notes"}),(0,De.jsx)(Gl.Control,{type:"text",value:P,onChange:e=>M(e.target.value),placeholder:"Optional notes"})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Xs,{variant:"success",onClick:()=>{var e;if(!v||!b||!w)return void p("Please fill in material, quantity, and location");const t=o.find(e=>e.id===parseInt(v)),n=(null===(e=c.find(e=>e.id===parseInt(w)))||void 0===e?void 0:e.name)||w,s={id:Date.now(),material_id:v,material_name:(null===t||void 0===t?void 0:t.name)||"Unknown",quantity:parseFloat(b),location_id:w,location_name:n,direction:_,reason:k,batch_number:S,expiry_date:E,notes:P};R([...L,s]),x(""),y(""),j(""),C(""),A(""),T(""),M("")},disabled:i||!v||!b||!w,children:[(0,De.jsx)(oi,{className:"me-2"}),"Add to Entry List"]})})]})})]}),(0,De.jsxs)("div",{className:"p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,De.jsxs)("h6",{className:"mb-0",children:["Stock Entries to Process (",L.length,")"]}),L.length>0&&(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>R([]),children:"Clear All"})]}),0===L.length?(0,De.jsxs)("div",{className:"text-center py-4 text-muted",children:[(0,De.jsx)(hr,{size:40,className:"mb-3"}),(0,De.jsx)("p",{children:"No stock entries added yet"})]}):(0,De.jsx)(Jl,{children:L.map(e=>(0,De.jsxs)(Jl.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h6",{className:"mb-1",children:e.material_name}),(0,De.jsxs)("small",{className:"text-muted",children:[(0,De.jsx)(Zr,{className:"me-1"}),e.location_name]})]}),(0,De.jsxs)("div",{className:"text-end",children:[(0,De.jsxs)(Rn,{bg:"in"===e.direction?"success":"warning",children:["in"===e.direction?"+":"-",e.quantity]}),e.reason&&(0,De.jsx)("div",{children:(0,De.jsx)("small",{className:"text-muted",children:e.reason})})]})]}),(e.batch_number||e.expiry_date||e.notes)&&(0,De.jsxs)("div",{className:"mt-2",children:[e.batch_number&&(0,De.jsxs)(Rn,{bg:"outline-secondary",className:"me-2",children:["Batch: ",e.batch_number]}),e.expiry_date&&(0,De.jsxs)(Rn,{bg:"outline-info",className:"me-2",children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]}),e.notes&&(0,De.jsxs)("small",{className:"text-muted d-block mt-1",children:["Note: ",e.notes]})]})]}),(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void R(L.filter(e=>e.id!==t));var t},className:"ms-3",children:(0,De.jsx)(ei,{})})]},e.id))})]})]})}),(0,De.jsxs)(Vo.Footer,{className:"bg-light",children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:n,disabled:i,children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",onClick:async e=>{if(e.preventDefault(),0!==L.length){a(!0),p(null);try{const e={entries:L.map(e=>({material_id:e.material_id,quantity:"out"===e.direction?-e.quantity:e.quantity,location_id:e.location_id,location:e.location_id,movement_type:"in"===String(e.direction).toLowerCase().trim()?"in":"out",reason:e.reason,batch_number:e.batch_number,expiry_date:e.expiry_date,notes:e.notes}))};await(e=>Ji("/inventory/materials/quick_stock_entry/",{method:"POST",data:e}))(e),g("Successfully processed ".concat(L.length," stock entries")),R([]),r&&r(),setTimeout(()=>{g(null),n()},2e3)}catch(t){p("Failed to process stock entries: "+t.message)}finally{a(!1)}}else p("Please add at least one stock entry")},disabled:i||0===L.length,children:i?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Vi,{animation:"border",size:"sm",className:"me-2"}),"Processing..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(wr,{className:"me-2"}),"Process ",L.length," Entries"]})})]})]})},ec=s.createContext(null);ec.displayName="InputGroupContext";const tc=ec,nc=["className","bsPrefix","as"],sc=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="span"}=e,i=Le(e,nc);return s=He(s,"input-group-text"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});sc.displayName="InputGroupText";const rc=sc,ic=["bsPrefix","size","hasValidation","className","as"],ac=s.forwardRef((e,t)=>{let{bsPrefix:n,size:r,hasValidation:i,className:a,as:o="div"}=e,l=Le(e,ic);n=He(n,"input-group");const c=(0,s.useMemo)(()=>({}),[]);return(0,De.jsx)(tc.Provider,{value:c,children:(0,De.jsx)(o,Pe(Pe({ref:t},l),{},{className:Oe()(a,n,r&&"".concat(n,"-").concat(r),i&&"has-validation")}))})});ac.displayName="InputGroup";const oc=Object.assign(ac,{Text:rc,Radio:e=>(0,De.jsx)(rc,{children:(0,De.jsx)(ol,Pe({type:"radio"},e))}),Checkbox:e=>(0,De.jsx)(rc,{children:(0,De.jsx)(ol,Pe({type:"checkbox"},e))})});function lc(e,t,n){const r=(0,s.useRef)(void 0!==e),[i,a]=(0,s.useState)(t),o=void 0!==e,l=r.current;return r.current=o,!o&&l&&i!==t&&a(t),[o?e:i,(0,s.useCallback)(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const[r,...i]=t;let o=null==n?void 0:n(r,...i);return a(r),o},[n])]}const cc={prefix:String(Math.round(1e10*Math.random())),current:0},dc=s.createContext(cc),uc=s.createContext(!1);Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);let hc=new WeakMap;function mc(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,s.useContext)(dc),n=(0,s.useRef)(null);if(null===n.current&&!e){var r,i;let e=null===(i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===i||null===(r=i.ReactCurrentOwner)||void 0===r?void 0:r.current;if(e){let n=hc.get(e);null==n?hc.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,hc.delete(e))}n.current=++t.current}return n.current}const pc="function"===typeof s.useId?function(e){let t=s.useId(),[n]=(0,s.useState)("function"===typeof s.useSyncExternalStore?s.useSyncExternalStore(vc,fc,gc):(0,s.useContext)(uc)),r=n?"react-aria":"react-aria".concat(cc.prefix);return e||"".concat(r,"-").concat(t)}:function(e){let t=(0,s.useContext)(dc),n=mc(!!e),r="react-aria".concat(t.prefix);return e||"".concat(r,"-").concat(n)};function fc(){return!1}function gc(){return!0}function vc(e){return()=>{}}const xc=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],bc=["activeKey","getControlledId","getControllerId"],yc=["as"];function wc(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function jc(e){let{active:t,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:a,role:o="tabpanel",onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:m}=e,p=wc(e,xc);const f=(0,s.useContext)(Ns);if(!f)return[Object.assign({},p,{role:o}),{eventKey:n,isActive:t,mountOnEnter:r,transition:i,unmountOnExit:a,onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:m}];const{activeKey:g,getControlledId:v,getControllerId:x}=f,b=wc(f,bc),y=js(n);return[Object.assign({},p,{role:o,id:v(n),"aria-labelledby":x(n)}),{eventKey:n,isActive:null==t&&null!=y?js(g)===y:t,transition:i||b.transition,mountOnEnter:null!=r?r:b.mountOnEnter,unmountOnExit:null!=a?a:b.unmountOnExit,onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:m}]}const _c=s.forwardRef((e,t)=>{let{as:n="div"}=e,s=wc(e,yc);const[r,{isActive:i,onEnter:a,onEntering:o,onEntered:l,onExit:c,onExiting:d,onExited:u,mountOnEnter:h,unmountOnExit:m,transition:p=Ja}]=jc(s);return(0,De.jsx)(Ns.Provider,{value:null,children:(0,De.jsx)(_s.Provider,{value:null,children:(0,De.jsx)(p,{in:i,onEnter:a,onEntering:o,onEntered:l,onExit:c,onExiting:d,onExited:u,mountOnEnter:h,unmountOnExit:m,children:(0,De.jsx)(n,Object.assign({},r,{ref:t,hidden:!i,"aria-hidden":!i}))})})})});_c.displayName="TabPanel";const Nc=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:a,transition:o,mountOnEnter:l,unmountOnExit:c,children:d}=e,[u,h]=lc(i,a,r),m=pc(t),p=(0,s.useMemo)(()=>n||((e,t)=>m?"".concat(m,"-").concat(t,"-").concat(e):null),[m,n]),f=(0,s.useMemo)(()=>({onSelect:h,activeKey:u,transition:o,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:e=>p(e,"tabpane"),getControllerId:e=>p(e,"tab")}),[h,u,o,l,c,p]);return(0,De.jsx)(Ns.Provider,{value:f,children:(0,De.jsx)(_s.Provider,{value:h||null,children:d})})};Nc.Panel=_c;const kc=Nc,Cc=["className","bsPrefix","as"],Sc=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,Cc);return s=He(s,"tab-content"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Sc.displayName="TabContent";const Ac=Sc;function Ec(e){return"boolean"===typeof e?e?fn:Ja:e}const Tc=["bsPrefix","transition"],Pc=["className","as"],Mc=s.forwardRef((e,t)=>{let{bsPrefix:n,transition:s}=e,r=Le(e,Tc);const[i,{isActive:a,onEnter:o,onEntering:l,onEntered:c,onExit:d,onExiting:u,onExited:h,mountOnEnter:m,unmountOnExit:p,transition:f=fn}]=jc(Pe(Pe({},r),{},{transition:Ec(s)})),{className:g,as:v="div"}=i,x=Le(i,Pc),b=He(n,"tab-pane");return(0,De.jsx)(Ns.Provider,{value:null,children:(0,De.jsx)(_s.Provider,{value:null,children:(0,De.jsx)(f,{in:a,onEnter:o,onEntering:l,onEntered:c,onExit:d,onExiting:u,onExited:h,mountOnEnter:m,unmountOnExit:p,children:(0,De.jsx)(v,Pe(Pe({},x),{},{ref:t,className:Oe()(g,b,a&&"active")}))})})})});Mc.displayName="TabPane";const Lc=Mc,Rc=["id","onSelect","transition","mountOnEnter","unmountOnExit","variant","children","activeKey"];function Oc(e){let t;return function(e,t){let n=0;s.Children.forEach(e,e=>{s.isValidElement(e)&&t(e,n++)})}(e,e=>{null==t&&(t=e.props.eventKey)}),t}function Dc(e){const{title:t,eventKey:n,disabled:s,tabClassName:r,tabAttrs:i,id:a}=e.props;return null==t?null:(0,De.jsx)(zs,{as:"li",role:"presentation",children:(0,De.jsx)(Hs,Pe(Pe({as:"button",type:"button",eventKey:n,disabled:s,id:a,className:r},i),{},{children:t}))})}const Ic=e=>{const t=Ze(e,{activeKey:"onSelect"}),{id:n,onSelect:s,transition:r,mountOnEnter:i=!1,unmountOnExit:a=!1,variant:o="tabs",children:l,activeKey:c=Oc(l)}=t,d=Le(t,Rc);return(0,De.jsxs)(kc,{id:n,activeKey:c,onSelect:s,transition:Ec(r),mountOnEnter:i,unmountOnExit:a,children:[(0,De.jsx)(Gs,Pe(Pe({id:n},d),{},{role:"tablist",as:"ul",variant:o,children:Go(l,Dc)})),(0,De.jsx)(Ac,{children:Go(l,e=>{const t=Pe({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,De.jsx)(Lc,Pe({},t))})})]})};Ic.displayName="Tabs";const Fc=Ic,zc=["transition"],Bc=e=>{let{transition:t}=e,n=Le(e,zc);return(0,De.jsx)(kc,Pe(Pe({},n),{},{transition:Ec(t)}))};Bc.displayName="TabContainer";const Wc=Bc,Hc={eventKey:vn().oneOfType([vn().string,vn().number]),title:vn().node.isRequired,disabled:vn().bool,tabClassName:vn().string,tabAttrs:vn().object},Uc=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Uc.propTypes=Hc;const Vc=Object.assign(Uc,{Container:Wc,Content:Ac,Pane:Lc}),Gc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const[r,i]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),d=(0,s.useRef)(),u=(0,s.useRef)(!0),h=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||o(!0),c(null);try{const t=await e();u.current&&(i(t),c(null))}catch(n){u.current&&(c(n.message),console.error("Polling error:",n))}finally{u.current&&!t&&o(!1)}};(0,s.useEffect)(()=>(u.current=!0,h(),t>0&&(d.current=setInterval(()=>{h(!0)},t)),()=>{u.current=!1,d.current&&clearInterval(d.current)}),n),(0,s.useEffect)(()=>()=>{u.current=!1,d.current&&clearInterval(d.current)},[]);return{data:r,loading:a,error:l,refresh:()=>{h()},stopPolling:()=>{d.current&&(clearInterval(d.current),d.current=null)},startPolling:()=>{!d.current&&t>0&&(d.current=setInterval(()=>{h(!0)},t))}}},qc=e=>{let{user:t}=e;const[n,r]=(0,s.useState)("orders"),[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[w,j]=(0,s.useState)([]),[_,N]=(0,s.useState)(""),[k,C]=(0,s.useState)("all"),[S,A]=(0,s.useState)("all"),[E,T]=(0,s.useState)("all"),[P,M]=(0,s.useState)("created_at"),[L,R]=(0,s.useState)("desc"),[O,D]=(0,s.useState)(!1),[I,F]=(0,s.useState)(!1),[z,B]=(0,s.useState)(!1),[W,H]=(0,s.useState)(null),[U,V]=(0,s.useState)(null),[G,q]=(0,s.useState)([]),[K,X]=(0,s.useState)({title:"",description:"",task_type_name:"",assigned_worker:"",priority:"medium",estimated_duration:60,deadline:"",materials_needed:[],instructions:"",template_id:null,order_item_id:""}),Y=["Material Preparation","Cutting","Frame Assembly","Foam Installation","Upholstery","Finishing","Quality Check","Packaging","Maintenance","Stock Management"],{data:Q,refresh:$}=Gc(()=>Ca(),3e4),{data:J,refresh:Z}=Gc(()=>Oa(),15e3);(0,s.useEffect)(()=>{ee()},[]),(0,s.useEffect)(()=>{Q&&h(Q.orders||[])},[Q]),(0,s.useEffect)(()=>{if(!J)return;const e=Array.isArray(J)&&J||Array.isArray(null===J||void 0===J?void 0:J.results)&&J.results||Array.isArray(null===J||void 0===J?void 0:J.tasks)&&J.tasks||[];p(e)},[J]);const ee=async()=>{a(!0);try{const e="role=warehouse_worker,warehouse",[n,s]=await Promise.all([La("is_active=true"),"warehouse"===(null===t||void 0===t?void 0:t.role)?pa():ma(e)]),r=Array.isArray(null===n||void 0===n?void 0:n.task_types)&&n.task_types||Array.isArray(null===n||void 0===n?void 0:n.results)&&n.results||Array.isArray(n)&&n||[];g(r);const i=((null===s||void 0===s?void 0:s.warehouse_workers)&&Array.isArray(s.warehouse_workers)&&s.warehouse_workers||(null===s||void 0===s?void 0:s.users)&&Array.isArray(s.users)&&s.users||Array.isArray(null===s||void 0===s?void 0:s.results)&&s.results||Array.isArray(s)&&s||[]).map(e=>({id:e.id,first_name:e.first_name||e.username||"",last_name:e.last_name||"",username:e.username||"",role:e.role||""})),a="warehouse"===(null===t||void 0===t?void 0:t.role)?i.filter(e=>"warehouse_worker"===e.role||"warehouse"===e.role):i;x(a);try{const e=await Ra(),t=(null===e||void 0===e?void 0:e.templates)&&Array.isArray(e.templates)&&e.templates||Array.isArray(null===e||void 0===e?void 0:e.results)&&e.results||Array.isArray(e)&&e||[];y(t)}catch(zP){}}catch(e){l("Failed to load initial data: "+e.message)}finally{a(!1)}},te=async e=>{if(window.confirm("Are you sure you want to delete this task?")){a(!0);try{await(e=>Ji("/tasks/tasks/".concat(e,"/"),{method:"DELETE"}))(e),d("Task deleted successfully!"),Z()}catch(t){l("Failed to delete task: "+t.message)}finally{a(!1)}}},ne=async e=>{if(0!==G.length){a(!0);try{await((e,t)=>Ji("/tasks/tasks/bulk_assign/",{method:"POST",data:{task_ids:e,worker_id:t}}))(G,e),d("".concat(G.length," tasks assigned successfully!")),q([]),B(!1),Z()}catch(t){l("Failed to assign tasks: "+t.message)}finally{a(!1)}}},se=()=>{X({title:"",description:"",task_type_name:"",assigned_worker:"",priority:"medium",estimated_duration:60,deadline:"",materials_needed:[],instructions:"",template_id:null,order_item_id:""}),H(null),V(null),j([])},re=e=>({critical:"danger",high:"warning",medium:"info",low:"success"}[e]||"secondary"),ie=u.filter(e=>{var t,n;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(_.toLowerCase()))||(null===(n=e.customer_name)||void 0===n?void 0:n.toLowerCase().includes(_.toLowerCase()))}),ae=m.filter(e=>{var t,n,s;const r=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(_.toLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(_.toLowerCase())),i="all"===k||e.status===k,a="all"===S||e.priority===S,o="all"===E||(null===(s=e.assigned_worker)||void 0===s?void 0:s.id.toString())===E;return r&&i&&a&&o});return i&&0===u.length?(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading task management..."})]})}):(0,De.jsxs)(Xe,{fluid:!0,className:"task-management p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("h2",{className:"mb-1",children:[(0,De.jsx)(Ai,{className:"me-2 text-primary"}),"Task Management"]}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Create, assign, and manage warehouse tasks within orders"})]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:()=>{$(),Z()},children:[(0,De.jsx)(Ci,{className:"me-2"}),"Refresh"]}),G.length>0&&(0,De.jsxs)(Xs,{variant:"success",onClick:()=>B(!0),children:[(0,De.jsx)(Fi,{className:"me-2"}),"Bulk Assign (",G.length,")"]})]})]}),o&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>l(null),children:o}),c&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>d(null),children:c}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{children:[(0,De.jsxs)(Pn,{md:4,children:[(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Search orders or tasks...",value:_,onChange:e=>N(e.target.value)})]}),0===f.length&&(0,De.jsx)("div",{className:"small text-muted mt-2",children:"No task types found. Ensure backend returns /api/tasks/task_types/?is_active=true."})]}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{value:k,onChange:e=>C(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Status"}),(0,De.jsx)("option",{value:"assigned",children:"Assigned"}),(0,De.jsx)("option",{value:"started",children:"Started"}),(0,De.jsx)("option",{value:"paused",children:"Paused"}),(0,De.jsx)("option",{value:"completed",children:"Completed"}),(0,De.jsx)("option",{value:"approved",children:"Approved"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{value:S,onChange:e=>A(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Priority"}),(0,De.jsx)("option",{value:"critical",children:"Critical"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"low",children:"Low"})]})}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsxs)(Gl.Select,{value:E,onChange:e=>T(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Workers"}),v.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]}),0===v.length&&(0,De.jsx)("div",{className:"small text-muted mt-2",children:"No workers found. Managers see warehouse workers only."})]}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{value:"".concat(P,"-").concat(L),onChange:e=>{const[t,n]=e.target.value.split("-");M(t),R(n)},children:[(0,De.jsx)("option",{value:"created_at-desc",children:"Newest First"}),(0,De.jsx)("option",{value:"created_at-asc",children:"Oldest First"}),(0,De.jsx)("option",{value:"priority-desc",children:"High Priority First"}),(0,De.jsx)("option",{value:"deadline-asc",children:"Deadline Soon"})]})})]})})}),(0,De.jsxs)(Fc,{activeKey:n,onSelect:r,className:"mb-4",children:[(0,De.jsxs)(Vc,{eventKey:"orders",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(ur,{className:"me-2"}),"Orders (",ie.length,")"]}),children:[(0,De.jsx)(Sn,{children:ie.map(e=>{var t,n,s,r,i,a,o,l;return(0,De.jsx)(Pn,{lg:6,xl:4,className:"mb-4",children:(0,De.jsxs)(ps,{className:"h-100 shadow-sm order-card",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h6",{className:"mb-0 fw-bold",children:e.order_number}),(0,De.jsx)("small",{className:"text-muted",children:e.customer_name})]}),(0,De.jsx)(Rn,{bg:re(e.urgency),children:null===(t=e.urgency)||void 0===t?void 0:t.toUpperCase()})]}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("small",{className:"text-muted",children:"Task Progress"}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,De.jsxs)("span",{className:"small",children:[(null===(n=e.task_counts)||void 0===n?void 0:n.completed)||0," / ",(null===(s=e.task_counts)||void 0===s?void 0:s.total)||0," completed"]}),(0,De.jsxs)("span",{className:"small text-muted",children:[(null===(r=e.task_counts)||void 0===r?void 0:r.total)>0?Math.round(((null===(i=e.task_counts)||void 0===i?void 0:i.completed)||0)/e.task_counts.total*100):0,"%"]})]}),(0,De.jsx)(Jo,{now:(null===(a=e.task_counts)||void 0===a?void 0:a.total)>0?((null===(o=e.task_counts)||void 0===o?void 0:o.completed)||0)/e.task_counts.total*100:0,variant:"success",style:{height:"6px"}})]}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)(Sn,{className:"g-2 text-center",children:[(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"border rounded p-2",children:[(0,De.jsx)("div",{className:"fw-bold text-primary",children:e.items_count}),(0,De.jsx)("small",{className:"text-muted",children:"Items"})]})}),(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"border rounded p-2",children:[(0,De.jsxs)("div",{className:"fw-bold text-success",children:["R",null===(l=e.total_amount)||void 0===l?void 0:l.toFixed(2)]}),(0,De.jsx)("small",{className:"text-muted",children:"Value"})]})})]})}),e.items&&e.items.length>0&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("small",{className:"text-muted fw-semibold d-block mb-2",children:"Order Items:"}),(0,De.jsx)("div",{className:"space-y-2",children:e.items.map((e,t)=>{var n,s;return(0,De.jsxs)("div",{className:"p-2 bg-light rounded border",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center flex-wrap gap-2",children:[(0,De.jsx)(ur,{className:"text-primary"}),(0,De.jsxs)("span",{className:"fw-semibold",children:[e.quantity,"x ",e.product_name]}),e.color_name&&(0,De.jsxs)(Rn,{bg:"light",text:"dark",className:"border",style:{backgroundColor:e.hex_color||void 0,color:e.hex_color?"#000":void 0,cursor:"pointer",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.05)"},children:["Color: ",e.color_name]}),e.fabric_name&&(0,De.jsxs)(Rn,{bg:"light",text:"dark",className:"border",children:["Fabric: ",e.fabric_name]})]}),(0,De.jsx)("div",{className:"mt-1",children:(0,De.jsxs)("small",{className:"text-muted",children:["Unit: R",null===(n=e.unit_price)||void 0===n?void 0:n.toFixed(2)," | Total: R",null===(s=e.total_price)||void 0===s?void 0:s.toFixed(2)]})})]},t)})})]}),(0,De.jsxs)("div",{className:"d-grid gap-2",children:[(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>(e=>{H(e),j([]),Sa(e.id).then(e=>{const t=Array.isArray(null===e||void 0===e?void 0:e.items)?e.items:Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:[];j(t)}).catch(()=>j([])),D(!0)})(e),className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(oi,{className:"me-2"}),"Create Task"]}),(0,De.jsxs)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>{},className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(Br,{className:"me-2"}),"View Details"]})]})]})]})},e.id)})}),0===ie.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(ur,{size:60,className:"text-muted mb-3"}),(0,De.jsx)("h4",{className:"text-muted mb-2",children:"No orders found"}),(0,De.jsx)("p",{className:"text-muted",children:_?"Try adjusting your search criteria.":"No orders available for task creation."})]})]}),(0,De.jsx)(Vc,{eventKey:"tasks",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(Ai,{className:"me-2"}),"All Tasks (",ae.length,")"]}),children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{width:"30",children:(0,De.jsx)(Gl.Check,{type:"checkbox",onChange:e=>{e.target.checked?q(ae.map(e=>e.id)):q([])},checked:G.length===ae.length&&ae.length>0})}),(0,De.jsx)("th",{children:"Task"}),(0,De.jsx)("th",{children:"Order"}),(0,De.jsx)("th",{children:"Worker"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Priority"}),(0,De.jsx)("th",{children:"Progress"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:ae.map(e=>{var t,n,s,r;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsx)(Gl.Check,{type:"checkbox",checked:G.includes(e.id),onChange:t=>{t.target.checked?q(t=>[...t,e.id]):q(t=>t.filter(t=>t!==e.id))}})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsx)("small",{className:"text-muted d-block",children:e.description}),e.order_item_details&&(0,De.jsx)("small",{className:"text-muted",children:e.order_item_details.order_items?(0,De.jsxs)(De.Fragment,{children:[e.order_item_details.total_items," item",1!==e.order_item_details.total_items?"s":"",e.order_item_details.order_items.slice(0,2).map((e,t)=>(0,De.jsxs)("span",{children:[" \u2022 ",e.product_name,e.fabric_name?" (".concat(e.fabric_name,")"):"",e.color_name?" - ".concat(e.color_name):""," x".concat(e.quantity)]},t)),e.order_item_details.total_items>2&&(0,De.jsxs)("span",{children:[" \u2022 +",e.order_item_details.total_items-2," more"]})]}):(0,De.jsxs)(De.Fragment,{children:[e.order_item_details.product_name,e.order_item_details.fabric_name?" \u2022 ".concat(e.order_item_details.fabric_name):"",e.order_item_details.color_name?" \u2022 ".concat(e.order_item_details.color_name):""," \u2022 Qty ".concat(e.order_item_details.quantity)]})})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{children:(0,De.jsx)("div",{className:"fw-semibold",children:e.order_number||(null===(t=e.order)||void 0===t?void 0:t.order_number)||"-"})})}),(0,De.jsx)("td",{children:e.assigned_to||e.assigned_to_name?(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Ii,{className:"me-2 text-muted"}),(0,De.jsx)("div",{className:"fw-semibold",children:e.assigned_to_name||e.assigned_to})]}):(0,De.jsx)(Rn,{bg:"light",text:"dark",children:"Unassigned"})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:(r=e.status,{assigned:"secondary",started:"primary",paused:"warning",completed:"success",approved:"info",rejected:"danger"}[r]||"secondary"),children:null===(n=e.status)||void 0===n?void 0:n.replace("_"," ").toUpperCase()})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:re(e.priority),children:null===(s=e.priority)||void 0===s?void 0:s.toUpperCase()})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"progress me-2",style:{width:"60px",height:"6px"},children:(0,De.jsx)("div",{className:"progress-bar bg-success",style:{width:"".concat(e.progress_percentage||0,"%")}})}),(0,De.jsxs)("small",{className:"text-muted",children:[e.progress_percentage||0,"%"]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>(e=>{var t,n;V(e),X({title:e.title||"",description:e.description||"",task_type_name:(null===(t=e.task_type)||void 0===t?void 0:t.name)||"",assigned_worker:(null===(n=e.assigned_worker)||void 0===n?void 0:n.id)||"",priority:e.priority||"medium",estimated_duration:e.estimated_duration||60,deadline:e.deadline||"",materials_needed:e.materials_needed?e.materials_needed.split(","):[],instructions:e.instructions||"",template_id:null}),F(!0)})(e),children:(0,De.jsx)(Rr,{})}),(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>te(e.id),children:(0,De.jsx)(Pi,{})})]})})]},e.id)})})]}),0===ae.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Ai,{size:60,className:"text-muted mb-3"}),(0,De.jsx)("h4",{className:"text-muted mb-2",children:"No tasks found"}),(0,De.jsx)("p",{className:"text-muted",children:_?"Try adjusting your search criteria.":"No tasks have been created yet."})]})]})})})]}),(0,De.jsxs)(Vo,{show:O,onHide:()=>D(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(oi,{className:"me-2"}),"Create Task in Order: ",null===W||void 0===W?void 0:W.order_number]})}),(0,De.jsxs)(Gl,{onSubmit:async e=>{if(e.preventDefault(),W){a(!0);try{const e={title:K.title,description:K.description,task_type_name:K.task_type_name||void 0,assigned_to_id:K.assigned_worker?Number(K.assigned_worker):void 0,priority:K.priority,estimated_duration:parseInt(K.estimated_duration),due_date:K.deadline?new Date(K.deadline).toISOString():null,instructions:K.instructions};!e.task_type_name&&K.task_type&&(e.task_type_id=Number(K.task_type)),K.order_item_id&&(e.order_item_id=Number(K.order_item_id)),await((e,t)=>Ji("/orders/".concat(e,"/create_task/"),{method:"POST",data:t}))(W.id,e),d("Task created successfully!"),D(!1),se(),$(),Z()}catch(t){l("Failed to create task: "+t.message)}finally{a(!1)}}},children:[(0,De.jsxs)(Vo.Body,{children:[b.length>0&&(0,De.jsx)(Sn,{className:"mb-3",children:(0,De.jsxs)(Pn,{children:[(0,De.jsx)(Gl.Label,{children:"Use Template (Optional)"}),(0,De.jsxs)(Gl.Select,{value:K.template_id||"",onChange:e=>e.target.value&&(e=>{const t=b.find(t=>t.id===e);t&&X(n=>Pe(Pe({},n),{},{title:t.title,description:t.description,task_type_name:t.task_type_name||"",priority:t.priority,estimated_duration:t.estimated_duration,instructions:t.instructions,materials_needed:t.materials_needed?t.materials_needed.split(","):[],template_id:e}))})(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select a template..."}),b.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]})}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Task Title *"}),(0,De.jsx)(Gl.Control,{type:"text",value:K.title,onChange:e=>X(t=>Pe(Pe({},t),{},{title:e.target.value})),required:!0,placeholder:"Enter task title"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Task Type *"}),(0,De.jsxs)(Gl.Select,{value:K.task_type_name,onChange:e=>X(t=>Pe(Pe({},t),{},{task_type_name:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select task type..."}),(f.length>0?f.map(e=>e.name):Y).map(e=>(0,De.jsx)("option",{value:e,children:e},e))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Order Item (optional)"}),(0,De.jsxs)(Gl.Select,{value:K.order_item_id,onChange:e=>X(t=>Pe(Pe({},t),{},{order_item_id:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"No specific item"}),w.map(e=>{var t;return(0,De.jsx)("option",{value:e.id,children:"".concat(e.product_name||(null===(t=e.product)||void 0===t?void 0:t.name)||"Item").concat(e.fabric_name?" \u2022 "+e.fabric_name:"").concat(e.color_name?" \u2022 "+e.color_name:""," \u2022 Qty ").concat(e.quantity)},e.id)})]})]})})]}),(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,value:K.description,onChange:e=>X(t=>Pe(Pe({},t),{},{description:e.target.value})),placeholder:"Describe what needs to be done..."})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Assign to Worker"}),(0,De.jsxs)(Gl.Select,{value:K.assigned_worker,onChange:e=>X(t=>Pe(Pe({},t),{},{assigned_worker:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Assign later..."}),v.map(e=>(0,De.jsxs)("option",{value:e.id,children:[(e.first_name||e.username)+(e.last_name?" "+e.last_name:"")," (",e.role,")"]},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Priority"}),(0,De.jsxs)(Gl.Select,{value:K.priority,onChange:e=>X(t=>Pe(Pe({},t),{},{priority:e.target.value})),children:[(0,De.jsx)("option",{value:"low",children:"Low"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"critical",children:"Critical"})]})]})})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Estimated Duration (minutes)"}),(0,De.jsx)(Gl.Control,{type:"number",min:"15",max:"480",value:K.estimated_duration,onChange:e=>X(t=>Pe(Pe({},t),{},{estimated_duration:e.target.value}))})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Deadline (Optional)"}),(0,De.jsx)(Gl.Control,{type:"datetime-local",value:K.deadline,onChange:e=>X(t=>Pe(Pe({},t),{},{deadline:e.target.value}))})]})})]}),(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Special Instructions"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:2,value:K.instructions,onChange:e=>X(t=>Pe(Pe({},t),{},{instructions:e.target.value})),placeholder:"Any special instructions or notes..."})]})]}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>D(!1),children:"Cancel"}),(0,De.jsxs)(Xs,{variant:"primary",type:"submit",disabled:i,children:[i?(0,De.jsx)(Vi,{animation:"border",size:"sm",className:"me-2"}):(0,De.jsx)(oi,{className:"me-2"}),"Create Task"]})]})]})]}),(0,De.jsxs)(Vo,{show:I,onHide:()=>F(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(Rr,{className:"me-2"}),"Edit Task: ",null===U||void 0===U?void 0:U.title]})}),(0,De.jsxs)(Gl,{onSubmit:async e=>{if(e.preventDefault(),U){a(!0);try{await(t=U.id,n=K,Ji("/tasks/tasks/".concat(t,"/"),{method:"PUT",data:n})),d("Task updated successfully!"),F(!1),se(),Z()}catch(s){l("Failed to update task: "+s.message)}finally{a(!1)}var t,n}},children:[(0,De.jsxs)(Vo.Body,{children:[(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Task Title *"}),(0,De.jsx)(Gl.Control,{type:"text",value:K.title,onChange:e=>X(t=>Pe(Pe({},t),{},{title:e.target.value})),required:!0})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Task Type *"}),(0,De.jsxs)(Gl.Select,{value:K.task_type_name,onChange:e=>X(t=>Pe(Pe({},t),{},{task_type_name:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select task type..."}),(f.length>0?f.map(e=>e.name):Y).map(e=>(0,De.jsx)("option",{value:e,children:e},e))]})]})})]}),(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,value:K.description,onChange:e=>X(t=>Pe(Pe({},t),{},{description:e.target.value}))})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Assign to Worker"}),(0,De.jsxs)(Gl.Select,{value:K.assigned_worker,onChange:e=>X(t=>Pe(Pe({},t),{},{assigned_worker:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Unassigned"}),v.map(e=>(0,De.jsx)("option",{value:e.id,children:(e.first_name||e.username)+(e.last_name?" "+e.last_name:"")},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Priority"}),(0,De.jsxs)(Gl.Select,{value:K.priority,onChange:e=>X(t=>Pe(Pe({},t),{},{priority:e.target.value})),children:[(0,De.jsx)("option",{value:"low",children:"Low"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"critical",children:"Critical"})]})]})})]})]}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>F(!1),children:"Cancel"}),(0,De.jsxs)(Xs,{variant:"primary",type:"submit",disabled:i,children:[i?(0,De.jsx)(Vi,{animation:"border",size:"sm",className:"me-2"}):(0,De.jsx)(wr,{className:"me-2"}),"Update Task"]})]})]})]}),(0,De.jsxs)(Vo,{show:z,onHide:()=>B(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(Fi,{className:"me-2"}),"Bulk Assign Tasks (",G.length,")"]})}),(0,De.jsxs)(Vo.Body,{children:[(0,De.jsxs)("p",{children:["Select a worker to assign ",G.length," selected tasks:"]}),(0,De.jsxs)(Gl.Select,{onChange:e=>e.target.value&&ne(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select worker..."}),v.map(e=>(0,De.jsxs)("option",{value:e.id,children:[(e.first_name||e.username)+(e.last_name?" "+e.last_name:"")," (",e.role,")"]},e.id))]})]}),(0,De.jsx)(Vo.Footer,{children:(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>B(!1),children:"Cancel"})})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .order-card {\n          transition: all 0.3s ease;\n          border: 1px solid #e9ecef;\n        }\n        \n        .order-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;\n        }\n        \n        .progress {\n          border-radius: 10px;\n        }\n        \n        .progress-bar {\n          border-radius: 10px;\n        }\n        \n        .table th {\n          border-top: none;\n          font-weight: 600;\n          color: #495057;\n        }\n        \n        .table td {\n          vertical-align: middle;\n        }\n        \n        @media (max-width: 768px) {\n          .task-management .d-flex.gap-2 {\n            flex-direction: column;\n            gap: 0.5rem !important;\n          }\n        }\n      "})]})},Kc=(0,s.createContext)(),Xc=(e,t)=>{switch(t.type){case"SET_ORDERS":return Pe(Pe({},e),{},{orders:t.payload});case"SET_TASKS":return Pe(Pe({},e),{},{tasks:t.payload});case"SET_DASHBOARD_DATA":return Pe(Pe({},e),{},{dashboardData:t.payload});case"SET_INVENTORY_DATA":return Pe(Pe({},e),{},{inventoryData:t.payload});case"SET_NOTIFICATIONS":return Pe(Pe({},e),{},{notifications:t.payload});case"UPDATE_TASK":return Pe(Pe({},e),{},{tasks:e.tasks.map(e=>Pe(Pe({},e),{},{tasks:e.tasks.map(e=>e.id===t.payload.id?Pe(Pe({},e),t.payload):e)}))});case"UPDATE_ORDER":return Pe(Pe({},e),{},{orders:e.orders.map(e=>e.id===t.payload.id?Pe(Pe({},e),t.payload):e)});case"ADD_NOTIFICATION":return Pe(Pe({},e),{},{notifications:[t.payload,...e.notifications.slice(0,9)]});case"MARK_NOTIFICATION_READ":return Pe(Pe({},e),{},{notifications:e.notifications.map(e=>e.id===t.payload?Pe(Pe({},e),{},{is_read:!0}):e)});case"SET_LOADING":return Pe(Pe({},e),{},{loading:t.payload});case"SET_ERROR":return Pe(Pe({},e),{},{error:t.payload});case"CLEAR_ERROR":return Pe(Pe({},e),{},{error:null});default:return e}},Yc=e=>{let{children:t}=e;const[n,r]=(0,s.useReducer)(Xc,{orders:[],tasks:[],dashboardData:null,inventoryData:null,notifications:[],loading:!1,error:null});return(0,De.jsx)(Kc.Provider,{value:Pe(Pe({},n),{},{setOrders:e=>{r({type:"SET_ORDERS",payload:e})},setTasks:e=>{r({type:"SET_TASKS",payload:e})},setDashboardData:e=>{r({type:"SET_DASHBOARD_DATA",payload:e})},setInventoryData:e=>{r({type:"SET_INVENTORY_DATA",payload:e})},setNotifications:e=>{r({type:"SET_NOTIFICATIONS",payload:e})},updateTask:e=>{r({type:"UPDATE_TASK",payload:e})},updateOrder:e=>{r({type:"UPDATE_ORDER",payload:e})},addNotification:e=>{r({type:"ADD_NOTIFICATION",payload:e})},markNotificationRead:e=>{r({type:"MARK_NOTIFICATION_READ",payload:e})},setLoading:e=>{r({type:"SET_LOADING",payload:e})},setError:e=>{r({type:"SET_ERROR",payload:e})},clearError:()=>{r({type:"CLEAR_ERROR"})}}),children:t})},Qc=()=>{const[e,t]=(0,s.useState)(!1),{updateTask:n,addNotification:r}=(()=>{const e=(0,s.useContext)(Kc);if(!e)throw new Error("useWarehouse must be used within a WarehouseProvider");return e})(),i=async function(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t(!0);try{const t=await _a(e,s,{reason:i});n({id:e,status:{start:"started",pause:"paused",resume:"started",complete:"completed"}[s]||t.new_status,is_running:"start"===s||"resume"===s,time_elapsed:t.time_elapsed||0,can_start:void 0!==t.can_start&&t.can_start,can_pause:void 0!==t.can_pause&&t.can_pause,can_complete:void 0!==t.can_complete&&t.can_complete}),r({id:Date.now(),message:"Task ".concat(s,"ed successfully"),type:"success",is_read:!1,created_at:(new Date).toISOString()});try{window.dispatchEvent(new CustomEvent("oox:refresh"))}catch(a){}return{success:!0,data:t}}catch(o){return r({id:Date.now(),message:"Failed to ".concat(s," task: ").concat(o.message),type:"error",is_read:!1,created_at:(new Date).toISOString()}),{success:!1,error:o.message}}finally{t(!1)}};return{loading:e,startTask:e=>i(e,"start"),pauseTask:e=>i(e,"pause"),resumeTask:e=>i(e,"resume"),completeTask:(e,t)=>i(e,"complete",t),approveTask:e=>i(e,"approve"),rejectTask:(e,t)=>i(e,"reject",t),performAction:i}},$c=()=>{const[e,t]=(0,s.useState)(new Set),[n,r]=(0,s.useState)("all"),{data:i,loading:a,error:o,refresh:l}=Gc(()=>Ji("/tasks/dashboard/tasks_by_order/"),15e3),{loading:c}=Qc(),d=e=>{l()},u=e=>({critical:"danger",high:"warning",medium:"info",low:"success"}[e]||"secondary");if(a)return(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading your tasks..."})]})});if(o)return(0,De.jsxs)(Nn,{variant:"danger",className:"m-4",children:[(0,De.jsx)(Nn.Heading,{children:"Error Loading Tasks"}),(0,De.jsx)("p",{children:o}),(0,De.jsxs)(Xs,{variant:"outline-danger",onClick:l,children:[(0,De.jsx)(Ci,{className:"me-2"}),"Retry"]})]});const{orders_with_tasks:h=[],summary:m={}}=i||{},p=(f=h,"all"===n?f:f.filter(e=>e.tasks.filter(e=>e.status===n).length>0).map(e=>Pe(Pe({},e),{},{tasks:e.tasks.filter(e=>e.status===n)})));var f;return(0,De.jsxs)("div",{className:"worker-order-tasks p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("h2",{className:"mb-1",children:[(0,De.jsx)(Ai,{className:"me-2 text-primary"}),"My Tasks by Order"]}),(0,De.jsxs)("p",{className:"text-muted mb-0",children:[m.total_orders," orders \u2022 ",m.total_tasks," tasks \u2022 ",m.active_tasks," active"]})]}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:l,disabled:a||c,children:[(0,De.jsx)(Ci,{className:"me-2 ".concat(a||c?"fa-spin":"")}),"Refresh"]})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-primary mb-1",children:m.total_tasks||0}),(0,De.jsx)("small",{className:"text-muted",children:"Total Tasks"})]})})}),(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm bg-success-subtle",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-success mb-1",children:m.active_tasks||0}),(0,De.jsx)("small",{className:"text-success",children:"Active Tasks"})]})})}),(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm bg-warning-subtle",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-warning mb-1",children:p.reduce((e,t)=>e+t.tasks.filter(e=>"assigned"===e.status).length,0)}),(0,De.jsx)("small",{className:"text-warning",children:"Pending"})]})})}),(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm bg-info-subtle",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-info mb-1",children:p.reduce((e,t)=>e+t.tasks.filter(e=>"completed"===e.status).length,0)}),(0,De.jsx)("small",{className:"text-info",children:"Completed"})]})})})]}),(0,De.jsx)("div",{className:"mb-4",children:(0,De.jsxs)("div",{className:"btn-group",role:"group",children:[(0,De.jsx)(Xs,{variant:"all"===n?"primary":"outline-primary",onClick:()=>r("all"),children:"All Tasks"}),(0,De.jsx)(Xs,{variant:"assigned"===n?"secondary":"outline-secondary",onClick:()=>r("assigned"),children:"Assigned"}),(0,De.jsx)(Xs,{variant:"started"===n?"success":"outline-success",onClick:()=>r("started"),children:"In Progress"}),(0,De.jsx)(Xs,{variant:"paused"===n?"warning":"outline-warning",onClick:()=>r("paused"),children:"Paused"}),(0,De.jsx)(Xs,{variant:"completed"===n?"info":"outline-info",onClick:()=>r("completed"),children:"Completed"})]})}),(0,De.jsx)("div",{className:"orders-list",children:p.map(n=>{var s;const r=e.has(n.order_info.id),i=n.tasks.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{});var a;return(0,De.jsxs)(ps,{className:"mb-4 border-start border-4 ".concat((a=n.order_info.urgency,{critical:"bg-danger-subtle border-danger",high:"bg-warning-subtle border-warning",medium:"bg-info-subtle border-info",low:"bg-success-subtle border-success"}[a]||"bg-light border-secondary")," order-card"),children:[(0,De.jsxs)(ps.Header,{className:"cursor-pointer",onClick:()=>(async n=>{const s=new Set(e);s.has(n)?s.delete(n):s.add(n),t(s)})(n.order_info.id),style:{cursor:"pointer"},children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(ur,{className:"me-2 text-primary"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1 fw-bold",children:n.order_info.order_number}),(0,De.jsx)("p",{className:"mb-0 text-muted",children:n.order_info.customer_name})]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,De.jsxs)("div",{className:"text-end",children:[(0,De.jsx)(Rn,{bg:u(n.order_info.urgency),className:"mb-1",children:null===(s=n.order_info.urgency)||void 0===s?void 0:s.toUpperCase()}),(0,De.jsx)("div",{children:(0,De.jsxs)("small",{className:"text-muted",children:["Due: ",n.order_info.delivery_deadline||"No deadline"]})})]}),(0,De.jsxs)("div",{className:"text-end",children:[(0,De.jsxs)("div",{className:"fw-bold text-primary",children:[n.tasks.length," task",1!==n.tasks.length?"s":""]}),(0,De.jsx)("small",{className:"text-muted",children:r?"\u25bc Click to collapse":"\u25b6 Click to expand"})]})]})]}),(0,De.jsx)("div",{className:"mt-2",children:(0,De.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[i.assigned>0&&(0,De.jsxs)(Rn,{bg:"secondary",className:"small",children:[i.assigned," Assigned"]}),i.started>0&&(0,De.jsxs)(Rn,{bg:"success",className:"small",children:[i.started," In Progress"]}),i.paused>0&&(0,De.jsxs)(Rn,{bg:"warning",className:"small",children:[i.paused," Paused"]}),i.completed>0&&(0,De.jsxs)(Rn,{bg:"info",className:"small",children:[i.completed," Completed"]})]})})]}),r&&(0,De.jsx)(ps.Body,{className:"bg-light",children:(0,De.jsx)(Sn,{children:n.tasks.map(e=>(0,De.jsx)(Pn,{lg:6,className:"mb-3",children:(0,De.jsx)(Zo,{task:e,onTaskUpdate:d,showOrderInfo:!1,compact:!0,enableActions:!0})},e.id))})})]},n.order_info.id)})}),0===p.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Ai,{size:60,className:"text-muted mb-3"}),(0,De.jsx)("h4",{className:"text-muted mb-2",children:"No tasks found"}),(0,De.jsx)("p",{className:"text-muted",children:"all"===n?"You don't have any tasks assigned to you at the moment.":'No tasks with "'.concat(n,'" status found.')}),"all"!==n&&(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>r("all"),children:"Show All Tasks"})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .order-card {\n          transition: all 0.3s ease;\n        }\n        \n        .order-card:hover {\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;\n        }\n        \n        .cursor-pointer:hover {\n          background-color: rgba(0,0,0,0.02);\n        }\n        \n        .btn-group .btn {\n          font-size: 0.9rem;\n        }\n        \n        @media (max-width: 768px) {\n          .btn-group {\n            flex-wrap: wrap;\n            gap: 0.25rem;\n          }\n          \n          .btn-group .btn {\n            font-size: 0.8rem;\n            padding: 0.375rem 0.5rem;\n          }\n          \n          .order-card .card-header {\n            padding: 1rem;\n          }\n          \n          .order-card .card-header h5 {\n            font-size: 1.1rem;\n          }\n        }\n      "})]})},Jc=e=>{var t,n;let{user:r,onLogout:i}=e;const a=Z();let o=null;try{o=te()}catch(u){}const l=(null===(t=o)||void 0===t?void 0:t.user)||r,[c,d]=(null===(n=o)||void 0===n||n.onLogout,(0,s.useState)(!0)),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(new Date),[v,x]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[w,j]=(0,s.useState)([]),[_,N]=(0,s.useState)([]),[k,C]=(0,s.useState)([]),[S,A]=(0,s.useState)(null),[E,T]=(0,s.useState)([]),[P,M]=(0,s.useState)(()=>(console.log("Setting default tab for role:",null===l||void 0===l?void 0:l.role),"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?"my-tasks":(["owner","admin","warehouse"].includes(null===l||void 0===l?void 0:l.role),"overview")));(0,s.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("tab");e&&M(e)},[]);const[L,R]=(0,s.useState)(null),[O,D]=(0,s.useState)(!1),[I,F]=(0,s.useState)(!1),[z,B]=(0,s.useState)(!1),[W,H]=(0,s.useState)("all"),[U,V]=(0,s.useState)("all");(0,s.useEffect)(()=>{const e=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{const e=setInterval(()=>{X(!0)},3e4);return()=>clearInterval(e)},[l]),(0,s.useEffect)(()=>{l&&X()},[l]),(0,s.useEffect)(()=>{const e=()=>X(!0);return window.addEventListener("oox:refresh",e),()=>window.removeEventListener("oox:refresh",e)},[l]);const G=()=>(console.log("Current user role:",null===l||void 0===l?void 0:l.role),["owner","admin","warehouse"].includes(null===l||void 0===l?void 0:l.role)),q=()=>"owner"===(null===l||void 0===l?void 0:l.role)?"/owner/orders":"admin"===(null===l||void 0===l?void 0:l.role)?"/admin/orders":"warehouse"===(null===l||void 0===l?void 0:l.role)||"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?"/warehouse/orders":"/",K=()=>["owner","admin","warehouse_worker","warehouse"].includes(null===l||void 0===l?void 0:l.role),X=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||d(!0),h(null);try{const e=await Da(null===l||void 0===l?void 0:l.role);y(e),"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?await Y():G()&&await Q(),await $(),K()&&await J(),x((new Date).toISOString())}catch(t){h("Failed to load dashboard data: "+t.message)}finally{e||d(!1)}},Y=async()=>{try{const e=await Na();N(e.tasks||[])}catch(e){console.error("Failed to load worker dashboard:",e)}},Q=async()=>{try{const[e,t]=await Promise.all([Ca(),ka()]);j(e.orders||[]),N(t.tasks||[])}catch(e){console.error("Failed to load supervisor dashboard:",e)}},$=async()=>{try{const e=await(async()=>{const e=await Ji("/tasks/notifications/");return(Array.isArray(e)?e:Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:[]).filter(e=>!e.is_read)})();C(e.notifications||[])}catch(e){console.error("Failed to load notifications:",e)}},J=async()=>{try{const[e,t]=await Promise.all([Ta(),Pa()]);A(e),T(t||[])}catch(e){console.error("Failed to load inventory data:",e)}},ee=((0,s.useCallback)(e=>{N(t=>t.map(t=>Pe(Pe({},t),{},{tasks:t.tasks.map(t=>t.id===e.id?Pe(Pe({},t),e):t)})))},[]),()=>(0,De.jsxs)("div",{children:[(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"bg-primary text-white",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1",children:"My Active Tasks"}),(0,De.jsx)("h2",{className:"mb-0",children:_.filter(e=>"started"===e.status).length})]}),(0,De.jsx)(Ai,{size:40,className:"opacity-75"})]})})})}),(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"bg-success text-white",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1",children:"Completed Today"}),(0,De.jsx)("h2",{className:"mb-0",children:_.filter(e=>"completed"===e.status).length})]}),(0,De.jsx)(wr,{size:40,className:"opacity-75"})]})})})}),(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"bg-warning text-white",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1",children:"Pending Tasks"}),(0,De.jsx)("h2",{className:"mb-0",children:_.filter(e=>"assigned"===e.status).length})]}),(0,De.jsx)(Sr,{size:40,className:"opacity-75"})]})})})})]}),(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Header,{children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Ai,{className:"me-2"}),"My Tasks Overview"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("p",{className:"text-muted",children:'View and manage your assigned tasks in the "My Tasks" section.'}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>M("my-tasks"),children:"View My Tasks"})]})]})]})),ne=()=>(0,De.jsxs)("div",{children:[(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-primary text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(hr,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Total Orders"}),(0,De.jsx)("h3",{children:w.length})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-success text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ai,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Active Tasks"}),(0,De.jsx)("h3",{children:_.filter(e=>"started"===e.status).length})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-warning text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fi,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Workers Online"}),(0,De.jsx)("h3",{children:"8"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-danger text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fr,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Urgent Orders"}),(0,De.jsx)("h3",{children:w.filter(e=>"critical"===e.urgency).length})]})})})]}),(0,De.jsx)(Sn,{className:"mb-4",children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsxs)(ps.Header,{className:"bg-warning text-dark d-flex justify-content-between align-items-center",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Approval Queue"}),(0,De.jsx)(Rn,{bg:"dark",children:w.filter(e=>"pending"===e.order_status).length})]}),(0,De.jsxs)(ps.Body,{style:{maxHeight:"300px",overflowY:"auto"},children:[w.filter(e=>"pending"===e.order_status).slice(0,8).map(e=>(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 rounded bg-light",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.order_number}),(0,De.jsx)("small",{className:"text-muted",children:e.customer_name})]}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-success",onClick:()=>a(q()),children:"Review"})]},e.id)),0===w.filter(e=>"pending"===e.order_status).length&&(0,De.jsx)("div",{className:"text-center text-muted",children:"No pending approvals"})]})]})})}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(Ai,{className:"me-2"}),"Task Management"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("p",{className:"text-muted",children:"Create and assign tasks to warehouse workers within specific orders."}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>M("task-management"),children:"Manage Tasks"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(hr,{className:"me-2"}),"Recent Orders"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("p",{className:"text-muted",children:w.length>0?"".concat(w.length," orders ready for processing"):"No orders available"}),(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>a(q()),children:"View All Orders"})]})]})})]})]}),se=()=>(0,De.jsxs)("div",{children:[(0,De.jsx)(Sn,{className:"mb-4",children:(0,De.jsx)(Pn,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h4",{children:[(0,De.jsx)(hr,{className:"me-2 text-primary"}),"Inventory Management"]}),"warehouse_worker"!==(null===l||void 0===l?void 0:l.role)&&(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"outline-success",onClick:()=>a("/warehouse/products/new"),children:[(0,De.jsx)(oi,{className:"me-2"}),"Add Product"]}),(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>a("/warehouse/inventory/materials"),children:"Manage Materials"}),(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>a("/warehouse/inventory/stock-in-house"),children:"Update Stock In-House"}),(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>B(!0),children:[(0,De.jsx)(oi,{className:"me-2"}),"Quick Stock Entry"]})]})]})})}),E.length>0&&(0,De.jsxs)(Nn,{variant:"warning",className:"mb-4",children:[(0,De.jsx)(Fr,{className:"me-2"}),(0,De.jsx)("strong",{children:"Low Stock Alert:"})," ",E.length," items are running low."]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{className:"text-center",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-primary",children:(null===S||void 0===S?void 0:S.total_materials)||0}),(0,De.jsx)("p",{className:"text-muted",children:"Total Materials"})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{className:"text-center",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-success",children:(null===S||void 0===S?void 0:S.in_stock)||0}),(0,De.jsx)("p",{className:"text-muted",children:"In Stock"})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{className:"text-center",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-danger",children:E.length}),(0,De.jsx)("p",{className:"text-muted",children:"Low Stock"})]})})})]})]});return c?(0,De.jsx)("div",{className:"warehouse-dashboard",children:(0,De.jsx)(Xe,{fluid:!0,className:"d-flex justify-content-center align-items-center",style:{minHeight:"80vh"},children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading warehouse dashboard..."})]})})}):(0,De.jsxs)("div",{className:"warehouse-dashboard",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[(0,De.jsxs)(Xe,{fluid:!0,className:"p-4",children:[u&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>h(null),className:"mb-4",children:[(0,De.jsx)(Fr,{className:"me-2"}),u]}),m&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>p(null),className:"mb-4",children:[(0,De.jsx)(wr,{className:"me-2"}),m]}),(()=>{switch(P){case"overview":return"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?(0,De.jsx)(ee,{}):(0,De.jsx)(ne,{});case"task-management":return G()?(0,De.jsx)(qc,{user:l}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Fr,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access task management."})]})});case"my-tasks":return"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?(0,De.jsx)($c,{}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Fr,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"This section is only available for warehouse workers."})]})});case"inventory":return K()?(0,De.jsx)(se,{}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Fr,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access inventory management."})]})});case"analytics":return["owner","admin","warehouse"].includes(null===l||void 0===l?void 0:l.role)?(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center py-5",children:[(0,De.jsx)(vr,{size:50,className:"text-muted mb-3"}),(0,De.jsx)("h5",{children:"Analytics Dashboard"}),(0,De.jsx)("p",{className:"text-muted mb-4",children:"Comprehensive warehouse analytics and reporting"}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>a("owner"===(null===l||void 0===l?void 0:l.role)||"admin"===(null===l||void 0===l?void 0:l.role)?"/owner/analytics":"/warehouse"),children:"View Full Analytics"})]})}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Fr,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access analytics."})]})});case"workers":return G()?(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center py-5",children:[(0,De.jsx)(Fi,{size:50,className:"text-muted mb-3"}),(0,De.jsx)("h5",{children:"Worker Management"}),(0,De.jsx)("p",{className:"text-muted mb-4",children:"Manage warehouse workers, schedules, and assignments"}),(0,De.jsx)(Xs,{variant:"primary",disabled:!0,children:"Coming Soon"})]})}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Fr,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access worker management."})]})});default:return(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Fr,{size:50,className:"text-muted mb-3"}),(0,De.jsx)("h5",{children:"Page Not Found"}),(0,De.jsx)("p",{className:"text-muted",children:"The requested page could not be found."})]})})}})()]}),(0,De.jsx)(ql,{show:O,onHide:()=>D(!1),order:L,onTasksAssigned:()=>{D(!1),R(null),X(!0),p("Tasks assigned successfully!")}}),(0,De.jsx)(Zl,{show:z,onHide:()=>B(!1),onStockUpdated:()=>{B(!1),J(),p("Stock updated successfully!")}}),(0,De.jsxs)(Vo,{show:I,onHide:()=>F(!1),size:"lg",centered:!0,children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Order Details"})}),(0,De.jsx)(Vo.Body,{children:L&&(0,De.jsxs)("div",{children:[(0,De.jsxs)("h6",{children:["Order: ",L.order_number]}),(0,De.jsxs)("p",{children:["Customer: ",L.customer_name]}),(0,De.jsxs)("p",{children:["Total: R",L.total_amount]}),(0,De.jsxs)("p",{children:["Status: ",L.status]})]})}),(0,De.jsx)(Vo.Footer,{children:(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>F(!1),children:"Close"})})]}),v&&(0,De.jsx)("div",{className:"position-fixed bottom-0 end-0 p-3",children:(0,De.jsxs)("div",{className:"d-flex flex-column align-items-end gap-1",children:[(0,De.jsxs)("small",{className:"text-muted bg-white px-2 py-1 rounded shadow-sm",children:["Last updated: ",new Date(v).toLocaleTimeString()]}),(0,De.jsxs)("small",{className:"text-muted bg-white px-2 py-1 rounded shadow-sm",children:["Build: ","b64afdc5 - status-first workflow, task assignment + inventory fixes"]})]})}),(0,De.jsx)("style",{jsx:!0,children:"\n        .warehouse-dashboard .card {\n          border: none;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n          transition: all 0.3s ease;\n        }\n        \n        .warehouse-dashboard .card:hover {\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        \n        .btn {\n          transition: all 0.2s ease;\n          border-radius: 8px;\n        }\n        \n        .btn:hover {\n          transform: translateY(-1px);\n        }\n        \n        .badge {\n          font-size: 0.75em;\n          padding: 0.5em 0.75em;\n        }\n        \n        @media (max-width: 768px) {\n          .warehouse-dashboard .container-fluid {\n            padding: 1rem !important;\n          }\n        }\n      "})]})},Zc=e=>{var t,n,r,i,a,o;let{user:l,onLogout:c}=e;const[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),[x,b]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[j,_]=(0,s.useState)(!1),[N,k]=(0,s.useState)(new Date),[C,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=setInterval(()=>k(new Date),6e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{A();const e=setInterval(A,3e4);return()=>clearInterval(e)},[]);const A=async()=>{try{m(!0);const e=await Zi(),t=(e.results||e).filter(e=>"out_for_delivery"===e.order_status||"delivered"===e.order_status);u(t)}catch(e){f("Failed to load delivery orders"),console.error(e)}finally{m(!1)}},E=()=>(0,De.jsxs)("div",{className:"oox-mobile-header oox-animate-fadeInUp",style:{background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"2px solid #fbbf24",boxShadow:"0 10px 30px rgba(251, 191, 36, 0.1)"},children:[(0,De.jsxs)("div",{className:"oox-brand",children:[(0,De.jsx)("div",{className:"oox-logo",style:{backgroundColor:"#fbbf24"},children:(0,De.jsx)(Mi,{size:25,style:{color:"white"}})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"oox-title",style:{color:"#1f2937"},children:"OOX Delivery Hub"}),(0,De.jsxs)("p",{className:"oox-subtitle",style:{color:"#6b7280"},children:["OOX Furniture Route Management \u2022 ",(null===l||void 0===l?void 0:l.first_name)||"DRIVER"," \u2022 ",N.toLocaleDateString()]})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-stats",children:[(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.filter(e=>"out_for_delivery"===e.order_status).length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Out for Delivery"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.filter(e=>"delivered"===e.order_status).length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Delivered"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Total"})]})]})]}),T=e=>{let{title:t,value:n,icon:r,color:i,bgColor:a}=e;return(0,De.jsx)(ps,{className:"h-100 shadow-sm border-0",style:{background:"linear-gradient(135deg, ".concat(a,"15 0%, ").concat(a,"05 100%)"),borderLeft:"4px solid ".concat(i),borderRadius:"15px"},children:(0,De.jsxs)(ps.Body,{className:"text-center p-4",children:[(0,De.jsx)("div",{className:"mb-3",children:s.createElement(r,{size:40,color:i})}),(0,De.jsx)("h3",{className:"mb-1",style:{fontWeight:"700",color:i,fontSize:"2.5rem",fontFamily:"monospace"},children:n}),(0,De.jsx)("p",{className:"mb-0",style:{fontSize:"0.9rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:t})]})})},P=e=>{let{variant:t,onClick:n,icon:r,children:i,disabled:a=!1,style:o={}}=e;return(0,De.jsxs)(Xs,{variant:t,onClick:n,disabled:a,className:"w-100 mb-3 d-flex align-items-center justify-content-center",style:Pe({height:"70px",fontSize:"1.1rem",fontWeight:"700",borderRadius:"15px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",textTransform:"uppercase",letterSpacing:"1px"},o),children:[r&&s.createElement(r,{size:20,className:"me-3"}),i]})},M=e=>{var t,n,s;let{order:r,onStartDelivery:i,onViewDetails:a,onComplete:o}=e;const l=(null===C||void 0===C?void 0:C.id)===r.id,c="delivered"===r.order_status,d="out_for_delivery"===r.order_status;return(0,De.jsx)(ps,{className:"mb-3 shadow-sm ".concat(l?"border-warning border-2":""),style:{borderRadius:"15px",overflow:"hidden",border:c?"2px solid #10b981":d?"2px solid #fbbf24":"1px solid #e5e7eb"},children:(0,De.jsx)(ps.Body,{className:"p-3",children:(0,De.jsxs)(Sn,{className:"align-items-center",children:[(0,De.jsxs)(Pn,{md:8,children:[(0,De.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,De.jsx)(Rn,{bg:c?"success":d?"warning":"secondary",className:"me-2 px-3 py-2",style:{fontSize:"0.8rem",borderRadius:"10px"},children:c?"DELIVERED":d?"IN TRANSIT":"READY"}),(0,De.jsx)("h6",{className:"mb-0 fw-bold",children:r.order_number})]}),(0,De.jsxs)("div",{className:"mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,De.jsx)(Ii,{className:"text-muted me-2",size:14}),(0,De.jsx)("span",{className:"fw-bold",children:(null===(t=r.customer)||void 0===t?void 0:t.name)||r.customer_name})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,De.jsx)(ii,{className:"text-muted me-2",size:14}),(0,De.jsx)("span",{children:(null===(n=r.customer)||void 0===n?void 0:n.phone)||"No phone"})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Zr,{className:"text-muted me-2",size:14}),(0,De.jsx)("span",{className:"text-muted small",children:(null===(s=r.customer)||void 0===s?void 0:s.address)||"Address not available"})]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(ti,{className:"text-success me-2",size:14}),(0,De.jsxs)("span",{className:"fw-bold text-success",children:["R",r.total_amount]}),(0,De.jsx)("span",{className:"text-muted ms-2 small",children:"fully_paid"===r.payment_status?"(Paid)":"(Balance Due)"})]})]}),(0,De.jsxs)(Pn,{md:4,children:[!c&&!d&&(0,De.jsx)(P,{variant:"warning",onClick:()=>i(r),icon:ai,style:{height:"50px",fontSize:"0.9rem"},children:"Start Route"}),d&&(0,De.jsx)(P,{variant:"success",onClick:()=>o(r),icon:yr,style:{height:"50px",fontSize:"0.9rem"},children:"Mark Delivered"}),c&&(0,De.jsx)(P,{variant:"outline-success",onClick:()=>a(r),icon:kr,style:{height:"50px",fontSize:"0.9rem"},children:"View POD"}),(0,De.jsxs)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>a(r),className:"w-100 mt-2",style:{borderRadius:"10px"},children:[(0,De.jsx)(Zr,{className:"me-1"}),"View Route"]})]})]})})})},L=e=>{S(e),v("Started delivery for ".concat(e.order_number)),setTimeout(()=>v(null),3e3)},R=e=>{b(e),_(!0)},O=e=>{b(e),w(!0)},D=e=>{const t="https://www.google.com/maps/dir/?api=1&destination=".concat(encodeURIComponent(e));window.open(t,"_blank")},I=e=>{if(!e)return"";const t=String(e).trim().replace(/[^\d+]/g,"");return t.startsWith("+27")?t:t.startsWith("27")?"+".concat(t):t.startsWith("0")?"+27".concat(t.slice(1)):t.startsWith("+")?t:"+".concat(t)},F=d.filter(e=>"out_for_delivery"===e.order_status),z=d.filter(e=>"delivered"===e.order_status);return h?(0,De.jsx)(Xe,{fluid:!0,className:"p-4",children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("div",{className:"spinner-border text-warning",style:{width:"3rem",height:"3rem"},role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading delivery routes..."})]})}):(0,De.jsxs)(Xe,{fluid:!0,className:"delivery-dashboard",style:{backgroundColor:"#f9fafb",minHeight:"100vh",padding:"1rem"},children:[(0,De.jsx)(E,{}),p&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>f(null),children:p}),g&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>v(null),children:g}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:6,className:"mb-3",children:(0,De.jsx)(T,{title:"In Transit",value:F.length,icon:ui,color:"#fbbf24",bgColor:"#fbbf24"})}),(0,De.jsx)(Pn,{md:6,className:"mb-3",children:(0,De.jsx)(T,{title:"Delivered Today",value:z.length,icon:yr,color:"#10b981",bgColor:"#10b981"})})]}),C&&(0,De.jsxs)(ps,{className:"mb-4 shadow-lg border-warning border-2",children:[(0,De.jsx)(ps.Header,{className:"bg-warning text-dark",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Er,{className:"me-2"}),"Active Delivery: ",C.order_number]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{children:[(0,De.jsxs)(Pn,{md:8,children:[(0,De.jsxs)("h6",{children:["Customer: ",null===(t=C.customer)||void 0===t?void 0:t.name]}),(0,De.jsxs)("p",{children:["Address: ",null===(n=C.customer)||void 0===n?void 0:n.address]}),(0,De.jsxs)("p",{children:["Phone: ",null===(r=C.customer)||void 0===r?void 0:r.phone]})]}),(0,De.jsxs)(Pn,{md:4,children:[(0,De.jsx)(P,{variant:"primary",onClick:()=>{var e;return D(null===(e=C.customer)||void 0===e?void 0:e.address)},icon:Zr,children:"Open in Maps"}),(0,De.jsx)(P,{variant:"success",onClick:()=>R(C),icon:Vr,children:"Mark as Delivered"})]})]})})]}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-primary text-white",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Mi,{className:"me-2"}),"Delivery Queue (",d.length," orders)"]})}),(0,De.jsx)(ps.Body,{style:{maxHeight:"600px",overflowY:"auto"},children:d.length>0?d.map(e=>(0,De.jsx)(M,{order:e,onStartDelivery:L,onViewDetails:O,onComplete:R},e.id)):(0,De.jsxs)("div",{className:"text-center text-muted py-5",children:[(0,De.jsx)(Mi,{size:50,className:"mb-3 opacity-50"}),(0,De.jsx)("p",{children:"No deliveries available"})]})})]})})}),(0,De.jsxs)(Vo,{show:y,onHide:()=>w(!1),size:"lg",centered:!0,children:[(0,De.jsx)(Vo.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(Zr,{className:"me-2"}),"Delivery Details: ",null===x||void 0===x?void 0:x.order_number]})}),(0,De.jsx)(Vo.Body,{children:x&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)(Sn,{className:"mb-3",children:[(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsx)("h6",{children:"Customer Information"}),(0,De.jsxs)(Jl,{variant:"flush",children:[(0,De.jsxs)(Jl.Item,{children:[(0,De.jsx)("strong",{children:"Name:"})," ",null===(i=x.customer)||void 0===i?void 0:i.name]}),(0,De.jsxs)(Jl.Item,{children:[(0,De.jsx)("strong",{children:"Phone:"})," ",null!==(a=x.customer)&&void 0!==a&&a.phone?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("span",{children:x.customer.phone}),(0,De.jsxs)(Xs,{size:"sm",variant:"outline-primary",href:"tel:".concat(I(x.customer.phone)),className:"ms-2",children:[(0,De.jsx)(ii,{className:"me-1"})," Call"]}),(0,De.jsxs)(Xs,{size:"sm",variant:"success",href:(e=>{const t=I(e);if(!t)return"#";const n=t.replace(/\D/g,"");return"https://wa.me/".concat(n)})(x.customer.phone),target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:[(0,De.jsx)(nr,{className:"me-1"})," WhatsApp"]})]}):"No phone"]}),(0,De.jsxs)(Jl.Item,{children:[(0,De.jsx)("strong",{children:"Address:"})," ",null===(o=x.customer)||void 0===o?void 0:o.address]})]})]}),(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsx)("h6",{children:"Order Information"}),(0,De.jsxs)(Jl,{variant:"flush",children:[(0,De.jsxs)(Jl.Item,{children:[(0,De.jsx)("strong",{children:"Order #:"})," ",x.order_number]}),(0,De.jsxs)(Jl.Item,{children:[(0,De.jsx)("strong",{children:"Amount:"})," R",x.total_amount]}),(0,De.jsxs)(Jl.Item,{children:[(0,De.jsx)("strong",{children:"Payment:"})," ",x.payment_status]})]})]})]}),(0,De.jsx)("div",{className:"text-center",children:(0,De.jsx)(P,{variant:"primary",onClick:()=>{var e;return D(null===(e=x.customer)||void 0===e?void 0:e.address)},icon:Er,children:"Open Navigation"})})]})})]}),(0,De.jsxs)(Vo,{show:j,onHide:()=>_(!1),size:"lg",centered:!0,children:[(0,De.jsx)(Vo.Header,{closeButton:!0,className:"bg-success text-white",children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(gr,{className:"me-2"}),"Proof of Delivery: ",null===x||void 0===x?void 0:x.order_number]})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)(Gl,{children:[(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Upload Photo"}),(0,De.jsx)(Gl.Control,{type:"file",accept:"image/*",capture:"environment"}),(0,De.jsx)(Gl.Text,{className:"text-muted",children:"Take a photo of the delivered items or signed receipt"})]}),(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Delivery Notes"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,placeholder:"Any special notes about the delivery..."})]}),(0,De.jsx)(Gl.Group,{className:"mb-3",children:(0,De.jsx)(Gl.Check,{type:"checkbox",label:"Customer received all items and is satisfied"})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>{_(!1),S(null),v("Delivery completed successfully!"),setTimeout(()=>v(null),3e3),A()},children:[(0,De.jsx)(yr,{className:"me-2"}),"Complete Delivery"]})]})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .delivery-dashboard {\n          font-family: 'Inter', sans-serif;\n        }\n        .delivery-header {\n          animation: slideInDown 0.8s ease-out;\n        }\n        @keyframes slideInDown {\n          from {\n            opacity: 0;\n            transform: translateY(-30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        .card {\n          transition: transform 0.2s ease, box-shadow 0.2s ease;\n        }\n        .card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;\n        }\n        .btn {\n          transition: all 0.2s ease;\n        }\n        .btn:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.2);\n        }\n        @media (max-width: 768px) {\n          .delivery-header {\n            padding: 1.5rem !important;\n          }\n          .delivery-header h1 {\n            font-size: 1.8rem !important;\n          }\n        }\n      "})]})},ed="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,td="undefined"!==typeof document||ed?s.useLayoutEffect:s.useEffect,nd=new WeakMap,sd=(e,t)=>{if(!e||!t)return;const n=nd.get(t)||new Map;nd.set(t,n);let s=n.get(e);return s||(s=t.matchMedia(e),s.refCount=0,n.set(s.media,s)),s};function rd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=sd(e,t),[r,i]=(0,s.useState)(()=>!!n&&n.matches);return td(()=>{let n=sd(e,t);if(!n)return i(!1);let s=nd.get(t);const r=()=>{i(n.matches)};return n.refCount++,n.addListener(r),r(),()=>{n.removeListener(r),n.refCount--,n.refCount<=0&&(null==s||s.delete(n.media)),n=void 0}},[e]),r}const id=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function r(n){const s=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let r=e[s];return r="number"===typeof r?"".concat(r-.2,"px"):"calc(".concat(r," - 0.2px)"),"(max-width: ".concat(r,")")}return function(t,i,a){let o;return"object"===typeof t?(o=t,a=i,i=!0):(i=i||!0,o={[t]:i}),rd((0,s.useMemo)(()=>Object.entries(o).reduce((t,s)=>{let[i,a]=s;return"up"!==a&&!0!==a||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(i))),"down"!==a&&!0!==a||(t=n(t,r(i))),t},""),[JSON.stringify(o)]),a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),ad=["className","bsPrefix","as"],od=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,ad);return s=He(s,"offcanvas-body"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});od.displayName="OffcanvasBody";const ld=od,cd=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],dd={[Mt]:"show",[Lt]:"show"},ud=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,children:i,in:a=!1,mountOnEnter:o=!1,unmountOnExit:l=!1,appear:c=!1}=e,d=Le(e,cd);return n=He(n,"offcanvas"),(0,De.jsx)(un,Pe(Pe({ref:t,addEndListener:sn,in:a,mountOnEnter:o,unmountOnExit:l,appear:c},d),{},{childRef:zt(i),children:(e,t)=>s.cloneElement(i,Pe(Pe({},t),{},{className:Oe()(r,i.props.className,(e===Mt||e===Rt)&&"".concat(n,"-toggling"),dd[e])}))}))});ud.displayName="OffcanvasToggling";const hd=ud,md=["bsPrefix","className","closeLabel","closeButton"],pd=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,closeLabel:r="Close",closeButton:i=!1}=e,a=Le(e,md);return n=He(n,"offcanvas-header"),(0,De.jsx)(Mo,Pe(Pe({ref:t},a),{},{className:Oe()(s,n),closeLabel:r,closeButton:i}))});pd.displayName="OffcanvasHeader";const fd=pd,gd=["className","bsPrefix","as"],vd=it("h5"),xd=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r=vd}=e,i=Le(e,gd);return s=He(s,"offcanvas-title"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});xd.displayName="OffcanvasTitle";const bd=xd,yd=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function wd(e){return(0,De.jsx)(hd,Pe({},e))}function jd(e){return(0,De.jsx)(fn,Pe({},e))}const _d=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,children:i,"aria-labelledby":a,placement:o="start",responsive:l,show:c=!1,backdrop:d=!0,keyboard:u=!0,scroll:h=!1,onEscapeKeyDown:m,onShow:p,onHide:f,container:g,autoFocus:v=!0,enforceFocus:x=!0,restoreFocus:b=!0,restoreFocusOptions:y,onEntered:w,onExit:j,onExiting:_,onEnter:N,onEntering:k,onExited:C,backdropClassName:S,manager:A,renderStaticNode:E=!1}=e,T=Le(e,yd);const P=(0,s.useRef)();n=He(n,"offcanvas");const[M,L]=(0,s.useState)(!1),R=rt(f),O=id(l||"xs","up");(0,s.useEffect)(()=>{L(l?c&&!O:c)},[c,l,O]);const D=(0,s.useMemo)(()=>({onHide:R}),[R]);const I=(0,s.useCallback)(e=>(0,De.jsx)("div",Pe(Pe({},e),{},{className:Oe()("".concat(n,"-backdrop"),S)})),[S,n]),F=e=>(0,De.jsx)("div",Pe(Pe(Pe({},e),T),{},{className:Oe()(r,l?"".concat(n,"-").concat(l):n,"".concat(n,"-").concat(o)),"aria-labelledby":a,children:i}));return(0,De.jsxs)(De.Fragment,{children:[!M&&(l||E)&&F({}),(0,De.jsx)(_o.Provider,{value:D,children:(0,De.jsx)(co,{show:M,ref:t,backdrop:d,container:g,keyboard:u,autoFocus:v,enforceFocus:x&&!h,restoreFocus:b,restoreFocusOptions:y,onEscapeKeyDown:m,onShow:p,onHide:R,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];null==N||N(e,...n)},onEntering:k,onEntered:w,onExit:j,onExiting:_,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];null==C||C(...n)},manager:A||(h?(P.current||(P.current=new bo({handleContainerOverflow:!1})),P.current):xo()),transition:wd,backdropTransition:jd,renderBackdrop:I,renderDialog:F})})]})});_d.displayName="Offcanvas";const Nd=Object.assign(_d,{Body:ld,Header:fd,Title:bd}),kd=e=>{var t,n,s,r;let{navigationItems:i,user:a,userRole:o,onLogout:l,onNavigate:c,isActiveRoute:d,getRoleColor:u,getRoleIcon:h,isMobile:m,isCollapsed:p,darkTheme:f}=e;return(0,De.jsxs)("div",{className:"h-100 d-flex flex-column",children:[(0,De.jsxs)("div",{className:"p-4 border-bottom",style:{borderColor:f.border,backgroundColor:"rgba(255,255,255,0.05)",paddingTop:p&&!m?"70px":"1.5rem"},children:[!p||m?(0,De.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,De.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"50px",height:"50px",backgroundColor:u(),color:"white",fontSize:"18px",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:((null===a||void 0===a||null===(t=a.first_name)||void 0===t?void 0:t[0])||(null===a||void 0===a||null===(n=a.username)||void 0===n?void 0:n[0])||"U").toUpperCase()}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{color:"white",fontWeight:"600",fontSize:"1rem"},children:(null===a||void 0===a?void 0:a.first_name)||(null===a||void 0===a?void 0:a.username)||"User"}),(0,De.jsxs)("div",{className:"d-flex align-items-center",style:{color:"rgba(255,255,255,0.8)",fontSize:"0.85rem"},children:[h(),(0,De.jsx)("span",{className:"ms-1",children:(null===o||void 0===o?void 0:o.charAt(0).toUpperCase())+(null===o||void 0===o?void 0:o.slice(1))||"User"})]})]})]}):(0,De.jsx)("div",{className:"d-flex justify-content-center mb-3",children:(0,De.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:u(),color:"white",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:((null===a||void 0===a||null===(s=a.first_name)||void 0===s?void 0:s[0])||(null===a||void 0===a||null===(r=a.username)||void 0===r?void 0:r[0])||"U").toUpperCase()})}),(!p||m)&&!m&&(0,De.jsx)("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:null===a||void 0===a?void 0:a.email})]}),(0,De.jsx)(Gs,{className:"flex-column flex-grow-1 p-3",children:i.map(e=>{const t=e.icon,n=d(e.path);return(0,De.jsxs)(Gs.Link,{onClick:()=>c(e.path),className:"d-flex align-items-center mb-2",style:{backgroundColor:n?u():"transparent",color:"white",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",fontWeight:n?"600":"500",border:n?"1px solid ".concat(u()):"1px solid transparent",padding:p&&!m?"12px":"12px 16px",justifyContent:p&&!m?"center":"flex-start",position:"relative"},onMouseEnter:e=>{n||(e.target.style.backgroundColor=f.accent)},onMouseLeave:e=>{n||(e.target.style.backgroundColor="transparent")},title:p&&!m?e.label:"",children:[(0,De.jsx)(t,{size:20,style:{minWidth:"20px",marginRight:p&&!m?"0":"12px"}}),(!p||m)&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("span",{className:"flex-grow-1",children:e.label}),e.badge&&(0,De.jsx)(Rn,{bg:"New"===e.badge?"success":"warning",className:"ms-2",style:{fontSize:"0.7rem"},children:e.badge})]}),p&&!m&&e.badge&&(0,De.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"New"===e.badge?"#10b981":"#f59e0b",borderRadius:"50%",border:"2px solid white"}})]},e.key)})}),(0,De.jsx)("div",{className:"p-3 border-top",style:{borderColor:f.border},children:(0,De.jsxs)(Gs.Link,{onClick:l,className:"d-flex align-items-center",style:{color:"white",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"500",padding:p&&!m?"12px":"12px 16px",justifyContent:p&&!m?"center":"flex-start"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(220, 38, 38, 0.2)"},onMouseLeave:e=>{e.target.style.backgroundColor="transparent"},title:p&&!m?"Logout":"",children:[(0,De.jsx)(xi,{size:20,style:{minWidth:"20px",marginRight:p&&!m?"0":"12px"}}),(!p||m)&&(0,De.jsx)("span",{children:"Logout"})]})})]})},Cd=e=>{let{user:t,userRole:n,onLogout:r}=e;const[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),c=Z(),d=$(),u=()=>a(!1),h=[{key:"dashboard",label:"Dashboard",icon:Kr,path:"/".concat(n),roles:["owner","admin","warehouse","delivery"]},...{owner:[{key:"orders",label:"Orders Management",icon:Cr,path:"/owner/orders",badge:"New"},{key:"transactions",label:"Transactions",icon:ti,path:"/owner/transactions"},{key:"customers",label:"Customers",icon:Fi,path:"/owner/customers"},{key:"users",label:"Team Management",icon:Ri,path:"/owner/users"},{key:"payments",label:"Payments",icon:ti,path:"/owner/payments"},{key:"deliveries",label:"Deliveries",icon:Mi,path:"/owner/deliveries"},{key:"analytics",label:"Analytics",icon:xr,path:"/owner/analytics",badge:"Pro"}],admin:[{key:"orders",label:"Orders Management",icon:Cr,path:"/admin/orders"},{key:"transactions",label:"Transactions",icon:ti,path:"/admin/transactions"},{key:"customers",label:"Customers",icon:Fi,path:"/owner/customers"},{key:"payments",label:"Payments",icon:ti,path:"/owner/payments"},{key:"deliveries",label:"Deliveries",icon:Mi,path:"/owner/deliveries"},{key:"analytics",label:"Analytics",icon:xr,path:"/owner/analytics"}],warehouse:[{key:"orders",label:"Production Queue",icon:Cr,path:"/warehouse/orders"},{key:"queue",label:"Queue Management",icon:Bi,path:"/warehouse/queue"}],delivery:[{key:"orders",label:"Delivery Orders",icon:Cr,path:"/delivery/orders"},{key:"routes",label:"Route Planning",icon:ui,path:"/delivery/routes"}]}[n]||[]],m=e=>{c(e),u()},p=e=>d.pathname===e,f=()=>({owner:"#f59e0b",admin:"#3b82f6",warehouse:"#10b981",delivery:"#06b6d4"}[n]||"#6b7280"),g=()=>{const e={owner:Di,admin:Ar,warehouse:Bi,delivery:Mi}[n]||Di;return(0,De.jsx)(e,{})},v={primary:"#1e293b",secondary:"#334155",accent:"#475569",border:"rgba(255,255,255,0.1)"},x=o?"80px":"280px";return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Xs,{variant:"light",onClick:()=>a(!0),className:"d-lg-none position-fixed",style:{top:"20px",left:"20px",zIndex:1030,width:"56px",height:"56px",borderRadius:"50%",border:"3px solid ".concat(f()),backgroundColor:"white",boxShadow:"0 6px 20px rgba(0,0,0,0.25), 0 0 0 4px rgba(".concat(f().replace("#",""),", 0.1)"),display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.target.style.transform="scale(1.1)",e.target.style.backgroundColor=f(),e.target.querySelector("svg").style.color="white"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.backgroundColor="white",e.target.querySelector("svg").style.color=f()},children:(0,De.jsx)(or,{style:{color:f(),fontSize:"18px",transition:"color 0.3s ease"}})}),(0,De.jsxs)("div",{className:"d-none d-lg-block position-fixed",style:{top:0,left:0,width:x,height:"100vh",background:"linear-gradient(180deg, ".concat(v.primary," 0%, ").concat(v.secondary," 100%)"),boxShadow:"4px 0 20px rgba(0,0,0,0.2)",zIndex:1020,overflowY:"auto",overflowX:"hidden",transition:"width 0.3s ease-in-out",borderRight:"1px solid ".concat(v.border)},children:[(0,De.jsx)(Xs,{onClick:()=>l(!o),className:"position-absolute",style:{top:"20px",right:"-18px",width:"36px",height:"36px",borderRadius:"50%",border:"3px solid ".concat(f()),backgroundColor:"white",color:f(),boxShadow:"0 4px 16px rgba(0,0,0,0.25), 0 0 0 3px rgba(".concat(f().replace("#",""),", 0.1)"),zIndex:1021,padding:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.target.style.backgroundColor=f(),e.target.style.color="white",e.target.style.transform="scale(1.1)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.35), 0 0 0 4px rgba(".concat(f().replace("#",""),", 0.2)")},onMouseLeave:e=>{e.target.style.backgroundColor="white",e.target.style.color=f(),e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 16px rgba(0,0,0,0.25), 0 0 0 3px rgba(".concat(f().replace("#",""),", 0.1)")},children:o?(0,De.jsx)(Nr,{}):(0,De.jsx)(_r,{})}),(0,De.jsx)(kd,{navigationItems:h,user:t,userRole:n,onLogout:r,onNavigate:m,isActiveRoute:p,getRoleColor:f,getRoleIcon:g,isMobile:!1,isCollapsed:o,darkTheme:v})]}),(0,De.jsxs)(Nd,{show:i,onHide:u,placement:"start",style:{width:"320px"},children:[(0,De.jsxs)(Nd.Header,{style:{background:v.primary,color:"white",borderBottom:"1px solid ".concat(v.border),position:"relative",padding:"1rem"},children:[(0,De.jsxs)(Nd.Title,{className:"d-flex align-items-center",children:[(0,De.jsx)(Tr,{className:"me-2",style:{color:f()}}),"OOX Furniture"]}),(0,De.jsx)(Xs,{onClick:u,style:{position:"absolute",top:"15px",right:"15px",width:"40px",height:"40px",borderRadius:"50%",border:"2px solid ".concat(f()),backgroundColor:"white",color:f(),boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.3s ease",cursor:"pointer",padding:0},onMouseEnter:e=>{e.target.style.backgroundColor=f(),e.target.style.color="white",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.backgroundColor="white",e.target.style.color=f(),e.target.style.transform="scale(1)"},children:"\xd7"})]}),(0,De.jsx)(Nd.Body,{style:{background:"linear-gradient(180deg, ".concat(v.primary," 0%, ").concat(v.secondary," 100%)"),padding:0},children:(0,De.jsx)(kd,{navigationItems:h,user:t,userRole:n,onLogout:r,onNavigate:m,isActiveRoute:p,getRoleColor:f,getRoleIcon:g,isMobile:!0,isCollapsed:!1,darkTheme:v})})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        @media (min-width: 992px) {\n          .main-content {\n            margin-left: ".concat(x,";\n            transition: margin-left 0.3s ease-in-out;\n          }\n        }\n      ")})]})},Sd=e=>{let{user:t,onLogout:n}=e;const r=Z(),[i,a]=(0,s.useState)("overview"),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)(1),[f]=(0,s.useState)(10),[g,v]=(0,s.useState)(0),[x,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)({}),[j,_]=(0,s.useState)(!0),[N,k]=(0,s.useState)(null),[C,S]=(0,s.useState)(null),[A,E]=(0,s.useState)(new Date),[T,P]=(0,s.useState)(!1),[M,L]=(0,s.useState)(null),[R,O]=(0,s.useState)({username:"",email:"",first_name:"",last_name:"",phone:"",role:"delivery",password:"",password_confirm:"",is_active:!0});(0,s.useEffect)(()=>{E(new Date)},[]),(0,s.useEffect)(()=>{D()},[]);const D=async()=>{try{_(!0),k(null);const[e,t]=await Promise.all([ha(),Zi()]);l(e.results||e),d(t.results||t),I(1,f,y)}catch(e){console.error("Error fetching dashboard data:",e),k("Failed to load dashboard data")}finally{_(!1)}},I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(!0);try{const s=await ca(Pe({page:e,page_size:t},n)),r=Array.isArray(null===s||void 0===s?void 0:s.results)?s.results:Array.isArray(s)?s:[];h(r);const i=void 0!==(null===s||void 0===s?void 0:s.count)?s.count:Array.isArray(s)?s.length:0;v(i),p(e)}catch(zP){}finally{b(!1)}},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(L(e),O({username:e.username||"",email:e.email||"",first_name:e.first_name||"",last_name:e.last_name||"",phone:e.phone||"",role:e.role||"delivery",password:"",password_confirm:"",is_active:void 0===e.is_active||e.is_active})):(L(null),O({username:"",email:"",first_name:"",last_name:"",phone:"",role:"delivery",password:"",password_confirm:"",is_active:!0})),P(!0)},z=e=>{const{name:t,value:n,type:s,checked:r}=e.target;O(e=>Pe(Pe({},e),{},{[t]:"checkbox"===s?r:n}))},B=async e=>{e.preventDefault();try{if(!M){if(!R.username||""===R.username.trim())return void k("Username is required");if(!R.password)return void k("Password is required");if(R.password!==R.password_confirm)return void k("Passwords do not match");const e=["owner","admin","warehouse","delivery"];if(R.role&&!e.includes(R.role))return void k("Invalid role: ".concat(R.role,". Valid roles: ").concat(e.join(", ")))}if(M)await ga(M.id,R),S("User updated successfully!");else{const e=await fa(R);e.success&&e.user?S(e.message||'User "'.concat(e.user.username,'" created successfully')):S("User created successfully!")}P(!1),D()}catch(t){k("Failed to save user")}},W=c.reduce((e,t)=>e+parseFloat(t.total_amount||0),0),H=c.filter(e=>new Date(e.created_at).toDateString()===(new Date).toDateString()).length,U=()=>{return(0,De.jsxs)("div",{className:"oox-mobile-header oox-animate-fadeInUp",children:[(0,De.jsxs)("div",{className:"oox-brand",children:[(0,De.jsx)("div",{className:"oox-logo",children:(0,De.jsx)(Tr,{size:25,style:{color:"white"}})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"oox-title",children:"OOX Executive Portal"}),(0,De.jsxs)("p",{className:"oox-subtitle",children:[(null===t||void 0===t?void 0:t.first_name)||(null===t||void 0===t?void 0:t.username)||"Owner"," \u2022 ",A.toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-stats",children:[(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:(e=W,"R".concat(Number(e).toLocaleString()))}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Revenue"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:c.length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Orders"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:o.length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Team"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:H}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Today"})]})]})]});var e},V=()=>(0,De.jsx)("div",{className:"oox-mobile-nav oox-animate-slideInLeft",children:[{key:"overview",label:"Dashboard",icon:vr,action:()=>a("overview")},{key:"orders",label:"Orders",icon:Cr,action:()=>r("/owner/orders")},{key:"users",label:"Team",icon:Ri,action:()=>a("users")},{key:"customers",label:"Customers",icon:Fi,action:()=>r("/owner/customers")},{key:"payments",label:"Payments",icon:ti,action:()=>r("/owner/payments")},{key:"analytics",label:"Analytics",icon:xr,action:()=>r("/owner/analytics")}].map(e=>(0,De.jsxs)("button",{onClick:e.action,className:"oox-mobile-nav-item ".concat(i===e.key?"active":""),children:[(0,De.jsx)(e.icon,{className:"oox-mobile-nav-icon"}),(0,De.jsx)("div",{className:"oox-mobile-nav-label",children:e.label})]},e.key))}),G=e=>{let{title:t,value:n,change:s,icon:r,color:i,prefix:a="",suffix:o="",onClick:l}=e;return(0,De.jsxs)("div",{className:"oox-mobile-card",onClick:l,style:Pe({cursor:l?"pointer":"default",transition:"all 0.3s ease"},l&&{":hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.1)"}}),children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-between oox-mobile-mb-2",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),(0,De.jsxs)("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:i,marginTop:"0.25rem"},children:[a,"number"===typeof n?n.toLocaleString():n,o]})]}),(0,De.jsx)("div",{style:{width:"60px",height:"60px",borderRadius:"12px",background:"".concat(i,"15"),display:"flex",alignItems:"center",justifyContent:"center",color:i},children:(0,De.jsx)(r,{size:24})})]}),s&&(0,De.jsxs)("div",{className:"oox-mobile-flex",style:{alignItems:"center",gap:"0.5rem"},children:[s>0?(0,De.jsx)(ir,{style:{color:"#10b981",fontSize:"0.875rem"}}):(0,De.jsx)(sr,{style:{color:"#ef4444",fontSize:"0.875rem"}}),(0,De.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:s>0?"#10b981":"#ef4444"},children:[Math.abs(s),"%"]}),(0,De.jsx)("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"vs last month"})]})]})},q=()=>(0,De.jsxs)("div",{className:"oox-mobile-card",children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-between oox-mobile-mb-3",children:[(0,De.jsxs)("h3",{style:{margin:0,color:"#1e293b",fontWeight:"700"},children:[(0,De.jsx)(Ri,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"OOX Team Management"]}),(0,De.jsxs)("button",{onClick:()=>F(),className:"oox-mobile-btn",style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:[(0,De.jsx)(oi,{style:{marginRight:"0.25rem"}}),"Add User"]})]}),(0,De.jsx)("div",{className:"oox-mobile-table",children:o.map(e=>{var t;return(0,De.jsxs)("div",{className:"oox-mobile-table-item",children:[(0,De.jsxs)("div",{className:"oox-mobile-table-header",children:[(0,De.jsxs)("div",{className:"oox-mobile-table-title",children:[e.first_name," ",e.last_name]}),(0,De.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,De.jsx)("button",{onClick:()=>F(e),style:{background:"none",border:"none",color:"#f59e0b",cursor:"pointer",padding:"0.25rem"},children:(0,De.jsx)(Rr,{})}),(0,De.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{await va(e),S("User deleted successfully!"),D()}catch(t){k("Failed to delete user")}})(e.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:(0,De.jsx)(Pi,{})})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-table-meta",children:[(0,De.jsxs)("div",{style:{marginBottom:"0.5rem"},children:[(0,De.jsxs)("strong",{children:["@",e.username]})," \u2022 ",e.email]}),(0,De.jsxs)("div",{className:"oox-mobile-flex",style:{gap:"0.5rem",alignItems:"center"},children:[(0,De.jsx)("span",{className:"oox-mobile-badge ".concat("owner"===e.role?"warning":"admin"===e.role?"success":"warehouse"===e.role?"warning":"success"),children:null===(t=e.role)||void 0===t?void 0:t.toUpperCase()}),(0,De.jsx)("span",{className:"oox-mobile-badge ".concat(e.is_active?"success":"danger"),children:e.is_active?"Active":"Inactive"})]})]})]},e.id)})})]}),K=()=>(0,De.jsxs)(Vo,{show:T,onHide:()=>P(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white"},children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)(Ri,{style:{marginRight:"0.5rem"}}),M?"Edit OOX Team Member":"Add New OOX Team Member"]})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)(Gl,{onSubmit:B,noValidate:!0,children:[(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"First Name"}),(0,De.jsx)("input",{name:"first_name",value:R.first_name,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter first name"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Last Name"}),(0,De.jsx)("input",{name:"last_name",value:R.last_name,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter last name"})]})})]}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Phone Number"}),(0,De.jsx)("input",{name:"phone",value:R.phone,onChange:z,className:"oox-mobile-form-input",placeholder:"+1234567890",type:"tel"})]})})}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Username"}),(0,De.jsx)("input",{name:"username",value:R.username,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter username"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Email"}),(0,De.jsx)("input",{name:"email",type:"email",value:R.email,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter email"})]})})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Role"}),(0,De.jsxs)("select",{name:"role",value:R.role,onChange:z,className:"oox-mobile-form-input",children:[(0,De.jsx)("option",{value:"admin",children:"Admin"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery"}),(0,De.jsx)("option",{value:"owner",children:"Owner"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:["Password ",M&&"(leave blank to keep current)"]}),(0,De.jsx)("input",{name:"password",type:"password",value:R.password,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter password"})]})})]}),!M&&(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Confirm Password *"}),(0,De.jsx)("input",{name:"password_confirm",type:"password",value:R.password_confirm,onChange:z,className:"oox-mobile-form-input",placeholder:"Confirm password"})]})})}),(0,De.jsx)("div",{className:"oox-mobile-form-group",children:(0,De.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,De.jsx)("input",{name:"is_active",type:"checkbox",checked:R.is_active,onChange:z}),(0,De.jsx)("span",{className:"oox-mobile-form-label",style:{margin:0},children:"Active User"})]})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsxs)(Xs,{variant:"secondary",onClick:()=>P(!1),children:[(0,De.jsx)(Ti,{style:{marginRight:"0.25rem"}}),"Cancel"]}),(0,De.jsxs)(Xs,{variant:"primary",onClick:B,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none"},children:[(0,De.jsx)(Ri,{style:{marginRight:"0.25rem"}}),M?"Update User":"Create User"]})]})]});return j?(0,De.jsxs)("div",{className:"oox-mobile-container",style:{minHeight:"100vh"},children:[(0,De.jsx)("div",{className:"oox-mobile-loading",children:(0,De.jsx)("div",{className:"oox-mobile-spinner"})}),(0,De.jsx)("div",{className:"oox-mobile-text-center",style:{marginTop:"1rem"},children:(0,De.jsx)("h3",{style:{color:"#f59e0b"},children:"Loading OOX Executive Portal..."})})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:t,userRole:"owner",onLogout:n}),(0,De.jsx)("div",{className:"main-content",children:(0,De.jsxs)("div",{className:"oox-mobile-container",style:{background:"#f8fafc",minHeight:"100vh"},children:[N&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>k(null),className:"oox-animate-fadeInUp",children:N}),C&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>S(null),className:"oox-animate-fadeInUp",children:C}),(0,De.jsx)(U,{}),(0,De.jsx)(V,{}),"overview"===i&&(0,De.jsxs)("div",{className:"oox-animate-fadeInUp",children:[(0,De.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,De.jsx)(G,{title:"Total Revenue",value:W,change:12,icon:ti,color:"#f59e0b",prefix:"R",onClick:()=>r("/owner/payments")}),(0,De.jsx)(G,{title:"Total Orders",value:c.length,change:8,icon:Cr,color:"#3b82f6",onClick:()=>r("/owner/orders")}),(0,De.jsx)(G,{title:"Team Members",value:o.length,change:5,icon:Fi,color:"#10b981",onClick:()=>r("/owner/users")}),(0,De.jsx)(G,{title:"Today's Orders",value:H,change:-2,icon:fr,color:"#8b5cf6",onClick:()=>r("/owner/orders")})]}),(0,De.jsxs)("div",{className:"oox-mobile-card",children:[(0,De.jsxs)("h3",{style:{marginBottom:"1rem",color:"#1e293b",fontWeight:"700"},children:[(0,De.jsx)(cr,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"OOX Quick Actions"]}),(0,De.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,De.jsxs)("button",{onClick:()=>r("/owner/orders"),className:"oox-mobile-btn",children:[(0,De.jsx)(Cr,{}),"Manage Orders"]}),(0,De.jsxs)("button",{onClick:()=>a("users"),className:"oox-mobile-btn",children:[(0,De.jsx)(Ri,{}),"Team Management"]}),(0,De.jsxs)("button",{onClick:()=>r("/owner/customers"),className:"oox-mobile-btn",children:[(0,De.jsx)(Fi,{}),"View Customers"]}),(0,De.jsxs)("button",{onClick:()=>r("/owner/payments"),className:"oox-mobile-btn",children:[(0,De.jsx)(ti,{}),"Payments"]}),(0,De.jsxs)("button",{onClick:()=>r("/owner/transactions"),className:"oox-mobile-btn",children:[(0,De.jsx)(ti,{}),"Transactions"]}),(0,De.jsxs)("button",{onClick:()=>r("/owner/analytics"),className:"oox-mobile-btn",children:[(0,De.jsx)(xr,{}),"Analytics"]})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-card",children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-between oox-mobile-mb-2",children:[(0,De.jsxs)("h3",{style:{margin:0,color:"#1e293b",fontWeight:"700"},children:[(0,De.jsx)(ti,{style:{marginRight:"0.5rem",color:"#10b981"}}),"Payment Transactions"]}),(0,De.jsx)("button",{onClick:()=>r("/owner/transactions"),className:"oox-mobile-btn",children:"Open Transactions Page"})]}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"View the full transactions table on the dedicated Transactions page."})]})]}),"users"===i&&(0,De.jsx)("div",{className:"oox-animate-fadeInUp",children:(0,De.jsx)(q,{})}),"orders"===i&&(0,De.jsx)("div",{className:"oox-mobile-card oox-animate-fadeInUp",children:(0,De.jsxs)("div",{className:"oox-mobile-text-center",style:{padding:"2rem"},children:[(0,De.jsx)(Cr,{size:48,style:{color:"#f59e0b",marginBottom:"1rem"}}),(0,De.jsx)("h3",{style:{color:"#1e293b",marginBottom:"1rem"},children:"OOX Orders Management"}),(0,De.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Comprehensive order management system coming soon"}),(0,De.jsx)("button",{onClick:()=>r("/owner/orders"),className:"oox-mobile-btn",children:"Go to Orders Page"})]})}),("customers"===i||"payments"===i||"analytics"===i)&&(0,De.jsx)("div",{className:"oox-mobile-card oox-animate-fadeInUp",children:(0,De.jsxs)("div",{className:"oox-mobile-text-center",style:{padding:"2rem"},children:[(0,De.jsx)(Gr,{size:48,style:{color:"#f59e0b",marginBottom:"1rem"}}),(0,De.jsxs)("h3",{style:{color:"#1e293b",marginBottom:"1rem"},children:["OOX ",i.charAt(0).toUpperCase()+i.slice(1)]}),(0,De.jsxs)("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:["Advanced ",i," management features are being enhanced for the executive experience"]}),(0,De.jsxs)("button",{onClick:()=>r("/owner/".concat(i)),className:"oox-mobile-btn",children:["Go to ",i.charAt(0).toUpperCase()+i.slice(1)," Page"]})]})}),(0,De.jsx)(K,{})]})})]})},Ad=["bsPrefix","size","vertical","className","role","as"],Ed=s.forwardRef((e,t)=>{let{bsPrefix:n,size:s,vertical:r=!1,className:i,role:a="group",as:o="div"}=e,l=Le(e,Ad);const c=He(n,"btn-group");let d=c;return r&&(d="".concat(c,"-vertical")),(0,De.jsx)(o,Pe(Pe({},l),{},{ref:t,role:a,className:Oe()(i,d,s&&"".concat(c,"-").concat(s))}))});Ed.displayName="ButtonGroup";const Td=Ed;const Pd=2**31-1;function Md(e,t,n){const s=n-Date.now();e.current=s<=Pd?setTimeout(t,s):setTimeout(()=>Md(e,t,n),Pd)}function Ld(){const e=function(){const e=(0,s.useRef)(!0),t=(0,s.useRef)(()=>e.current);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}(),t=(0,s.useRef)();return Ha(()=>clearTimeout(t.current)),(0,s.useMemo)(()=>{const n=()=>clearTimeout(t.current);return{set:function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),r<=Pd?t.current=setTimeout(s,r):Md(t,s,Date.now()+r))},clear:n,handleRef:t}},[])}var Rd=Object.prototype.hasOwnProperty;function Od(e,t,n){for(n of e.keys())if(Dd(n,t))return n}function Dd(e,t){var n,s,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&Dd(e[s],t[s]););return-1===s}if(n===Set){if(e.size!==t.size)return!1;for(s of e){if((r=s)&&"object"===typeof r&&!(r=Od(t,r)))return!1;if(!t.has(r))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(s of e){if((r=s[0])&&"object"===typeof r&&!(r=Od(t,r)))return!1;if(!Dd(s[1],t.get(r)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return-1===s}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return-1===s}if(!n||"object"===typeof e){for(n in s=0,e){if(Rd.call(e,n)&&++s&&!Rd.call(t,n))return!1;if(!(n in t)||!Dd(e[n],t[n]))return!1}return Object.keys(t).length===s}}return e!==e&&t!==t}const Id=function(e){const t=mt();return[e[0],(0,s.useCallback)(n=>{if(t())return e[1](n)},[t,e[1]])]};function Fd(e){return e.split("-")[0]}function zd(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Bd(e){return e instanceof zd(e).Element||e instanceof Element}function Wd(e){return e instanceof zd(e).HTMLElement||e instanceof HTMLElement}function Hd(e){return"undefined"!==typeof ShadowRoot&&(e instanceof zd(e).ShadowRoot||e instanceof ShadowRoot)}var Ud=Math.max,Vd=Math.min,Gd=Math.round;function qd(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Kd(){return!/^((?!chrome|android).)*safari/i.test(qd())}function Xd(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&Wd(e)&&(r=e.offsetWidth>0&&Gd(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Gd(s.height)/e.offsetHeight||1);var a=(Bd(e)?zd(e):window).visualViewport,o=!Kd()&&n,l=(s.left+(o&&a?a.offsetLeft:0))/r,c=(s.top+(o&&a?a.offsetTop:0))/i,d=s.width/r,u=s.height/i;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Yd(e){var t=Xd(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function Qd(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Hd(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function $d(e){return e?(e.nodeName||"").toLowerCase():null}function Jd(e){return zd(e).getComputedStyle(e)}function Zd(e){return["table","td","th"].indexOf($d(e))>=0}function eu(e){return((Bd(e)?e.ownerDocument:e.document)||window.document).documentElement}function tu(e){return"html"===$d(e)?e:e.assignedSlot||e.parentNode||(Hd(e)?e.host:null)||eu(e)}function nu(e){return Wd(e)&&"fixed"!==Jd(e).position?e.offsetParent:null}function su(e){for(var t=zd(e),n=nu(e);n&&Zd(n)&&"static"===Jd(n).position;)n=nu(n);return n&&("html"===$d(n)||"body"===$d(n)&&"static"===Jd(n).position)?t:n||function(e){var t=/firefox/i.test(qd());if(/Trident/i.test(qd())&&Wd(e)&&"fixed"===Jd(e).position)return null;var n=tu(e);for(Hd(n)&&(n=n.host);Wd(n)&&["html","body"].indexOf($d(n))<0;){var s=Jd(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(e)||t}function ru(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function iu(e,t,n){return Ud(e,Vd(t,n))}function au(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ou(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}var lu="top",cu="bottom",du="right",uu="left",hu="auto",mu=[lu,cu,du,uu],pu="start",fu="end",gu="viewport",vu="popper",xu=mu.reduce(function(e,t){return e.concat([t+"-"+pu,t+"-"+fu])},[]),bu=[].concat(mu,[hu]).reduce(function(e,t){return e.concat([t,t+"-"+pu,t+"-"+fu])},[]),yu=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const wu={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Fd(n.placement),l=ru(o),c=[uu,du].indexOf(o)>=0?"height":"width";if(i&&a){var d=function(e,t){return au("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ou(e,mu))}(r.padding,n),u=Yd(i),h="y"===l?lu:uu,m="y"===l?cu:du,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],f=a[l]-n.rects.reference[l],g=su(i),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=p/2-f/2,b=d[h],y=v-u[c]-d[m],w=v/2-u[c]/2+x,j=iu(b,w,y),_=l;n.modifiersData[s]=((t={})[_]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"!==typeof s||(s=t.elements.popper.querySelector(s)))&&Qd(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ju(e){return e.split("-")[1]}var _u={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Nu(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=a.x,m=void 0===h?0:h,p=a.y,f=void 0===p?0:p,g="function"===typeof d?d({x:m,y:f}):{x:m,y:f};m=g.x,f=g.y;var v=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),b=uu,y=lu,w=window;if(c){var j=su(n),_="clientHeight",N="clientWidth";if(j===zd(n)&&"static"!==Jd(j=eu(n)).position&&"absolute"===o&&(_="scrollHeight",N="scrollWidth"),r===lu||(r===uu||r===du)&&i===fu)y=cu,f-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[_])-s.height,f*=l?1:-1;if(r===uu||(r===lu||r===cu)&&i===fu)b=du,m-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[N])-s.width,m*=l?1:-1}var k,C=Object.assign({position:o},c&&_u),S=!0===d?function(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Gd(n*r)/r||0,y:Gd(s*r)/r||0}}({x:m,y:f},zd(n)):{x:m,y:f};return m=S.x,f=S.y,l?Object.assign({},C,((k={})[y]=x?"0":"",k[b]=v?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+f+"px)":"translate3d("+m+"px, "+f+"px, 0)",k)):Object.assign({},C,((t={})[y]=x?f+"px":"",t[b]=v?m+"px":"",t.transform="",t))}const ku={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=void 0===s||s,i=n.adaptive,a=void 0===i||i,o=n.roundOffsets,l=void 0===o||o,c={placement:Fd(t.placement),variation:ju(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Nu(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Nu(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Cu={passive:!0};const Su={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=void 0===r||r,a=s.resize,o=void 0===a||a,l=zd(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach(function(e){e.addEventListener("scroll",n.update,Cu)}),o&&l.addEventListener("resize",n.update,Cu),function(){i&&c.forEach(function(e){e.removeEventListener("scroll",n.update,Cu)}),o&&l.removeEventListener("resize",n.update,Cu)}},data:{}};var Au={left:"right",right:"left",bottom:"top",top:"bottom"};function Eu(e){return e.replace(/left|right|bottom|top/g,function(e){return Au[e]})}var Tu={start:"end",end:"start"};function Pu(e){return e.replace(/start|end/g,function(e){return Tu[e]})}function Mu(e){var t=zd(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Lu(e){return Xd(eu(e)).left+Mu(e).scrollLeft}function Ru(e){var t=Jd(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function Ou(e){return["html","body","#document"].indexOf($d(e))>=0?e.ownerDocument.body:Wd(e)&&Ru(e)?e:Ou(tu(e))}function Du(e,t){var n;void 0===t&&(t=[]);var s=Ou(e),r=s===(null==(n=e.ownerDocument)?void 0:n.body),i=zd(s),a=r?[i].concat(i.visualViewport||[],Ru(s)?s:[]):s,o=t.concat(a);return r?o:o.concat(Du(tu(a)))}function Iu(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Fu(e,t,n){return t===gu?Iu(function(e,t){var n=zd(e),s=eu(e),r=n.visualViewport,i=s.clientWidth,a=s.clientHeight,o=0,l=0;if(r){i=r.width,a=r.height;var c=Kd();(c||!c&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:i,height:a,x:o+Lu(e),y:l}}(e,n)):Bd(t)?function(e,t){var n=Xd(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Iu(function(e){var t,n=eu(e),s=Mu(e),r=null==(t=e.ownerDocument)?void 0:t.body,i=Ud(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Ud(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-s.scrollLeft+Lu(e),l=-s.scrollTop;return"rtl"===Jd(r||n).direction&&(o+=Ud(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:o,y:l}}(eu(e)))}function zu(e,t,n,s){var r="clippingParents"===t?function(e){var t=Du(tu(e)),n=["absolute","fixed"].indexOf(Jd(e).position)>=0&&Wd(e)?su(e):e;return Bd(n)?t.filter(function(e){return Bd(e)&&Qd(e,n)&&"body"!==$d(e)}):[]}(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce(function(t,n){var r=Fu(e,n,s);return t.top=Ud(r.top,t.top),t.right=Vd(r.right,t.right),t.bottom=Vd(r.bottom,t.bottom),t.left=Ud(r.left,t.left),t},Fu(e,a,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Bu(e){var t,n=e.reference,s=e.element,r=e.placement,i=r?Fd(r):null,a=r?ju(r):null,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2;switch(i){case lu:t={x:o,y:n.y-s.height};break;case cu:t={x:o,y:n.y+n.height};break;case du:t={x:n.x+n.width,y:l};break;case uu:t={x:n.x-s.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?ru(i):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case pu:t[c]=t[c]-(n[d]/2-s[d]/2);break;case fu:t[c]=t[c]+(n[d]/2-s[d]/2)}}return t}function Wu(e,t){void 0===t&&(t={});var n=t,s=n.placement,r=void 0===s?e.placement:s,i=n.strategy,a=void 0===i?e.strategy:i,o=n.boundary,l=void 0===o?"clippingParents":o,c=n.rootBoundary,d=void 0===c?gu:c,u=n.elementContext,h=void 0===u?vu:u,m=n.altBoundary,p=void 0!==m&&m,f=n.padding,g=void 0===f?0:f,v=au("number"!==typeof g?g:ou(g,mu)),x=h===vu?"reference":vu,b=e.rects.popper,y=e.elements[p?x:h],w=zu(Bd(y)?y:y.contextElement||eu(e.elements.popper),l,d,a),j=Xd(e.elements.reference),_=Bu({reference:j,element:b,strategy:"absolute",placement:r}),N=Iu(Object.assign({},b,_)),k=h===vu?N:j,C={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},S=e.modifiersData.offset;if(h===vu&&S){var A=S[r];Object.keys(C).forEach(function(e){var t=[du,cu].indexOf(e)>=0?1:-1,n=[lu,cu].indexOf(e)>=0?"y":"x";C[e]+=A[n]*t})}return C}const Hu={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=void 0===r||r,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,p=void 0===m||m,f=n.allowedAutoPlacements,g=t.options.placement,v=Fd(g),x=l||(v===g||!p?[Eu(g)]:function(e){if(Fd(e)===hu)return[];var t=Eu(e);return[Pu(e),t,Pu(t)]}(g)),b=[g].concat(x).reduce(function(e,n){return e.concat(Fd(n)===hu?function(e,t){void 0===t&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?bu:l,d=ju(s),u=d?o?xu:xu.filter(function(e){return ju(e)===d}):mu,h=u.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=u);var m=h.reduce(function(t,n){return t[n]=Wu(e,{placement:n,boundary:r,rootBoundary:i,padding:a})[Fd(n)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:f}):n)},[]),y=t.rects.reference,w=t.rects.popper,j=new Map,_=!0,N=b[0],k=0;k<b.length;k++){var C=b[k],S=Fd(C),A=ju(C)===pu,E=[lu,cu].indexOf(S)>=0,T=E?"width":"height",P=Wu(t,{placement:C,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),M=E?A?du:uu:A?cu:lu;y[T]>w[T]&&(M=Eu(M));var L=Eu(M),R=[];if(i&&R.push(P[S]<=0),o&&R.push(P[M]<=0,P[L]<=0),R.every(function(e){return e})){N=C,_=!1;break}j.set(C,R)}if(_)for(var O=function(e){var t=b.find(function(t){var n=j.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return N=t,"break"},D=p?3:1;D>0;D--){if("break"===O(D))break}t.placement!==N&&(t.modifiersData[s]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Uu(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Vu(e){return[lu,du,cu,uu].some(function(t){return e[t]>=0})}const Gu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=void 0===r?[0,0]:r,a=bu.reduce(function(e,n){return e[n]=function(e,t,n){var s=Fd(e),r=[uu,lu].indexOf(s)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],o=i[1];return a=a||0,o=(o||0)*r,[uu,du].indexOf(s)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,i),e},{}),o=a[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=a}};const qu={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=void 0===r||r,a=n.altAxis,o=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,m=void 0===h||h,p=n.tetherOffset,f=void 0===p?0:p,g=Wu(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=Fd(t.placement),x=ju(t.placement),b=!x,y=ru(v),w="x"===y?"y":"x",j=t.modifiersData.popperOffsets,_=t.rects.reference,N=t.rects.popper,k="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,C="number"===typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(j){if(i){var E,T="y"===y?lu:uu,P="y"===y?cu:du,M="y"===y?"height":"width",L=j[y],R=L+g[T],O=L-g[P],D=m?-N[M]/2:0,I=x===pu?_[M]:N[M],F=x===pu?-N[M]:-_[M],z=t.elements.arrow,B=m&&z?Yd(z):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=W[T],U=W[P],V=iu(0,_[M],B[M]),G=b?_[M]/2-D-V-H-C.mainAxis:I-V-H-C.mainAxis,q=b?-_[M]/2+D+V+U+C.mainAxis:F+V+U+C.mainAxis,K=t.elements.arrow&&su(t.elements.arrow),X=K?"y"===y?K.clientTop||0:K.clientLeft||0:0,Y=null!=(E=null==S?void 0:S[y])?E:0,Q=L+q-Y,$=iu(m?Vd(R,L+G-Y-X):R,L,m?Ud(O,Q):O);j[y]=$,A[y]=$-L}if(o){var J,Z="x"===y?lu:uu,ee="x"===y?cu:du,te=j[w],ne="y"===w?"height":"width",se=te+g[Z],re=te-g[ee],ie=-1!==[lu,uu].indexOf(v),ae=null!=(J=null==S?void 0:S[w])?J:0,oe=ie?se:te-_[ne]-N[ne]-ae+C.altAxis,le=ie?te+_[ne]+N[ne]-ae-C.altAxis:re,ce=m&&ie?function(e,t,n){var s=iu(e,t,n);return s>n?n:s}(oe,te,le):iu(m?oe:se,te,m?le:re);j[w]=ce,A[w]=ce-te}t.modifiersData[s]=A}},requiresIfExists:["offset"]};function Ku(e,t,n){void 0===n&&(n=!1);var s=Wd(t),r=Wd(t)&&function(e){var t=e.getBoundingClientRect(),n=Gd(t.width)/e.offsetWidth||1,s=Gd(t.height)/e.offsetHeight||1;return 1!==n||1!==s}(t),i=eu(t),a=Xd(e,r,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&(("body"!==$d(t)||Ru(i))&&(o=function(e){return e!==zd(e)&&Wd(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Mu(e);var t}(t)),Wd(t)?((l=Xd(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=Lu(i))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Xu(e){var t=new Map,n=new Set,s=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var s=t.get(e);s&&r(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||r(e)}),s}function Yu(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var Qu={placement:"bottom",modifiers:[],strategy:"absolute"};function $u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"===typeof e.getBoundingClientRect)})}function Ju(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,s=void 0===n?[]:n,r=t.defaultOptions,i=void 0===r?Qu:r;return function(e,t,n){void 0===n&&(n=i);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qu,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],o=!1,l={state:r,setOptions:function(n){var o="function"===typeof n?n(r.options):n;c(),r.options=Object.assign({},i,r.options,o),r.scrollParents={reference:Bd(e)?Du(e):e.contextElement?Du(e.contextElement):[],popper:Du(t)};var d=function(e){var t=Xu(e);return yu.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(s,r.options.modifiers)));return r.orderedModifiers=d.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,s=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var o=i({state:r,name:t,instance:l,options:s}),c=function(){};a.push(o||c)}}),l.update()},forceUpdate:function(){if(!o){var e=r.elements,t=e.reference,n=e.popper;if($u(t,n)){r.rects={reference:Ku(t,su(n),"fixed"===r.options.strategy),popper:Yd(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<r.orderedModifiers.length;s++)if(!0!==r.reset){var i=r.orderedModifiers[s],a=i.fn,c=i.options,d=void 0===c?{}:c,u=i.name;"function"===typeof a&&(r=a({state:r,options:d,name:u,instance:l})||r)}else r.reset=!1,s=-1}}},update:Yu(function(){return new Promise(function(e){l.forceUpdate(),e(r)})}),destroy:function(){c(),o=!0}};if(!$u(e,t))return l;function c(){a.forEach(function(e){return e()}),a=[]}return l.setOptions(n).then(function(e){!o&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}}const Zu=Ju({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,a=Wu(t,{elementContext:"reference"}),o=Wu(t,{altBoundary:!0}),l=Uu(a,s),c=Uu(o,r,i),d=Vu(l),u=Vu(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Bu({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},ku,Su,Gu,Hu,qu,wu]}),eh=["enabled","placement","strategy","modifiers"];const th={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},nh={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter(e=>e.trim()!==n.id);t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:s,reference:r}=t.elements,i=null==(n=s.getAttribute("role"))?void 0:n.toLowerCase();if(s.id&&"tooltip"===i&&"setAttribute"in r){const e=r.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(s.id))return;r.setAttribute("aria-describedby",e?"".concat(e,",").concat(s.id):s.id)}}},sh=[];const rh=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:r=!0,placement:i="bottom",strategy:a="absolute",modifiers:o=sh}=n,l=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(n,eh);const c=(0,s.useRef)(o),d=(0,s.useRef)(),u=(0,s.useCallback)(()=>{var e;null==(e=d.current)||e.update()},[]),h=(0,s.useCallback)(()=>{var e;null==(e=d.current)||e.forceUpdate()},[]),[m,p]=Id((0,s.useState)({placement:i,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),f=(0,s.useMemo)(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},s={};Object.keys(t.elements).forEach(e=>{n[e]=t.styles[e],s[e]=t.attributes[e]}),p({state:t,styles:n,attributes:s,update:u,forceUpdate:h,placement:t.placement})}}),[u,h,p]),g=(0,s.useMemo)(()=>(Dd(c.current,o)||(c.current=o),c.current),[o]);return(0,s.useEffect)(()=>{d.current&&r&&d.current.setOptions({placement:i,strategy:a,modifiers:[...g,f,th]})},[a,i,f,r,g]),(0,s.useEffect)(()=>{if(r&&null!=e&&null!=t)return d.current=Zu(e,t,Object.assign({},l,{placement:i,strategy:a,modifiers:[...g,nh,f]})),()=>{null!=d.current&&(d.current.destroy(),d.current=void 0,p(e=>Object.assign({},e,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),m},ih=()=>{};const ah=e=>e&&("current"in e?e.current:e),oh={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const lh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ih,{disabled:n,clickTrigger:r="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(0,s.useRef)(!1),a=(0,s.useRef)(!1),o=(0,s.useCallback)(t=>{const n=ah(e);var s;fl()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!n||!!((s=t).metaKey||s.altKey||s.ctrlKey||s.shiftKey)||!function(e){return 0===e.button}(t)||!!Va(n,t.target)||a.current,a.current=!1},[e]),l=ht(t=>{const n=ah(e);n&&Va(n,t.target)?a.current=!0:a.current=!1}),c=ht(e=>{i.current||t(e)});(0,s.useEffect)(()=>{var t,s;if(n||null==e)return;const i=Bt(ah(e)),a=i.defaultView||window;let d=null!=(t=a.event)?t:null==(s=a.parent)?void 0:s.event,u=null;oh[r]&&(u=Zt(i,oh[r],l,!0));const h=Zt(i,r,o,!0),m=Zt(i,r,e=>{e!==d?c(e):d=void 0});let p=[];return"ontouchstart"in i.documentElement&&(p=[].slice.call(i.body.children).map(e=>Zt(e,"mousemove",ih))),()=>{null==u||u(),h(),m(),p.forEach(e=>e())}},[e,n,r,o,l,c])},ch=()=>{};const dh=function(e,t){let{disabled:n,clickTrigger:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t||ch;lh(e,i,{disabled:n,clickTrigger:r});const a=ht(e=>{Ft(e)&&i(e)});(0,s.useEffect)(()=>{if(n||null==e)return;const t=Bt(ah(e));let s=(t.defaultView||window).event;const r=Zt(t,"keyup",e=>{e!==s?a(e):s=void 0});return()=>{r()}},[e,n,a])};function uh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function hh(e){let{enabled:t,enableEvents:n,placement:s,flip:r,offset:i,fixed:a,containerPadding:o,arrowElement:l,popperConfig:c={}}=e;var d,u,h,m,p;const f=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach(e=>{t[e.name]=e}),t):e||t}(c.modifiers);return Object.assign({},c,{placement:s,enabled:t,strategy:a?"fixed":c.strategy,modifiers:uh(Object.assign({},f,{eventListeners:{enabled:n,options:null==(d=f.eventListeners)?void 0:d.options},preventOverflow:Object.assign({},f.preventOverflow,{options:o?Object.assign({padding:o},null==(u=f.preventOverflow)?void 0:u.options):null==(h=f.preventOverflow)?void 0:h.options}),offset:{options:Object.assign({offset:i},null==(m=f.offset)?void 0:m.options)},arrow:Object.assign({},f.arrow,{enabled:!!l,options:Object.assign({},null==(p=f.arrow)?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!r},f.flip)}))})}const mh=s.forwardRef((e,t)=>{const{flip:n,offset:r,placement:i,containerPadding:a,popperConfig:o={},transition:l,runTransition:c}=e,[d,u]=dt(),[h,m]=dt(),p=bs(u,t),f=$a(e.container),g=$a(e.target),[v,x]=(0,s.useState)(!e.show),b=rh(g,d,hh({placement:i,enableEvents:!!e.show,containerPadding:a||5,flip:n,offset:r,arrowElement:h,popperConfig:o}));e.show&&v&&x(!1);const y=e.show||!v;if(dh(d,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!y)return null;const{onExit:w,onExiting:j,onEnter:_,onEntering:N,onEntered:k}=e;let C=e.children(Object.assign({},b.attributes.popper,{style:b.styles.popper,ref:p}),{popper:b,placement:i,show:!!e.show,arrowProps:Object.assign({},b.attributes.arrow,{style:b.styles.arrow,ref:m})});return C=ro(l,c,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:C,onExit:w,onExiting:j,onExited:function(){x(!0),e.onExited&&e.onExited(...arguments)},onEnter:_,onEntering:N,onEntered:k}),f?we.createPortal(C,f):null});mh.displayName="Overlay";const ph=mh,fh=["className","bsPrefix","as"],gh=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,fh);return s=He(s,"popover-header"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});gh.displayName="PopoverHeader";const vh=gh,xh=["className","bsPrefix","as"],bh=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div"}=e,i=Le(e,xh);return s=He(s,"popover-body"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});bh.displayName="PopoverBody";const yh=bh;s.Component;function wh(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}function jh(){return{position:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"absolute",top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const _h=["bsPrefix","placement","className","style","children","body","arrowProps","hasDoneInitialMeasure","popper","show"],Nh=s.forwardRef((e,t)=>{let{bsPrefix:n,placement:s="right",className:r,style:i,children:a,body:o,arrowProps:l,hasDoneInitialMeasure:c,popper:d,show:u}=e,h=Le(e,_h);const m=He(n,"popover"),p=Ge(),[f]=(null==s?void 0:s.split("-"))||[],g=wh(f,p);let v=i;return u&&!c&&(v=Pe(Pe({},i),jh(null==d?void 0:d.strategy))),(0,De.jsxs)("div",Pe(Pe({ref:t,role:"tooltip",style:v,"x-placement":f,className:Oe()(r,m,f&&"bs-popover-".concat(g))},h),{},{children:[(0,De.jsx)("div",Pe({className:"popover-arrow"},l)),o?(0,De.jsx)(yh,{children:a}):a]}))});Nh.displayName="Popover";const kh=Object.assign(Nh,{Header:vh,Body:yh,POPPER_OFFSET:[0,8]}),Ch=["bsPrefix","placement","className","style","children","arrowProps","hasDoneInitialMeasure","popper","show"],Sh=s.forwardRef((e,t)=>{let{bsPrefix:n,placement:s="right",className:r,style:i,children:a,arrowProps:o,hasDoneInitialMeasure:l,popper:c,show:d}=e,u=Le(e,Ch);n=He(n,"tooltip");const h=Ge(),[m]=(null==s?void 0:s.split("-"))||[],p=wh(m,h);let f=i;return d&&!l&&(f=Pe(Pe({},i),jh(null==c?void 0:c.strategy))),(0,De.jsxs)("div",Pe(Pe({ref:t,style:f,role:"tooltip","x-placement":m,className:Oe()(r,n,"bs-tooltip-".concat(p))},u),{},{children:[(0,De.jsx)("div",Pe({className:"tooltip-arrow"},o)),(0,De.jsx)("div",{className:"".concat(n,"-inner"),children:a})]}))});Sh.displayName="Tooltip";const Ah=Object.assign(Sh,{TOOLTIP_OFFSET:[0,6]});const Eh=["children","transition","popperConfig","rootClose","placement","show"];const Th=s.forwardRef((e,t)=>{let{children:n,transition:r=fn,popperConfig:i={},rootClose:a=!1,placement:o="top",show:l=!1}=e,c=Le(e,Eh);const d=(0,s.useRef)({}),[u,h]=(0,s.useState)(null),[m,p]=function(e){const t=(0,s.useRef)(null),n=He(void 0,"popover"),r=He(void 0,"tooltip"),i=(0,s.useMemo)(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(uo(t.current,n))return kh.POPPER_OFFSET;if(uo(t.current,r))return Ah.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,r]);return[t,[i]]}(c.offset),f=on(t,m),g=!0===r?fn:r||void 0,v=rt(e=>{h(e),null==i||null==i.onFirstUpdate||i.onFirstUpdate(e)});return td(()=>{u&&c.target&&(null==d.current.scheduleUpdate||d.current.scheduleUpdate())},[u,c.target]),(0,s.useEffect)(()=>{l||h(null)},[l]),(0,De.jsx)(ph,Pe(Pe({},c),{},{ref:f,popperConfig:Pe(Pe({},i),{},{modifiers:p.concat(i.modifiers||[]),onFirstUpdate:v}),transition:g,rootClose:a,placement:o,show:l,children:(e,t)=>{let{arrowProps:a,popper:o,show:l}=t;var c;!function(e,t){const{ref:n}=e,{ref:s}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n(ln(e))),t.ref=s.__wrapped||(s.__wrapped=e=>s(ln(e)))}(e,a);const h=null==o?void 0:o.placement,m=Object.assign(d.current,{state:null==o?void 0:o.state,scheduleUpdate:null==o?void 0:o.update,placement:h,outOfBoundaries:(null==o||null==(c=o.state)||null==(c=c.modifiersData.hide)?void 0:c.isReferenceHidden)||!1,strategy:i.strategy}),p=!!u;return"function"===typeof n?n(Pe(Pe(Pe({},e),{},{placement:h,show:l},!r&&l&&{className:"show"}),{},{popper:m,arrowProps:a,hasDoneInitialMeasure:p})):s.cloneElement(n,Pe(Pe({},e),{},{placement:h,arrowProps:a,popper:m,hasDoneInitialMeasure:p,className:Oe()(n.props.className,!r&&l&&"show"),style:Pe(Pe({},n.props.style),e.style)}))}}))});Th.displayName="Overlay";const Ph=Th,Mh=["trigger","overlay","children","popperConfig","show","defaultShow","onToggle","delay","placement","flip"];function Lh(e,t,n){const[s]=t,r=s.currentTarget,i=s.relatedTarget||s.nativeEvent[n];i&&i===r||Va(r,i)||e(...t)}vn().oneOf(["click","hover","focus"]);const Rh=e=>{let{trigger:t=["hover","focus"],overlay:n,children:r,popperConfig:i={},show:a,defaultShow:o=!1,onToggle:l,delay:c,placement:d,flip:u=d&&-1!==d.indexOf("auto")}=e,h=Le(e,Mh);const m=(0,s.useRef)(null),p=on(m,zt(r)),f=Ld(),g=(0,s.useRef)(""),[v,x]=Je(a,o,l),b=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(c),{onFocus:y,onBlur:w,onClick:j}="function"!==typeof r?s.Children.only(r).props:{},_=(0,s.useCallback)(()=>{f.clear(),g.current="show",b.show?f.set(()=>{"show"===g.current&&x(!0)},b.show):x(!0)},[b.show,x,f]),N=(0,s.useCallback)(()=>{f.clear(),g.current="hide",b.hide?f.set(()=>{"hide"===g.current&&x(!1)},b.hide):x(!1)},[b.hide,x,f]),k=(0,s.useCallback)(function(){_(),null==y||y(...arguments)},[_,y]),C=(0,s.useCallback)(function(){N(),null==w||w(...arguments)},[N,w]),S=(0,s.useCallback)(function(){x(!v),null==j||j(...arguments)},[j,x,v]),A=(0,s.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Lh(_,t,"fromElement")},[_]),E=(0,s.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Lh(N,t,"toElement")},[N]),T=null==t?[]:[].concat(t),P={ref:e=>{p(ln(e))}};return-1!==T.indexOf("click")&&(P.onClick=S),-1!==T.indexOf("focus")&&(P.onFocus=k,P.onBlur=C),-1!==T.indexOf("hover")&&(P.onMouseOver=A,P.onMouseOut=E),(0,De.jsxs)(De.Fragment,{children:["function"===typeof r?r(P):(0,s.cloneElement)(r,P),(0,De.jsx)(Ph,Pe(Pe({},h),{},{show:v,onHide:N,flip:u,placement:d,popperConfig:i,target:m.current,children:n}))]})},Oh=e=>{let{onClose:t,onSubmit:n,loading:r=!1,initialData:i=null,initialItems:a=null,isEdit:o=!1}=e;const[l,c]=(0,s.useState)({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",expectedDeliveryDate:"",adminNotes:"",depositAmount:"",paymentStatus:"deposit_only",orderStatus:"pending"}),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),[p,f]=(0,s.useState)({productId:"",productName:"",productDescription:"",quantity:1,unitPrice:"",color:"",fabric:""}),[g,v]=(0,s.useState)([]),[x,b]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[j,_]=(0,s.useState)([]),[N,k]=(0,s.useState)({}),[C,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{const[e,t,n]=await Promise.all([xa().catch(e=>(console.error("Failed to load products:",e),{results:[]})),ba().catch(e=>(console.error("Failed to load colors:",e),{results:[]})),ya().catch(e=>(console.error("Failed to load fabrics:",e),{results:[]}))]),s=e.results||e||[],r=t.results||t||[],i=n.results||n||[];console.log("Loaded products:",s.length),console.log("Loaded colors:",r.length,r),console.log("Loaded fabrics:",i.length,i),b(s),w(r),_(i)}catch(e){console.error("Error loading form data:",e)}})()},[]),(0,s.useEffect)(()=>{i&&c({customerName:i.customerName||"",customerPhone:i.customerPhone||"",customerEmail:i.customerEmail||"",customerAddress:i.customerAddress||"",expectedDeliveryDate:i.expectedDeliveryDate||"",adminNotes:i.adminNotes||"",depositAmount:i.depositAmount||"",paymentStatus:i.paymentStatus||"deposit_only",orderStatus:i.orderStatus||"pending"}),a&&v(a)},[i,a]);const A=e=>{const{name:t,value:n}=e.target;c(e=>Pe(Pe({},e),{},{[t]:n})),N[t]&&k(e=>Pe(Pe({},e),{},{[t]:""}))},E=e=>{const{name:t,value:n}=e.target;let s={[t]:n};if("productId"===t){var r,i,a;const e=x.find(e=>String(e.id)===String(n));s.productName=e?e.name:"",s.productDescription=e?e.description:"",s.unitPrice=e&&null!==(r=null!==(i=null!==(a=e.unit_price)&&void 0!==a?a:e.base_price)&&void 0!==i?i:e.price)&&void 0!==r?r:"",s.color="",s.fabric=""}f(e=>Pe(Pe({},e),s)),N[t]&&k(e=>Pe(Pe({},e),{},{[t]:""}))},T=()=>g.reduce((e,t)=>e+(parseFloat(t.unitPrice)||0)*(parseInt(t.quantity)||0),0).toFixed(2),P=x.find(e=>String(e.id)===String(p.productId)),M=(null===P||void 0===P?void 0:P.colors)||(null===P||void 0===P?void 0:P.available_colors)||[],L=(null===P||void 0===P?void 0:P.fabrics)||(null===P||void 0===P?void 0:P.available_fabrics)||[];console.log("Selected product:",P),console.log("Product colors:",M),console.log("Product fabrics:",L);const R=e=>{const t=new Set;return e&&Array.isArray(e)?(e.forEach(e=>{e&&("string"===typeof e?t.add(e.trim().toLowerCase()):"object"===typeof e&&(e.name&&t.add(String(e.name).trim().toLowerCase()),e.code&&t.add(String(e.code).trim().toLowerCase()),e.color_name&&t.add(String(e.color_name).trim().toLowerCase()),e.color_code&&t.add(String(e.color_code).trim().toLowerCase()),e.fabric_name&&t.add(String(e.fabric_name).trim().toLowerCase()),e.fabric_letter&&t.add(String(e.fabric_letter).trim().toLowerCase())))}),console.log("Normalized values:",Array.from(t)),t):t},O=(R(M),R(L),y||[]),D=j||[],I=p.productId&&O.length>0,F=p.productId&&D.length>0;console.log("Show color dropdown:",I,"Available colors:",O.length),console.log("Show fabric dropdown:",F,"Available fabrics:",D.length),console.log("Product selected:",p.productId,"Product name:",p.productName);return(0,De.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,De.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(l.customerName.trim()||(e.customerName="Customer name is required"),l.customerPhone.trim()||(e.customerPhone="Customer phone is required"),d&&!l.customerAddress.trim()&&(e.customerAddress="Customer address is required for delivery"),d&&!l.expectedDeliveryDate)e.expectedDeliveryDate="Expected delivery date is required for delivery";else if(d&&l.expectedDeliveryDate){const t=new Date(l.expectedDeliveryDate);isNaN(t.getTime())?e.expectedDeliveryDate="Please enter a valid delivery date":t<new Date&&(e.expectedDeliveryDate="Delivery date cannot be in the past")}return!l.depositAmount||parseFloat(l.depositAmount)<0?e.depositAmount="Valid deposit amount is required":parseFloat(l.depositAmount)>parseFloat(T())&&(e.depositAmount="Deposit amount cannot exceed total amount"),0===g.length&&(e.orderItems='Please add at least one product to the order using the "Add Product" button above'),o||h||(e.popFile="Proof of payment is required"),k(e),0===Object.keys(e).length})()){S(!0);try{const e=await ia(),s=(e.results||e).find(e=>e.name.trim().toLowerCase()===l.customerName.trim().toLowerCase()&&e.phone.replace(/\D/g,"")===l.customerPhone.replace(/\D/g,""));let r;if(s)r=s.id;else{r=(await aa(Pe({name:l.customerName,phone:l.customerPhone,email:l.customerEmail},d&&{address:l.customerAddress}))).id}const i=T(),a=parseFloat(l.depositAmount),o=(parseFloat(i)-a).toFixed(2);let c=null;if(l.expectedDeliveryDate)try{const e=new Date(l.expectedDeliveryDate);if(isNaN(e.getTime())){const e=l.expectedDeliveryDate;"string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)&&(c=e)}else c=e.toISOString().split("T")[0];c&&!c.match(/^\d{4}-\d{2}-\d{2}$/)&&(console.error("Invalid date format:",c),c=null)}catch(t){console.error("Error formatting delivery date:",t),c=null}const u={customer_id:r,expected_delivery_date:c,admin_notes:l.adminNotes,deposit_amount:a.toFixed(2),payment_status:l.paymentStatus,order_status:l.orderStatus,production_status:"not_started",total_amount:i,balance_amount:o,items_data:g.map((e,t)=>{const n=y.find(t=>String(t.id)===String(e.color)),s=j.find(t=>String(t.id)===String(e.fabric));console.log("Item ".concat(t," - Processing:"),{productId:e.productId,colorId:e.color,fabricId:e.fabric,colorObj:n,fabricObj:s});const r={product:e.productId,quantity:parseInt(e.quantity),unit_price:parseFloat(e.unitPrice),color:e.color||null,fabric:e.fabric||null,assigned_color_code:(null===n||void 0===n?void 0:n.color_code)||(null===n||void 0===n?void 0:n.code)||null,assigned_fabric_letter:(null===s||void 0===s?void 0:s.fabric_letter)||(null===s||void 0===s?void 0:s.code)||null,product_description:e.productDescription||""};return console.log("Item ".concat(t," - Processed:"),r),r}),popFile:h||null,popNotes:l.adminNotes||""};if(console.log("OrderForm - Delivery Date:",l.expectedDeliveryDate),console.log("OrderForm - Formatted Date:",c),console.log("OrderForm - Full Payload:",u),d&&!c)return void k(e=>Pe(Pe({},e),{},{expectedDeliveryDate:"Please enter a valid delivery date in YYYY-MM-DD format"}));n(u)}catch(s){k(e=>Pe(Pe({},e),{},{customer:"Failed to create or find customer: "+(s.message||"Unknown error")}))}finally{S(!1)}}},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,De.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:(0,De.jsxs)("div",{className:"flex items-center justify-between",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:o?"Edit Order":"Add New Order"}),(0,De.jsx)("p",{className:"text-gray-600",children:o?"Edit the order details below":"Create a new order for customer"})]}),(0,De.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",type:"button",children:(0,De.jsx)(Ti,{className:"text-gray-500"})})]})}),(0,De.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,De.jsx)(Ii,{className:"mr-2"})," Customer Information"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),(0,De.jsx)("input",{type:"text",name:"customerName",value:l.customerName,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(N.customerName?"border-red-500":"border-gray-300"),placeholder:"Enter customer name"}),N.customerName&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.customerName})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(ii,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"tel",name:"customerPhone",value:l.customerPhone,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(N.customerPhone?"border-red-500":"border-gray-300"),placeholder:"Enter phone number"})]}),N.customerPhone&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.customerPhone})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Or,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"email",name:"customerEmail",value:l.customerEmail,onChange:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]})]}),(0,De.jsx)("div",{className:"md:col-span-2",children:(0,De.jsxs)("div",{className:"flex items-center mb-4",children:[(0,De.jsx)("input",{type:"checkbox",id:"withDelivery",checked:d,onChange:e=>u(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,De.jsx)("label",{htmlFor:"withDelivery",className:"ml-2 text-sm font-medium text-gray-700",children:"\ud83d\ude9a This order requires delivery"})]})}),d&&(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Zr,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"text",name:"customerAddress",value:l.customerAddress,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(N.customerAddress?"border-red-500":"border-gray-300"),placeholder:"Enter delivery address"})]}),N.customerAddress&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.customerAddress})]})]})]}),(0,De.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg mt-4",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[(0,De.jsx)(ur,{className:"mr-2"})," Products in Order"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,De.jsxs)("div",{className:"md:col-span-2",children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),(0,De.jsxs)("select",{name:"productId",value:p.productId,onChange:E,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.productId?"border-red-500":"border-gray-300"),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select a product"}),x.filter(e=>e.available_for_order).map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," (",e.model_code,")"]},e.id))]}),N.productId&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.productId})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),(0,De.jsx)("textarea",{name:"productDescription",value:p.productDescription,onChange:E,rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter product description, specifications, or special requirements"})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),(0,De.jsx)("input",{type:"number",name:"quantity",value:p.quantity,onChange:E,min:"1",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.quantity?"border-red-500":"border-gray-300"),placeholder:"1"}),N.quantity&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.quantity})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price (R) *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Mr,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"number",name:"unitPrice",value:p.unitPrice,onChange:E,step:"0.01",min:"0",className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.unitPrice?"border-red-500":"border-gray-300"),placeholder:"0.00"})]}),N.unitPrice&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.unitPrice})]}),I&&(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color *"}),(0,De.jsxs)("select",{name:"color",value:p.color,onChange:E,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.color?"border-red-500":"border-gray-300"),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select color"}),O.length>0?O.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name||e.color_name||e.color_code||"Unknown Color"},e.id)):(0,De.jsx)("option",{value:"",disabled:!0,children:"No colors available"})]}),N.color&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.color}),0===O.length&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:"No colors loaded. Please refresh the page."}),(0,De.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:M.length>0?"This product has ".concat(M.length," color options. Please select one."):"Select a color for this product."})]}),F&&(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fabric *"}),(0,De.jsxs)("select",{name:"fabric",value:p.fabric,onChange:E,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.fabric?"border-red-500":"border-gray-300"),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select fabric"}),D.length>0?D.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name||e.fabric_name||e.fabric_letter||"Unknown Fabric"},e.id)):(0,De.jsx)("option",{value:"",disabled:!0,children:"No fabrics available"})]}),N.fabric&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.fabric}),0===D.length&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:"No fabrics loaded. Please refresh the page."}),(0,De.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:L.length>0?"This product has ".concat(L.length," fabric options. Please select one."):"Select a fabric for this product."})]})]}),(0,De.jsx)("div",{className:"flex justify-end mb-2",children:(0,De.jsx)("button",{type:"button",onClick:()=>{const e={};if(p.productId||(e.productId="Product is required"),(!p.unitPrice||parseFloat(p.unitPrice)<=0)&&(e.unitPrice="Valid unit price is required"),(!p.quantity||parseInt(p.quantity)<=0)&&(e.quantity="Valid quantity is required"),I&&!p.color&&(e.color="Please select a color for this product",console.log("Color validation failed: showColor =",I,"selected color =",p.color),console.log("Available colors:",O)),F&&!p.fabric&&(e.fabric="Please select a fabric for this product",console.log("Fabric validation failed: showFabric =",F,"selected fabric =",p.fabric),console.log("Available fabrics:",D)),Object.keys(e).length>0)return k(e),void console.log("Product validation errors:",e);const t=y.find(e=>String(e.id)===String(p.color)),n=j.find(e=>String(e.id)===String(p.fabric));console.log("Adding product to order:",{productId:p.productId,productName:p.productName,colorId:p.color,colorName:t?t.name||t.color_name||t.color_code:"Not found",fabricId:p.fabric,fabricName:n?n.name||n.fabric_name||n.fabric_letter:"Not found",quantity:p.quantity,unitPrice:p.unitPrice}),console.log("Current colors array:",y.length,"items"),console.log("Current fabrics array:",j.length,"items");const s=Pe({},p);console.log("Product to add:",s),v(e=>{const t=[...e,s];return console.log("Updated orderItems:",t),t}),f({productId:"",productName:"",productDescription:"",quantity:1,unitPrice:"",color:"",fabric:""})},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:"Add Product"})}),(0,De.jsxs)("div",{className:"overflow-x-auto",children:[(0,De.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Product"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Description"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Qty"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Unit Price"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Color"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Fabric"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Total"}),(0,De.jsx)("th",{className:"px-3 py-2"})]})}),(0,De.jsx)("tbody",{children:0===g.length?(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:"8",className:"text-center text-gray-400 py-4",children:"No products added yet"})}):g.map((e,t)=>{const n=x.find(t=>String(t.id)===String(e.productId));console.log("Item ".concat(t," - Color ID: ").concat(e.color,", Fabric ID: ").concat(e.fabric)),console.log("Available colors:",y),console.log("Available fabrics:",j);const s=y.find(t=>String(t.id)===String(e.color)),r=j.find(t=>String(t.id)===String(e.fabric));return console.log("Found color object:",s),console.log("Found fabric object:",r),(0,De.jsxs)("tr",{className:"border-b",children:[(0,De.jsx)("td",{className:"px-3 py-2",children:n?n.name:e.productName}),(0,De.jsx)("td",{className:"px-3 py-2",children:e.productDescription}),(0,De.jsx)("td",{className:"px-3 py-2",children:e.quantity}),(0,De.jsxs)("td",{className:"px-3 py-2",children:["R",e.unitPrice]}),(0,De.jsx)("td",{className:"px-3 py-2",children:s?s.name||s.color_name||s.color_code||"Unknown Color":e.color?"Color ID: ".concat(e.color):"Not specified"}),(0,De.jsx)("td",{className:"px-3 py-2",children:r?r.name||r.fabric_name||r.fabric_letter||"Unknown Fabric":e.fabric?"Fabric ID: ".concat(e.fabric):"Not specified"}),(0,De.jsxs)("td",{className:"px-3 py-2",children:["R",(parseFloat(e.unitPrice)*parseInt(e.quantity)).toFixed(2)]}),(0,De.jsx)("td",{className:"px-3 py-2",children:(0,De.jsx)("button",{type:"button",onClick:()=>(e=>{v(t=>t.filter((t,n)=>n!==e))})(t),className:"text-red-600 hover:underline",children:"Remove"})})]},t)})})]}),N.orderItems&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.orderItems})]})]}),(0,De.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mt-4",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[(0,De.jsx)(Mr,{className:"mr-2"})," Financial Information"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount"}),(0,De.jsx)("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:(0,De.jsxs)("span",{className:"text-lg font-semibold",children:["R",T()]})})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount (R) *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Mr,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"number",name:"depositAmount",value:l.depositAmount,onChange:A,step:"0.01",min:"0",max:T(),className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 ".concat(N.depositAmount?"border-red-500":"border-gray-300"),placeholder:"0.00"})]}),N.depositAmount&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.depositAmount})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance Amount"}),(0,De.jsx)("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:(0,De.jsxs)("span",{className:"text-lg font-semibold",children:["R",(parseFloat(T())-(parseFloat(l.depositAmount)||0)).toFixed(2)]})})]})]}),!o&&(0,De.jsxs)("div",{className:"mt-4",children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proof of Payment (PDF/Image) *"}),(0,De.jsx)("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>{var t;return m((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full px-3 py-2 border rounded-lg ".concat(N.popFile?"border-red-500":"border-gray-300")}),N.popFile&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.popFile})]})]}),(0,De.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg mt-4",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[(0,De.jsx)(pr,{className:"mr-2"})," Delivery Information"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d&&(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),(0,De.jsx)("input",{type:"date",name:"expectedDeliveryDate",value:l.expectedDeliveryDate,onChange:A,min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 ".concat(N.expectedDeliveryDate?"border-red-500":"border-gray-300")}),N.expectedDeliveryDate&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.expectedDeliveryDate}),(0,De.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: YYYY-MM-DD"})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),(0,De.jsxs)("select",{name:"orderStatus",value:l.orderStatus||"pending",onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,De.jsx)("option",{value:"pending",children:"Pending"}),(0,De.jsx)("option",{value:"confirmed",children:"Confirmed (Deposit Paid)"}),(0,De.jsx)("option",{value:"in_production",children:"In Production"})]})]})]})]}),(0,De.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-4",children:[(0,De.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Notes"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),(0,De.jsx)("textarea",{name:"adminNotes",value:l.adminNotes,onChange:A,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter any additional notes, special instructions, or order source (phone call, WhatsApp, etc.)"})]})]}),(0,De.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 mt-4",children:[(0,De.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),(0,De.jsx)("button",{type:"submit",disabled:r||C,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:r?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(_i,{className:"animate-spin mr-2"}),o?"Saving...":"Creating Order..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(mi,{className:"mr-2"}),o?"Save Changes":"Create Order"]})})]})]})})},Dh=["bsPrefix","className","as"],Ih=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:r}=e,i=Le(e,Dh);n=He(n,"navbar-brand");const a=r||(i.href?"a":"span");return(0,De.jsx)(a,Pe(Pe({},i),{},{ref:t,className:Oe()(s,n)}))});Ih.displayName="NavbarBrand";const Fh=Ih;const zh=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>null!=e).reduce((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];e.apply(this,s),t.apply(this,s)}},null)},Bh=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"],Wh={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Hh(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],s=Wh[e];return n+parseInt(qt(t,s[0]),10)+parseInt(qt(t,s[1]),10)}const Uh={[Pt]:"collapse",[Rt]:"collapsing",[Mt]:"collapsing",[Lt]:"collapse show"},Vh=s.forwardRef((e,t)=>{let{onEnter:n,onEntering:r,onEntered:i,onExit:a,onExiting:o,className:l,children:c,dimension:d="height",in:u=!1,timeout:h=300,mountOnEnter:m=!1,unmountOnExit:p=!1,appear:f=!1,getDimensionValue:g=Hh}=e,v=Le(e,Bh);const x="function"===typeof d?d():d,b=(0,s.useMemo)(()=>zh(e=>{e.style[x]="0"},n),[x,n]),y=(0,s.useMemo)(()=>zh(e=>{const t="scroll".concat(x[0].toUpperCase()).concat(x.slice(1));e.style[x]="".concat(e[t],"px")},r),[x,r]),w=(0,s.useMemo)(()=>zh(e=>{e.style[x]=null},i),[x,i]),j=(0,s.useMemo)(()=>zh(e=>{e.style[x]="".concat(g(x,e),"px"),rn(e)},a),[a,g,x]),_=(0,s.useMemo)(()=>zh(e=>{e.style[x]=null},o),[x,o]);return(0,De.jsx)(un,Pe(Pe({ref:t,addEndListener:sn},v),{},{"aria-expanded":v.role?u:null,onEnter:b,onEntering:y,onEntered:w,onExit:j,onExiting:_,childRef:zt(c),in:u,timeout:h,mountOnEnter:m,unmountOnExit:p,appear:f,children:(e,t)=>s.cloneElement(c,Pe(Pe({},t),{},{className:Oe()(l,c.props.className,Uh[e],"width"===x&&"collapse-horizontal")}))}))});Vh.displayName="Collapse";const Gh=Vh,qh=["children","bsPrefix"],Kh=s.forwardRef((e,t)=>{let{children:n,bsPrefix:r}=e,i=Le(e,qh);r=He(r,"navbar-collapse");const a=(0,s.useContext)(Ds);return(0,De.jsx)(Gh,Pe(Pe({in:!(!a||!a.expanded)},i),{},{children:(0,De.jsx)("div",{ref:t,className:r,children:n})}))});Kh.displayName="NavbarCollapse";const Xh=Kh,Yh=["bsPrefix","className","children","label","as","onClick"],Qh=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,children:i,label:a="Toggle navigation",as:o="button",onClick:l}=e,c=Le(e,Yh);n=He(n,"navbar-toggler");const{onToggle:d,expanded:u}=(0,s.useContext)(Ds)||{},h=rt(e=>{l&&l(e),d&&d()});return"button"===o&&(c.type="button"),(0,De.jsx)(o,Pe(Pe({},c),{},{ref:t,onClick:h,"aria-label":a,className:Oe()(r,n,!u&&"collapsed"),children:i||(0,De.jsx)("span",{className:"".concat(n,"-icon")})}))});Qh.displayName="NavbarToggle";const $h=Qh,Jh=["onHide"],Zh=s.forwardRef((e,t)=>{let{onHide:n}=e,r=Le(e,Jh);const i=(0,s.useContext)(Ds),a=rt(()=>{null==i||null==i.onToggle||i.onToggle(),null==n||n()});return(0,De.jsx)(Nd,Pe(Pe({ref:t,show:!(null==i||!i.expanded)},r),{},{renderStaticNode:!0,onHide:a}))});Zh.displayName="NavbarOffcanvas";const em=Zh,tm=["className","bsPrefix","as"],nm=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="span"}=e,i=Le(e,tm);return s=He(s,"navbar-text"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});nm.displayName="NavbarText";const sm=nm,rm=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],im=s.forwardRef((e,t)=>{const n=Ze(e,{expanded:"onToggle"}),{bsPrefix:r,expand:i=!0,variant:a="light",bg:o,fixed:l,sticky:c,className:d,as:u="nav",expanded:h,onToggle:m,onSelect:p,collapseOnSelect:f=!1}=n,g=Le(n,rm),v=He(r,"navbar"),x=(0,s.useCallback)(function(){null==p||p(...arguments),f&&h&&(null==m||m(!1))},[p,f,h,m]);void 0===g.role&&"nav"!==u&&(g.role="navigation");let b="".concat(v,"-expand");"string"===typeof i&&(b="".concat(b,"-").concat(i));const y=(0,s.useMemo)(()=>({onToggle:()=>null==m?void 0:m(!h),bsPrefix:v,expanded:!!h,expand:i}),[v,h,i,m]);return(0,De.jsx)(Ds.Provider,{value:y,children:(0,De.jsx)(_s.Provider,{value:x,children:(0,De.jsx)(u,Pe(Pe({ref:t},g),{},{className:Oe()(d,v,i&&b,a&&"".concat(v,"-").concat(a),o&&"bg-".concat(o),c&&"sticky-".concat(c),l&&"fixed-".concat(l))}))})})});im.displayName="Navbar";const am=Object.assign(im,{Brand:Fh,Collapse:Xh,Offcanvas:em,Text:sm,Toggle:$h}),om=s.createContext(null),lm=["children","usePopper"];const cm=()=>{};function dm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,s.useContext)(om),[n,r]=dt(),i=(0,s.useRef)(!1),{flip:a,offset:o,rootCloseEvent:l,fixed:c=!1,placement:d,popperConfig:u={},enableEventListeners:h=!0,usePopper:m=!!t}=e,p=null==(null==t?void 0:t.show)?!!e.show:t.show;p&&!i.current&&(i.current=!0);const{placement:f,setMenu:g,menuElement:v,toggleElement:x}=t||{},b=rh(x,v,hh({placement:d||f||"bottom-start",enabled:m,enableEvents:null==h?p:h,offset:o,flip:a,fixed:c,arrowElement:n,popperConfig:u})),y=Object.assign({ref:g||cm,"aria-labelledby":null==x?void 0:x.id},b.attributes.popper,{style:b.styles.popper}),w={show:p,placement:f,hasShown:i.current,toggle:null==t?void 0:t.toggle,popper:m?b:null,arrowProps:m?Object.assign({ref:r},b.attributes.arrow,{style:b.styles.arrow}):{}};return lh(v,e=>{null==t||t.toggle(!1,e)},{clickTrigger:l,disabled:!p}),[y,w]}function um(e){let{children:t,usePopper:n=!0}=e,s=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,lm);const[r,i]=dm(Object.assign({},s,{usePopper:n}));return(0,De.jsx)(De.Fragment,{children:t(r,i)})}um.displayName="DropdownMenu";const hm=um,mm=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},pm=()=>{};function fm(){const e=pc(),{show:t=!1,toggle:n=pm,setToggle:r,menuElement:i}=(0,s.useContext)(om)||{},a=(0,s.useCallback)(e=>{n(!t,e)},[t,n]),o={id:e,ref:r||pm,onClick:a,"aria-expanded":!!t};return i&&mm(i)&&(o["aria-haspopup"]=!0),[o,{show:t,toggle:n}]}function gm(e){let{children:t}=e;const[n,s]=fm();return(0,De.jsx)(De.Fragment,{children:t(n,s)})}gm.displayName="DropdownToggle";const vm=gm,xm=["eventKey","disabled","onClick","active","as"];function bm(e){let{key:t,href:n,active:r,disabled:i,onClick:a}=e;const o=(0,s.useContext)(_s),l=(0,s.useContext)(ws),{activeKey:c}=l||{},d=js(t,n),u=null==r&&null!=t?js(c)===d:r;return[{onClick:ht(e=>{i||(null==a||a(e),o&&!e.isPropagationStopped()&&o(d,e))}),"aria-disabled":i||void 0,"aria-selected":u,[ks("dropdown-item")]:""},{isActive:u}]}const ym=s.forwardRef((e,t)=>{let{eventKey:n,disabled:s,onClick:r,active:i,as:a=yt}=e,o=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,xm);const[l]=bm({key:n,href:o.href,disabled:s,onClick:r,active:i});return(0,De.jsx)(a,Object.assign({},o,{ref:t},l))});ym.displayName="DropdownItem";const wm=ym;function jm(){const e=vs(),t=(0,s.useRef)(null),n=(0,s.useCallback)(n=>{t.current=n,e()},[e]);return[t,n]}function _m(e){let{defaultShow:t,show:n,onSelect:r,onToggle:i,itemSelector:a="* [".concat(ks("dropdown-item"),"]"),focusFirstItemOnShow:o,placement:l="bottom-start",children:c}=e;const d=Ya(),[u,h]=lc(n,t,i),[m,p]=jm(),f=m.current,[g,v]=jm(),x=g.current,b=pt(u),y=(0,s.useRef)(null),w=(0,s.useRef)(!1),j=(0,s.useContext)(_s),_=(0,s.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;h(e,{originalEvent:t,source:n})},[h]),N=ht((e,t)=>{null==r||r(e,t),_(!1,t,"select"),t.isPropagationStopped()||null==j||j(e,t)}),k=(0,s.useMemo)(()=>({toggle:_,placement:l,show:u,menuElement:f,toggleElement:x,setMenu:p,setToggle:v}),[_,l,u,f,x,p,v]);f&&b&&!u&&(w.current=f.contains(f.ownerDocument.activeElement));const C=ht(()=>{x&&x.focus&&x.focus()}),S=ht(()=>{const e=y.current;let t=o;if(null==t&&(t=!(!m.current||!mm(m.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=gs(m.current,a)[0];n&&n.focus&&n.focus()});(0,s.useEffect)(()=>{u?S():w.current&&(w.current=!1,C())},[u,w,C,S]),(0,s.useEffect)(()=>{y.current=null});const A=(e,t)=>{if(!m.current)return null;const n=gs(m.current,a);let s=n.indexOf(e)+t;return s=Math.max(0,Math.min(s,n.length)),n[s]};return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=ht(n);(0,s.useEffect)(()=>{const n="function"===typeof e?e():e;return n.addEventListener(t,i,r),()=>n.removeEventListener(t,i,r)},[e])}((0,s.useCallback)(()=>d.document,[d]),"keydown",e=>{var t,n;const{key:s}=e,r=e.target,i=null==(t=m.current)?void 0:t.contains(r),a=null==(n=g.current)?void 0:n.contains(r);if(/input|textarea/i.test(r.tagName)&&(" "===s||"Escape"!==s&&i||"Escape"===s&&"search"===r.type))return;if(!i&&!a)return;if("Tab"===s&&(!m.current||!u))return;y.current=e.type;const o={originalEvent:e,source:e.type};switch(s){case"ArrowUp":{const t=A(r,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),u){const e=A(r,1);e&&e.focus&&e.focus()}else h(!0,o);return;case"Tab":$t(r.ownerDocument,"keyup",e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=m.current)&&t.contains(e.target)||h(!1,o)},{once:!0});break;case"Escape":"Escape"===s&&(e.preventDefault(),e.stopPropagation()),h(!1,o)}}),(0,De.jsx)(_s.Provider,{value:N,children:(0,De.jsx)(om.Provider,{value:k,children:c})})}_m.displayName="Dropdown",_m.Menu=hm,_m.Toggle=vm,_m.Item=wm;const Nm=_m,km=s.createContext({});km.displayName="DropdownContext";const Cm=km,Sm=["className","bsPrefix","as","role"],Am=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="hr",role:i="separator"}=e,a=Le(e,Sm);return s=He(s,"dropdown-divider"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s),role:i},a))});Am.displayName="DropdownDivider";const Em=Am,Tm=["className","bsPrefix","as","role"],Pm=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div",role:i="heading"}=e,a=Le(e,Tm);return s=He(s,"dropdown-header"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s),role:i},a))});Pm.displayName="DropdownHeader";const Mm=Pm,Lm=["bsPrefix","className","eventKey","disabled","onClick","active","as"],Rm=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,eventKey:r,disabled:i=!1,onClick:a,active:o,as:l=_t}=e,c=Le(e,Lm);const d=He(n,"dropdown-item"),[u,h]=bm({key:r,href:c.href,disabled:i,onClick:a,active:o});return(0,De.jsx)(l,Pe(Pe(Pe({},c),u),{},{ref:t,className:Oe()(s,d,h.isActive&&"active",i&&"disabled")}))});Rm.displayName="DropdownItem";const Om=Rm,Dm=["className","bsPrefix","as"],Im=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="span"}=e,i=Le(e,Dm);return s=He(s,"dropdown-item-text"),(0,De.jsx)(r,Pe({ref:t,className:Oe()(n,s)},i))});Im.displayName="DropdownItemText";const Fm=Im;function zm(e,t){return e}const Bm=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function Wm(e,t,n){let s=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?s=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?s=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?s=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?s="bottom":"up-centered"===t&&(s="top"),s}const Hm=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,align:i,rootCloseEvent:a,flip:o=!0,show:l,renderOnMount:c,as:d="div",popperConfig:u,variant:h}=e,m=Le(e,Bm),p=!1;const f=(0,s.useContext)(Ds),g=He(n,"dropdown-menu"),{align:v,drop:x,isRTL:b}=(0,s.useContext)(Cm);i=i||v;const y=(0,s.useContext)(tc),w=[];if(i)if("object"===typeof i){const e=Object.keys(i);if(e.length){const t=e[0],n=i[t];p="start"===n,w.push("".concat(g,"-").concat(t,"-").concat(n))}}else"end"===i&&(p=!0);const j=Wm(p,x,b),[_,{hasShown:N,popper:k,show:C,toggle:S}]=dm({flip:o,rootCloseEvent:a,show:l,usePopper:!f&&0===w.length,offset:[0,2],popperConfig:u,placement:j});if(_.ref=on(zm(t),_.ref),td(()=>{C&&(null==k||k.update())},[C]),!N&&!c&&!y)return null;"string"!==typeof d&&(_.show=C,_.close=()=>null==S?void 0:S(!1),_.align=i);let A=m.style;return null!=k&&k.placement&&(A=Pe(Pe({},m.style),_.style),m["x-placement"]=k.placement),(0,De.jsx)(d,Pe(Pe(Pe(Pe({},m),_),{},{style:A},(w.length||f)&&{"data-bs-popper":"static"}),{},{className:Oe()(r,g,C&&"show",p&&"".concat(g,"-end"),h&&"".concat(g,"-").concat(h),...w)}))});Hm.displayName="DropdownMenu";const Um=Hm,Vm=["bsPrefix","split","className","childBsPrefix","as"],Gm=s.forwardRef((e,t)=>{let{bsPrefix:n,split:r,className:i,childBsPrefix:a,as:o=Xs}=e,l=Le(e,Vm);const c=He(n,"dropdown-toggle"),d=(0,s.useContext)(om);void 0!==a&&(l.bsPrefix=a);const[u]=fm();return u.ref=on(u.ref,zm(t)),(0,De.jsx)(o,Pe(Pe({className:Oe()(i,c,r&&"".concat(c,"-split"),(null==d?void 0:d.show)&&"show")},u),l))});Gm.displayName="DropdownToggle";const qm=Gm,Km=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],Xm=s.forwardRef((e,t)=>{const n=Ze(e,{show:"onToggle"}),{bsPrefix:r,drop:i="down",show:a,className:o,align:l="start",onSelect:c,onToggle:d,focusFirstItemOnShow:u,as:h="div",navbar:m,autoClose:p=!0}=n,f=Le(n,Km),g=(0,s.useContext)(tc),v=He(r,"dropdown"),x=Ge(),b=rt((e,t)=>{var n;var s;(null==(n=t.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),s=t.source,(!1===p?"click"===s:"inside"===p?"rootClose"!==s:"outside"!==p||"select"!==s)&&(null==d||d(e,t)))}),y=Wm("end"===l,i,x),w=(0,s.useMemo)(()=>({align:l,drop:i,isRTL:x}),[l,i,x]),j={down:v,"down-centered":"".concat(v,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,De.jsx)(Cm.Provider,{value:w,children:(0,De.jsx)(Nm,{placement:y,show:a,onSelect:c,onToggle:b,focusFirstItemOnShow:u,itemSelector:".".concat(v,"-item:not(.disabled):not(:disabled)"),children:g?f.children:(0,De.jsx)(h,Pe(Pe({},f),{},{ref:t,className:Oe()(o,a&&"show",j[i])}))})})});Xm.displayName="Dropdown";const Ym=Object.assign(Xm,{Toggle:qm,Menu:Um,Item:Om,ItemText:Fm,Divider:Em,Header:Mm}),Qm=["id","title","children","bsPrefix","className","rootCloseEvent","menuRole","disabled","active","renderMenuOnMount","menuVariant"],$m=s.forwardRef((e,t)=>{let{id:n,title:s,children:r,bsPrefix:i,className:a,rootCloseEvent:o,menuRole:l,disabled:c,active:d,renderMenuOnMount:u,menuVariant:h}=e,m=Le(e,Qm);const p=He(void 0,"nav-item");return(0,De.jsxs)(Ym,Pe(Pe({ref:t},m),{},{className:Oe()(a,p),children:[(0,De.jsx)(Ym.Toggle,{id:n,eventKey:null,active:d,disabled:c,childBsPrefix:i,as:Hs,children:s}),(0,De.jsx)(Ym.Menu,{role:l,renderOnMount:u,rootCloseEvent:o,variant:h,children:r})]}))});$m.displayName="NavDropdown";const Jm=Object.assign($m,{Item:Ym.Item,ItemText:Ym.ItemText,Divider:Ym.Divider,Header:Ym.Header}),Zm=e=>{var t,n,r,i,a;let{user:o,onLogout:l,dashboardType:c="default"}=e;const[d,u]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{const e=setInterval(()=>u(new Date),1e3);return()=>clearInterval(e)},[]);const h=(()=>{switch(c){case"owner":return{title:"OOX Furniture - Executive Portal",bgColor:"#1e293b",textColor:"white",accentColor:"#f59e0b"};case"admin":return{title:"OOX Furniture - Operations Control",bgColor:"#64748b",textColor:"white",accentColor:"#3b82f6"};case"warehouse":return{title:"OOX Furniture - Production Floor",bgColor:"#1f2937",textColor:"white",accentColor:"#10b981"};case"delivery":return{title:"OOX Furniture - Delivery Hub",bgColor:"#ffffff",textColor:"#1f2937",accentColor:"#fbbf24"};default:return{title:"OOX Furniture System",bgColor:"#6b7280",textColor:"white",accentColor:"#3b82f6"}}})();return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("style",{children:"\n        .user-dropdown .dropdown-toggle {\n          border: none !important;\n          background: none !important;\n          box-shadow: none !important;\n          padding: 0.5rem 0.75rem !important;\n          border-radius: 25px !important;\n          transition: all 0.3s ease !important;\n        }\n        .user-dropdown .dropdown-toggle:hover {\n          background: rgba(255,255,255,0.1) !important;\n          transform: translateY(-1px);\n        }\n        .user-dropdown .dropdown-toggle:focus {\n          box-shadow: 0 0 0 2px ".concat(h.accentColor,"40 !important;\n        }\n        .navbar-toggler {\n          border: 1px solid ").concat(h.accentColor," !important;\n          padding: 0.5rem !important;\n        }\n        .navbar-toggler:focus {\n          box-shadow: 0 0 0 2px ").concat(h.accentColor,"40 !important;\n        }\n        .navbar-toggler-icon {\n          background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='").concat(h.accentColor.replace("#","%23"),"' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\") !important;\n        }\n        @media (max-width: 991px) {\n          .navbar-brand {\n            font-size: 1.2rem !important;\n          }\n        }\n        @media (max-width: 576px) {\n          .navbar-brand {\n            font-size: 1rem !important;\n          }\n        }\n      ")}),(0,De.jsxs)(am,{expand:"lg",className:"mb-4 shadow-lg",style:{background:"linear-gradient(135deg, ".concat(h.bgColor," 0%, ").concat(h.bgColor,"dd 100%)"),borderBottom:"4px solid ".concat(h.accentColor),borderRadius:"0 0 20px 20px",padding:"1rem 0"},children:[(0,De.jsxs)(Xe,{fluid:!0,className:"px-4",children:[(0,De.jsxs)(am.Brand,{className:"d-flex align-items-center",style:{color:h.textColor,fontWeight:"800",fontSize:"1.5rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="scale(1.02)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:[(0,De.jsx)("div",{className:"d-flex align-items-center justify-content-center me-3",style:{width:"45px",height:"45px",backgroundColor:h.accentColor,borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:(0,De.jsx)(Tr,{size:20})}),(0,De.jsx)("div",{className:"d-none d-sm-block",children:h.title}),(0,De.jsx)("div",{className:"d-block d-sm-none",children:"OOX"})]}),(0,De.jsx)(am.Toggle,{"aria-controls":"basic-navbar-nav",style:{borderColor:h.accentColor}}),(0,De.jsxs)(am.Collapse,{id:"basic-navbar-nav",children:[(0,De.jsx)("div",{className:"d-flex justify-content-center flex-grow-1",children:(0,De.jsxs)("div",{className:"d-none d-lg-flex align-items-center px-4 py-2",style:{backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"25px",border:"1px solid ".concat(h.accentColor,"40"),backdropFilter:"blur(10px)"},children:[(0,De.jsx)(Sr,{className:"me-2",style:{color:h.accentColor}}),(0,De.jsx)("span",{style:{color:h.textColor,fontWeight:"600",fontSize:"1.1rem",fontFamily:"monospace"},children:d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})}),(0,De.jsx)("div",{className:"d-flex align-items-center",children:(0,De.jsxs)(Jm,{title:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-2",style:{width:"40px",height:"40px",backgroundColor:h.accentColor,color:"white",fontSize:"16px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",border:"2px solid rgba(255,255,255,0.2)"},children:((null===o||void 0===o||null===(t=o.first_name)||void 0===t?void 0:t[0])||(null===o||void 0===o||null===(n=o.username)||void 0===n?void 0:n[0])||"U").toUpperCase()}),(0,De.jsxs)("div",{className:"d-none d-md-block",children:[(0,De.jsx)("div",{style:{color:h.textColor,fontWeight:"600",fontSize:"0.95rem"},children:(null===o||void 0===o?void 0:o.first_name)||(null===o||void 0===o?void 0:o.username)||"User"}),(0,De.jsx)("div",{style:{color:"".concat(h.textColor,"cc"),fontSize:"0.8rem"},children:(null===o||void 0===o||null===(r=o.role)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===o||void 0===o||null===(i=o.role)||void 0===i?void 0:i.slice(1))||"User"})]}),(0,De.jsx)(jr,{className:"ms-2",size:10,style:{color:h.accentColor}})]}),id:"user-dropdown",align:"end",menuVariant:"delivery"===c?"light":"dark",className:"user-dropdown",children:[(0,De.jsx)(Jm.Header,{children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsx)("div",{className:"rounded-circle mx-auto d-flex align-items-center justify-content-center",style:{width:"50px",height:"50px",backgroundColor:h.accentColor,color:"white"},children:(0,De.jsx)(Ii,{size:20})})}),(0,De.jsxs)("div",{className:"fw-bold",children:[null===o||void 0===o?void 0:o.first_name," ",null===o||void 0===o?void 0:o.last_name]}),(0,De.jsx)(Rn,{style:{backgroundColor:h.accentColor,color:"white"},className:"mb-2",children:(null===o||void 0===o||null===(a=o.role)||void 0===a?void 0:a.toUpperCase())||"USER"}),(0,De.jsxs)("div",{className:"small text-muted",children:["@",null===o||void 0===o?void 0:o.username]}),(0,De.jsx)("div",{className:"small text-muted",children:null===o||void 0===o?void 0:o.email})]})}),(0,De.jsx)(Jm.Divider,{}),(0,De.jsxs)(Jm.Item,{children:[(0,De.jsx)(Sr,{className:"me-2"}),"Last Login: ",(new Date).toLocaleDateString()]}),(0,De.jsxs)(Jm.Item,{children:[(0,De.jsx)(lr,{className:"me-2"}),"Notifications",(0,De.jsx)(Rn,{bg:"danger",className:"ms-2",children:"3"})]}),(0,De.jsx)(Jm.Divider,{}),(0,De.jsxs)(Jm.Item,{href:"#settings",children:[(0,De.jsx)(Ar,{className:"me-2"}),"Settings"]}),(0,De.jsx)(Jm.Divider,{}),(0,De.jsxs)(Jm.Item,{onClick:l,className:"text-danger",children:[(0,De.jsx)(xi,{className:"me-2"}),"Logout"]})]})})]})]}),(0,De.jsx)("div",{className:"d-md-none position-absolute",style:{top:"10px",right:"60px",color:h.textColor,fontSize:"0.8rem",fontWeight:"600"},children:d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,De.jsx)("style",{jsx:!0,children:"\n        .navbar-nav .nav-link.disabled {\n          opacity: 1 !important;\n        }\n        .dropdown-menu {\n          border-radius: 15px;\n          box-shadow: 0 10px 25px rgba(0,0,0,0.15);\n          border: none;\n          min-width: 280px;\n        }\n        .dropdown-header {\n          padding: 1rem;\n          background: linear-gradient(135deg, ".concat(h.accentColor,"15 0%, ").concat(h.accentColor,"05 100%);\n          border-radius: 10px 10px 0 0;\n          margin: -0.5rem -0.5rem 0.5rem -0.5rem;\n        }\n        .dropdown-item {\n          padding: 0.75rem 1rem;\n          border-radius: 8px;\n          margin: 0 0.5rem;\n          transition: all 0.2s ease;\n        }\n        .dropdown-item:hover {\n          background-color: ").concat(h.accentColor,"20;\n          transform: translateX(5px);\n        }\n        @media (max-width: 768px) {\n          .navbar-brand {\n            font-size: 1.1rem !important;\n          }\n        }\n      ")})]})]})},ep=["popFile","popNotes"],tp=e=>{var t,n,r,i,a;let{user:o,userRole:l,onLogout:c}=e;const d="warehouse_manager"===l?"warehouse":l,[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[_,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[S,A]=(0,s.useState)(null),[E,T]=(0,s.useState)(null),[P,M]=(0,s.useState)(!1),[L,R]=(0,s.useState)({order_status:"",production_status:""}),[O,D]=(0,s.useState)({order_statuses:[],production_statuses:[]}),[I,F]=(0,s.useState)(!1),[z,B]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[U,V]=(0,s.useState)("all"),[G,q]=(0,s.useState)("all"),[K,X]=(0,s.useState)("created_at"),[Y,Q]=(0,s.useState)("desc"),[$,J]=(0,s.useState)("all"),[Z,ee]=(0,s.useState)(1),[te]=(0,s.useState)(10);(0,s.useEffect)(()=>{ne(),(async()=>{try{let s,r;try{const e=await Ji("/orders/status_options/");s=null===e||void 0===e?void 0:e.order_statuses,r=null===e||void 0===e?void 0:e.production_statuses}catch(n){}if(!Array.isArray(s)||0===s.length||!Array.isArray(r)||0===r.length){var e,t;const n=await ta().catch(()=>null);s=s&&s.length?s:null===n||void 0===n||null===(e=n.status_options)||void 0===e?void 0:e.order_statuses,r=r&&r.length?r:null===n||void 0===n||null===(t=n.status_options)||void 0===t?void 0:t.production_statuses}const i=[{value:"deposit_pending",label:"Deposit Pending"},{value:"deposit_paid",label:"Deposit Paid"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"out_for_delivery",label:"Out for Delivery"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],a=[{value:"not_started",label:"Not Started"},{value:"in_production",label:"In Production"},{value:"completed",label:"Completed"}];D({order_statuses:Array.isArray(s)&&s.length>0?s:i,production_statuses:Array.isArray(r)&&r.length>0?r:a})}catch(s){D({order_statuses:[{value:"deposit_pending",label:"Deposit Pending"},{value:"deposit_paid",label:"Deposit Paid"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"out_for_delivery",label:"Out for Delivery"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],production_statuses:[{value:"not_started",label:"Not Started"},{value:"in_production",label:"In Production"},{value:"completed",label:"Completed"}]})}})()},[]);const ne=async()=>{try{x(!0);const[e,t,n]=await Promise.all([Zi(),ia(),xa()]);h(e.results||e),p(t.results||t),g(n.results||n),y("")}catch(e){y("Failed to load data: "+e.message)}finally{x(!1)}},se="owner"===d||"admin"===d,re=["owner","admin","warehouse"].includes(d),ie="owner"===d,ae="warehouse"===d,oe=u.filter(e=>{var t,n,s,r;const i=(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(W.toLowerCase()))||(null===(n=e.customer)||void 0===n||null===(s=n.name)||void 0===s?void 0:s.toLowerCase().includes(W.toLowerCase()))||(null===(r=e.customer_name)||void 0===r?void 0:r.toLowerCase().includes(W.toLowerCase())),a="all"===U||e.order_status===U,o="all"===G||e.production_status===G;if("all"===$)return i&&a&&o;if("pending"===$)return"pending"===e.order_status&&i;if("production"===$)return"in_production"===e.production_status&&i;if("ready"===$)return"ready_for_delivery"===e.production_status&&i;if("overdue"===$){return new Date(e.delivery_deadline)<new Date&&!["delivered","cancelled"].includes(e.order_status)&&i}return i&&a&&o}).sort((e,t)=>{let n=e[K],s=t[K];var r,i;"customer_name"===K&&(n=(null===(r=e.customer)||void 0===r?void 0:r.name)||e.customer_name||"",s=(null===(i=t.customer)||void 0===i?void 0:i.name)||t.customer_name||"");return"string"===typeof n?"asc"===Y?n.localeCompare(s):s.localeCompare(n):"asc"===Y?n-s:s-n}),le=Z*te,ce=le-te,de=oe.slice(ce,le),ue=Math.ceil(oe.length/te),he=e=>{K===e?Q("asc"===Y?"desc":"asc"):(X(e),Q("asc"))},me=e=>{re&&(A(e),R({order_status:e.order_status||"",production_status:e.production_status||""}),M(!0))},pe=async e=>{var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e);try{var n,s;const{order_status:e,production_status:t}=L||{};if("ready_for_delivery"===t&&(null===S||void 0===S||null===(n=S.customer)||void 0===n||!n.address))return M(!1),B(""),void F(!0);if("out_for_delivery"===e&&(null===S||void 0===S||null===(s=S.customer)||void 0===s||!s.address))return M(!1),B(""),void F(!0);t&&t!==(null===S||void 0===S?void 0:S.production_status)&&await ja(S.id,{production_status:t}),e&&e!==(null===S||void 0===S?void 0:S.order_status)&&await sa(S.id,{order_status:e}),M(!1),j("Status updated"),ne();try{window.dispatchEvent(new CustomEvent("oox:refresh"))}catch(r){}}catch(e){y((null===e||void 0===e?void 0:e.message)||"Failed to update status")}},fe=function(e){const t="ready_for_delivery"===e?"order_ready":e,n={order:{pending:{bg:"warning",text:"Pending"},confirmed:{bg:"info",text:"Confirmed"},in_production:{bg:"primary",text:"In Production"},order_ready:{bg:"success",text:"Ready"},out_for_delivery:{bg:"info",text:"Out for Delivery"},delivered:{bg:"success",text:"Delivered"},cancelled:{bg:"danger",text:"Cancelled"}},production:{not_started:{bg:"secondary",text:"\ud83d\udfe1 Not Started"},in_production:{bg:"warning",text:"\ud83d\udfe0 In Production"},completed:{bg:"success",text:"\ud83d\udfe2 Completed"}}}[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"order"][t]||{bg:"secondary",text:t};return(0,De.jsx)(Rn,{bg:n.bg,children:n.text})},ge=e=>K!==e?null:"asc"===Y?(0,De.jsx)(ji,{}):(0,De.jsx)(wi,{});u.length,u.filter(e=>"pending"===e.order_status).length,u.filter(e=>"in_production"===e.production_status).length,u.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,u.filter(e=>(e=>new Date(e.delivery_deadline)<new Date&&!["delivered","cancelled"].includes(e.order_status))(e)).length;if(v&&0===u.length)return(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading orders..."})]});const ve=(0,De.jsxs)(Xe,{fluid:!0,className:"py-3",children:[(0,De.jsx)(ps,{className:"mb-3",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-2 align-items-center",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{placeholder:"Search by order number or customer",value:W,onChange:e=>H(e.target.value)})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{value:U,onChange:e=>V(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Statuses"}),(0,De.jsx)("option",{value:"pending",children:"Pending"}),(0,De.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,De.jsx)("option",{value:"delivered",children:"Delivered"}),(0,De.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{value:G,onChange:e=>q(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Production"}),(0,De.jsx)("option",{value:"not_started",children:"Not Started"}),(0,De.jsx)("option",{value:"in_production",children:"In Production"}),(0,De.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,De.jsx)(Pn,{className:"text-end",children:se&&(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>{se&&(T(null),N(!0))},children:[(0,De.jsx)(oi,{className:"me-2"})," Add New Order"]})})]})})}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Orders"}),(0,De.jsx)("div",{children:(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:ne,children:"Refresh"})})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{onClick:()=>he("order_number"),style:{cursor:"pointer"},children:["Order # ",ge("order_number")]}),(0,De.jsxs)("th",{onClick:()=>he("customer_name"),style:{cursor:"pointer"},children:["Customer ",ge("customer_name")]}),(0,De.jsx)("th",{children:"Order Status"}),(0,De.jsx)("th",{children:"Production"}),(0,De.jsx)("th",{children:"Amount"}),(0,De.jsx)("th",{children:"Created"}),(0,De.jsx)("th",{className:"text-end",children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[de.map(e=>{var t,n,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.order_number}),(0,De.jsx)("td",{children:(null===(t=e.customer)||void 0===t?void 0:t.name)||e.customer_name}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{role:"button",onClick:()=>me(e),children:fe(e.order_status,"order")})}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{role:"button",onClick:()=>me(e),children:fe(e.production_status,"production")})}),(0,De.jsx)("td",{children:(s=e.total_amount,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(s||0))}),(0,De.jsx)("td",{children:(n=e.created_at,new Date(n).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}))}),(0,De.jsx)("td",{className:"text-end",children:(0,De.jsxs)(Td,{size:"sm",children:[(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"View"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",children:(0,De.jsx)(Br,{})})}),re&&(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"Edit"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{T(e),N(!0)})(e),children:(0,De.jsx)(Rr,{})})}),("owner"===l||"admin"===l)&&(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"Advance Workflow"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:async()=>{try{await na(e.id),ne()}catch(zP){y((null===zP||void 0===zP?void 0:zP.message)||"Advance failed")}},children:"Next"})}),ie&&(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"Delete"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>(e=>{A(e),C(!0)})(e),children:(0,De.jsx)(Pi,{})})}),ae&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"Mark Ready"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>(async e=>{try{var t;if(null===(t=e.customer)||void 0===t||!t.address)return A(e),B(""),void F(!0);await ja(e.id,{production_status:"ready_for_delivery"}),await sa(e.id,{order_status:"out_for_delivery"}),j("Order ".concat(e.order_number," sent to delivery")),ne()}catch(zP){y((null===zP||void 0===zP?void 0:zP.message)||"Failed to update")}})(e),children:(0,De.jsx)(wr,{})})}),(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"Delay Order"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>(async e=>{try{await ea(e.id,{order_status:e.order_status,production_status:"in_production",delayed:!0}),j("Order ".concat(e.order_number," flagged as delayed")),ne()}catch(zP){y((null===zP||void 0===zP?void 0:zP.message)||"Failed to delay")}})(e),children:(0,De.jsx)(Xr,{})})})]})]})})]},e.id)}),0===de.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:7,className:"text-center text-muted py-4",children:"No orders found"})})]})]})})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Page ",Z," of ",ue]}),(0,De.jsxs)("div",{children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===Z,onClick:()=>ee(e=>Math.max(1,e-1)),children:"Previous"}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",className:"ms-2",disabled:Z===ue,onClick:()=>ee(e=>Math.min(ue,e+1)),children:"Next"})]})]}),se&&(0,De.jsxs)(Vo,{show:_,onHide:()=>N(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:E?"Edit Order":"Add New Order"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsx)(Oh,{onClose:()=>N(!1),onSubmit:async e=>{try{if(E)await ea(E.id,e),j("Order updated successfully");else{const{popFile:t,popNotes:n}=e,s=Le(e,ep),r=await(e=>Ji("/orders/",{method:"POST",data:e}))(s),i=null===r||void 0===r?void 0:r.id;if(!i)throw new Error("Order creation failed");if(!t)throw new Error("Payment proof required for EFT payments");const a=new FormData;a.append("order",i),null!==s&&void 0!==s&&s.deposit_amount&&a.append("amount",s.deposit_amount),a.append("payment_type","deposit"),a.append("proof_image",t),n&&a.append("notes",n);const o=await oa(a,!0);if(null===o||void 0===o||!o.id)throw new Error("Failed to upload payment proof");await ra(i,{payment_method:"EFT",payment_status:"deposit_paid",deposit_amount:Number(null===s||void 0===s?void 0:s.deposit_amount)||0,proof_id:o.id}),j("Order created and deposit recorded")}N(!1),ne()}catch(t){y("Failed to save order: "+t.message)}},loading:v,isEdit:!!E,initialData:E?{customerName:(null===(t=E.customer)||void 0===t?void 0:t.name)||E.customer_name||"",customerPhone:(null===(n=E.customer)||void 0===n?void 0:n.phone)||"",customerEmail:(null===(r=E.customer)||void 0===r?void 0:r.email)||"",customerAddress:(null===(i=E.customer)||void 0===i?void 0:i.address)||"",expectedDeliveryDate:E.expected_delivery_date||E.delivery_deadline||"",adminNotes:E.admin_notes||"",depositAmount:null!==(a=E.deposit_amount)&&void 0!==a?a:"",paymentStatus:E.payment_status||"deposit_only",orderStatus:E.order_status||"pending"}:null,initialItems:(null===E||void 0===E?void 0:E.items)||[]})})]}),ie&&(0,De.jsxs)(Vo,{show:k,onHide:()=>C(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Confirm Delete"})}),(0,De.jsxs)(Vo.Body,{children:["Are you sure you want to delete order ",null===S||void 0===S?void 0:S.order_number,"?"]}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"danger",onClick:async()=>{try{await(e=S.id,Ji("/orders/".concat(e,"/"),{method:"DELETE"})),j("Order deleted successfully"),C(!1),ne()}catch(t){y("Failed to delete order: "+t.message)}var e},children:"Delete"})]})]}),re&&(0,De.jsxs)(Vo,{show:P,onHide:()=>M(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Change Order Status"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)(Gl,{onSubmit:pe,children:[(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Order Status"}),(0,De.jsxs)(Gl.Select,{value:L.order_status,onChange:e=>R(Pe(Pe({},L),{},{order_status:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"-- Select --"}),O.order_statuses.filter(e=>{const t="string"===typeof e?e:e.value;if("owner"===d||"admin"===d)return!0;const n=null===S||void 0===S?void 0:S.order_status;return"warehouse"===d||"warehouse_worker"===d?"deposit_paid"===n&&["order_ready"].includes(t):"delivery"===d&&("order_ready"===n?["out_for_delivery"].includes(t):"out_for_delivery"===n&&["delivered"].includes(t))}).map(e=>{const t="string"===typeof e?e:e.value,n="string"===typeof e?e:e.label||e.value;return(0,De.jsx)("option",{value:t,children:n},t)})]})]}),(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Production Status"}),(0,De.jsxs)(Gl.Select,{value:L.production_status,onChange:e=>R(Pe(Pe({},L),{},{production_status:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"-- Select --"}),O.production_statuses.filter(e=>{const t="string"===typeof e?e:e.value;if("owner"===d||"admin"===d)return!0;const n=(null===S||void 0===S?void 0:S.production_status)||"not_started",s=["not_started","cutting","sewing","finishing","quality_check","in_production","completed"],r=s.indexOf(n),i=s.indexOf(t);return i>=r&&i<=r+1}).map(e=>{const t="string"===typeof e?e:e.value,n="string"===typeof e?e:e.label||e.value;return(0,De.jsx)("option",{value:t,children:n},t)})]})]})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",onClick:pe,children:"Update"})]})]}),(0,De.jsxs)(Vo,{show:I,onHide:()=>F(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"\ud83d\ude9a Enter Delivery Address"})}),(0,De.jsxs)(Vo.Body,{children:[(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("p",{className:"text-muted",children:["Order ",(0,De.jsx)("strong",{children:null===S||void 0===S?void 0:S.order_number})," is ready for delivery. Please provide the delivery address below to complete the process."]})}),(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Delivery Address *"}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Enter complete delivery address (street, city, postal code)",value:z,onChange:e=>B(e.target.value),className:"mb-2"}),(0,De.jsx)("small",{className:"text-muted",children:"\ud83d\udca1 Tip: Be as specific as possible for accurate delivery. Google Maps integration coming soon for exact coordinates."})]}),(0,De.jsxs)("div",{className:"alert alert-info",children:[(0,De.jsx)("strong",{children:"Future Enhancement:"})," This form will soon include Google Maps API integration for precise location coordinates and route optimization."]})]}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>F(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",disabled:!z.trim(),onClick:async()=>{try{if(!z.trim())return void y("Address is required to complete delivery setup");await ea(S.id,{customer_update:{address:z.trim()}}),"ready_for_delivery"!==S.production_status&&await ja(S.id,{production_status:"ready_for_delivery"}),await sa(S.id,{order_status:"out_for_delivery"}),F(!1),j("Order ".concat(S.order_number," sent to delivery with address updated")),ne()}catch(e){y((null===e||void 0===e?void 0:e.message)||"Failed to update address and mark ready for delivery")}},children:"\ud83d\ude9a Confirm & Mark Ready for Delivery"})]})]})]});return"owner"===l||"admin"===l?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:o,userRole:l,onLogout:c}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:o,onLogout:c,dashboardType:l}),ve]})]}):ve},np=e=>{let{title:t,subtitle:n,icon:r,onRefresh:i,children:a,accentColor:o="#f59e0b",bgGradient:l="linear-gradient(135deg, #1e293b 0%, #334155 100%)"}=e;const[c,d]=(0,s.useState)(new Date);return(0,s.useEffect)(()=>{const e=setInterval(()=>d(new Date),1e3);return()=>clearInterval(e)},[]),(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("style",{children:"\n        .enhanced-page-header {\n          background: ".concat(l,";\n          border-radius: 20px;\n          border: 4px solid ").concat(o,";\n          box-shadow: 0 8px 32px rgba(0,0,0,0.12);\n          overflow: hidden;\n          position: relative;\n        }\n        .enhanced-page-header::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 4px;\n          background: linear-gradient(90deg, ").concat(o,", ").concat(o,"80, ").concat(o,");\n          animation: shimmer 3s ease-in-out infinite;\n        }\n        @keyframes shimmer {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n        .page-title-section {\n          padding: 2rem;\n        }\n        .page-icon-container {\n          width: 60px;\n          height: 60px;\n          background: ").concat(o,";\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          box-shadow: 0 4px 16px rgba(0,0,0,0.15);\n          margin-right: 1.5rem;\n          transition: all 0.3s ease;\n        }\n        .page-icon-container:hover {\n          transform: scale(1.05) rotate(5deg);\n          box-shadow: 0 6px 20px rgba(0,0,0,0.2);\n        }\n        .page-title {\n          color: white;\n          font-weight: 800;\n          font-size: 1.75rem;\n          margin-bottom: 0.5rem;\n          text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n        .page-subtitle {\n          color: rgba(255,255,255,0.85);\n          font-size: 1rem;\n          margin-bottom: 0;\n          font-weight: 500;\n        }\n        .page-time-display {\n          background: rgba(255,255,255,0.1);\n          border-radius: 25px;\n          padding: 0.75rem 1.5rem;\n          border: 1px solid ").concat(o,"40;\n          backdrop-filter: blur(10px);\n          color: white;\n          font-family: monospace;\n          font-weight: 600;\n          font-size: 1.1rem;\n        }\n        .page-refresh-btn {\n          background: ").concat(o,";\n          border: none;\n          border-radius: 12px;\n          padding: 0.75rem 1rem;\n          color: white;\n          transition: all 0.3s ease;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        .page-refresh-btn:hover {\n          background: ").concat(o,"dd;\n          transform: translateY(-2px);\n          box-shadow: 0 6px 16px rgba(0,0,0,0.2);\n        }\n        .page-actions-section {\n          padding: 0 2rem 1.5rem 2rem;\n        }\n        @media (max-width: 768px) {\n          .page-title-section {\n            padding: 1.5rem;\n          }\n          .page-title {\n            font-size: 1.4rem;\n          }\n          .page-icon-container {\n            width: 50px;\n            height: 50px;\n            margin-right: 1rem;\n          }\n          .page-actions-section {\n            padding: 0 1.5rem 1.5rem 1.5rem;\n          }\n        }\n      ")}),(0,De.jsxs)(Xe,{fluid:!0,className:"mb-4",children:[(0,De.jsxs)(ps,{className:"enhanced-page-header border-0",children:[(0,De.jsx)("div",{className:"page-title-section",children:(0,De.jsxs)(Sn,{className:"align-items-center",children:[(0,De.jsx)(Pn,{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[r&&(0,De.jsx)("div",{className:"page-icon-container",children:(0,De.jsx)(r,{size:28})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"page-title mb-1",children:t}),(0,De.jsx)("p",{className:"page-subtitle",children:n})]})]})}),(0,De.jsx)(Pn,{xs:"auto",className:"d-none d-lg-block",children:(0,De.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,De.jsxs)("div",{className:"page-time-display d-flex align-items-center",children:[(0,De.jsx)(Sr,{className:"me-2",style:{color:o}}),c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),i&&(0,De.jsxs)(Xs,{className:"page-refresh-btn d-flex align-items-center",onClick:i,children:[(0,De.jsx)(Ci,{className:"me-2"}),"Refresh"]})]})})]})}),a&&(0,De.jsx)("div",{className:"page-actions-section",children:a})]}),(0,De.jsx)("div",{className:"d-lg-none mt-3",children:(0,De.jsx)(ps,{className:"bg-light border-0",children:(0,De.jsx)(ps.Body,{className:"py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Sr,{className:"me-2",style:{color:o}}),(0,De.jsx)("span",{style:{fontFamily:"monospace",fontWeight:"600"},children:c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),i&&(0,De.jsx)(Xs,{size:"sm",style:{background:o,border:"none"},onClick:i,children:(0,De.jsx)(Ci,{})})]})})})})]})]})},sp=e=>{let{user:t,userRole:n,onLogout:r}=e;Z();const[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[v,x]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)(null),[k,C]=(0,s.useState)({name:"",phone:"",email:"",address:""}),[S,A]=(0,s.useState)(""),[E,T]=(0,s.useState)("created_at"),[P,M]=(0,s.useState)("desc"),[L,R]=(0,s.useState)(1),[O]=(0,s.useState)(10);(0,s.useEffect)(()=>{D()},[]);const D=async()=>{try{d(!0);const[e,t]=await Promise.all([ia(),Zi()]);a(e.results||e),l(t.results||t),h("")}catch(e){h("Failed to load data: "+e.message)}finally{d(!1)}},I=i.filter(e=>{var t,n,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(S.toLowerCase()))||(null===(n=e.phone)||void 0===n?void 0:n.includes(S))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(S.toLowerCase()))}).sort((e,t)=>{let n=e[E],s=t[E];return"string"===typeof n?"asc"===P?n.localeCompare(s):s.localeCompare(n):"asc"===P?n-s:s-n}),F=L*O,z=F-O,B=I.slice(z,F),W=Math.ceil(I.length/O),H=e=>{E===e?M("asc"===P?"desc":"asc"):(T(e),M("asc"))},U=()=>{N(null),C({name:"",phone:"",email:"",address:""}),g(!0)},V=e=>{N(e),C({name:e.name||"",phone:e.phone||"",email:e.email||"",address:e.address||""}),g(!0)},G=e=>E!==e?null:"asc"===P?(0,De.jsx)(ji,{}):(0,De.jsx)(wi,{}),q=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),K=e=>o.filter(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e}).length,X=e=>{const t=o.filter(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e}),n=t.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(n)};return c&&0===i.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading customers..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:t,userRole:n,onLogout:r}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:t,onLogout:r,dashboardType:n}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(np,{title:"OOX Furniture - Customer Management",subtitle:"OOX Furniture customer information, contact details, and order history management",icon:Fi,onRefresh:D,accentColor:"#3b82f6",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:(0,De.jsxs)(Xs,{variant:"primary",onClick:U,className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(oi,{className:"me-2"}),"Add Customer"]})})}),u&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>h(""),children:[(0,De.jsx)(Fr,{className:"me-2"}),u]}),m&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>p(""),children:[(0,De.jsx)(wr,{className:"me-2"}),m]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fi,{size:40,className:"text-primary mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:i.length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Customers"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(mr,{size:40,className:"text-success mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:i.filter(e=>e.email).length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"With Email"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(pr,{size:40,className:"text-warning mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:i.filter(e=>{const t=new Date(e.created_at),n=new Date;return n.setDate(n.getDate()-30),t>n}).length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"New (30 days)"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Lr,{size:40,className:"text-info mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:i.filter(e=>K(e.id)>0).length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"With Orders"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Search customers by name, phone, or email...",value:S,onChange:e=>A(e.target.value)})]})}),(0,De.jsxs)(Pn,{md:6,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Lr,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Lr,{className:"me-1"}),"Export PDF"]})]})]})})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Ki,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>H("name"),children:["Customer Name ",G("name")]}),(0,De.jsx)("th",{children:"Contact Information"}),(0,De.jsx)("th",{children:"Address"}),(0,De.jsx)("th",{children:"Orders"}),(0,De.jsx)("th",{children:"Total Value"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>H("created_at"),children:["Created ",G("created_at")]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:B.map(e=>{var t,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px",fontSize:"1.2rem",fontWeight:"bold"},children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:e.name}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,De.jsx)(ii,{className:"me-2 text-muted",size:12}),(0,De.jsx)("span",{children:e.phone})]}),e.email&&(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Or,{className:"me-2 text-muted",size:12}),(0,De.jsx)("span",{className:"text-muted",children:e.email})]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-start",children:[(0,De.jsx)(Zr,{className:"me-2 text-muted mt-1",size:12}),(0,De.jsx)("small",{className:"text-muted",style:{maxWidth:"200px"},children:e.address||"No address provided"})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Rn,{bg:"info",className:"fs-6",children:[K(e.id)," orders"]})}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{className:"fw-medium text-success",children:X(e.id)})}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:q(e.created_at)})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Td,{size:"sm",children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{j(e),y(!0)})(e),children:(0,De.jsx)(Br,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Edit Customer"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>V(e),children:(0,De.jsx)(Rr,{})})}),"owner"===n&&(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Delete Customer"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>(e=>{j(e),x(!0)})(e),children:(0,De.jsx)(Pi,{})})})]})})]},e.id)})})]}),0===I.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Fi,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No customers found"}),(0,De.jsx)("p",{className:"text-muted",children:S?"Try adjusting your search criteria":"No customers have been added yet"}),(0,De.jsxs)(Xs,{variant:"primary",onClick:U,children:[(0,De.jsx)(oi,{className:"me-1"}),"Add First Customer"]})]})]}),W>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",z+1," to ",Math.min(F,I.length)," of ",I.length," customers"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===L,onClick:()=>R(L-1),children:"Previous"}),[...Array(W)].map((e,t)=>(0,De.jsx)(Xs,{variant:L===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>R(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:L===W,onClick:()=>R(L+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Vo,{show:f,onHide:()=>g(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:_?"Edit Customer":"Add New Customer"})}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault();try{_?(await((e,t)=>Ji("/customers/".concat(e,"/"),{method:"PUT",data:t}))(_.id,k),p("Customer updated successfully")):(await aa(k),p("Customer created successfully")),g(!1),D()}catch(t){h("Failed to save customer: "+t.message)}},children:[(0,De.jsxs)(Vo.Body,{children:[(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Customer Name *"}),(0,De.jsx)(Gl.Control,{type:"text",value:k.name,onChange:e=>C(Pe(Pe({},k),{},{name:e.target.value})),required:!0,placeholder:"Enter customer name"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Phone Number *"}),(0,De.jsx)(Gl.Control,{type:"tel",value:k.phone,onChange:e=>C(Pe(Pe({},k),{},{phone:e.target.value})),required:!0,placeholder:"e.g., +27 11 123 4567"})]})})]}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Email Address"}),(0,De.jsx)(Gl.Control,{type:"email",value:k.email,onChange:e=>C(Pe(Pe({},k),{},{email:e.target.value})),placeholder:"customer@example.com"})]})})}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Address"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,value:k.address,onChange:e=>C(Pe(Pe({},k),{},{address:e.target.value})),placeholder:"Enter full delivery address..."})]})})})]}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",type:"submit",children:_?"Update Customer":"Create Customer"})]})]})]}),(0,De.jsxs)(Vo,{show:b,onHide:()=>y(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Customer Details"})}),(0,De.jsx)(Vo.Body,{children:w&&(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Contact Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Name:"}),(0,De.jsx)("br",{}),w.name]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Phone:"}),(0,De.jsx)("br",{}),(0,De.jsx)(ii,{className:"me-2"}),w.phone]}),w.email&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Email:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Or,{className:"me-2"}),w.email]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Address:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Zr,{className:"me-2"}),w.address||"No address provided"]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Order Summary"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Total Orders:"}),(0,De.jsx)("br",{}),(0,De.jsxs)(Rn,{bg:"info",className:"fs-6",children:[K(w.id)," orders"]})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Total Value:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-success fs-5 fw-bold",children:X(w.id)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Customer Since:"}),(0,De.jsx)("br",{}),q(w.created_at)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Last Updated:"}),(0,De.jsx)("br",{}),q(w.updated_at)]})]})]})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>y(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>{y(!1),V(w)},children:"Edit Customer"})]})]}),(0,De.jsxs)(Vo,{show:v,onHide:()=>x(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Confirm Delete"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Pi,{size:48,className:"text-danger mb-3"}),(0,De.jsx)("h5",{children:"Delete Customer?"}),(0,De.jsxs)("p",{className:"text-muted",children:["Are you sure you want to delete ",(0,De.jsx)("strong",{children:null===w||void 0===w?void 0:w.name}),"? This action cannot be undone."]}),K(null===w||void 0===w?void 0:w.id)>0&&(0,De.jsxs)(Nn,{variant:"warning",children:[(0,De.jsx)(Fr,{className:"me-2"}),"This customer has ",K(null===w||void 0===w?void 0:w.id)," order(s). Deleting will affect order history."]})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"danger",onClick:async()=>{try{await(e=w.id,Ji("/customers/".concat(e,"/"),{method:"DELETE"})),p("Customer deleted successfully"),x(!1),D()}catch(t){h("Failed to delete customer: "+t.message)}var e},children:"Delete Customer"})]})]})]})]})]})},rp=e=>{var t;let{user:n,userRole:r,onLogout:i}=e;const[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null),[j,_]=(0,s.useState)(null),[N,k]=(0,s.useState)({username:"",email:"",first_name:"",last_name:"",phone:"",role:"",password:"",password_confirm:"",is_active:!0}),[C,S]=(0,s.useState)(""),[A,E]=(0,s.useState)("all"),[T,P]=(0,s.useState)("date_joined"),[M,L]=(0,s.useState)("desc"),[R,O]=(0,s.useState)(1),[D]=(0,s.useState)(10);(0,s.useEffect)(()=>{I()},[]);const I=async()=>{try{c(!0);const e=await ha();o(e.results||e),u("")}catch(e){u("Failed to load users: "+e.message)}finally{c(!1)}},F={owner:{label:"Owner",color:"warning",icon:Pr,description:"Full system access and management"},admin:{label:"Admin",color:"primary",icon:Ar,description:"Administrative functions and user management"},warehouse:{label:"Warehouse",color:"success",icon:Wi,description:"Production tracking and inventory management"},delivery:{label:"Delivery",color:"info",icon:Mi,description:"Order delivery and logistics management"}},z=a.filter(e=>{var t,n,s,r;const i=(null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(C.toLowerCase()))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(C.toLowerCase()))||(null===(s=e.first_name)||void 0===s?void 0:s.toLowerCase().includes(C.toLowerCase()))||(null===(r=e.last_name)||void 0===r?void 0:r.toLowerCase().includes(C.toLowerCase())),a="all"===A||e.role===A;return i&&a}).sort((e,t)=>{let n=e[T],s=t[T];return"full_name"===T&&(n="".concat(e.first_name," ").concat(e.last_name),s="".concat(t.first_name," ").concat(t.last_name)),"string"===typeof n?"asc"===M?n.localeCompare(s):s.localeCompare(n):"asc"===M?n-s:s-n}),B=R*D,W=B-D,H=z.slice(W,B),U=Math.ceil(z.length/D),V=e=>{T===e?L("asc"===M?"desc":"asc"):(P(e),L("asc"))},G=()=>{"owner"===(null===n||void 0===n?void 0:n.role)?(u(null),m(null),_(null),k({username:"",email:"",first_name:"",last_name:"",phone:"",role:"delivery",password:"",password_confirm:"",is_active:!0}),f(!0)):u("Only users with Owner role can create new users")},q=e=>{u(null),m(null),_(e),k({username:e.username||"",email:e.email||"",first_name:e.first_name||"",last_name:e.last_name||"",phone:e.phone||"",role:e.role||"",password:"",password_confirm:"",is_active:void 0===e.is_active||e.is_active}),f(!0)},K=e=>T!==e?null:"asc"===M?(0,De.jsx)(ji,{}):(0,De.jsx)(wi,{}),X=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),Y=e=>{const t=F[e]||{label:e,color:"secondary",icon:Di},n=t.icon;return(0,De.jsxs)(Rn,{bg:t.color,className:"d-flex align-items-center gap-1",children:[(0,De.jsx)(n,{size:12}),t.label]})},Q=e=>(0,De.jsx)(Rn,{bg:e?"success":"danger",children:e?"Active":"Inactive"}),$={owner:a.filter(e=>"owner"===e.role).length,admin:a.filter(e=>"admin"===e.role).length,warehouse:a.filter(e=>"warehouse"===e.role).length,delivery:a.filter(e=>"delivery"===e.role).length,active:a.filter(e=>e.is_active).length,inactive:a.filter(e=>!e.is_active).length};return l&&0===a.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Fi,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"Loading users..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("style",{children:"\n          /* Disable all form validation feedback to prevent vibrations */\n          input:invalid,\n          input:valid,\n          select:invalid,\n          select:valid,\n          textarea:invalid,\n          textarea:valid {\n            box-shadow: none !important;\n            border-color: #dee2e6 !important;\n          }\n          \n          /* Disable focus outline vibrations */\n          input:focus,\n          select:focus,\n          textarea:focus {\n            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;\n          }\n          \n          /* Disable any browser validation tooltips */\n          input::-webkit-validation-bubble-message,\n          input::-webkit-validation-bubble-arrow,\n          input::-webkit-validation-bubble-top-outer-arrow,\n          input::-webkit-validation-bubble-top-inner-arrow {\n            display: none !important;\n          }\n        "}),(0,De.jsx)(Cd,{user:n,userRole:r,onLogout:i}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:n,onLogout:i,dashboardType:r}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(np,{title:"OOX Furniture - Team Management",subtitle:"OOX Furniture user accounts, roles, and system access permissions management",icon:Fi,onRefresh:I,accentColor:"#8b5cf6",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:"owner"===(null===n||void 0===n?void 0:n.role)&&(0,De.jsxs)(Xs,{variant:"primary",onClick:G,className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(oi,{className:"me-2"}),"Add User"]})})}),d&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>u(""),children:[(0,De.jsx)(Fr,{className:"me-2"}),d]}),h&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>m(""),children:[(0,De.jsx)(wr,{className:"me-2"}),h]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fi,{size:30,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:a.length}),(0,De.jsx)("small",{className:"text-muted",children:"Total Users"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Pr,{size:30,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.owner}),(0,De.jsx)("small",{className:"text-muted",children:"Owners"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ar,{size:30,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.admin}),(0,De.jsx)("small",{className:"text-muted",children:"Admins"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Wi,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.warehouse}),(0,De.jsx)("small",{className:"text-muted",children:"Warehouse"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Mi,{size:30,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.delivery}),(0,De.jsx)("small",{className:"text-muted",children:"Delivery"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Li,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.active}),(0,De.jsx)("small",{className:"text-muted",children:"Active"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Search users by name, username, or email...",value:C,onChange:e=>S(e.target.value)})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Select,{value:A,onChange:e=>E(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Roles"}),(0,De.jsx)("option",{value:"owner",children:"Owner"}),(0,De.jsx)("option",{value:"admin",children:"Admin"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery"})]})}),(0,De.jsxs)(Pn,{md:5,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Lr,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Qr,{className:"me-1"}),"Reset Passwords"]})]})]})})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Ki,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("full_name"),children:["User ",K("full_name")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("username"),children:["Username ",K("username")]}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("role"),children:["Role ",K("role")]}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Last Login"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("date_joined"),children:["Joined ",K("date_joined")]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:H.map(e=>{var t,s,r,i;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px",fontSize:"1.2rem",fontWeight:"bold"},children:(null===(t=e.first_name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||(null===(r=e.username)||void 0===r||null===(i=r.charAt(0))||void 0===i?void 0:i.toUpperCase())||"U"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:e.first_name||e.last_name?"".concat(e.first_name," ").concat(e.last_name).trim():e.username}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("code",{className:"bg-light px-2 py-1 rounded",children:e.username})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Or,{className:"me-2 text-muted",size:12}),(0,De.jsx)("span",{children:e.email})]})}),(0,De.jsx)("td",{children:Y(e.role)}),(0,De.jsx)("td",{children:Q(e.is_active)}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:e.last_login?X(e.last_login):"Never"})}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:X(e.date_joined)})}),(0,De.jsx)("td",{children:(0,De.jsxs)(ButtonGroup,{size:"sm",children:[(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{w(e),b(!0)})(e),children:(0,De.jsx)(Br,{})}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>q(e),children:(0,De.jsx)(Rr,{})}),e.id!==(null===n||void 0===n?void 0:n.id)&&(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>(e=>{w(e),v(!0)})(e),children:(0,De.jsx)(Pi,{})})]})})]},e.id)})})]}),0===z.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Fi,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No users found"}),(0,De.jsx)("p",{className:"text-muted",children:C?"Try adjusting your search criteria":"No users have been added yet"}),"owner"===(null===n||void 0===n?void 0:n.role)&&(0,De.jsxs)(Xs,{variant:"primary",onClick:G,children:[(0,De.jsx)(oi,{className:"me-1"}),"Add First User"]})]})]}),U>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",W+1," to ",Math.min(B,z.length)," of ",z.length," users"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===R,onClick:()=>O(R-1),children:"Previous"}),[...Array(U)].map((e,t)=>(0,De.jsx)(Xs,{variant:R===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>O(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:R===U,onClick:()=>O(R+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Vo,{show:p,onHide:()=>{f(!1),u(null),m(null),_(null)},size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:j?"Edit User":"Add New User"})}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault(),u(null);try{const e=Pe({},N);if(j&&!e.password&&(delete e.password,delete e.password_confirm),!j){if(!e.username||""===e.username.trim())return void u("Username is required");if(!e.password)return void u("Password is required");if(e.password!==e.password_confirm)return void u("Passwords do not match");const t=["owner","admin","warehouse","delivery"];if(e.role&&!t.includes(e.role))return void u("Invalid role: ".concat(e.role,". Valid roles: ").concat(t.join(", ")))}if(j)await ga(j.id,e),m("User updated successfully");else{const t=await fa(e);t.success&&t.user?m(t.message||'User "'.concat(t.user.username,'" created successfully')):m("User created successfully")}f(!1),_(null),u(null),I()}catch(t){u("Failed to save user: "+t.message)}},noValidate:!0,children:[(0,De.jsxs)(Vo.Body,{children:[(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Username *"}),(0,De.jsx)(Gl.Control,{type:"text",value:N.username,onChange:e=>k(Pe(Pe({},N),{},{username:e.target.value})),placeholder:"Enter username"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Email Address *"}),(0,De.jsx)(Gl.Control,{type:"email",value:N.email,onChange:e=>k(Pe(Pe({},N),{},{email:e.target.value})),placeholder:"user@example.com"})]})})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"First Name"}),(0,De.jsx)(Gl.Control,{type:"text",value:N.first_name,onChange:e=>k(Pe(Pe({},N),{},{first_name:e.target.value})),placeholder:"First name"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Last Name"}),(0,De.jsx)(Gl.Control,{type:"text",value:N.last_name,onChange:e=>k(Pe(Pe({},N),{},{last_name:e.target.value})),placeholder:"Last name"})]})})]}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Phone Number"}),(0,De.jsx)(Gl.Control,{type:"tel",value:N.phone,onChange:e=>k(Pe(Pe({},N),{},{phone:e.target.value})),placeholder:"+1234567890"})]})})}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Role *"}),(0,De.jsxs)(Gl.Select,{value:N.role,onChange:e=>k(Pe(Pe({},N),{},{role:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Select role..."}),Object.entries(F).map(e=>{let[t,n]=e;return(0,De.jsxs)("option",{value:t,children:[n.label," - ",n.description]},t)})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsxs)(Gl.Label,{children:["Password ",j?"(leave blank to keep current)":"*"]}),(0,De.jsx)(Gl.Control,{type:"password",value:N.password,onChange:e=>k(Pe(Pe({},N),{},{password:e.target.value})),placeholder:j?"Leave blank to keep current password":"Enter password"})]})})]}),!j&&(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Confirm Password *"}),(0,De.jsx)(Gl.Control,{type:"password",value:N.password_confirm,onChange:e=>k(Pe(Pe({},N),{},{password_confirm:e.target.value})),placeholder:"Confirm password"})]})})}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsx)(Gl.Group,{className:"mb-3",children:(0,De.jsx)(Gl.Check,{type:"checkbox",id:"is_active",label:"Active User (can login to the system)",checked:N.is_active,onChange:e=>k(Pe(Pe({},N),{},{is_active:e.target.checked}))})})})})]}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>{f(!1),u(null),m(null),_(null)},children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",type:"submit",children:j?"Update User":"Create User"})]})]})]}),(0,De.jsxs)(Vo,{show:x,onHide:()=>b(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"User Details"})}),(0,De.jsx)(Vo.Body,{children:y&&(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"User Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Name:"}),(0,De.jsx)("br",{}),y.first_name||y.last_name?"".concat(y.first_name," ").concat(y.last_name).trim():"Not provided"]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Username:"}),(0,De.jsx)("br",{}),(0,De.jsx)("code",{className:"bg-light px-2 py-1 rounded",children:y.username})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Email:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Or,{className:"me-2"}),y.email]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Role:"}),(0,De.jsx)("br",{}),Y(y.role),(0,De.jsx)("br",{}),(0,De.jsx)("small",{className:"text-muted",children:(null===(t=F[y.role])||void 0===t?void 0:t.description)||"No description available"})]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Account Status"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Status:"}),(0,De.jsx)("br",{}),Q(y.is_active)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Last Login:"}),(0,De.jsx)("br",{}),y.last_login?X(y.last_login):"Never logged in"]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Account Created:"}),(0,De.jsx)("br",{}),X(y.date_joined)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"User ID:"}),(0,De.jsx)("br",{}),(0,De.jsx)("code",{className:"bg-light px-2 py-1 rounded",children:y.id})]})]})]})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>b(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>{b(!1),q(y)},children:"Edit User"})]})]}),(0,De.jsxs)(Vo,{show:g,onHide:()=>v(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Confirm Delete"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Pi,{size:48,className:"text-danger mb-3"}),(0,De.jsx)("h5",{children:"Delete User?"}),(0,De.jsxs)("p",{className:"text-muted",children:["Are you sure you want to delete user ",(0,De.jsx)("strong",{children:null===y||void 0===y?void 0:y.username}),"? This action cannot be undone."]}),(0,De.jsxs)(Nn,{variant:"warning",children:[(0,De.jsx)(Fr,{className:"me-2"}),"Deleting this user will revoke their system access immediately."]})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"danger",onClick:async()=>{try{await va(y.id),m("User deleted successfully"),v(!1),I()}catch(e){u("Failed to delete user: "+e.message)}},children:"Delete User"})]})]})]})]})]})};function ip(e,t,n){t||(t=[]);var s=t.length++;return Object.defineProperty({},"_",{set:function(r){t[s]=r,e.apply(n,t)}})}function ap(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function op(e,t){ap(e,t),t.add(e)}function lp(e,t,n){ap(e,t),t.set(e,n)}function cp(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function dp(e,t,n){return n(cp(e,t))}function up(e,t){return e.get(cp(e,t))}function hp(e,t,n){return e.set(cp(e,t),n),n}function mp(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return mp=function(e){this.s=e,this.n=e.next},mp.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new mp(e)}var pp,fp,gp,vp,xp,bp,yp,wp,jp,_p,Np,kp,Cp,Sp,Ap;const Ep="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Tp=[.001,0,0,.001,0,0],Pp=1.35,Mp=1,Lp=2,Rp=4,Op=16,Dp=32,Ip=64,Fp=128,zp=256,Bp={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Wp={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Hp={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Up=0,Vp=1,Gp=2,qp=3,Kp=3,Xp=4,Yp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qp={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},$p=1,Jp=2,Zp=3,ef=4,tf=5,nf={ERRORS:0,WARNINGS:1,INFOS:5},sf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},rf=0,af=1,of=2,lf=3;let cf=nf.WARNINGS;function df(e){Number.isInteger(e)&&(cf=e)}function uf(){return cf}function hf(e){cf>=nf.INFOS&&console.log("Info: ".concat(e))}function mf(e){cf>=nf.WARNINGS&&console.log("Warning: ".concat(e))}function pf(e){throw new Error(e)}function ff(e,t){e||pf(t)}function gf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(r){}}const s=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(s)?s:null}function vf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=URL.parse(e);return s?(s.hash=t,s.href):n&&gf(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function xf(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const bf=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class yf extends bf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class wf extends bf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class jf extends bf{constructor(e){super(e,"InvalidPDFException")}}class _f extends bf{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Nf extends bf{constructor(e){super(e,"FormatError")}}class kf extends bf{constructor(e){super(e,"AbortException")}}function Cf(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||pf("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const s=[];for(let r=0;r<t;r+=n){const i=Math.min(r+n,t),a=e.subarray(r,i);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Sf(e){"string"!==typeof e&&pf("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=255&e.charCodeAt(s);return n}class Af{static get isLittleEndian(){return xf(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return xf(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return xf(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return xf(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return xf(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return xf(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ef=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class Tf{static makeHexColor(e,t,n){return"#".concat(Ef[e]).concat(Ef[t]).concat(Ef[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=e[n],r=e[n+1];e[n]=s*t[0]+r*t[2]+t[4],e[n+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*s+d*i+o,e[n+c+1]=t*r+d*a+l}}static applyInverseTransform(e,t){const n=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const s=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let m=s*c+o,p=m,f=s*u+o,g=f,v=a*d+l,x=v,b=a*h+l,y=b;if(0!==r||0!==i){const e=r*c,t=r*u,n=i*d,s=i*h;m+=n,g+=n,f+=s,p+=s,v+=e,y+=e,b+=t,x+=t}n[0]=Math.min(n[0],m,f,p,g),n[1]=Math.min(n[1],v,b,x,y),n[2]=Math.max(n[2],m,f,p,g),n[3]=Math.max(n[3],v,b,x,y)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],r=e[2],i=e[3],a=n**2+s**2,o=n*r+s*i,l=r**2+i**2,c=(a+l)/2,d=Math.sqrt(c**2-(a*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),i=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>i?null:[n,r,s,i]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,s)}static bezierBoundingBox(e,t,n,s,r,i,a,o,l){l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o),cp(Tf,this,Mf).call(this,e,n,r,a,t,s,i,o,3*(3*(n-r)-e+a),6*(e-2*n+r),3*(n-e),l),cp(Tf,this,Mf).call(this,e,n,r,a,t,s,i,o,3*(3*(s-i)-t+o),6*(t-2*s+i),3*(s-t),l)}}function Pf(e,t,n,s,r,i,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,m=d*(d*(d*e+3*l*t)+3*u*n)+h*s,p=d*(d*(d*r+3*l*i)+3*u*a)+h*o;c[0]=Math.min(c[0],m),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],m),c[3]=Math.max(c[3],p)}function Mf(e,t,n,s,r,i,a,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&cp(pp,this,Pf).call(this,e,t,n,s,r,i,a,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const m=Math.sqrt(h),p=2*l;cp(pp,this,Pf).call(this,e,t,n,s,r,i,a,o,(-c+m)/p,u),cp(pp,this,Pf).call(this,e,t,n,s,r,i,a,o,(-c-m)/p,u)}pp=Tf;let Lf=null,Rf=null;function Of(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),Cf(e)}const Df="pdfjs_internal_id_";function If(e,t,n){return Math.min(Math.max(e,t),n)}function Ff(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(Cf(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});const zf="http://www.w3.org/2000/svg";class Bf{}async function Wf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Kf(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)s(new Error(r.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}fp=Bf,Ee(Bf,"CSS",96),Ee(Bf,"PDF",72),Ee(Bf,"PDF_TO_CSS_UNITS",fp.CSS/fp.PDF);class Hf{constructor(e){let{viewBox:t,userUnit:n,scale:s,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=a,s*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,u,h,m,p,f,g,v;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,u=0,h=0,m=1;break;case 90:d=0,u=1,h=1,m=0;break;case 270:d=0,u=-1,h=-1,m=0;break;case 0:d=1,u=0,h=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,m=-m),0===d?(p=Math.abs(c-t[1])*s+i,f=Math.abs(l-t[0])*s+a,g=(t[3]-t[1])*s,v=(t[2]-t[0])*s):(p=Math.abs(l-t[0])*s+i,f=Math.abs(c-t[1])*s+a,g=(t[2]-t[0])*s,v=(t[3]-t[1])*s),this.transform=[d*s,u*s,h*s,m*s,p-d*s*l-h*s*c,f-u*s*l-m*s*c],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return xf(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Hf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return Tf.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Tf.applyTransform(t,this.transform);const n=[e[2],e[3]];return Tf.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Tf.applyInverseTransform(n,this.transform),n}}class Uf extends bf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Vf(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function Gf(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class qf{constructor(){Ee(this,"started",Object.create(null)),Ee(this,"times",[])}time(e){e in this.started&&mf("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||mf("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push("".concat(n.padEnd(t)," ").concat(r-s,"ms\n"));return e.join("")}}function Kf(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Xf(e){e.preventDefault()}function Yf(e){e.preventDefault(),e.stopPropagation()}class Qf{static toDateObject(e){if(!e||"string"!==typeof e)return null;cp(Qf,this,$f)._||($f._=cp(Qf,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=cp(Qf,this,$f)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let i=parseInt(t[4],10);i=i>=0&&i<=23?i:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(i+=c,a+=d):"+"===l&&(i-=c,a-=d),new Date(Date.UTC(n,s,r,i,a,o))}}var $f={_:void 0};function Jf(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(mf('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Zf(e){const{a:t,b:n,c:s,d:r,e:i,f:a}=e.getTransform();return[t,n,s,r,i,a]}function eg(e){const{a:t,b:n,c:s,d:r,e:i,f:a}=e.getTransform().invertSelf();return[t,n,s,r,i,a]}function tg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Hf){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:i}=e,a=Af.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(s,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),d=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(i.width=d,i.height=c):(i.width=c,i.height=d)}s&&e.setAttribute("data-main-rotation",t.rotation)}class ng{constructor(){const{pixelRatio:e}=ng;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=1/0,a=1/0,o=1/0;(n=ng.capPixels(n,r))>0&&(i=Math.sqrt(n/(e*t))),-1!==s&&(a=s/e,o=s/t);const l=Math.min(i,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const sg=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var rg=new WeakMap,ig=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakMap,cg=new WeakMap,dg=new WeakSet;class ug{constructor(e){op(this,dg),lp(this,rg,null),lp(this,ig,null),lp(this,ag,void 0),lp(this,og,null),lp(this,lg,null),lp(this,cg,null),hp(ag,this,e),xg._||(xg._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=hp(rg,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=up(ag,this)._uiManager._signal;e.addEventListener("contextmenu",Xf,{signal:t}),e.addEventListener("pointerdown",hg,{signal:t});const n=hp(og,this,document.createElement("div"));n.className="buttons",e.append(n);const s=up(ag,this).toolbarPosition;if(s){const{style:t}=e,n="ltr"===up(ag,this)._uiManager.direction?1-s[0]:s[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*s[1],"% + var(--editor-toolbar-vert-offset))")}return cp(dg,this,gg).call(this),e}get div(){return up(rg,this)}hide(){var e;up(rg,this).classList.add("hidden"),null===(e=up(ig,this))||void 0===e||e.hideDropdown()}show(){var e;up(rg,this).classList.remove("hidden"),null===(e=up(lg,this))||void 0===e||e.shown()}async addAltText(e){const t=await e.render();cp(dg,this,fg).call(this,t),up(og,this).prepend(t,dp(dg,this,vg)),hp(lg,this,e)}addColorPicker(e){hp(ig,this,e);const t=e.renderButton();cp(dg,this,fg).call(this,t),up(og,this).prepend(t,dp(dg,this,vg))}async addEditSignatureButton(e){const t=hp(cg,this,await e.renderEditButton(up(ag,this)));cp(dg,this,fg).call(this,t),up(og,this).prepend(t,dp(dg,this,vg))}updateEditSignatureButton(e){up(cg,this)&&(up(cg,this).title=e)}remove(){var e;up(rg,this).remove(),null===(e=up(ig,this))||void 0===e||e.destroy(),hp(ig,this,null)}}function hg(e){e.stopPropagation()}function mg(e){up(ag,this)._focusEventsAllowed=!1,Yf(e)}function pg(e){up(ag,this)._focusEventsAllowed=!0,Yf(e)}function fg(e){const t=up(ag,this)._uiManager._signal;e.addEventListener("focusin",cp(dg,this,mg).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",cp(dg,this,pg).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Xf,{signal:t})}function gg(){const{editorType:e,_uiManager:t}=up(ag,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",xg._[e]),cp(dg,this,fg).call(this,n),n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),up(og,this).append(n)}function vg(e){const t=document.createElement("div");return t.className="divider",t}var xg={_:null},bg=new WeakMap,yg=new WeakMap,wg=new WeakMap,jg=new WeakSet;class _g{constructor(e){op(this,jg),lp(this,bg,null),lp(this,yg,null),lp(this,wg,void 0),hp(wg,this,e)}show(e,t,n){const[s,r]=cp(jg,this,kg).call(this,t,n),{style:i}=up(yg,this)||hp(yg,this,cp(jg,this,Ng).call(this));e.append(up(yg,this)),i.insetInlineEnd="".concat(100*s,"%"),i.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){up(yg,this).remove()}}function Ng(){const e=hp(yg,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Xf,{signal:up(wg,this)._signal});const t=hp(bg,this,document.createElement("div"));return t.className="buttons",e.append(t),cp(jg,this,Cg).call(this),e}function kg(e,t){let n=0,s=0;for(const r of e){const e=r.y+r.height;if(e<n)continue;const i=r.x+(t?r.width:0);e>n?(s=i,n=e):t?i>s&&(s=i):i<s&&(s=i)}return[t?1-s:s,n]}function Cg(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=up(wg,this)._signal;e.addEventListener("contextmenu",Xf,{signal:n}),e.addEventListener("click",()=>{up(wg,this).highlightSelection("floating_button")},{signal:n}),up(bg,this).append(e)}function Sg(e,t,n){for(const s of n)t.addEventListener(s,e[s].bind(e))}var Ag=new WeakMap;class Eg{constructor(){lp(this,Ag,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((hp(Ag,this,(e=up(Ag,this),t=e++,e)),t))}}var Tg=new WeakMap,Pg=new WeakMap,Mg=new WeakMap,Lg=new WeakSet;class Rg{constructor(){op(this,Lg),lp(this,Tg,Of()),lp(this,Pg,0),lp(this,Mg,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return xf(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return cp(Lg,this,Og).call(this,"".concat(t,"_").concat(n,"_").concat(s,"_").concat(r),e)}async getFromUrl(e){return cp(Lg,this,Og).call(this,e,e)}async getFromBlob(e,t){const n=await t;return cp(Lg,this,Og).call(this,e,n)}async getFromId(e){up(Mg,this)||hp(Mg,this,new Map);const t=up(Mg,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,s,r;up(Mg,this)||hp(Mg,this,new Map);let i=up(Mg,this).get(e);if(null!==(r=i)&&void 0!==r&&r.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),i={bitmap:a.transferToImageBitmap(),id:"image_".concat(up(Tg,this),"_").concat((hp(Pg,this,(n=up(Pg,this),s=n++,n)),s)),refCounter:1,isSvg:!1},up(Mg,this).set(e,i),up(Mg,this).set(i.id,i),i}getSvgUrl(e){const t=up(Mg,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;up(Mg,this)||hp(Mg,this,new Map);const n=up(Mg,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:s}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(s.width,s.height);e.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=e.convertToBlob()}null===(t=s.close)||void 0===t||t.call(s),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(up(Tg,this),"_"))}}async function Og(e,t){var n;up(Mg,this)||hp(Mg,this,new Map);let s=up(Mg,this).get(e);if(null===s)return null;if(null!==(n=s)&&void 0!==n&&n.bitmap)return s.refCounter+=1,s;try{var r,i;let e;if(s||(s={bitmap:null,id:"image_".concat(up(Tg,this),"_").concat((hp(Pg,this,(r=up(Pg,this),i=r++,r)),i)),refCounter:0,isSvg:!1}),"string"===typeof t?(s.url=t,e=await Wf(t,"blob")):t instanceof File?e=s.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=gp._isSVGFittingCanvas,n=new FileReader,r=new Image,i=new Promise((e,i)=>{r.onload=()=>{s.bitmap=r,s.isSvg=!0,e()},n.onload=async()=>{const e=s.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=i});n.readAsDataURL(e),await i}else s.bitmap=await createImageBitmap(e);s.refCounter=1}catch(zP){mf(zP),s=null}return up(Mg,this).set(e,s),s&&up(Mg,this).set(s.id,s),s}gp=Rg;var Dg=new WeakMap,Ig=new WeakMap,Fg=new WeakMap,zg=new WeakMap;class Bg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;lp(this,Dg,[]),lp(this,Ig,!1),lp(this,Fg,void 0),lp(this,zg,-1),hp(Fg,this,e)}add(e){let{cmd:t,undo:n,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(r&&t(),up(Ig,this))return;const l={cmd:t,undo:n,post:s,type:i};if(-1===up(zg,this))return up(Dg,this).length>0&&(up(Dg,this).length=0),hp(zg,this,0),void up(Dg,this).push(l);if(a&&up(Dg,this)[up(zg,this)].type===i)return o&&(l.undo=up(Dg,this)[up(zg,this)].undo),void(up(Dg,this)[up(zg,this)]=l);const c=up(zg,this)+1;c===up(Fg,this)?up(Dg,this).splice(0,1):(hp(zg,this,c),c<up(Dg,this).length&&up(Dg,this).splice(c)),up(Dg,this).push(l)}undo(){if(-1===up(zg,this))return;hp(Ig,this,!0);const{undo:e,post:t}=up(Dg,this)[up(zg,this)];e(),null===t||void 0===t||t(),hp(Ig,this,!1),hp(zg,this,up(zg,this)-1)}redo(){if(up(zg,this)<up(Dg,this).length-1){hp(zg,this,up(zg,this)+1),hp(Ig,this,!0);const{cmd:e,post:t}=up(Dg,this)[up(zg,this)];e(),null===t||void 0===t||t(),hp(Ig,this,!1)}}hasSomethingToUndo(){return-1!==up(zg,this)}hasSomethingToRedo(){return up(zg,this)<up(Dg,this).length-1}cleanType(e){if(-1!==up(zg,this)){for(let t=up(zg,this);t>=0;t--)if(up(Dg,this)[t].type!==e)return up(Dg,this).splice(t+1,up(zg,this)-t),void hp(zg,this,t);up(Dg,this).length=0,hp(zg,this,-1)}}destroy(){hp(Dg,this,null)}}var Wg=new WeakSet;class Hg{constructor(e){op(this,Wg),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Af.platform;for(const[n,s,r={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:s,options:r}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:s,options:r}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(cp(Wg,this,Ug).call(this,t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:i=[],checker:a=null}}=n;a&&!a(e,t)||(s.bind(e,...i,t)(),r||Yf(t))}}function Ug(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class Vg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;e.set(n,Jf(s))}t.remove()}(e),xf(this,"_colors",e)}convert(e){const t=Jf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((e,n)=>e===t[n]))return Vg._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Tf.makeHexColor(...t):e}}Ee(Vg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Gg=new WeakMap,qg=new WeakMap,Kg=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,Qg=new WeakMap,$g=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,ev=new WeakMap,tv=new WeakMap,nv=new WeakMap,sv=new WeakMap,rv=new WeakMap,iv=new WeakMap,av=new WeakMap,ov=new WeakMap,lv=new WeakMap,cv=new WeakMap,dv=new WeakMap,uv=new WeakMap,hv=new WeakMap,mv=new WeakMap,pv=new WeakMap,fv=new WeakMap,gv=new WeakMap,vv=new WeakMap,xv=new WeakMap,bv=new WeakMap,yv=new WeakMap,wv=new WeakMap,jv=new WeakMap,_v=new WeakMap,Nv=new WeakMap,kv=new WeakMap,Cv=new WeakMap,Sv=new WeakMap,Av=new WeakMap,Ev=new WeakMap,Tv=new WeakMap,Pv=new WeakMap,Mv=new WeakMap,Lv=new WeakMap,Rv=new WeakMap,Ov=new WeakSet;class Dv{static get _keyboardManager(){const e=Dv.prototype,t=e=>up(Mv,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return xf(this,"_keyboardManager",new Hg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&up(Mv,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&up(Mv,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,s,r,i,a,o,l,c,d,u,h,m){op(this,Ov),lp(this,Gg,new AbortController),lp(this,qg,null),lp(this,Kg,new Map),lp(this,Xg,new Map),lp(this,Yg,null),lp(this,Qg,null),lp(this,$g,null),lp(this,Jg,new Bg),lp(this,Zg,null),lp(this,ev,null),lp(this,tv,0),lp(this,nv,new Set),lp(this,sv,null),lp(this,rv,null),lp(this,iv,new Set),Ee(this,"_editorUndoBar",null),lp(this,av,!1),lp(this,ov,!1),lp(this,lv,!1),lp(this,cv,null),lp(this,dv,null),lp(this,uv,null),lp(this,hv,null),lp(this,mv,!1),lp(this,pv,null),lp(this,fv,new Eg),lp(this,gv,!1),lp(this,vv,!1),lp(this,xv,null),lp(this,bv,null),lp(this,yv,null),lp(this,wv,null),lp(this,jv,null),lp(this,_v,Wp.NONE),lp(this,Nv,new Set),lp(this,kv,null),lp(this,Cv,null),lp(this,Sv,null),lp(this,Av,null),lp(this,Ev,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),lp(this,Tv,[0,0]),lp(this,Pv,null),lp(this,Mv,null),lp(this,Lv,null),lp(this,Rv,null);const p=this._signal=up(Gg,this).signal;hp(Mv,this,e),hp(Lv,this,t),hp(Yg,this,n),hp(Cv,this,s),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:p}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),r._on("setpreference",this.onSetPreference.bind(this),{signal:p}),r._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:p}),cp(Ov,this,Hv).call(this),cp(Ov,this,Yv).call(this),cp(Ov,this,Gv).call(this),hp(Qg,this,i.annotationStorage),hp(cv,this,i.filterFactory),hp(Sv,this,a),hp(hv,this,o||null),hp(av,this,l),hp(ov,this,c),hp(lv,this,d),hp(jv,this,u||null),this.viewParameters={realScale:Bf.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=h||null,this._supportsPinchToZoom=!1!==m}destroy(){var e,t,n,s,r,i,a,o;null===(e=up(Rv,this))||void 0===e||e.resolve(),hp(Rv,this,null),null===(t=up(Gg,this))||void 0===t||t.abort(),hp(Gg,this,null),this._signal=null;for(const l of up(Xg,this).values())l.destroy();up(Xg,this).clear(),up(Kg,this).clear(),up(iv,this).clear(),null===(n=up(wv,this))||void 0===n||n.clear(),hp(qg,this,null),up(Nv,this).clear(),up(Jg,this).destroy(),null===(s=up(Yg,this))||void 0===s||s.destroy(),null===(r=up(Cv,this))||void 0===r||r.destroy(),null===(i=up(pv,this))||void 0===i||i.hide(),hp(pv,this,null),null===(a=up(yv,this))||void 0===a||a.destroy(),hp(yv,this,null),up(dv,this)&&(clearTimeout(up(dv,this)),hp(dv,this,null)),up(Pv,this)&&(clearTimeout(up(Pv,this)),hp(Pv,this,null)),null===(o=this._editorUndoBar)||void 0===o||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return up(jv,this)}get useNewAltTextFlow(){return up(ov,this)}get useNewAltTextWhenAddingImage(){return up(lv,this)}get hcmFilter(){return xf(this,"hcmFilter",up(Sv,this)?up(cv,this).addHCMFilter(up(Sv,this).foreground,up(Sv,this).background):"none")}get direction(){return xf(this,"direction",getComputedStyle(up(Mv,this)).direction)}get highlightColors(){return xf(this,"highlightColors",up(hv,this)?new Map(up(hv,this).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return xf(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),hp(ev,this,e)}setMainHighlightColorPicker(e){hp(yv,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=up(Yg,this))||void 0===t||t.editAltText(this,e,n)}getSignature(e){var t;null===(t=up(Cv,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return up(Cv,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)hp(lv,this,n)}onPageChanging(e){let{pageNumber:t}=e;hp(tv,this,t-1)}focusMainContainer(){up(Mv,this).focus()}findParent(e,t){for(const n of up(Xg,this).values()){const{x:s,y:r,width:i,height:a}=n.div.getBoundingClientRect();if(e>=s&&e<=s+i&&t>=r&&t<=r+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];up(Lv,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){up(iv,this).add(e)}removeShouldRescale(e){up(iv,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*Bf.PDF_TO_CSS_UNITS;for(const s of up(iv,this))s.onScaleChanging();null===(t=up(ev,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:i}=t,a=t.toString(),o=cp(Ov,this,Iv).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;t.empty();const c=cp(Ov,this,Fv).call(this,o),d=up(_v,this)===Wp.NONE,u=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:i,text:a}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(Wp.HIGHLIGHT,u):u()}addToAnnotationStorage(e){e.isEmpty()||!up(Qg,this)||up(Qg,this).has(e.id)||up(Qg,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,up(mv,this)&&(hp(mv,this,!1),cp(Ov,this,Wv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of up(Nv,this))if(t.div.contains(e)){hp(bv,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!up(bv,this))return;const[e,t]=up(bv,this);hp(bv,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){cp(Ov,this,Gv).call(this),cp(Ov,this,Kv).call(this)}removeEditListeners(){cp(Ov,this,qv).call(this),cp(Ov,this,Xv).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of up(rv,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of up(rv,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=up(qg,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of up(Nv,this)){const e=s.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const e of up(rv,this))if(e.isHandlingMimeForPasting(i.type))return void e.paste(i,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void mf('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const e=[];for(const i of n){const t=await s.deserialize(i);if(!t)return;e.push(t)}const t=()=>{for(const t of e)cp(Ov,this,ex).call(this,t);cp(Ov,this,sx).call(this,e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(r){mf('paste: "'.concat(r.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),up(_v,this)===Wp.NONE||this.isEditorHandlingKeyboard||Dv._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,up(mv,this)&&(hp(mv,this,!1),cp(Ov,this,Wv).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(cp(Ov,this,Uv).call(this),cp(Ov,this,Kv).call(this),cp(Ov,this,Qv).call(this,{isEditing:up(_v,this)!==Wp.NONE,isEmpty:cp(Ov,this,nx).call(this),hasSomethingToUndo:up(Jg,this).hasSomethingToUndo(),hasSomethingToRedo:up(Jg,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(cp(Ov,this,Vv).call(this),cp(Ov,this,Xv).call(this),cp(Ov,this,Qv).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!up(rv,this)){hp(rv,this,e);for(const e of up(rv,this))cp(Ov,this,$v).call(this,e.defaultPropertiesToUpdate)}}getId(){return up(fv,this).id}get currentLayer(){return up(Xg,this).get(up(tv,this))}getLayer(e){return up(Xg,this).get(e)}get currentPageIndex(){return up(tv,this)}addLayer(e){up(Xg,this).set(e.pageIndex,e),up(gv,this)?e.enable():e.disable()}removeLayer(e){up(Xg,this).delete(e.pageIndex)}async updateMode(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(up(_v,this)!==e&&(!up(Rv,this)||(await up(Rv,this).promise,up(Rv,this)))){var r,i;if(hp(Rv,this,Promise.withResolvers()),null===(t=up(ev,this))||void 0===t||t.commitOrRemove(),hp(_v,this,e),e===Wp.NONE)return this.setEditingState(!1),cp(Ov,this,Zv).call(this),null===(r=this._editorUndoBar)||void 0===r||r.hide(),void up(Rv,this).resolve();if(e===Wp.SIGNATURE)await(null===(i=up(Cv,this))||void 0===i?void 0:i.loadSignatures());this.setEditingState(!0),await cp(Ov,this,Jv).call(this),this.unselectAll();for(const t of up(Xg,this).values())t.updateMode(e);if(!n)return s&&this.addNewEditorFromKeyboard(),void up(Rv,this).resolve();for(const e of up(Kg,this).values())e.annotationElementId===n||e.id===n?(this.setSelected(e),e.enterInEditMode()):e.unselect();up(Rv,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==up(_v,this)&&this._eventBus.dispatch("switchannotationeditormode",Pe({source:this},e))}updateParams(e,t){var n;if(up(rv,this)){switch(e){case Hp.CREATE:return void this.currentLayer.addNewEditor(t);case Hp.HIGHLIGHT_DEFAULT_COLOR:null===(n=up(yv,this))||void 0===n||n.updateColor(t);break;case Hp.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(up(Av,this)||hp(Av,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of up(Nv,this))n.updateParams(e,t);for(const n of up(rv,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,s;for(const r of up(Kg,this).values())r.editorType===e&&r.show(t);(null===(n=null===(s=up(Av,this))||void 0===s?void 0:s.get(Hp.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&cp(Ov,this,$v).call(this,[[Hp.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(up(vv,this)!==e){hp(vv,this,e);for(const t of up(Xg,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of up(Kg,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return up(Kg,this).get(e)}addEditor(e){up(Kg,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(up(dv,this)&&clearTimeout(up(dv,this)),hp(dv,this,setTimeout(()=>{this.focusMainContainer(),hp(dv,this,null)},0))),up(Kg,this).delete(e.id),e.annotationElementId)&&(null===(t=up(wv,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&up(nv,this).has(e.annotationElementId))||(null===(n=up(Qg,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){up(nv,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return up(nv,this).has(e)}removeDeletedAnnotationElement(e){up(nv,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){up(qg,this)!==e&&(hp(qg,this,e),e&&cp(Ov,this,$v).call(this,e.propertiesToUpdate))}updateUI(e){dp(Ov,this,tx)===e&&cp(Ov,this,$v).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){cp(Ov,this,$v).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(up(Nv,this).has(e))return up(Nv,this).delete(e),e.unselect(),void cp(Ov,this,Qv).call(this,{hasSelectedEditor:this.hasSelection});up(Nv,this).add(e),e.select(),cp(Ov,this,$v).call(this,e.propertiesToUpdate),cp(Ov,this,Qv).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;null===(t=up(ev,this))||void 0===t||t.commitOrRemove();for(const n of up(Nv,this))n!==e&&n.unselect();up(Nv,this).clear(),up(Nv,this).add(e),e.select(),cp(Ov,this,$v).call(this,e.propertiesToUpdate),cp(Ov,this,Qv).call(this,{hasSelectedEditor:!0})}isSelected(e){return up(Nv,this).has(e)}get firstSelectedEditor(){return up(Nv,this).values().next().value}unselect(e){e.unselect(),up(Nv,this).delete(e),cp(Ov,this,Qv).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==up(Nv,this).size}get isEnterHandled(){return 1===up(Nv,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;up(Jg,this).undo(),cp(Ov,this,Qv).call(this,{hasSomethingToUndo:up(Jg,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:cp(Ov,this,nx).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){up(Jg,this).redo(),cp(Ov,this,Qv).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:up(Jg,this).hasSomethingToRedo(),isEmpty:cp(Ov,this,nx).call(this)})}addCommands(e){up(Jg,this).add(e),cp(Ov,this,Qv).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:cp(Ov,this,nx).call(this)})}cleanUndoStack(e){up(Jg,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...up(Nv,this)],s=()=>{for(const e of n)cp(Ov,this,ex).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(s,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:s,mustExec:!0})}commitOrRemove(){var e;null===(e=up(qg,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return up(qg,this)||this.hasSelection}selectAll(){for(const e of up(Nv,this))e.commit();cp(Ov,this,sx).call(this,up(Kg,this).values())}unselectAll(){var e;if((!up(qg,this)||(up(qg,this).commitOrRemove(),up(_v,this)===Wp.NONE))&&(null===(e=up(ev,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of up(Nv,this))e.unselect();up(Nv,this).clear(),cp(Ov,this,Qv).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;up(Tv,this)[0]+=e,up(Tv,this)[1]+=t;const[n,s]=up(Tv,this),r=[...up(Nv,this)];up(Pv,this)&&clearTimeout(up(Pv,this)),hp(Pv,this,setTimeout(()=>{hp(Pv,this,null),up(Tv,this)[0]=up(Tv,this)[1]=0,this.addCommands({cmd:()=>{for(const e of r)up(Kg,this).has(e.id)&&(e.translateInPage(n,s),e.translationDone())},undo:()=>{for(const e of r)up(Kg,this).has(e.id)&&(e.translateInPage(-n,-s),e.translationDone())},mustExec:!1})},1e3));for(const i of r)i.translateInPage(e,t),i.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),hp(sv,this,new Map);for(const e of up(Nv,this))up(sv,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!up(sv,this))return!1;this.disableUserSelect(!1);const e=up(sv,this);hp(sv,this,null);let t=!1;for(const[{x:s,y:r,pageIndex:i},a]of e)a.newX=s,a.newY=r,a.newPageIndex=i,t||(t=s!==a.savedX||r!==a.savedY||i!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,s)=>{if(up(Kg,this).has(e.id)){const r=up(Xg,this).get(s);r?e._setParentAndPosition(r,t,n):(e.pageIndex=s,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:s,newY:r,newPageIndex:i}]of e)n(t,s,r,i)},undo:()=>{for(const[t,{savedX:s,savedY:r,savedPageIndex:i}]of e)n(t,s,r,i)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(up(sv,this))for(const n of up(sv,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===up(Nv,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return up(qg,this)===e}getActive(){return up(qg,this)}getMode(){return up(_v,this)}get imageManager(){return xf(this,"imageManager",new Rg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:i}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-s)/i,y:1-(e+a-n)/r,width:o/i,height:a/r});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/r,y:1-(t+o-s)/i,width:a/r,height:o/i});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-s)/i,y:(e-n)/r,width:o/i,height:a/r});break;default:a=(e,t,a,o)=>({x:(e-n)/r,y:(t-s)/i,width:a/r,height:o/i})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:s,height:r}of e.getClientRects())0!==s&&0!==r&&o.push(a(t,n,s,r))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(up($g,this)||hp($g,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=up($g,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=up($g,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const s=up(Qg,this).getRawValue(n);s&&(up(_v,this)!==Wp.NONE||s.hasBeenModified)&&s.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var s;const r=null===(s=up(wv,this))||void 0===s?void 0:s.get(e);r&&(r.setCanvas(t,n),up(wv,this).delete(e))}addMissingCanvas(e,t){(up(wv,this)||hp(wv,this,new Map)).set(e,t)}}function Iv(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function Fv(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of up(Xg,this).values())if(n.hasTextLayer(e))return n;return null}function zv(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=cp(Ov,this,Iv).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(up(pv,this)||hp(pv,this,new _g(this)),up(pv,this).show(t,n,"ltr"===this.direction))}function Bv(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(up(kv,this))null===(n=up(pv,this))||void 0===n||n.hide(),hp(kv,this,null),cp(Ov,this,Qv).call(this,{hasSelectedText:!1});return}const{anchorNode:s}=t;if(s===up(kv,this))return;const r=cp(Ov,this,Iv).call(this,t).closest(".textLayer");var i;if(r){if(null===(e=up(pv,this))||void 0===e||e.hide(),hp(kv,this,s),cp(Ov,this,Qv).call(this,{hasSelectedText:!0}),(up(_v,this)===Wp.HIGHLIGHT||up(_v,this)===Wp.NONE)&&(up(_v,this)===Wp.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),hp(mv,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=up(_v,this)===Wp.HIGHLIGHT?cp(Ov,this,Fv).call(this,r):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),s=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&cp(Ov,this,Wv).call(this,"main_toolbar"))};window.addEventListener("pointerup",s,{signal:n}),window.addEventListener("blur",s,{signal:n})}}else up(kv,this)&&(null===(i=up(pv,this))||void 0===i||i.hide(),hp(kv,this,null),cp(Ov,this,Qv).call(this,{hasSelectedText:!1}))}function Wv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";up(_v,this)===Wp.HIGHLIGHT?this.highlightSelection(e):up(av,this)&&cp(Ov,this,zv).call(this)}function Hv(){document.addEventListener("selectionchange",cp(Ov,this,Bv).bind(this),{signal:this._signal})}function Uv(){if(up(uv,this))return;hp(uv,this,new AbortController);const e=this.combinedSignal(up(uv,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Vv(){var e;null===(e=up(uv,this))||void 0===e||e.abort(),hp(uv,this,null)}function Gv(){if(up(xv,this))return;hp(xv,this,new AbortController);const e=this.combinedSignal(up(xv,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function qv(){var e;null===(e=up(xv,this))||void 0===e||e.abort(),hp(xv,this,null)}function Kv(){if(up(Zg,this))return;hp(Zg,this,new AbortController);const e=this.combinedSignal(up(Zg,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Xv(){var e;null===(e=up(Zg,this))||void 0===e||e.abort(),hp(Zg,this,null)}function Yv(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function Qv(e){Object.entries(e).some(e=>{let[t,n]=e;return up(Ev,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(up(Ev,this),e)}),up(_v,this)===Wp.HIGHLIGHT&&!1===e.hasSelectedEditor&&cp(Ov,this,$v).call(this,[[Hp.HIGHLIGHT_FREE,!0]]))}function $v(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function Jv(){if(!up(gv,this)){hp(gv,this,!0);const e=[];for(const t of up(Xg,this).values())e.push(t.enable());await Promise.all(e);for(const t of up(Kg,this).values())t.enable()}}function Zv(){if(this.unselectAll(),up(gv,this)){hp(gv,this,!1);for(const e of up(Xg,this).values())e.disable();for(const e of up(Kg,this).values())e.disable()}}function ex(e){const t=up(Xg,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function tx(e){let t=null;for(t of up(Nv,e));return t}function nx(){if(0===up(Kg,this).size)return!0;if(1===up(Kg,this).size)for(const e of up(Kg,this).values())return e.isEmpty();return!1}function sx(e){for(const t of up(Nv,this))t.unselect();up(Nv,this).clear();for(const t of e)t.isEmpty()||(up(Nv,this).add(t),t.select());cp(Ov,this,Qv).call(this,{hasSelectedEditor:this.hasSelection})}Ee(Dv,"TRANSLATE_SMALL",1),Ee(Dv,"TRANSLATE_BIG",10);var rx=new WeakMap,ix=new WeakMap,ax=new WeakMap,ox=new WeakMap,lx=new WeakMap,cx=new WeakMap,dx=new WeakMap,ux=new WeakMap,hx=new WeakMap,mx=new WeakMap,px=new WeakMap,fx=new WeakMap,gx=new WeakSet;class vx{constructor(e){op(this,gx),lp(this,rx,null),lp(this,ix,!1),lp(this,ax,null),lp(this,ox,null),lp(this,lx,null),lp(this,cx,null),lp(this,dx,!1),lp(this,ux,null),lp(this,hx,null),lp(this,mx,null),lp(this,px,null),lp(this,fx,!1),hp(hx,this,e),hp(fx,this,e._uiManager.useNewAltTextFlow),yx._||(yx._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=vx._l10n)&&void 0!==t||(vx._l10n=e)}async render(){const e=hp(ax,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=hp(ox,this,document.createElement("span"));e.append(t),up(fx,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",yx._.missing),t.setAttribute("data-l10n-id",yx._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=up(hx,this)._uiManager._signal;e.addEventListener("contextmenu",Xf,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const s=e=>{e.preventDefault(),up(hx,this)._uiManager.editAltText(up(hx,this)),up(fx,this)&&up(hx,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:dp(gx,this,xx)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(hp(dx,this,!0),s(t))},{signal:n}),await cp(gx,this,bx).call(this),e}finish(){up(ax,this)&&(up(ax,this).focus({focusVisible:up(dx,this)}),hp(dx,this,!1))}isEmpty(){return up(fx,this)?null===up(rx,this):!up(rx,this)&&!up(ix,this)}hasData(){return up(fx,this)?null!==up(rx,this)||!!up(mx,this):this.isEmpty()}get guessedText(){return up(mx,this)}async setGuessedText(e){null===up(rx,this)&&(hp(mx,this,e),hp(px,this,await vx._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),cp(gx,this,bx).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!up(fx,this)||up(rx,this))return null===(t=up(ux,this))||void 0===t||t.remove(),void hp(ux,this,null);if(!up(ux,this)){const e=hp(ux,this,document.createElement("div"));e.className="noAltTextBadge",up(hx,this).div.append(e)}up(ux,this).classList.toggle("hidden",!e)}serialize(e){let t=up(rx,this);return e||up(mx,this)!==t||(t=up(px,this)),{altText:t,decorative:up(ix,this),guessedText:up(mx,this),textWithDisclaimer:up(px,this)}}get data(){return{altText:up(rx,this),decorative:up(ix,this)}}set data(e){let{altText:t,decorative:n,guessedText:s,textWithDisclaimer:r,cancel:i=!1}=e;s&&(hp(mx,this,s),hp(px,this,r)),up(rx,this)===t&&up(ix,this)===n||(i||(hp(rx,this,t),hp(ix,this,n)),cp(gx,this,bx).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];up(ax,this)&&(!e&&up(cx,this)&&(clearTimeout(up(cx,this)),hp(cx,this,null)),up(ax,this).disabled=!e)}shown(){up(hx,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:dp(gx,this,xx)}})}destroy(){var e,t;null===(e=up(ax,this))||void 0===e||e.remove(),hp(ax,this,null),hp(ox,this,null),hp(lx,this,null),null===(t=up(ux,this))||void 0===t||t.remove(),hp(ux,this,null)}}function xx(e){return(up(rx,e)?"added":null===up(rx,e)&&e.guessedText&&"review")||"missing"}async function bx(){const e=up(ax,this);if(!e)return;if(up(fx,this)){var t,n;if(e.classList.toggle("done",!!up(rx,this)),e.setAttribute("data-l10n-id",yx._[dp(gx,this,xx)]),null===(t=up(ox,this))||void 0===t||t.setAttribute("data-l10n-id",yx._["".concat(dp(gx,this,xx),"-label")]),!up(rx,this))return void(null===(n=up(lx,this))||void 0===n||n.remove())}else{var s;if(!up(rx,this)&&!up(ix,this))return e.classList.remove("done"),void(null===(s=up(lx,this))||void 0===s||s.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=up(lx,this);if(!r){hp(lx,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(up(hx,this).id);const t=100,n=up(hx,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(up(cx,this)),hp(cx,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{hp(cx,this,setTimeout(()=>{hp(cx,this,null),up(lx,this).classList.add("show"),up(hx,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;up(cx,this)&&(clearTimeout(up(cx,this)),hp(cx,this,null)),null===(e=up(lx,this))||void 0===e||e.classList.remove("show")},{signal:n})}up(ix,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=up(rx,this)),r.parentNode||e.append(r);const i=up(hx,this).getElementForAltText();null===i||void 0===i||i.setAttribute("aria-describedby",r.id)}var yx={_:null};Ee(vx,"_l10n",null);var wx=new WeakMap,jx=new WeakMap,_x=new WeakMap,Nx=new WeakMap,kx=new WeakMap,Cx=new WeakMap,Sx=new WeakMap,Ax=new WeakMap,Ex=new WeakMap,Tx=new WeakMap,Px=new WeakMap,Mx=new WeakMap,Lx=new WeakSet;class Rx{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:o}=e;op(this,Lx),lp(this,wx,void 0),lp(this,jx,!1),lp(this,_x,null),lp(this,Nx,void 0),lp(this,kx,void 0),lp(this,Cx,void 0),lp(this,Sx,void 0),lp(this,Ax,null),lp(this,Ex,void 0),lp(this,Tx,null),lp(this,Px,void 0),lp(this,Mx,null),hp(wx,this,t),hp(_x,this,s),hp(Nx,this,n),hp(kx,this,r),hp(Cx,this,i),hp(Sx,this,a),hp(Px,this,new AbortController),hp(Ex,this,AbortSignal.any([o,up(Px,this).signal])),t.addEventListener("touchstart",cp(Lx,this,Ox).bind(this),{passive:!1,signal:up(Ex,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ng.pixelRatio}destroy(){var e,t;null===(e=up(Px,this))||void 0===e||e.abort(),hp(Px,this,null),null===(t=up(Ax,this))||void 0===t||t.abort(),hp(Ax,this,null)}}function Ox(e){var t,n;if(null!==(t=up(Nx,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(up(Ax,this))return;const e=hp(Ax,this,new AbortController),t=AbortSignal.any([up(Ex,this),e.signal]),n=up(wx,this),s={capture:!0,signal:t,passive:!1},r=e=>{var t;"touch"===e.pointerType&&(null===(t=up(Ax,this))||void 0===t||t.abort(),hp(Ax,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(Yf(e),r(e))},s),n.addEventListener("pointerup",r,s),void n.addEventListener("pointercancel",r,s)}if(!up(Mx,this)){var s;hp(Mx,this,new AbortController);const e=AbortSignal.any([up(Ex,this),up(Mx,this).signal]),t=up(wx,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",cp(Lx,this,Dx).bind(this),n);const r=cp(Lx,this,Ix).bind(this);t.addEventListener("touchend",r,n),t.addEventListener("touchcancel",r,n),n.capture=!0,t.addEventListener("pointerdown",Yf,n),t.addEventListener("pointermove",Yf,n),t.addEventListener("pointercancel",Yf,n),t.addEventListener("pointerup",Yf,n),null===(s=up(kx,this))||void 0===s||s.call(this)}if(Yf(e),2!==e.touches.length||null!==(n=up(_x,this))&&void 0!==n&&n.call(this))return void hp(Tx,this,null);let[r,i]=e.touches;r.identifier>i.identifier&&([r,i]=[i,r]),hp(Tx,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:i.screenX,touch1Y:i.screenY})}function Dx(e){var t;if(!up(Tx,this)||2!==e.touches.length)return;Yf(e);let[n,s]=e.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:r,screenY:i}=n,{screenX:a,screenY:o}=s,l=up(Tx,this),{touch0X:c,touch0Y:d,touch1X:u,touch1Y:h}=l,m=u-c,p=h-d,f=a-r,g=o-i,v=Math.hypot(f,g)||1,x=Math.hypot(m,p)||1;if(!up(jx,this)&&Math.abs(x-v)<=vp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=i,l.touch1X=a,l.touch1Y=o,!up(jx,this))return void hp(jx,this,!0);const b=[(r+a)/2,(i+o)/2];null===(t=up(Cx,this))||void 0===t||t.call(this,b,x,v)}function Ix(e){if(!(e.touches.length>=2)){var t;if(up(Mx,this))up(Mx,this).abort(),hp(Mx,this,null),null===(t=up(Sx,this))||void 0===t||t.call(this);up(Tx,this)&&(Yf(e),hp(Tx,this,null),hp(jx,this,!1))}}vp=Rx;var Fx=new WeakMap,zx=new WeakMap,Bx=new WeakMap,Wx=new WeakMap,Hx=new WeakMap,Ux=new WeakMap,Vx=new WeakMap,Gx=new WeakMap,qx=new WeakMap,Kx=new WeakMap,Xx=new WeakMap,Yx=new WeakMap,Qx=new WeakMap,$x=new WeakMap,Jx=new WeakMap,Zx=new WeakMap,eb=new WeakMap,tb=new WeakMap,nb=new WeakMap,sb=new WeakMap,rb=new WeakMap,ib=new WeakMap,ab=new WeakMap,ob=new WeakMap,lb=new WeakSet;class cb{static get _resizerKeyboardManager(){const e=cb.prototype._resizeWithKeyboard,t=Dv.TRANSLATE_SMALL,n=Dv.TRANSLATE_BIG;return xf(this,"_resizerKeyboardManager",new Hg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],cb.prototype._stopResizingWithKeyboard]]))}constructor(e){op(this,lb),lp(this,Fx,null),lp(this,zx,null),lp(this,Bx,null),lp(this,Wx,!1),lp(this,Hx,null),lp(this,Ux,""),lp(this,Vx,!1),lp(this,Gx,null),lp(this,qx,null),lp(this,Kx,null),lp(this,Xx,null),lp(this,Yx,""),lp(this,Qx,!1),lp(this,$x,null),lp(this,Jx,!1),lp(this,Zx,!1),lp(this,eb,!1),lp(this,tb,null),lp(this,nb,0),lp(this,sb,0),lp(this,rb,null),lp(this,ib,null),Ee(this,"isSelected",!1),Ee(this,"_isCopy",!1),Ee(this,"_editToolbar",null),Ee(this,"_initialOptions",Object.create(null)),Ee(this,"_initialData",null),Ee(this,"_isVisible",!0),Ee(this,"_uiManager",null),Ee(this,"_focusEventsAllowed",!0),lp(this,ab,!1),lp(this,ob,cb._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:i}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,i];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return xf(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Eb({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=cb._l10n)&&void 0!==n||(cb._l10n=e),cb._l10nResizer||(cb._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==cb._borderLineWidth)return;const s=getComputedStyle(document.documentElement);cb._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){pf("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return up(ab,this)}set _isDraggable(e){var t;hp(ab,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=up(ob,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):cp(lb,this,Ab).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(up(Qx,this)?hp(Qx,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,i]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/i,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}translate(e,t){cp(lb,this,db).call(this,this.parentDimensions,e,t)}translateInPage(e,t){up($x,this)||hp($x,this,[this.x,this.y,this.width,this.height]),cp(lb,this,db).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){up($x,this)||hp($x,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[o,l]=this.getBaseTranslation();i+=o,a+=l;const{style:c}=n;c.left="".concat((100*i).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(i,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!up($x,this)&&(up($x,this)[0]!==this.x||up($x,this)[1]!==this.y)}get _hasBeenResized(){return!!up($x,this)&&(up($x,this)[2]!==this.width||up($x,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=cb,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,s]}=this;let{x:r,y:i,width:a,height:o}=this;if(a*=n,o*=s,r*=n,i*=s,this._mustFixPosition)switch(e){case 0:r=If(r,0,n-a),i=If(i,0,s-o);break;case 90:r=If(r,0,n-o),i=If(i,a,s);break;case 180:r=If(r,a,n),i=If(i,o,s);break;case 270:r=If(r,o,n),i=If(i,0,s-a)}this.x=r/=n,this.y=i/=s;const[l,c]=this.getBaseTranslation();r+=l,i+=c,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*i).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return ub.call(cb,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ub.call(cb,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,s]=this.parentDimensions,{style:r}=this.div;r.width="".concat((100*e/n).toFixed(2),"%"),up(Vx,this)||(r.height="".concat((100*t/s).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),r=!up(Vx,this)&&t.endsWith("%");if(s&&r)return;const[i,a]=this.parentDimensions;s||(e.width="".concat((100*parseFloat(n)/i).toFixed(2),"%")),up(Vx,this)||r||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=up(Bx,this))||void 0===e||e.finish()}async addEditToolbar(){return this._editToolbar||up(Zx,this)||(this._editToolbar=new ug(this),this.div.append(this._editToolbar.render()),up(Bx,this)&&await this._editToolbar.addAltText(up(Bx,this))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=up(Bx,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){up(Bx,this)||(vx.initialize(cb._l10n),hp(Bx,this,new vx(this)),up(Fx,this)&&(up(Bx,this).data=up(Fx,this),hp(Fx,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=up(Bx,this))||void 0===e?void 0:e.data}set altTextData(e){up(Bx,this)&&(up(Bx,this).data=e)}get guessedAltText(){var e;return null===(e=up(Bx,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=up(Bx,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=up(Bx,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!up(Bx,this)&&!up(Bx,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=up(Bx,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=up(Wx,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),cp(lb,this,_b).call(this);const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*s/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/s).toFixed(2),"%"));const[r,i]=this.getInitialTranslation();return this.translate(r,i),Sg(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(up(ib,this)||hp(ib,this,new Rx({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:cp(lb,this,xb).bind(this),onPinching:cp(lb,this,bb).bind(this),onPinchEnd:cp(lb,this,yb).bind(this),signal:this._uiManager._signal}))),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=Af.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(hp(Qx,this,!0),this._isDraggable?cp(lb,this,jb).call(this,e):cp(lb,this,wb).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){up(tb,this)&&clearTimeout(up(tb,this)),hp(tb,this,setTimeout(()=>{var e;hp(tb,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const s=this.parentScale,[r,i]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/s,c=t/s,d=this.x*r,u=this.y*i,h=this.width*r,m=this.height*i;switch(n){case 0:return[d+l+a,i-u-c-m+o,d+l+h+a,i-u-c+o];case 90:return[d+c+a,i-u+l+o,d+c+m+a,i-u+l+h+o];case 180:return[d-l-h+a,i-u+c+o,d-l+a,i-u+c+m+o];case 270:return[d-c-m+a,i-u-l-h+o,d-c+a,i-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,i]=e,a=r-n,o=i-s;switch(this.rotation){case 0:return[n,t-i,a,o];case 90:return[n,t-s,o,a];case 180:return[r,t-s,a,o];case 270:return[r,t-i,o,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),hp(Zx,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),hp(Zx,this,!1),!0)}isInEditMode(){return up(Zx,this)}shouldGetKeyboardEvents(){return up(eb,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:i}=window;return t<i&&s>0&&e<r&&n>0}rebuild(){cp(lb,this,_b).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){pf("An editor must be serializable")}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,hp(Fx,s,e.accessibilityData),s._isCopy=e.isCopy||!1;const[r,i]=s.pageDimensions,[a,o,l,c]=s.getRectInCurrentCoords(e.rect,i);return s.x=a/r,s.y=o/i,s.width=l/r,s.height=c/i,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=up(Xx,this))||void 0===e||e.abort(),hp(Xx,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),up(tb,this)&&(clearTimeout(up(tb,this)),hp(tb,this,null)),cp(lb,this,Ab).call(this),this.removeEditToolbar(),up(rb,this)){for(const e of up(rb,this).values())clearTimeout(e);hp(rb,this,null)}this.parent=null,null===(t=up(ib,this))||void 0===t||t.destroy(),hp(ib,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(cp(lb,this,mb).call(this),up(Gx,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),hp(Kx,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=up(Gx,this).children;if(!up(zx,this)){hp(zx,this,Array.from(t));const e=cp(lb,this,Nb).bind(this),n=cp(lb,this,kb).bind(this),s=this._uiManager._signal;for(const t of up(zx,this)){const r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:s}),t.addEventListener("blur",n,{signal:s}),t.addEventListener("focus",cp(lb,this,Cb).bind(this,r),{signal:s}),t.setAttribute("data-l10n-id",cb._l10nResizer[r])}}const n=up(zx,this)[0];let s=0;for(const i of t){if(i===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(up(zx,this).length/4);if(r!==s){if(r<s)for(let t=0;t<s-r;t++)up(Gx,this).append(up(Gx,this).firstChild);else if(r>s)for(let t=0;t<r-s;t++)up(Gx,this).firstChild.before(up(Gx,this).lastChild);let e=0;for(const n of t){const t=up(zx,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",cb._l10nResizer[t])}}cp(lb,this,Sb).call(this,0),hp(eb,this,!0),up(Gx,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){up(eb,this)&&cp(lb,this,vb).call(this,up(Yx,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){cp(lb,this,Ab).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=up(Bx,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}unselect(){var e,t,n,s,r;this.isSelected&&(this.isSelected=!1,null===(e=up(Gx,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(s=this._editToolbar)||void 0===s||s.hide(),null===(r=up(Bx,this))||void 0===r||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return up(Jx,this)}set isEditing(e){hp(Jx,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){hp(Vx,this,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){up(rb,this)||hp(rb,this,new Map);const{action:t}=e;let n=up(rb,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),up(rb,this).delete(t),0===up(rb,this).size&&hp(rb,this,null)},cb._telemetryTimeout),void up(rb,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),hp(Wx,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),hp(Wx,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function db(e,t,n){let[s,r]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/s,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function ub(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function hb(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function mb(){if(up(Gx,this))return;hp(Gx,this,document.createElement("div")),up(Gx,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");up(Gx,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",cp(lb,this,pb).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Xf,{signal:t}),e.tabIndex=-1}this.div.prepend(up(Gx,this))}function pb(e,t){var n;t.preventDefault();const{isMac:s}=Af.platform;if(0!==t.button||t.ctrlKey&&s)return;null===(n=up(Bx,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,hp(qx,this,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",cp(lb,this,vb).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Yf,{passive:!1,signal:a}),window.addEventListener("contextmenu",Xf,{signal:a}),hp(Kx,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;i.abort(),this.parent.togglePointerEvents(!0),null===(e=up(Bx,this))||void 0===e||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,cp(lb,this,gb).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function fb(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t;const[r,i]=this.parentDimensions;this.setDims(r*n,i*s),this.fixAndSetPosition(),this._onResized()}function gb(){if(!up(Kx,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=up(Kx,this);hp(Kx,this,null);const r=this.x,i=this.y,a=this.width,o=this.height;r===e&&i===t&&a===n&&o===s||this.addCommands({cmd:cp(lb,this,fb).bind(this,r,i,a,o),undo:cp(lb,this,fb).bind(this,e,t,n,s),mustExec:!0})}function vb(e,t){const[n,s]=this.parentDimensions,r=this.x,i=this.y,a=this.width,o=this.height,l=xp.MIN_SIZE/n,c=xp.MIN_SIZE/s,d=cp(lb,this,hb).call(this,this.rotation),u=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],h=cp(lb,this,hb).call(this,360-this.rotation);let m,p,f=!1,g=!1;switch(e){case"topLeft":f=!0,m=(e,t)=>[0,0],p=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],p=(e,t)=>[e/2,t];break;case"topRight":f=!0,m=(e,t)=>[e,0],p=(e,t)=>[0,t];break;case"middleRight":g=!0,m=(e,t)=>[e,t/2],p=(e,t)=>[0,t/2];break;case"bottomRight":f=!0,m=(e,t)=>[e,t],p=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],p=(e,t)=>[e/2,0];break;case"bottomLeft":f=!0,m=(e,t)=>[0,t],p=(e,t)=>[e,0];break;case"middleLeft":g=!0,m=(e,t)=>[0,t/2],p=(e,t)=>[e,t/2]}const v=m(a,o),x=p(a,o);let b=u(...x);const y=xp._round(r+b[0]),w=xp._round(i+b[1]);let j,_,N=1,k=1;if(t.fromKeyboard)({deltaX:j,deltaY:_}=t);else{const{screenX:e,screenY:n}=t,[s,r]=up(qx,this);[j,_]=this.screenToPageTranslation(e-s,n-r),up(qx,this)[0]=e,up(qx,this)[1]=n}var C,S;if([j,_]=(C=j/n,S=_/s,[h[0]*C+h[2]*S,h[1]*C+h[3]*S]),f){const e=Math.hypot(a,o);N=k=Math.max(Math.min(Math.hypot(x[0]-v[0]-j,x[1]-v[1]-_)/e,1/a,1/o),l/a,c/o)}else g?N=If(Math.abs(x[0]-v[0]-j),l,1)/a:k=If(Math.abs(x[1]-v[1]-_),c,1)/o;const A=xp._round(a*N),E=xp._round(o*k);b=u(...p(A,E));const T=y-b[0],P=w-b[1];up($x,this)||hp($x,this,[this.x,this.y,this.width,this.height]),this.width=A,this.height=E,this.x=T,this.y=P,this.setDims(n*A,s*E),this.fixAndSetPosition(),this._onResizing()}function xb(){var e;hp(Kx,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=up(Bx,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function bb(e,t,n){let s=n/t*.7+1-.7;if(1===s)return;const r=cp(lb,this,hb).call(this,this.rotation),i=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[a,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,u=this.height,h=xp.MIN_SIZE/a,m=xp.MIN_SIZE/o;s=Math.max(Math.min(s,1/d,1/u),h/d,m/u);const p=xp._round(d*s),f=xp._round(u*s);if(p===d&&f===u)return;up($x,this)||hp($x,this,[l,c,d,u]);const g=i(d/2,u/2),v=xp._round(l+g[0]),x=xp._round(c+g[1]),b=i(p/2,f/2);this.x=v-b[0],this.y=x-b[1],this.width=p,this.height=f,this.setDims(a*p,o*f),this.fixAndSetPosition(),this._onResizing()}function yb(){var e;null===(e=up(Bx,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),cp(lb,this,gb).call(this)}function wb(e){const{isMac:t}=Af.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function jb(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),i={capture:!0,passive:!1,signal:r},a=e=>{s.abort(),hp(Hx,this,null),hp(Qx,this,!1),this._uiManager.endDragSession()||cp(lb,this,wb).call(this,e),n&&this._onStopDragging()};t&&(hp(nb,this,e.clientX),hp(sb,this,e.clientY),hp(Hx,this,e.pointerId),hp(Ux,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._onStartDragging());const{clientX:t,clientY:s,pointerId:r}=e;if(r!==up(Hx,this))return void Yf(e);const[i,a]=this.screenToPageTranslation(t-up(nb,this),s-up(sb,this));hp(nb,this,t),hp(sb,this,s),this._uiManager.dragSelectedEditors(i,a)},i),window.addEventListener("touchmove",Yf,i),window.addEventListener("pointerdown",e=>{e.pointerType===up(Ux,this)&&(up(ib,this)||e.isPrimary)&&a(e),Yf(e)},i));const o=e=>{up(Hx,this)&&up(Hx,this)!==e.pointerId?Yf(e):a(e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}function _b(){if(up(Xx,this)||!this.div)return;hp(Xx,this,new AbortController);const e=this._uiManager.combinedSignal(up(Xx,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function Nb(e){xp._resizerKeyboardManager.exec(this,e)}function kb(e){var t;up(eb,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==up(Gx,this)&&cp(lb,this,Ab).call(this)}function Cb(e){hp(Yx,this,up(eb,this)?e:"")}function Sb(e){if(up(zx,this))for(const t of up(zx,this))t.tabIndex=e}function Ab(){hp(eb,this,!1),cp(lb,this,Sb).call(this,-1),cp(lb,this,gb).call(this)}xp=cb,Ee(cb,"_l10n",null),Ee(cb,"_l10nResizer",null),Ee(cb,"_borderLineWidth",-1),Ee(cb,"_colorManager",new Vg),Ee(cb,"_zIndex",1),Ee(cb,"_telemetryTimeout",1e3);class Eb extends cb{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Tb=3285377520,Pb=4294901760,Mb=65535;class Lb{constructor(e){this.h1=e?4294967295&e:Tb,this.h2=e?4294967295&e:Tb}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let s=0,r=e.length;s<r;s++){const r=e.charCodeAt(s);r<=255?t[n++]=r:(t[n++]=r>>>8,t[n++]=255&r)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const s=n>>2,r=n-4*s,i=new Uint32Array(t.buffer,0,s);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,m=13715;for(let p=0;p<s;p++)1&p?(a=i[p],a=a*d&Pb|a*h&Mb,a=a<<15|a>>>17,a=a*u&Pb|a*m&Mb,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=i[p],o=o*d&Pb|o*h&Mb,o=o<<15|o>>>17,o=o*u&Pb|o*m&Mb,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=t[4*s+2]<<16;case 2:a^=t[4*s+1]<<8;case 1:a^=t[4*s],a=a*d&Pb|a*h&Mb,a=a<<15|a>>>17,a=a*u&Pb|a*m&Mb,1&s?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Pb|36045*e&Mb,t=4283543511*t&Pb|(2950163797*(t<<16|e>>>16)&Pb)>>>16,e^=t>>>1,e=444984403*e&Pb|60499*e&Mb,t=3301882366*t&Pb|(3120437893*(t<<16|e>>>16)&Pb)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Rb=Object.freeze({map:null,hash:"",transfer:void 0});var Ob=new WeakMap,Db=new WeakMap,Ib=new WeakMap,Fb=new WeakSet;class zb{constructor(){op(this,Fb),lp(this,Ob,!1),lp(this,Db,null),lp(this,Ib,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=up(Ib,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return up(Ib,this).get(e)}remove(e){if(up(Ib,this).delete(e),0===up(Ib,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of up(Ib,this).values())if(e instanceof cb)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=up(Ib,this).get(e);let s=!1;if(void 0!==n)for(const[r,i]of Object.entries(t))n[r]!==i&&(s=!0,n[r]=i);else s=!0,up(Ib,this).set(e,t);s&&cp(Fb,this,Bb).call(this),t instanceof cb&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return up(Ib,this).has(e)}get size(){return up(Ib,this).size}resetModified(){up(Ob,this)&&(hp(Ob,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Hb(this)}get serializable(){if(0===up(Ib,this).size)return Rb;const e=new Map,t=new Lb,n=[],s=Object.create(null);let r=!1;for(const[i,a]of up(Ib,this)){const n=a instanceof cb?a.serialize(!1,s):a;n&&(e.set(i,n),t.update("".concat(i,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const i of e.values())i.bitmap&&n.push(i.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Rb}get editorStats(){let e=null;const t=new Map;for(const r of up(Ib,this).values()){var n;if(!(r instanceof cb))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=(n=e)[a]||(n[a]=new Map);for(const[e,t]of Object.entries(i)){var s;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const r=null!==(s=n.get(t))&&void 0!==s?s:0;n.set(t,r+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){hp(Db,this,null)}get modifiedIds(){if(up(Db,this))return up(Db,this);const e=[];for(const t of up(Ib,this).values())t instanceof cb&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return hp(Db,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return up(Ib,this).entries()}}function Bb(){up(Ob,this)||(hp(Ob,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Wb=new WeakMap;class Hb extends zb{constructor(e){super(),lp(this,Wb,void 0);const{map:t,hash:n,transfer:s}=e.serializable,r=structuredClone(t,s?{transfer:s}:null);hp(Wb,this,{map:r,hash:n,transfer:s})}get print(){pf("Should not call PrintAnnotationStorage.print")}get serializable(){return up(Wb,this)}get modifiedIds(){return xf(this,"modifiedIds",{ids:new Set,hash:""})}}var Ub=new WeakMap;class Vb{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;lp(this,Ub,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),up(Ub,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:s}=e;if(t&&!up(Ub,this).has(t.loadedName)){if(ff(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:i}=t,a=new FontFace(e,n,i);this.addNativeFontFace(a);try{await a.load(),up(Ub,this).add(e),null===s||void 0===s||s(t)}catch(r){mf("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}pf("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw mf("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return xf(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return xf(this,"isSyncFontLoadingSupported",Ep||Af.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(ff(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return xf(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function s(e,t,n,s){return e.substring(0,t)+s+e.substring(t+n)}let r,i;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=s(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(r=0,i=c.length-3;r<i;r+=4)h=h-u+n(c,r)|0;var m;r<c.length&&(h=h-u+n(c+"XXX",r)|0),d=s(d,16,4,(m=h,String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,255&m)));const p="url(data:font/opentype;base64,".concat(btoa(d),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,g.append(e)}this._document.body.append(g),function e(t,n){if(++l>30)return mf("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{g.remove(),t.complete()})}}class Gb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(Ff(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(i){mf('getPathGenerator - ignoring character: "'.concat(i,'".'))}const r=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}}function qb(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Kb=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Xb=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,r,...i]=n;if(!e(s)&&!Number.isInteger(s))return!1;if(!t(r))return!1;const a=i.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of i)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Kb,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var Yb=new WeakMap,Qb=new WeakMap;class $b{constructor(){lp(this,Yb,new Map),lp(this,Qb,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};up(Qb,this).then(()=>{for(const[e]of up(Yb,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void mf("LoopbackPort - cannot use an `aborted` signal.");const i=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",i),r.addEventListener("abort",i)}up(Yb,this).set(t,s)}removeEventListener(e,t){const n=up(Yb,this).get(t);null===n||void 0===n||n(),up(Yb,this).delete(t)}terminate(){for(const[,e]of up(Yb,this))null===e||void 0===e||e();up(Yb,this).clear()}}const Jb=1,Zb=2,ey=1,ty=2,ny=3,sy=4,ry=5,iy=6,ay=7,oy=8;function ly(){}function cy(e){if(e instanceof kf||e instanceof jf||e instanceof yf||e instanceof _f||e instanceof wf)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||pf('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new kf(e.message);case"InvalidPDFException":return new jf(e.message);case"PasswordException":return new yf(e.message,e.code);case"ResponseException":return new _f(e.message,e.status,e.missing);case"UnknownErrorException":return new wf(e.message,e.details)}return new wf(e.message,e.toString())}var dy=new WeakMap,uy=new WeakSet;class hy{constructor(e,t,n){op(this,uy),lp(this,dy,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",cp(uy,this,my).bind(this),{signal:up(dy,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(i){r.reject(i)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,i=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:i,targetName:a,action:e,streamId:r,data:t,desiredSize:n.desiredSize},s),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,o.postMessage({sourceName:i,targetName:a,stream:iy,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{ff(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:i,targetName:a,stream:ey,streamId:r,reason:cy(e)}),t.promise}},n)}destroy(){var e;null===(e=up(dy,this))||void 0===e||e.abort(),hp(dy,this,null)}}function my(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void cp(uy,this,fy).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Jb)n.resolve(t.data);else{if(t.callback!==Zb)throw new Error("Unexpected callback case");n.reject(cy(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,s=t.sourceName,r=this.comObj;return void Promise.try(n,t.data).then(function(n){r.postMessage({sourceName:e,targetName:s,callback:Jb,callbackId:t.callbackId,data:n})},function(n){r.postMessage({sourceName:e,targetName:s,callback:Zb,callbackId:t.callbackId,reason:cy(n)})})}t.streamId?cp(uy,this,py).call(this,t):n(t.data)}function py(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,i=this,a=this.actionHandler[e.action],o={enqueue(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=i,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:sy,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ny,streamId:t}),delete i.streamSinks[t])},error(e){ff(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ry,streamId:t,reason:cy(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){r.postMessage({sourceName:n,targetName:s,stream:oy,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:s,stream:oy,streamId:t,reason:cy(e)})})}function fy(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,i=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case oy:e.success?i.startCall.resolve():i.startCall.reject(cy(e.reason));break;case ay:e.success?i.pullCall.resolve():i.pullCall.reject(cy(e.reason));break;case iy:if(!a){r.postMessage({sourceName:n,targetName:s,stream:ay,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||ly).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ay,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:s,stream:ay,streamId:t,reason:cy(e)})});break;case sy:if(ff(i,"enqueue should have stream controller"),i.isClosed)break;i.controller.enqueue(e.chunk);break;case ny:if(ff(i,"close should have stream controller"),i.isClosed)break;i.isClosed=!0,i.controller.close(),cp(uy,this,gy).call(this,i,t);break;case ry:ff(i,"error should have stream controller"),i.controller.error(cy(e.reason)),cp(uy,this,gy).call(this,i,t);break;case ty:e.success?i.cancelCall.resolve():i.cancelCall.reject(cy(e.reason)),cp(uy,this,gy).call(this,i,t);break;case ey:if(!a)break;const o=cy(e.reason);Promise.try(a.onCancel||ly,o).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ty,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:s,stream:ty,streamId:t,reason:cy(e)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function gy(e,t){var n,s,r;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(s=e.pullCall)||void 0===s?void 0:s.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[t]}var vy=new WeakMap;class xy{constructor(e){let{enableHWA:t=!1}=e;lp(this,vy,!1),hp(vy,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!up(vy,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){pf("Abstract method `_createCanvas` called.")}}class by extends xy{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class yy{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){pf("Abstract method `_fetch` called.")}}class wy extends yy{async _fetch(e){const t=await Wf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Sf(t)}}class jy{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(){}}var _y=new WeakMap,Ny=new WeakMap,ky=new WeakMap,Cy=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,Ey=new WeakMap,Ty=new WeakSet;class Py extends jy{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),op(this,Ty),lp(this,_y,void 0),lp(this,Ny,void 0),lp(this,ky,void 0),lp(this,Cy,void 0),lp(this,Sy,void 0),lp(this,Ay,void 0),lp(this,Ey,0),hp(Cy,this,t),hp(Sy,this,n)}addFilter(e){var t,n;if(!e)return"none";let s=dp(Ty,this,My).get(e);if(s)return s;const[r,i,a]=cp(Ty,this,Oy).call(this,e),o=1===e.length?r:"".concat(r).concat(i).concat(a);if(s=dp(Ty,this,My).get(o),s)return dp(Ty,this,My).set(e,s),s;const l="g_".concat(up(Cy,this),"_transfer_map_").concat((hp(Ey,this,(t=up(Ey,this),n=t++,t)),n)),c=cp(Ty,this,Dy).call(this,l);dp(Ty,this,My).set(e,c),dp(Ty,this,My).set(o,c);const d=cp(Ty,this,zy).call(this,l);return cp(Ty,this,Wy).call(this,r,i,a,d),c}addHCMFilter(e,t){var n;const s="".concat(e,"-").concat(t),r="base";let i=dp(Ty,this,Ly).get(r);if((null===(n=i)||void 0===n?void 0:n.key)===s)return i.url;var a;i?(null===(a=i.filter)||void 0===a||a.remove(),i.key=s,i.url="none",i.filter=null):(i={key:s,url:"none",filter:null},dp(Ty,this,Ly).set(r,i));if(!e||!t)return i.url;const o=cp(Ty,this,Uy).call(this,e);e=Tf.makeHexColor(...o);const l=cp(Ty,this,Uy).call(this,t);if(t=Tf.makeHexColor(...l),dp(Ty,this,Ry).style.color="","#000000"===e&&"#ffffff"===t||e===t)return i.url;const c=new Array(256);for(let p=0;p<=255;p++){const e=p/255;c[p]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(up(Cy,this),"_hcm_filter"),h=i.filter=cp(Ty,this,zy).call(this,u);cp(Ty,this,Wy).call(this,d,d,d,h),cp(Ty,this,Fy).call(this,h);const m=(e,t)=>{const n=o[e]/255,s=l[e]/255,r=new Array(t+1);for(let i=0;i<=t;i++)r[i]=n+i/t*(s-n);return r.join(",")};return cp(Ty,this,Wy).call(this,m(0,5),m(1,5),m(2,5),h),i.url=cp(Ty,this,Dy).call(this,u),i.url}addAlphaFilter(e){var t,n;let s=dp(Ty,this,My).get(e);if(s)return s;const[r]=cp(Ty,this,Oy).call(this,[e]),i="alpha_".concat(r);if(s=dp(Ty,this,My).get(i),s)return dp(Ty,this,My).set(e,s),s;const a="g_".concat(up(Cy,this),"_alpha_map_").concat((hp(Ey,this,(t=up(Ey,this),n=t++,t)),n)),o=cp(Ty,this,Dy).call(this,a);dp(Ty,this,My).set(e,o),dp(Ty,this,My).set(i,o);const l=cp(Ty,this,zy).call(this,a);return cp(Ty,this,Hy).call(this,r,l),o}addLuminosityFilter(e){var t,n;let s,r,i=dp(Ty,this,My).get(e||"luminosity");if(i)return i;if(e?([s]=cp(Ty,this,Oy).call(this,[e]),r="luminosity_".concat(s)):r="luminosity",i=dp(Ty,this,My).get(r),i)return dp(Ty,this,My).set(e,i),i;const a="g_".concat(up(Cy,this),"_luminosity_map_").concat((hp(Ey,this,(t=up(Ey,this),n=t++,t)),n)),o=cp(Ty,this,Dy).call(this,a);dp(Ty,this,My).set(e,o),dp(Ty,this,My).set(r,o);const l=cp(Ty,this,zy).call(this,a);return cp(Ty,this,Iy).call(this,l),e&&cp(Ty,this,Hy).call(this,s,l),o}addHighlightHCMFilter(e,t,n,s,r){var i;const a="".concat(t,"-").concat(n,"-").concat(s,"-").concat(r);let o=dp(Ty,this,Ly).get(e);if((null===(i=o)||void 0===i?void 0:i.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},dp(Ty,this,Ly).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(cp(Ty,this,Uy).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,p]=[s,r].map(cp(Ty,this,Uy).bind(this));h<u&&([u,h,m,p]=[h,u,p,m]),dp(Ty,this,Ry).style.color="";const f=(e,t,n)=>{const s=new Array(256),r=(h-u)/n,i=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*r),t=i+l*a;for(let n=o;n<=e;n++)s[n]=t;o=e+1}for(let l=o;l<256;l++)s[l]=s[o-1];return s.join(",")},g="g_".concat(up(Cy,this),"_hcm_").concat(e,"_filter"),v=o.filter=cp(Ty,this,zy).call(this,g);return cp(Ty,this,Fy).call(this,v),cp(Ty,this,Wy).call(this,f(m[0],p[0],5),f(m[1],p[1],5),f(m[2],p[2],5),v),o.url=cp(Ty,this,Dy).call(this,g),o.url}destroy(){var e,t,n,s;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=up(Ay,this))&&void 0!==e&&e.size||(null===(t=up(ky,this))||void 0===t||t.parentNode.parentNode.remove(),hp(ky,this,null),null===(n=up(Ny,this))||void 0===n||n.clear(),hp(Ny,this,null),null===(s=up(Ay,this))||void 0===s||s.clear(),hp(Ay,this,null),hp(Ey,this,0))}}function My(e){return up(Ny,e)||hp(Ny,e,new Map)}function Ly(e){return up(Ay,e)||hp(Ay,e,new Map)}function Ry(e){if(!up(ky,e)){const t=up(Sy,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=up(Sy,e).createElementNS(zf,"svg");s.setAttribute("width",0),s.setAttribute("height",0),hp(ky,e,up(Sy,e).createElementNS(zf,"defs")),t.append(s),s.append(up(ky,e)),up(Sy,e).body.append(t)}return up(ky,e)}function Oy(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const s=n.join(",");return[s,s,s]}const[t,n,s]=e,r=new Array(256),i=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=t[o]/255,i[o]=n[o]/255,a[o]=s[o]/255;return[r.join(","),i.join(","),a.join(",")]}function Dy(e){if(void 0===up(_y,this)){hp(_y,this,"");const e=up(Sy,this).URL;e!==up(Sy,this).baseURI&&(Vf(e)?mf('#createUrl: ignore "data:"-URL for performance reasons.'):hp(_y,this,vf(e,"")))}return"url(".concat(up(_y,this),"#").concat(e,")")}function Iy(e){const t=up(Sy,this).createElementNS(zf,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function Fy(e){const t=up(Sy,this).createElementNS(zf,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function zy(e){const t=up(Sy,this).createElementNS(zf,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),dp(Ty,this,Ry).append(t),t}function By(e,t,n){const s=up(Sy,this).createElementNS(zf,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)}function Wy(e,t,n,s){const r=up(Sy,this).createElementNS(zf,"feComponentTransfer");s.append(r),cp(Ty,this,By).call(this,r,"feFuncR",e),cp(Ty,this,By).call(this,r,"feFuncG",t),cp(Ty,this,By).call(this,r,"feFuncB",n)}function Hy(e,t){const n=up(Sy,this).createElementNS(zf,"feComponentTransfer");t.append(n),cp(Ty,this,By).call(this,n,"feFuncA",e)}function Uy(e){return dp(Ty,this,Ry).style.color=e,Jf(getComputedStyle(dp(Ty,this,Ry)).getPropertyValue("color"))}class Vy{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){pf("Abstract method `_fetch` called.")}}class Gy extends Vy{async _fetch(e){const t=await Wf(e,"arraybuffer");return new Uint8Array(t)}}class qy{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){pf("Abstract method `_fetch` called.")}}class Ky extends qy{async _fetch(e){const t=await Wf(e,"arraybuffer");return new Uint8Array(t)}}async function Xy(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}Ep&&mf("Please use the `legacy` build in Node.js environments.");class Yy extends jy{}class Qy extends xy{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///workspaces/internaloox-frontend/node_modules/react-pdf/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class $y extends yy{async _fetch(e){return Xy(e)}}class Jy extends Vy{async _fetch(e){return Xy(e)}}class Zy extends qy{async _fetch(e){return Xy(e)}}const ew="Fill",tw="Stroke",nw="Shading";function sw(e,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,s),e.clip(r)}class rw{isModifyingCurrentTransform(){return!1}getPattern(){pf("Abstract method `getPattern` called.")}}class iw extends rw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let r;if(s===tw||s===ew){const i=t.current.getClippedPathBoundingBox(s,Zf(e))||[0,0,0,0],a=Math.ceil(i[2]-i[0])||1,o=Math.ceil(i[3]-i[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-i[0],-i[1]),n=Tf.transform(n,[1,0,0,1,i[0],i[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),sw(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else sw(e,this._bbox),r=this._createGradient(e);return r}}function aw(e,t,n,s,r,i,a,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[s+1]&&(h=n,n=s,s=h,h=i,i=a,a=h),l[s+1]>l[r+1]&&(h=s,s=r,r=h,h=a,a=o,o=h),l[n+1]>l[s+1]&&(h=n,n=s,s=h,h=i,i=a,a=h);const m=(l[n]+t.offsetX)*t.scaleX,p=(l[n+1]+t.offsetY)*t.scaleY,f=(l[s]+t.offsetX)*t.scaleX,g=(l[s+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,x=(l[r+1]+t.offsetY)*t.scaleY;if(p>=x)return;const b=c[i],y=c[i+1],w=c[i+2],j=c[a],_=c[a+1],N=c[a+2],k=c[o],C=c[o+1],S=c[o+2],A=Math.round(p),E=Math.round(x);let T,P,M,L,R,O,D,I;for(let F=A;F<=E;F++){if(F<g){const e=F<p?0:(p-F)/(p-g);T=m-(m-f)*e,P=b-(b-j)*e,M=y-(y-_)*e,L=w-(w-N)*e}else{let e;e=F>x?1:g===x?0:(g-F)/(g-x),T=f-(f-v)*e,P=j-(j-k)*e,M=_-(_-C)*e,L=N-(N-S)*e}let e;e=F<p?0:F>x?1:(p-F)/(p-x),R=m-(m-v)*e,O=b-(b-k)*e,D=y-(y-C)*e,I=w-(w-S)*e;const t=Math.round(Math.min(T,R)),n=Math.round(Math.max(T,R));let s=u*F+4*t;for(let r=t;r<=n;r++)e=(T-r)/(T-R),e<0?e=0:e>1&&(e=1),d[s++]=P-(P-O)*e|0,d[s++]=M-(M-D)*e|0,d[s++]=L-(L-I)*e|0,d[s++]=255}}function ow(e,t,n){const s=t.coords,r=t.colors;let i,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(s.length/o)-1,c=o-1;for(i=0;i<l;i++){let t=i*o;for(let i=0;i<c;i++,t++)aw(e,n,s[t],s[t+1],s[t+o],r[t],r[t+1],r[t+o]),aw(e,n,s[t+o+1],s[t+1],s[t+o],r[t+o+1],r[t+1],r[t+o])}break;case"triangles":for(i=0,a=s.length;i<a;i+=3)aw(e,n,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class lw extends rw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const s=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),i=Math.ceil(this._bounds[2])-s,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(i*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=i/o,d=a/l,u={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-r,scaleX:1/c,scaleY:1/d},h=o+4,m=l+4,p=n.getCanvas("mesh",h,m),f=p.context,g=f.createImageData(o,l);if(t){const e=g.data;for(let n=0,s=e.length;n<s;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)ow(g,v,u);f.putImageData(g,2,2);return{canvas:p.canvas,offsetX:s-2*c,offsetY:r-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){sw(e,this._bbox);const r=new Float32Array(2);if(s===nw)Tf.singularValueDecompose2dScale(Zf(e),r);else if(this.matrix){Tf.singularValueDecompose2dScale(this.matrix,r);const[e,n]=r;Tf.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=e,r[1]*=n}else Tf.singularValueDecompose2dScale(t.baseTransform,r);const i=this._createMeshCanvas(r,s===nw?null:this._background,t.cachedCanvases);return s!==nw&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(i.offsetX,i.offsetY),e.scale(i.scaleX,i.scaleY),e.createPattern(i.canvas,"no-repeat")}}class cw extends rw{getPattern(){return"hotpink"}}const dw=1,uw=2;class hw{constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:s,tilingType:r,color:i,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),hf("TilingType: "+r);const c=t[0],d=t[1],u=t[2],h=t[3],m=u-c,p=h-d,f=new Float32Array(2);Tf.singularValueDecompose2dScale(this.matrix,f);const[g,v]=f;Tf.singularValueDecompose2dScale(this.baseTransform,f);const x=g*f[0],b=v*f[1];let y=m,w=p,j=!1,_=!1;const N=Math.ceil(o*x),k=Math.ceil(l*b);N>=Math.ceil(m*x)?y=o:j=!0,k>=Math.ceil(p*b)?w=l:_=!0;const C=this.getSizeAndScale(y,this.ctx.canvas.width,x),S=this.getSizeAndScale(w,this.ctx.canvas.height,b),A=e.cachedCanvases.getCanvas("pattern",C.size,S.size),E=A.context,T=a.createCanvasGraphics(E);if(T.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(T,s,i),E.translate(-C.scale*c,-S.scale*d),T.transform(C.scale,0,0,S.scale,0,0),E.save(),this.clipBbox(T,c,d,u,h),T.baseTransform=Zf(T.ctx),T.executeOperatorList(n),T.endDrawing(),E.restore(),j||_){const t=A.canvas;j&&(y=o),_&&(w=l);const n=this.getSizeAndScale(y,this.ctx.canvas.width,x),s=this.getSizeAndScale(w,this.ctx.canvas.height,b),r=n.size,i=s.size,a=e.cachedCanvases.getCanvas("pattern-workaround",r,i),u=a.context,h=j?Math.floor(m/o):0,f=_?Math.floor(p/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=f;n++)u.drawImage(t,r*e,i*n,r,i,0,0,r,i);return{canvas:a.canvas,scaleX:n.scale,scaleY:s.scale,offsetX:c,offsetY:d}}return{canvas:A.canvas,scaleX:C.scale,scaleY:S.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,n){const s=Math.max(hw.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const i=s-t,a=r-n;e.ctx.rect(t,n,i,a),Tf.axialAlignedBoundingBox([t,n,s,r],Zf(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case dw:const{fillStyle:e,strokeStyle:i}=this.ctx;s.fillStyle=r.fillColor=e,s.strokeStyle=r.strokeColor=i;break;case uw:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new Nf("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s){let r=n;s!==nw&&(r=Tf.transform(r,t.baseTransform),this.matrix&&(r=Tf.transform(r,this.matrix)));const i=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(i.offsetX,i.offsetY),a=a.scale(1/i.scaleX,1/i.scaleY);const o=e.createPattern(i.canvas,"repeat");return o.setTransform(a),o}}function mw(e){let{src:t,srcPos:n=0,dest:s,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=Af.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=r>>3,h=7&r,m=t.length;s=new Uint32Array(s.buffer);let p=0;for(let f=0;f<i;f++){for(const r=n+u;n<r;n++){const e=n<m?t[n]:255;s[p++]=128&e?d:c,s[p++]=64&e?d:c,s[p++]=32&e?d:c,s[p++]=16&e?d:c,s[p++]=8&e?d:c,s[p++]=4&e?d:c,s[p++]=2&e?d:c,s[p++]=1&e?d:c}if(0===h)continue;const e=n<m?t[n++]:255;for(let t=0;t<h;t++)s[p++]=e&1<<7-t?d:c}return{srcPos:n,destPos:p}}Ee(hw,"MAX_PATTERN_SIZE",3e3);const pw=16,fw=new DOMMatrix,gw=new Float32Array(2),vw=new Float32Array([1/0,1/0,-1/0,-1/0]);class xw{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return void 0!==this.cache[e]?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function bw(e,t,n,s,r,i,a,o,l,c){const[d,u,h,m,p,f]=Zf(e);if(0===u&&0===h){const g=a*d+p,v=Math.round(g),x=o*m+f,b=Math.round(x),y=(a+l)*d+p,w=Math.abs(Math.round(y)-v)||1,j=(o+c)*m+f,_=Math.abs(Math.round(j)-b)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(m),v,b),e.drawImage(t,n,s,r,i,0,0,w,_),e.setTransform(d,u,h,m,p,f),[w,_]}if(0===d&&0===m){const g=o*h+p,v=Math.round(g),x=a*u+f,b=Math.round(x),y=(o+c)*h+p,w=Math.abs(Math.round(y)-v)||1,j=(a+l)*u+f,_=Math.abs(Math.round(j)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,b),e.drawImage(t,n,s,r,i,0,0,_,w),e.setTransform(d,u,h,m,p,f),[_,w]}e.drawImage(t,n,s,r,i,a,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,m)*c]}class yw{constructor(e,t){Ee(this,"alphaIsShape",!1),Ee(this,"fontSize",0),Ee(this,"fontSizeScale",1),Ee(this,"textMatrix",null),Ee(this,"textMatrixScale",1),Ee(this,"fontMatrix",Tp),Ee(this,"leading",0),Ee(this,"x",0),Ee(this,"y",0),Ee(this,"lineX",0),Ee(this,"lineY",0),Ee(this,"charSpacing",0),Ee(this,"wordSpacing",0),Ee(this,"textHScale",1),Ee(this,"textRenderingMode",Up),Ee(this,"textRise",0),Ee(this,"fillColor","#000000"),Ee(this,"strokeColor","#000000"),Ee(this,"patternFill",!1),Ee(this,"patternStroke",!1),Ee(this,"fillAlpha",1),Ee(this,"strokeAlpha",1),Ee(this,"lineWidth",1),Ee(this,"activeSMask",null),Ee(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=vw.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ew,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===tw){t||pf("Stroke bounding box must include transform."),Tf.singularValueDecompose2dScale(t,gw);const e=gw[0]*this.lineWidth/2,s=gw[1]*this.lineWidth/2;n[0]-=e,n[1]-=s,n[2]+=e,n[3]+=s}return n}updateClipFromPath(){const e=Tf.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(vw,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ew,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Tf.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ww(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,s=t.width,r=n%pw,i=(n-r)/pw,a=0===r?i:i+1,o=e.createImageData(s,pw);let l,c=0;const d=t.data,u=o.data;let h,m,p,f;if(t.kind===Yp.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),f=n.length,g=s+7>>3,v=4294967295,x=Af.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(p=h<i?pw:r,l=0,m=0;m<p;m++){const e=t-c;let r=0;const i=e>g?s:8*e-7,a=-8&i;let o=0,u=0;for(;r<a;r+=8)u=d[c++],n[l++]=128&u?v:x,n[l++]=64&u?v:x,n[l++]=32&u?v:x,n[l++]=16&u?v:x,n[l++]=8&u?v:x,n[l++]=4&u?v:x,n[l++]=2&u?v:x,n[l++]=1&u?v:x;for(;r<i;r++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:x,o>>=1}for(;l<f;)n[l++]=0;e.putImageData(o,0,h*pw)}}else if(t.kind===Yp.RGBA_32BPP){for(m=0,f=s*pw*4,h=0;h<i;h++)u.set(d.subarray(c,c+f)),c+=f,e.putImageData(o,0,m),m+=pw;h<a&&(f=s*r*4,u.set(d.subarray(c,c+f)),e.putImageData(o,0,m))}else{if(t.kind!==Yp.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(p=pw,f=s*p,h=0;h<a;h++){for(h>=i&&(p=r,f=s*p),l=0,m=f;m--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*pw)}}}function jw(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,s=t.width,r=n%pw,i=(n-r)/pw,a=0===r?i:i+1,o=e.createImageData(s,pw);let l=0;const c=t.data,d=o.data;for(let u=0;u<a;u++){const t=u<i?pw:r;({srcPos:l}=mw({src:c,srcPos:l,dest:d,width:s,height:t,nonBlackColor:0})),e.putImageData(o,0,u*pw)}}function _w(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)void 0!==e[s]&&(t[s]=e[s]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Nw(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function kw(e,t){if(t)return!0;Tf.singularValueDecompose2dScale(e,gw);const n=Math.fround(ng.pixelRatio*Bf.PDF_TO_CSS_UNITS);return gw[0]<=n&&gw[1]<=n}const Cw=["butt","round","square"],Sw=["miter","round","bevel"],Aw={},Ew={};var Tw=new WeakSet;class Pw{constructor(e,t,n,s,r,i,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=i;op(this,Tw),this.ctx=e,this.current=new yw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new xw(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:s=!1,background:r=null}=e;const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,s){const e=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Zf(this.compositeCtx))}this.ctx.save(),Nw(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Zf(this.ctx)}executeOperatorList(e,t,n,s){const r=e.argsArray,i=e.fnArray;let a=t||0;const o=r.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let d=0;const u=this.commonObjs,h=this.objs;let m;for(;;){if(void 0!==s&&a===s.nextBreakPoint)return s.breakIt(a,n),a;if(m=i[a],m!==sf.dependency)this[m].apply(this,r[a]);else for(const e of r[a]){const t=e.startsWith("g_")?u:h;if(!t.has(e))return t.get(e,n),a}if(a++,a===o)return a;if(l&&++d>10){if(Date.now()>c)return n(),a;d=0}}}endDrawing(){cp(Tw,this,Mw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),cp(Tw,this,Lw).call(this)}_scaleImage(e,t){var n,s;const r=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,i=null!==(s=e.height)&&void 0!==s?s:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=r,u=i,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),a=this.cachedCanvases.getCanvas(h,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=a.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,r=this.current.fillColor,i=this.current.patternFill,a=Zf(t);let o,l,c,d;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(i?a:[a.slice(0,4),r]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!i){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(d=this.cachedCanvases.getCanvas("maskCanvas",n,s),jw(d.context,e));let u=Tf.transform(a,[1/n,0,0,-1/s,0,0]);u=Tf.transform(u,[1,0,0,1,0,-s]);const h=vw.slice();Tf.axialAlignedBoundingBox([0,0,n,s],u,h);const[m,p,f,g]=h,v=Math.round(f-m)||1,x=Math.round(g-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",v,x),y=b.context,w=m,j=p;y.translate(-w,-j),y.transform(...u),c||(c=this._scaleImage(d.canvas,eg(y)),c=c.img,o&&i&&o.set(l,c)),y.imageSmoothingEnabled=kw(Zf(y),e.interpolate),bw(y,c,0,0,c.width,c.height,0,0,n,s),y.globalCompositeOperation="source-in";const _=Tf.transform(eg(y),[1,0,0,1,-w,-j]);return y.fillStyle=i?r.getPattern(t,this,_,ew):r,y.fillRect(0,0,n,s),o&&!i&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(w),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Cw[e]}setLineJoin(e){this.ctx.lineJoin=Sw[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),_w(this.suspendedCtx,r),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,s,r,i,a){t.transform(e,n,s,r,i,a),this.__originalTransform(e,n,s,r,i,a)},e.setTransform=function(e,n,s,r,i,a){t.setTransform(e,n,s,r,i,a),this.__originalSetTransform(e,n,s,r,i,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,s,r,i,a){t.bezierCurveTo(e,n,s,r,i,a),this.__originalBezierCurveTo(e,n,s,r,i,a)},e.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_w(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],i=s[1],a=s[2]-r,o=s[3]-i;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,r,i,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,i,a,o,l,c,d){let u=e.canvas,h=o-c,m=l-d;if(i)if(h<0||m<0||h+n>u.width||m+s>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,s),t=e.context;t.drawImage(u,-h,-m),t.globalCompositeOperation="destination-atop",t.fillStyle=i,t.fillRect(0,0,n,s),t.globalCompositeOperation="source-over",u=e.canvas,h=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,m,n,s),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=i,e.fillRect(h,m,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(a));const p=new Path2D;p.rect(o,l,n,s),t.clip(p),t.globalCompositeOperation="destination-in",t.drawImage(u,h,m,n,s,o,l,n,s),t.restore()}save(){this.inSMaskMode&&_w(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&_w(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,s,r,i){this.ctx.transform(e,t,n,s,r,i),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[s]=t;if(!n)return s||(s=t[0]=new Path2D),void this[e](s);if(!(s instanceof Path2D)){const e=t[0]=new Path2D;for(let t=0,n=s.length;t<n;)switch(s[t++]){case rf:e.moveTo(s[t++],s[t++]);break;case af:e.lineTo(s[t++],s[t++]);break;case of:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case lf:e.closePath();break;default:mf("Unrecognized drawing path operator: ".concat(s[t-1]))}s=e}Tf.axialAlignedBoundingBox(n,Zf(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const t=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,eg(n),tw),t){const s=new Path2D;s.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=s}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(tw,Zf(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,s=this.current.fillColor;let r=!1;if(this.current.patternFill){const t=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=s.getPattern(n,this,eg(n),ew),t){const s=new Path2D;s.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=s}r=!0}const i=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==i&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),r&&n.restore(),t&&this.consumePath(e,i)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Aw}eoClip(){this.pendingClip=Ew}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return;const n=new Path2D,s=t.getTransform().invertSelf();for(const{transform:r,x:i,y:a,fontSize:o,path:l}of e)n.addPath(l,new DOMMatrix(r).preMultiplySelf(s).translate(i,a).scale(o,-o));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error("Can't find font for ".concat(e));if(r.fontMatrix=s.fontMatrix||Tp,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||mf("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const i=s.loadedName||"sans-serif",a=(null===(n=s.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(i,'", ').concat(s.fallbackName);let o="normal";s.black?o="900":s.bold&&(o="bold");const l=s.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(a)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s,r){const i=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=l&Kp,u=!!(l&Xp),h=a.patternFill&&!o.missingFile,m=a.patternStroke&&!o.missingFile;let p;if((o.disableFontFace||u||h||m)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||h||m){let e;if(i.save(),i.translate(t,n),i.scale(c,-c),d!==Up&&d!==Gp||(s?(e=i.getTransform(),i.setTransform(...s),i.fill(cp(Tw,this,Rw).call(this,p,e,s))):i.fill(p)),d===Vp||d===Gp)if(r){e||(e=i.getTransform()),i.setTransform(...r);const{a:t,b:n,c:s,d:a}=e,o=Tf.inverseTransform(r),l=Tf.transform([t,n,s,a,0,0],o);Tf.singularValueDecompose2dScale(l,gw),i.lineWidth*=Math.max(gw[0],gw[1])/c,i.stroke(cp(Tw,this,Rw).call(this,p,e,r))}else i.lineWidth/=c,i.stroke(p);i.restore()}else d!==Up&&d!==Gp||i.fillText(e,t,n),d!==Vp&&d!==Gp||i.strokeText(e,t,n);if(u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Zf(i),x:t,y:n,fontSize:c,path:p})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return xf(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(0===s)return;const r=this.ctx,i=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,d=e.length,u=n.vertical,h=u?1:-1,m=n.defaultVMetrics,p=s*t.fontMatrix[0],f=t.textRenderingMode===Up&&!n.disableFontFace&&!t.patternFill;let g,v;if(r.save(),t.textMatrix&&r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),l>0?r.scale(c,-1):r.scale(c,1),t.patternFill){r.save();const e=t.fillColor.getPattern(r,this,eg(r),ew);g=Zf(r),r.restore(),r.fillStyle=e}if(t.patternStroke){r.save();const e=t.strokeColor.getPattern(r,this,eg(r),tw);v=Zf(r),r.restore(),r.strokeStyle=e}let x=t.lineWidth;const b=t.textMatrixScale;if(0===b||0===x){const e=t.textRenderingMode&Kp;e!==Vp&&e!==Gp||(x=this.getSinglePixelWidth())}else x/=b;if(1!==i&&(r.scale(i,i),x/=i),r.lineWidth=x,n.isInvalidPDFjsFont){const n=[];let s=0;for(const t of e)n.push(t.unicode),s+=t.width;return r.fillText(n.join(""),0,0),t.x+=s*p*c,r.restore(),void this.compose()}let y,w=0;for(y=0;y<d;++y){const t=e[y];if("number"===typeof t){w+=h*t*s/1e3;continue}let c=!1;const d=(t.isSpace?o:0)+a,x=t.fontChar,b=t.accent;let j,_,N=t.width;if(u){const e=t.vmetric||m,n=-(t.vmetric?e[1]:.5*N)*p,s=e[2]*p;N=e?-e[0]:N,j=n/i,_=(w+s)/i}else j=w/i,_=0;if(n.remeasure&&N>0){const e=1e3*r.measureText(x).width/s*i;if(N<e&&this.isFontSubpixelAAEnabled){const t=N/e;c=!0,r.save(),r.scale(t,1),j/=t}else N!==e&&(j+=(N-e)/2e3*s/i)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(f&&!b)r.fillText(x,j,_);else if(this.paintChar(x,j,_,g,v),b){const e=j+s*b.offset.x/i,t=_-s*b.offset.y/i;this.paintChar(b.fontChar,e,t,g,v)}w+=u?N*p-d*l:N*p+d*l,c&&r.restore()}u?t.y-=w:t.x+=w*c,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,r=n.fontSize,i=n.fontDirection,a=s.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*i,d=n.fontMatrix||Tp,u=e.length;let h,m,p,f;if(!(n.textRenderingMode===qp)&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(c,i),h=0;h<u;++h){if(m=e[h],"number"===typeof m){f=a*m*r/1e3,this.ctx.translate(f,0),n.x+=f*c;continue}const i=(m.isSpace?l:0)+o,u=s.charProcOperatorList[m.operatorListId];u?this.contentVisible&&(this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(u),this.restore()):mf('Type3 character "'.concat(m.operatorListId,'" is not available.'));const g=[m.width,0];Tf.applyTransform(g,d),p=g[0]*r+i,t.translate(p,0),n.x+=p*c}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,r,i){const a=new Path2D;a.rect(n,s,r-n,i-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=this.baseTransform||Zf(this.ctx),s={createCanvasGraphics:e=>new Pw(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new hw(e,this.ctx,s,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new iw(e);case"Mesh":return new lw(e);case"Dummy":return new cw}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,eg(t),nw);const s=eg(t);if(s){const{width:e,height:n}=t.canvas,r=vw.slice();Tf.axialAlignedBoundingBox([0,0,e,n],s,r);const[i,a,o,l]=r;this.ctx.fillRect(i,a,o-i,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){pf("Should not call beginInlineImage")}beginImageData(){pf("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Zf(this.ctx),t)){Tf.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[e,n,s,r]=t,i=new Path2D;i.rect(e,n,s-e,r-n),this.ctx.clip(i),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||hf("TODO: Support non-isolated groups."),e.knockout&&mf("Knockout groups not supported.");const n=Zf(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=vw.slice();Tf.axialAlignedBoundingBox(e.bbox,Zf(t),s);const r=[0,0,t.canvas.width,t.canvas.height];s=Tf.intersect(s,r)||[0,0,0,0];const i=Math.floor(s[0]),a=Math.floor(s[1]),o=Math.max(Math.ceil(s[2])-i,1),l=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,l),u=d.context;u.translate(-i,-a),u.transform(...n);let h=new Path2D;const[m,p,f,g]=e.bbox;if(h.rect(m,p,f-m,g-p),e.matrix){const t=new Path2D;t.addPath(h,new DOMMatrix(e.matrix)),h=t}u.clip(h),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:i,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(i,a),t.save()),_w(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Zf(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=vw.slice();Tf.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e,n),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,s,r){if(cp(Tw,this,Mw).call(this),Nw(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const s=t[2]-t[0],i=t[3]-t[1];if(r&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=s,t[3]=i,Tf.singularValueDecompose2dScale(Zf(this.ctx),gw);const{viewportScale:r}=this,a=Math.ceil(s*this.outputScaleX*r),o=Math.ceil(i*this.outputScaleY*r);this.annotationCanvas=this.canvasFactory.create(a,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(gw[0],0,0,-gw[1],0,i*gw[1]),Nw(this.ctx)}else{Nw(this.ctx),this.endPath();const e=new Path2D;e.rect(t[0],t[1],s,i),this.ctx.clip(e)}}this.current=new yw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),cp(Tw,this,Lw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,s=this._createMaskCanvas(e),r=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=Zf(a);a.transform(t,n,s,r,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,d=i.length;c<d;c+=2){const e=Tf.transform(o,[t,n,s,r,i[c],i[c+1]]);a.drawImage(l.canvas,e[4],e[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:e,width:i,height:a,transform:o}=r,l=this.cachedCanvases.getCanvas("maskCanvas",i,a),c=l.context;c.save();jw(c,this.getObject(e,r)),c.globalCompositeOperation="source-in",c.fillStyle=s?n.getPattern(c,this,eg(t),ew):n,c.fillRect(0,0,i,a),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),bw(t,l.canvas,0,0,i,a,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):mf("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r)return void mf("Dependent image isn't ready yet");const i=r.width,a=r.height,o=[];for(let l=0,c=s.length;l<c;l+=2)o.push({transform:[t,0,0,n,s[l],s[l+1]],x:0,y:0,w:i,h:a});this.paintInlineImageXObjectGroup(r,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),i=r.context;return i.filter=this.current.transferMaps,i.drawImage(t,0,0),i.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;this.save();const{filter:r}=s;let i;if("none"!==r&&""!==r&&(s.filter="none"),s.scale(1/t,-1/n),e.bitmap)i=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)i=e;else{const s=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ww(s,e),i=this.applyTransferMapsToCanvas(s)}const a=this._scaleImage(i,eg(s));s.imageSmoothingEnabled=kw(Zf(s),e.interpolate),bw(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const t=e.width,n=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ww(r,e),s=this.applyTransferMapsToCanvas(r)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),bw(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===Ew?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Zf(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let i,a;if(0===n&&0===s){const n=Math.abs(t),s=Math.abs(r);if(n===s)if(0===e)i=a=1/n;else{const t=n*e;i=a=t<1?1/t:1}else if(0===e)i=1/n,a=1/s;else{const t=n*e,r=s*e;i=t<1?1/t:1,a=r<1?1/r:1}}else{const o=Math.abs(t*r-n*s),l=Math.hypot(t,n),c=Math.hypot(s,r);if(0===e)i=c/o,a=l/o;else{const t=e*o;i=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=i,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[r,i]=this.getScaleForStroking();if(r===i)return n.lineWidth=(s||1)*r,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(r,i),fw.a=1/r,fw.d=1/i;const o=new Path2D;if(o.addPath(e,fw),a.length>0){const e=Math.max(r,i);n.setLineDash(a.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=s||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function Mw(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Lw(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function Rw(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s}for(const n in sf)void 0!==Pw.prototype[n]&&(Pw.prototype[sf[n]]=Pw.prototype[n]);class Ow{static get workerPort(){return cp(Ow,this,Dw)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Dw._=cp(Ow,this,e)}static get workerSrc(){return cp(Ow,this,Iw)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");Iw._=cp(Ow,this,e)}}var Dw={_:null},Iw={_:""},Fw=new WeakMap,zw=new WeakMap;class Bw{constructor(e){let{parsedData:t,rawData:n}=e;lp(this,Fw,void 0),lp(this,zw,void 0),hp(Fw,this,t),hp(zw,this,n)}getRaw(){return up(zw,this)}get(e){var t;return null!==(t=up(Fw,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return up(Fw,this).entries()}}const Ww=Symbol("INTERNAL");var Hw=new WeakMap,Uw=new WeakMap,Vw=new WeakMap,Gw=new WeakMap;class qw{constructor(e,t){let{name:n,intent:s,usage:r,rbGroups:i}=t;lp(this,Hw,!1),lp(this,Uw,!1),lp(this,Vw,!1),lp(this,Gw,!0),hp(Hw,this,!!(e&Lp)),hp(Uw,this,!!(e&Rp)),this.name=n,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(up(Vw,this))return up(Gw,this);if(!up(Gw,this))return!1;const{print:e,view:t}=this.usage;return up(Hw,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!up(Uw,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Ww&&pf("Internal method `_setVisible` called."),hp(Vw,this,n),hp(Gw,this,t)}}var Kw=new WeakMap,Xw=new WeakMap,Yw=new WeakMap,Qw=new WeakMap,$w=new WeakSet;class Jw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lp;if(op(this,$w),lp(this,Kw,null),lp(this,Xw,new Map),lp(this,Yw,null),lp(this,Qw,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,hp(Qw,this,e.order);for(const n of e.groups)up(Xw,this).set(n.id,new qw(t,n));if("OFF"===e.baseState)for(const e of up(Xw,this).values())e._setVisible(Ww,!1);for(const t of e.on)up(Xw,this).get(t)._setVisible(Ww,!0);for(const t of e.off)up(Xw,this).get(t)._setVisible(Ww,!1);hp(Yw,this,this.getHash())}}isVisible(e){if(0===up(Xw,this).size)return!0;if(!e)return hf("Optional content group not defined."),!0;if("OCG"===e.type)return up(Xw,this).has(e.id)?up(Xw,this).get(e.id).visible:(mf("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return cp($w,this,Zw).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!up(Xw,this).has(t))return mf("Optional content group not found: ".concat(t)),!0;if(up(Xw,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!up(Xw,this).has(t))return mf("Optional content group not found: ".concat(t)),!0;if(!up(Xw,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!up(Xw,this).has(t))return mf("Optional content group not found: ".concat(t)),!0;if(!up(Xw,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!up(Xw,this).has(t))return mf("Optional content group not found: ".concat(t)),!0;if(up(Xw,this).get(t).visible)return!1}return!0}return mf("Unknown optional content policy ".concat(e.policy,".")),!0}return mf("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=up(Xw,this).get(e);if(s){if(n&&t&&s.rbGroups.length)for(const t of s.rbGroups)for(const n of t){var r;if(n!==e)null===(r=up(Xw,this).get(n))||void 0===r||r._setVisible(Ww,!1,!0)}s._setVisible(Ww,!!t,!0),hp(Kw,this,null)}else mf("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:s}=e;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":t=r;continue}const e=up(Xw,this).get(r);if(e)switch(t){case"ON":this.setVisibility(r,!0,s);break;case"OFF":this.setVisibility(r,!1,s);break;case"Toggle":this.setVisibility(r,!e.visible,s)}}hp(Kw,this,null)}get hasInitialVisibility(){return null===up(Yw,this)||this.getHash()===up(Yw,this)}getOrder(){return up(Xw,this).size?up(Qw,this)?up(Qw,this).slice():[...up(Xw,this).keys()]:null}getGroup(e){return up(Xw,this).get(e)||null}getHash(){if(null!==up(Kw,this))return up(Kw,this);const e=new Lb;for(const[t,n]of up(Xw,this))e.update("".concat(t,":").concat(n.visible));return hp(Kw,this,e.hexdigest())}[Symbol.iterator](){return up(Xw,this).entries()}}function Zw(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const t=e[s];let r;if(Array.isArray(t))r=cp($w,this,Zw).call(this,t);else{if(!up(Xw,this).has(t))return mf("Optional content group not found: ".concat(t)),!0;r=up(Xw,this).get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class ej{constructor(e,t){let{disableRange:n=!1,disableStream:s=!1}=t;ff(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===i||void 0===i?void 0:i.length)>0){const e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{ff(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(s),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,s,r;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(s=this._fullRequestReader)||void 0===s||null===(r=s.onProgress)||void 0===r||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ff(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new tj(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new nj(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class tj{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=Gf(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nj{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function sj(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const s in t){const e=t[s];void 0!==e&&n.append(s,e)}return n}function rj(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function ij(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:s,disableRange:r}=e;const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return i;if(i.suggestedLength=a,a<=2*s)return i;if(r||!n)return i;if("bytes"!==t.get("Accept-Ranges"))return i;return"identity"!==(t.get("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i}function aj(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=s("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),i(e)}if(n=function(e){const t=[];let n;const r=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,s,r]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[s,r]}const i=[];for(let s=0;s<t.length&&s in t;++s){let[e,n]=t[s];n=a(n),e&&(n=unescape(n),0===s&&(n=o(n))),i.push(n)}return i.join("")}(e),n)return i(l(n));if(n=s("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),i(e)}function s(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const s=new TextDecoder(e,{fatal:!0}),r=Sf(n);n=s.decode(r),t=!1}catch(s){}}return n}function i(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,s){if("q"===n||"Q"===n)return r(t,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{s=atob(s)}catch(i){}return r(t,s)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(Gf(e))return e}return null}function oj(e,t){return new _f("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function lj(e){return 200===e||206===e}function cj(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function dj(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(mf("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class uj{constructor(e){Ee(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=sj(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return ff(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new mj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class hj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,cj(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=rj(t.url),!lj(t.status))throw oj(t.status,s);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:r,suggestedLength:i}=ij({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=i||this._contentLength,this._filename=aj(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kf("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:dj(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class mj{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(n-1));const i=s.url;fetch(i,cj(r,this._withCredentials,this._abortController)).then(t=>{const n=rj(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!lj(t.status))throw oj(t.status,i);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:dj(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class pj{constructor(e){let{url:t,httpHeaders:n,withCredentials:s}=e;Ee(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=sj(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,i]of this.headers)t.setRequestHeader(r,i);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),s.expectedStatus=206):s.expectedStatus=200,t.responseType="arraybuffer",ff(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const s=this.pendingRequests[e];s&&(null===(n=s.onProgress)||void 0===n||n.call(s,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==s.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===s.status&&this.isHttp)return void n.onError(s.status);const r=s.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(s.status);const i=function(e){const t=e.response;return"string"!==typeof t?t:Sf(t).buffer}(s);if(206===r){const e=s.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:i}):(mf('Missing or invalid "Content-Range" header.'),n.onError(0))}else i?n.onDone({begin:0,chunk:i}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class fj{constructor(e){this._source=e,this._manager=new pj(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ff(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new vj(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class gj{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=rj(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:i}=ij({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=aj(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=oj(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vj{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=rj(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=oj(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const xj=/^[a-z][a-z0-9\-+.]+:/i;class bj{constructor(e){this.source=e,this.url=function(e){if(xj.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),ff("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return ff(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new yj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new wj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class yj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=oj(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new kf("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wj{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const jj=Symbol("INITIAL_DATA");var _j=new WeakMap,Nj=new WeakSet;class kj{constructor(){op(this,Nj),lp(this,_j,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=cp(Nj,this,Cj).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=up(_j,this)[e];if(!n||n.data===jj)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=up(_j,this)[e];return!!t&&t.data!==jj}delete(e){const t=up(_j,this)[e];return!(!t||t.data===jj)&&(delete up(_j,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=cp(Nj,this,Cj).call(this,e);n.data=t,n.resolve()}clear(){for(const t in up(_j,this)){var e;const{data:n}=up(_j,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}hp(_j,this,Object.create(null))}*[Symbol.iterator](){for(const e in up(_j,this)){const{data:t}=up(_j,this)[e];t!==jj&&(yield[e,t])}}}function Cj(e){var t;return(t=up(_j,this))[e]||(t[e]=Pe(Pe({},Promise.withResolvers()),{},{data:jj}))}var Sj=new WeakMap,Aj=new WeakMap,Ej=new WeakMap,Tj=new WeakMap,Pj=new WeakMap,Mj=new WeakMap,Lj=new WeakMap,Rj=new WeakMap,Oj=new WeakMap,Dj=new WeakMap,Ij=new WeakMap,Fj=new WeakMap,zj=new WeakMap,Bj=new WeakMap,Wj=new WeakMap,Hj=new WeakMap,Uj=new WeakMap,Vj=new WeakMap,Gj=new WeakSet;class qj{constructor(e){var t;let{textContentSource:n,container:s,viewport:r}=e;if(op(this,Gj),lp(this,Sj,Promise.withResolvers()),lp(this,Aj,null),lp(this,Ej,!1),lp(this,Tj,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),lp(this,Pj,null),lp(this,Mj,null),lp(this,Lj,0),lp(this,Rj,0),lp(this,Oj,null),lp(this,Dj,null),lp(this,Ij,0),lp(this,Fj,0),lp(this,zj,Object.create(null)),lp(this,Bj,[]),lp(this,Wj,null),lp(this,Hj,[]),lp(this,Uj,new WeakMap),lp(this,Vj,null),n instanceof ReadableStream)hp(Wj,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');hp(Wj,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}hp(Aj,this,hp(Dj,this,s)),hp(Fj,this,r.scale*ng.pixelRatio),hp(Ij,this,r.rotation),hp(Mj,this,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:o,pageY:l}=r.rawDims;hp(Vj,this,[1,0,0,-1,-o,l+a]),hp(Rj,this,i),hp(Lj,this,a),Jj.call(qj),tg(s,r),up(Sj,this).promise.finally(()=>{r_._.delete(this),hp(Mj,this,null),hp(zj,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Af.platform;return xf(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{up(Oj,this).read().then(t=>{var n;let{value:s,done:r}=t;r?up(Sj,this).resolve():(null!==(n=up(Pj,this))&&void 0!==n||hp(Pj,this,s.lang),Object.assign(up(zj,this),s.styles),cp(Gj,this,Kj).call(this,s.items),e())},up(Sj,this).reject)};return hp(Oj,this,up(Wj,this).getReader()),r_._.add(this),e(),up(Sj,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const s=t.scale*ng.pixelRatio,r=t.rotation;if(r!==up(Ij,this)&&(null===n||void 0===n||n(),hp(Ij,this,r),tg(up(Dj,this),{rotation:r})),s!==up(Fj,this)){null===n||void 0===n||n(),hp(Fj,this,s);const e={div:null,properties:null,ctx:Qj.call(qj,up(Pj,this))};for(const t of up(Hj,this))e.properties=up(Uj,this).get(t),e.div=t,cp(Gj,this,Yj).call(this,e)}}cancel(){var e;const t=new kf("TextLayer task cancelled.");null===(e=up(Oj,this))||void 0===e||e.cancel(t).catch(()=>{}),hp(Oj,this,null),up(Sj,this).reject(t)}get textDivs(){return up(Hj,this)}get textContentItemsStr(){return up(Bj,this)}static cleanup(){if(!(cp(qj,this,r_)._.size>0)){cp(qj,this,e_)._.clear();for(const{canvas:e}of cp(qj,this,t_)._.values())e.remove();cp(qj,this,t_)._.clear()}}}function Kj(e){var t,n;if(up(Ej,this))return;null!==(n=(t=up(Mj,this)).ctx)&&void 0!==n||(t.ctx=Qj.call(bp,up(Pj,this)));const s=up(Hj,this),r=up(Bj,this);for(const i of e){if(s.length>1e5)return mf("Ignoring additional textDivs for performance reasons."),void hp(Ej,this,!0);if(void 0!==i.str)r.push(i.str),cp(Gj,this,Xj).call(this,i);else if("beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type){const e=up(Aj,this);hp(Aj,this,document.createElement("span")),up(Aj,this).classList.add("markedContent"),null!==i.id&&up(Aj,this).setAttribute("id","".concat(i.id)),e.append(up(Aj,this))}else"endMarkedContent"===i.type&&hp(Aj,this,up(Aj,this).parentNode)}}function Xj(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};up(Hj,this).push(t);const s=Tf.transform(up(Vj,this),e.transform);let r=Math.atan2(s[1],s[0]);const i=up(zj,this)[e.fontName];i.vertical&&(r+=Math.PI/2);let a=up(Tj,this)&&i.fontSubstitution||i.fontFamily;a=bp.fontFamilyMap.get(a)||a;const o=Math.hypot(s[2],s[3]),l=o*Zj.call(bp,a,i,up(Pj,this));let c,d;0===r?(c=s[4],d=s[5]-l):(c=s[4]+l*Math.sin(r),d=s[5]-l*Math.cos(r));const u="calc(var(--total-scale-factor) *",h=t.style;up(Aj,this)===up(Dj,this)?(h.left="".concat((100*c/up(Rj,this)).toFixed(2),"%"),h.top="".concat((100*d/up(Lj,this)).toFixed(2),"%")):(h.left="".concat(u).concat(c.toFixed(2),"px)"),h.top="".concat(u).concat(d.toFixed(2),"px)")),h.fontSize="".concat(u).concat((s_._*o).toFixed(2),"px)"),h.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,up(Tj,this)&&(t.dataset.fontName=i.fontSubstitutionLoadedName||e.fontName),0!==r&&(n.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(m=!0)}if(m&&(n.canvasWidth=i.vertical?e.height:e.width),up(Uj,this).set(t,n),up(Mj,this).div=t,up(Mj,this).properties=n,cp(Gj,this,Yj).call(this,up(Mj,this)),n.hasText&&up(Aj,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),up(Aj,this).append(e)}}function Yj(e){const{div:t,properties:n,ctx:s}=e,{style:r}=t;let i="";if(s_._>1&&(i="scale(".concat(1/s_._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=r,{canvasWidth:a,fontSize:o}=n;$j.call(bp,s,o*up(Fj,this),e);const{width:l}=s.measureText(t.textContent);l>0&&(i="scaleX(".concat(a*up(Fj,this)/l,") ").concat(i))}0!==n.angle&&(i="rotate(".concat(n.angle,"deg) ").concat(i)),i.length>0&&(r.transform=i)}function Qj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=cp(bp,this,t_)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),cp(bp,this,t_)._.set(e,t),cp(bp,this,n_)._.set(t,{size:0,family:""})}return t}function $j(e,t,n){const s=cp(bp,this,n_)._.get(e);t===s.size&&n===s.family||(e.font="".concat(t,"px ").concat(n),s.size=t,s.family=n)}function Jj(){if(null!==cp(bp,this,s_)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),s_._=cp(bp,this,e.getBoundingClientRect().height),e.remove()}function Zj(e,t,n){const s=cp(bp,this,e_)._.get(e);if(s)return s;const r=cp(bp,this,Qj).call(this,n);r.canvas.width=r.canvas.height=30,cp(bp,this,$j).call(this,r,30,e);const i=r.measureText(""),a=i.fontBoundingBoxAscent,o=Math.abs(i.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return a?l=a/(a+o):(Af.platform.isFirefox&&mf("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),cp(bp,this,e_)._.set(e,l),l}bp=qj;var e_={_:new Map},t_={_:new Map},n_={_:new WeakMap},s_={_:null},r_={_:new Set};class i_{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var s;if(!n)return;let r=null;const i=n.name;if("#text"===i)r=n.value;else{if(!i_.shouldBuildText(i))return;null!==n&&void 0!==n&&null!==(s=n.attributes)&&void 0!==s&&s.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}function a_(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const s=new o_,{docId:r}=s,i=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(Ep)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(Ep&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Sf(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,d=n.range instanceof p_?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let h=n.worker instanceof k_?n.worker:null;const m=n.verbosity,p="string"!==typeof n.docBaseUrl||Vf(n.docBaseUrl)?null:n.docBaseUrl,f=qb(n.cMapUrl),g=!1!==n.cMapPacked,v=n.CMapReaderFactory||(Ep?$y:wy),x=qb(n.iccUrl),b=qb(n.standardFontDataUrl),y=n.StandardFontDataFactory||(Ep?Jy:Gy),w=qb(n.wasmUrl),j=n.WasmFactory||(Ep?Zy:Ky),_=!0!==n.stopAtErrors,N=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=!1!==n.isEvalSupported,C="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Ep,S="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!Ep&&(Af.platform.isFirefox||!globalThis.chrome),A=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,E="boolean"===typeof n.disableFontFace?n.disableFontFace:Ep,T=!0===n.fontExtraProperties,P=!0===n.enableXfa,M=n.ownerDocument||globalThis.document,L=!0===n.disableRange,R=!0===n.disableStream,O=!0===n.disableAutoFetch,D=!0===n.pdfBug,I=n.CanvasFactory||(Ep?Qy:by),F=n.FilterFactory||(Ep?Yy:Py),z=!0===n.enableHWA,B=!1!==n.useWasm,W=d?d.length:null!==(t=n.length)&&void 0!==t?t:NaN,H="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!Ep&&!E,U="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===wy&&y===Gy&&j===Ky&&f&&b&&w&&Kf(f,document.baseURI)&&Kf(b,document.baseURI)&&Kf(w,document.baseURI));df(m);const V={canvasFactory:new I({ownerDocument:M,enableHWA:z}),filterFactory:new F({docId:r,ownerDocument:M}),cMapReaderFactory:U?null:new v({baseUrl:f,isCompressed:g}),standardFontDataFactory:U?null:new y({baseUrl:b}),wasmFactory:U?null:new j({baseUrl:w})};h||(h=k_.create({verbosity:m,port:Ow.workerPort}),s._worker=h);const G={docId:r,apiVersion:"5.3.31",data:a,password:c,disableAutoFetch:O,rangeChunkSize:u,length:W,docBaseUrl:p,enableXfa:P,evaluatorOptions:{maxImageSize:N,disableFontFace:E,ignoreErrors:_,isEvalSupported:k,isOffscreenCanvasSupported:C,isImageDecoderSupported:S,canvasMaxAreaInBytes:A,fontExtraProperties:T,useSystemFonts:H,useWasm:B,useWorkerFetch:U,cMapUrl:f,iccUrl:x,standardFontDataUrl:b,wasmUrl:w}},q={ownerDocument:M,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:O,enableXfa:P}};return h.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",G,a?[a.buffer]:null);let t;if(d)t=new ej(d,{disableRange:L,disableStream:R});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const e=Kf(i)?uj:Ep?bj:fj;t=new e({url:i,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:L,disableStream:R})}return e.then(e=>{if(s.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new hy(r,e,h.port),i=new B_(n,s,t,q,V);s._transport=i,n.send("Ready",null)})}).catch(s._capability.reject),s}class o_{constructor(){Ee(this,"_capability",Promise.withResolvers()),Ee(this,"_transport",null),Ee(this,"_worker",null),Ee(this,"docId","d".concat((l_._=(yp=l_._,wp=yp++,yp),wp))),Ee(this,"destroyed",!1),Ee(this,"onPassword",null),Ee(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var s;throw null!==(s=this._worker)&&void 0!==s&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var l_={_:0},c_=new WeakMap,d_=new WeakMap,u_=new WeakMap,h_=new WeakMap,m_=new WeakMap;class p_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;lp(this,c_,Promise.withResolvers()),lp(this,d_,[]),lp(this,u_,[]),lp(this,h_,[]),lp(this,m_,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){up(m_,this).push(e)}addProgressListener(e){up(h_,this).push(e)}addProgressiveReadListener(e){up(u_,this).push(e)}addProgressiveDoneListener(e){up(d_,this).push(e)}onDataRange(e,t){for(const n of up(m_,this))n(e,t)}onDataProgress(e,t){up(c_,this).promise.then(()=>{for(const n of up(h_,this))n(e,t)})}onDataProgressiveRead(e){up(c_,this).promise.then(()=>{for(const t of up(u_,this))t(e)})}onDataProgressiveDone(){up(c_,this).promise.then(()=>{for(const e of up(d_,this))e()})}transportReady(){up(c_,this).resolve()}requestDataRange(e,t){pf("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class f_{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xf(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var g_=new WeakMap,v_=new WeakSet;class x_{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];op(this,v_),lp(this,g_,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new qf:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new kj,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Hf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xf(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:s,viewport:r,intent:i="display",annotationMode:a=Bp.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:m=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(i,a,h,m),{renderingIntent:f,cacheKey:g}=p;hp(g_,this,!1),c||(c=this._transport.getOptionalContentConfig(f));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const x=!!(f&Rp);var b;v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(b=this._stats)||void 0===b||b.time("Page Request"),this._pumpOperatorList(p));const y=e=>{var t;(v.renderTasks.delete(w),x&&hp(g_,this,!0),cp(v_,this,b_).call(this),e?(w.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:new Error(e)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new G_({callback:y,params:{canvasContext:s,viewport:r,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:u});((n=v).renderTasks||(n.renderTasks=new Set)).add(w);const j=w.task;return Promise.all([v.displayReadyCapability.promise,c]).then(e=>{var t;let[n,s]=e;if(this.destroyed)y();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(s.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:n,optionalContentConfig:s}),w.operatorListChanged()}}).catch(y),j}getOperatorList(){let{intent:e="display",annotationMode:t=Bp.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,s,!0);let i,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(i=Object.create(null),i.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(i))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(i),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>i_.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const s=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){s.read().then(function(n){var s;let{value:i,done:a}=n;a?e(r):(null!==(s=r.lang)&&void 0!==s||(r.lang=i.lang),Object.assign(r.styles,i.styles),r.items.push(...i.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),hp(g_,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];hp(g_,this,!0);const t=cp(v_,this,b_).call(this);return e&&t&&this._stats&&(this._stats=new qf),t}_startRenderPage(e,t){var n,s;const r=this._intentStates.get(t);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(s=r.displayReadyCapability)||void 0===s||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&cp(v_,this,b_).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:r}=e;const{map:i,transfer:a}=s,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();cp(v_,this,b_).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:s=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof Uf){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new kf(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function b_(){if(!up(g_,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),hp(g_,this,!1),!0}var y_=new WeakMap,w_=new WeakMap,j_=new WeakMap,__=new WeakMap,N_=new WeakSet;class k_{constructor(){let{name:e=null,port:t=null,verbosity:n=uf()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(op(this,N_),lp(this,y_,Promise.withResolvers()),lp(this,w_,null),lp(this,j_,null),lp(this,__,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(L_._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");L_._.set(t,this),cp(N_,this,S_).call(this,t)}else cp(N_,this,A_).call(this)}get promise(){return up(y_,this).promise}get port(){return up(j_,this)}get messageHandler(){return up(w_,this)}destroy(){var e,t;this.destroyed=!0,null===(e=up(__,this))||void 0===e||e.terminate(),hp(__,this,null),L_._.delete(up(j_,this)),hp(j_,this,null),null===(t=up(w_,this))||void 0===t||t.destroy(),hp(w_,this,null)}static create(e){const t=cp(k_,this,L_)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new k_(e)}static get workerSrc(){if(Ow.workerSrc)return Ow.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xf(this,"_setupFakeWorkerGlobal",(async()=>{if(dp(k_,this,T_))return dp(k_,this,T_);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function C_(){up(y_,this).resolve(),up(w_,this).send("configure",{verbosity:this.verbosity})}function S_(e){hp(j_,this,e),hp(w_,this,new hy("main","worker",e)),up(w_,this).on("ready",()=>{}),cp(N_,this,C_).call(this)}function A_(){if(M_._||T_(jp))return void cp(N_,this,E_).call(this);let{workerSrc:e}=jp;try{jp._isSameOrigin(window.location,e)||(e=jp._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new hy("main","worker",t),s=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?up(y_,this).reject(new Error("Worker was destroyed")):cp(N_,this,E_).call(this)},r=new AbortController;t.addEventListener("error",()=>{up(__,this)||s()},{signal:r.signal}),n.on("test",e=>{r.abort(),!this.destroyed&&e?(hp(w_,this,n),hp(j_,this,t),hp(__,this,t),cp(N_,this,C_).call(this)):s()}),n.on("ready",e=>{if(r.abort(),this.destroyed)s();else try{i()}catch(t){cp(N_,this,E_).call(this)}});const i=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void i()}catch(t){hf("The worker has been disabled.")}cp(N_,this,E_).call(this)}function E_(){M_._||(mf("Setting up fake worker."),M_._=!0),jp._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void up(y_,this).reject(new Error("Worker was destroyed"));const s=new $b;hp(j_,this,s);const r="fake".concat((P_._=(t=P_._,n=t++,t),n)),i=new hy(r+"_worker",r,s);e.setup(i,s),hp(w_,this,new hy(r,r+"_worker",s)),cp(N_,this,C_).call(this)}).catch(e=>{up(y_,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function T_(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}jp=k_;var P_={_:0},M_={_:!1},L_={_:new WeakMap};Ep&&(M_._=cp(jp,jp,!0),Ow.workerSrc||(Ow.workerSrc="./pdf.worker.mjs")),jp._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const s=new URL(t,n);return n.origin===s.origin},jp._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},jp.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return jp.create(e)};var R_=new WeakMap,O_=new WeakMap,D_=new WeakMap,I_=new WeakMap,F_=new WeakMap,z_=new WeakSet;class B_{constructor(e,t,n,s,r){op(this,z_),lp(this,R_,new Map),lp(this,O_,new Map),lp(this,D_,new Map),lp(this,I_,new Map),lp(this,F_,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new kj,this.fontLoader=new Vb({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return xf(this,"annotationStorage",new zb)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bp.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Lp,a=Rb;switch(e){case"any":i=Mp;break;case"display":break;case"print":i=Rp;break;default:mf("getRenderingIntent - invalid intent: ".concat(e))}const o=i&Rp&&n instanceof Hb?n:this.annotationStorage;switch(t){case Bp.DISABLE:i+=Ip;break;case Bp.ENABLE:break;case Bp.ENABLE_FORMS:i+=Op;break;case Bp.ENABLE_STORAGE:i+=Dp,a=o.serializable;break;default:mf("getRenderingIntent - invalid annotationMode: ".concat(t))}s&&(i+=Fp),r&&(i+=zp);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:i,cacheKey:[i,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=up(F_,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of up(O_,this).values())t.push(s._destroy());up(O_,this).clear(),up(D_,this).clear(),up(I_,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),up(R_,this).clear(),this.filterFactory.destroy(),qj.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new kf("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{ff(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:s}=e;s?t.close():(ff(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:r}=this._fullReader;if(!n||!s){var i;if(this._lastProgress)null===(i=t.onProgress)||void 0===i||i.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:s,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{ff(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:s}=e;s?t.close():(ff(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new f_(n,this))}),e.on("DocException",e=>{t._capability.reject(cy(e))}),e.on("PasswordRequest",e=>{hp(F_,this,Promise.withResolvers());try{if(!t.onPassword)throw cy(e);const n=e=>{e instanceof Error?up(F_,this).reject(e):up(F_,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){up(F_,this).reject(n)}return up(F_,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;up(O_,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[s,r,i]=t;if(this.destroyed)return null;if(this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const e=i.error;mf("Error during font loading: ".concat(e)),this.commonObjs.resolve(s,e);break}const t=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,a=new Gb(i,t);this.fontLoader.bind(a).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(s,a)});break;case"CopyLocalImage":const{imageRef:o}=i;ff(o,"The imageRef must be defined.");for(const e of up(O_,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===o)return t.dataLen?(this.commonObjs.resolve(s,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),e.on("obj",e=>{let[t,n,s,r]=e;if(this.destroyed)return;const i=up(O_,this).get(n);var a;if(!i.objs.has(t))if(0!==i._intentStates.size)switch(s){case"Image":case"Pattern":i.objs.resolve(t,r);break;default:throw new Error("Got unknown object type ".concat(s))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&mf("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=up(D_,this).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&up(I_,this).set(n.refStr,e);const s=new x_(t,n,this,this._params.pdfBug);return up(O_,this).set(t,s),s});return up(D_,this).set(t,s),s}getPageIndex(e){return Kb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return cp(z_,this,W_).call(this,"GetFieldObjects")}hasJSActions(){return cp(z_,this,W_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return cp(z_,this,W_).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return cp(z_,this,W_).call(this,"GetOptionalContentConfig").then(t=>new Jw(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=up(R_,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,s,r;return{info:e[0],metadata:e[1]?new Bw(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(s=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==s?s:null}});return up(R_,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of up(O_,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),up(R_,this).clear(),this.filterFactory.destroy(!0),qj.cleanup()}}cachedPageNumber(e){var t;if(!Kb(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=up(I_,this).get(n))&&void 0!==t?t:null}}function W_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=up(R_,this).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return up(R_,this).set(e,s),s}var H_=new WeakMap;class U_{constructor(e){lp(this,H_,null),Ee(this,"onContinue",null),Ee(this,"onError",null),hp(H_,this,e)}get promise(){return up(H_,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;up(H_,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=up(H_,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=up(H_,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var V_=new WeakMap;class G_{constructor(e){let{callback:t,params:n,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}=e;lp(this,V_,null),this.callback=t,this.params=n,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new U_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:s=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(q_._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");q_._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:a,transform:o,background:l}=this.params;this.gfx=new Pw(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:s,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),up(V_,this)&&(window.cancelAnimationFrame(up(V_,this)),hp(V_,this,null)),q_._.delete(this._canvas),s||(s=new Uf("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(s),null===(t=(n=this.task).onError)||void 0===t||t.call(n,s)}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?hp(V_,this,window.requestAnimationFrame(()=>{hp(V_,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),q_._.delete(this._canvas),this.callback())))}}var q_={_:new WeakSet};const K_="5.3.31";function X_(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function Y_(e){return Math.max(0,Math.min(255,255*e))}class Q_{static CMYK_G(e){let[t,n,s,r]=e;return["G",1-Math.min(1,.3*t+.59*s+.11*n+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=Y_(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=X_(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,s]=e;return["G",.3*t+.59*n+.11*s]}static RGB_rgb(e){return e.map(Y_)}static RGB_HTML(e){return"#".concat(e.map(X_).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,s,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,n+r)]}static CMYK_rgb(e){let[t,n,s,r]=e;return[Y_(1-Math.min(1,t+r)),Y_(1-Math.min(1,s+r)),Y_(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,s]=e;const r=1-t,i=1-n,a=1-s;return["CMYK",r,i,a,Math.min(r,i,a)]}}class $_{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width","".concat(e,"px")),s.setAttribute("height","".concat(t,"px"))),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),s}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){pf("Abstract method `_createSVG` called.")}}class J_ extends $_{_createSVG(e){return document.createElementNS(zf,e)}}class Z_{static setupStorage(e,t,n,s,r){const i=s.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==i.value&&(e.textContent=i.value),"print"===r)break;e.addEventListener("input",e=>{s.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(i.value===n.attributes.xfaOn?e.setAttribute("checked",!0):i.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{s.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==i.value&&e.setAttribute("value",i.value),"print"===r)break;e.addEventListener("input",e=>{s.setValue(t,{value:e.target.value})})}break;case"select":if(null!==i.value){e.setAttribute("value",i.value);for(const e of n.children)e.attributes.value===i.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;s.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:n,storage:s=null,intent:r,linkService:i}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&i.addLinkAttributes(t,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(t,a.dataId,n,s)}static render(e){const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,r=e.intent||"display",i=document.createElement(s.name);s.attributes&&this.setAttributes({html:i,element:s,intent:r,linkService:n});const a="richText"!==r,o=e.div;if(o.append(i),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===s.children.length){if(s.value){const e=document.createTextNode(s.value);i.append(e),a&&i_.shouldBuildText(s.name)&&l.push(e)}return{textDivs:l}}const c=[[s,-1,i]];for(;c.length>0;){var d,u;const[e,s,i]=c.at(-1);if(s+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),i.append(e);continue}const m=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(i.append(m),o.attributes&&this.setAttributes({html:m,element:o,storage:t,intent:r,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,m]);else if(o.value){const e=document.createTextNode(o.value);a&&i_.shouldBuildText(h)&&l.push(e),m.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const eN=1e3,tN=new WeakSet;class nN{static create(e){switch(e.data.annotationType){case Qp.LINK:return new dN(e);case Qp.TEXT:return new pN(e);case Qp.WIDGET:switch(e.data.fieldType){case"Tx":return new gN(e);case"Btn":return e.data.radioButton?new bN(e):e.data.checkBox?new xN(e):new yN(e);case"Ch":return new wN(e);case"Sig":return new vN(e)}return new fN(e);case Qp.POPUP:return new jN(e);case Qp.FREETEXT:return new ZN(e);case Qp.LINE:return new tk(e);case Qp.SQUARE:return new sk(e);case Qp.CIRCLE:return new ik(e);case Qp.POLYLINE:return new ok(e);case Qp.CARET:return new ck(e);case Qp.INK:return new mk(e);case Qp.POLYGON:return new lk(e);case Qp.HIGHLIGHT:return new fk(e);case Qp.UNDERLINE:return new gk(e);case Qp.SQUIGGLY:return new vk(e);case Qp.STRIKEOUT:return new xk(e);case Qp.STAMP:return new bk(e);case Qp.FILEATTACHMENT:return new jk(e);default:return new oN(e)}}}var sN=new WeakMap,rN=new WeakMap,iN=new WeakMap,aN=new WeakSet;class oN{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};op(this,aN),lp(this,sN,null),lp(this,rN,!1),lp(this,iN,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:s}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==s&&void 0!==s&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return oN._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;up(sN,this)||hp(sN,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&cp(aN,this,lN).call(this,n),null===(t=up(iN,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;up(sN,this)&&(cp(aN,this,lN).call(this,up(sN,this).rect),null===(e=up(iN,this))||void 0===e||e.popup.resetEdited(),hp(sN,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof fN||(r.tabIndex=eN);const{style:i}=r;if(i.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof jN){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){i.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");i.borderRadius=t}else if(this instanceof bN){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");i.borderRadius=e}switch(t.borderStyle.style){case $p:i.borderStyle="solid";break;case Jp:i.borderStyle="dashed";break;case Zp:mf("Unimplemented border style: beveled");break;case ef:mf("Unimplemented border style: inset");break;case tf:i.borderBottomStyle="solid"}const s=t.borderColor||null;s?(hp(rN,this,!0),i.borderColor=Tf.makeHexColor(0|s[0],0|s[1],0|s[2])):i.borderWidth=0}const l=Tf.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=s.rawDims;i.left="".concat(100*(l[0]-u)/c,"%"),i.top="".concat(100*(l[1]-h)/d,"%");const{rotation:m}=t;return t.hasOwnCanvas||0===m?(i.width="".concat(100*a/c,"%"),i.height="".concat(100*o/d,"%")):this.setRotation(m,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:i}=this;e%180!==0&&([r,i]=[i,r]),t.style.width="".concat(100*r/n,"%"),t.style.height="".concat(100*i/s,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const s=n.detail[e],r=s[0],i=s.slice(1);n.target.style[t]=Q_["".concat(r,"_HTML")](i),this.annotationStorage.setValue(this.data.id,{[t]:Q_["".concat(r,"_rgb")](i)})};return xf(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||n[s];null===r||void 0===r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const i=n[s];if(i){i({detail:{[s]:r},target:e}),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[i,a,o,l]=e.subarray(2,6);if(s===i&&r===a&&t===o&&n===l)return}const{style:i}=this.container;let a;if(up(rN,this)){const{borderColor:e,borderWidth:t}=i;i.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=s-t,l=r-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),m="clippath_".concat(this.data.id);h.setAttribute("id",m),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let f=2,g=e.length;f<g;f+=8){var p;const n=e[f],s=e[f+1],i=e[f+2],d=e[f+3],u=c.createElement("rect"),m=(i-t)/o,g=(r-s)/l,v=(n-i)/o,x=(s-d)/l;u.setAttribute("x",m),u.setAttribute("y",g),u.setAttribute("width",v),u.setAttribute("height",x),h.append(u),null===(p=a)||void 0===p||p.push('<rect vector-effect="non-scaling-stroke" x="'.concat(m,'" y="').concat(g,'" width="').concat(v,'" height="').concat(x,'"/>'))}up(rN,this)&&(a.push("</g></svg>')"),i.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(m,")")}_createPopup(){const{data:e}=this,t=hp(iN,this,new jN({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){pf("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:e,id:r,exportValues:i}of s){if(-1===e)continue;if(r===t)continue;const s="string"===typeof i?i:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||tN.has(a)?n.push({id:r,exportValue:s,domElement:a}):mf("_getElementsByName - element not allowed: ".concat(r))}return n}for(const s of document.getElementsByName(e)){const{exportValue:e}=s,r=s.getAttribute("data-element-id");r!==t&&(tN.has(s)&&n.push({id:r,exportValue:e,domElement:s}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function lN(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/r,"%"),t.top="".concat(100*(i-e[3]+o)/i,"%"),0===s?(t.width="".concat(100*(e[2]-e[0])/r,"%"),t.height="".concat(100*(e[3]-e[1])/i,"%")):this.setRotation(s)}var cN=new WeakSet;class dN extends oN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),op(this,cN),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action),s=!0):e.attachment?(cp(cN,this,hN).call(this,n,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(cp(cN,this,mN).call(this,n,e.setOCGState),s=!0):e.dest?(this._bindLink(n,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&cp(cN,this,uN).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),cp(cN,this,uN).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const r=n.get(s);r&&(e[r]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1})}e.onclick||(e.onclick=()=>!1),cp(cN,this,uN).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),cp(cN,this,uN).call(this),!this._fieldObjects)return mf('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:s,include:r}=t,i=[];if(0!==e.length||0!==s.length){const t=new Set(s);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&i.push(n)}else for(const t of Object.values(this._fieldObjects))i.push(...t);const a=this.annotationStorage,o=[];for(const t of i){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(tN.has(n)?n.dispatchEvent(new Event("resetform")):mf("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function uN(){this.container.setAttribute("data-internal-link","")}function hN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},cp(cN,this,uN).call(this)}function mN(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),cp(cN,this,uN).call(this)}class pN extends oN{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class fN extends oN{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Af.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var i;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}r&&(null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(e)}}))})}_setEventListeners(e,t,n,s){for(const[o,l]of n){var r,i,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,s),"Focus"!==l||null!==(i=this.data.actions)&&void 0!==i&&i.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Tf.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||9,r=e.style;let i;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Pp*s))||1);i=Math.min(s,a(t/Pp))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);i=Math.min(s,a(e/Pp))}r.fontSize="calc(".concat(i,"px * var(--total-scale-factor))"),r.color=Tf.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class gN extends fN{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const i of this._getElementsByName(e.name,e.id))i.domElement&&(i.domElement[t]=n),r.setValue(i.id,{[s]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var s;const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=i.formattedValue||(null===(s=this.data.textContent)||void 0===s?void 0:s.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),tN.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=eN,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",s=>{e.setValue(t,{value:s.target.value}),this.setPropertyOnSiblings(n,"value",s.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const s=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=s,c.formattedValue=null});let d=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;c.userValue&&(n.value=c.userValue),c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const s={value(n){var s;c.userValue=null!==(s=n.detail.value)&&void 0!==s?s:"",e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:s}=n.detail;c.formattedValue=s,null!==s&&void 0!==s&&n.target!==document.activeElement&&(n.target.value=s),e.setValue(t,{formattedValue:s})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var s;const{charLimit:r}=n.detail,{target:i}=n;if(0===r)return void i.removeAttribute("maxLength");i.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),i.value=c.userValue=a,e.setValue(t,{value:a}),null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}}))}};this._dispatchEventFromSandbox(s,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let s=-1;if("Escape"===e.key?s=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):s=2,-1===s)return;const{value:r}=e.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:s,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const s=d;d=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{value:r}=e.target;var i;(c.userValue=r,c.lastCommittedValue!==r)&&(null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));s(e)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:s,target:r}=e,{value:i,selectionStart:a,selectionEnd:o}=r;let l=a,d=o;switch(e.inputType){case"deleteWordBackward":{const e=i.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=i.substring(a).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,change:s||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class vN extends fN{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class xN extends fN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof s&&(s="Off"!==s,e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return tN.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=eN,r.addEventListener("change",s=>{const{name:r,checked:i}=s.target;for(const a of this._getElementsByName(r,n)){const n=i&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:i})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{const s={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(s,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class bN extends fN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof s&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const i of this._getElementsByName(t.fieldName,n))e.setValue(i.id,{value:!1});const r=document.createElement("input");if(tN.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=eN,r.addEventListener("change",t=>{const{name:s,checked:r}=t.target;for(const i of this._getElementsByName(s,n))e.setValue(i.id,{value:!1});e.setValue(n,{value:r})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{const r={value:t=>{const r=s===t.detail.value;for(const s of this._getElementsByName(t.target.name)){const t=r&&s.id===n;s.domElement&&(s.domElement.checked=t),e.setValue(s.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class yN extends dN{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class wN extends fN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");tN.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=eN;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of s.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),s.append(e)}let i=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),s.prepend(e),i=()=>{e.remove(),s.removeEventListener("input",i),i=null},s.addEventListener("input",i)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:r}=s;return r?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=i)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of s.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){s.multiple=!0},remove(n){const r=s.options,i=n.detail.remove;if(r[i].selected=!1,s.remove(i),r.length>0){-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==s.length;)s.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:i,exportValue:c}=n.detail.insert,d=s.children[r],u=document.createElement("option");u.textContent=i,u.value=c,d?d.before(u):s.append(u),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==s.length;)s.remove(0);for(const e of r){const{displayValue:t,exportValue:n}=e,r=document.createElement("option");r.textContent=t,r.value=n,s.append(r)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const s=new Set(n.detail.indices);for(const e of n.target.options)e.selected=s.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,n)}),s.addEventListener("input",n=>{var s;const r=a(!0),i=a(!1);e.setValue(t,{value:r}),n.preventDefault(),null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:i,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):s.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class jN extends oN{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:oN._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new UN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(Df).concat(e)).join(",")),this.container}}var _N=new WeakMap,NN=new WeakMap,kN=new WeakMap,CN=new WeakMap,SN=new WeakMap,AN=new WeakMap,EN=new WeakMap,TN=new WeakMap,PN=new WeakMap,MN=new WeakMap,LN=new WeakMap,RN=new WeakMap,ON=new WeakMap,DN=new WeakMap,IN=new WeakMap,FN=new WeakMap,zN=new WeakMap,BN=new WeakMap,WN=new WeakMap,HN=new WeakSet;class UN{constructor(e){let{container:t,color:n,elements:s,titleObj:r,modificationDate:i,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:u}=e;op(this,HN),lp(this,_N,cp(HN,this,XN).bind(this)),lp(this,NN,cp(HN,this,JN).bind(this)),lp(this,kN,cp(HN,this,$N).bind(this)),lp(this,CN,cp(HN,this,QN).bind(this)),lp(this,SN,null),lp(this,AN,null),lp(this,EN,null),lp(this,TN,null),lp(this,PN,null),lp(this,MN,null),lp(this,LN,null),lp(this,RN,!1),lp(this,ON,null),lp(this,DN,null),lp(this,IN,null),lp(this,FN,null),lp(this,zN,null),lp(this,BN,null),lp(this,WN,!1),hp(AN,this,t),hp(zN,this,r),hp(EN,this,a),hp(FN,this,o),hp(MN,this,l),hp(SN,this,n),hp(IN,this,c),hp(LN,this,d),hp(PN,this,s),hp(TN,this,Qf.toDateObject(i)),this.trigger=s.flatMap(e=>e.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",up(CN,this)),m.addEventListener("mouseenter",up(kN,this)),m.addEventListener("mouseleave",up(NN,this)),m.classList.add("popupTriggerArea");for(const m of s){var h;null===(h=m.container)||void 0===h||h.addEventListener("keydown",up(_N,this))}up(AN,this).hidden=!0,u&&cp(HN,this,QN).call(this)}render(){if(up(ON,this))return;const e=hp(ON,this,document.createElement("div"));if(e.className="popup",up(SN,this)){const t=e.style.outlineColor=Tf.makeHexColor(...up(SN,this));e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=up(zN,this)),e.append(t),up(TN,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:up(TN,this).valueOf()})),t.append(e)}const s=dp(HN,this,VN);if(s)Z_.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(up(EN,this));e.append(t)}up(AN,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let i=0,a=r.length;i<a;++i){const e=r[i];s.append(document.createTextNode(e)),i<a-1&&s.append(document.createElement("br"))}return s}updateEdited(e){var t;let{rect:n,popupContent:s}=e;up(BN,this)||hp(BN,this,{contentsObj:up(EN,this),richText:up(FN,this)}),n&&hp(DN,this,null),s&&(hp(FN,this,cp(HN,this,KN).call(this,s)),hp(EN,this,null)),null===(t=up(ON,this))||void 0===t||t.remove(),hp(ON,this,null)}resetEdited(){var e;up(BN,this)&&(({contentsObj:ip(hp,[EN,this])._,richText:ip(hp,[FN,this])._}=up(BN,this)),hp(BN,this,null),null===(e=up(ON,this))||void 0===e||e.remove(),hp(ON,this,null),hp(DN,this,null))}forceHide(){hp(WN,this,this.isVisible),up(WN,this)&&(up(AN,this).hidden=!0)}maybeShow(){up(WN,this)&&(up(ON,this)||cp(HN,this,$N).call(this),hp(WN,this,!1),up(AN,this).hidden=!1)}get isVisible(){return!1===up(AN,this).hidden}}function VN(e){const t=up(FN,e),n=up(EN,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:up(FN,e).html||null}function GN(e){var t;return(null===(t=dp(HN,e,VN))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function qN(e){var t;return(null===(t=dp(HN,e,VN))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function KN(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:dp(HN,this,qN),fontSize:dp(HN,this,GN)?"calc(".concat(dp(HN,this,GN),"px * var(--total-scale-factor))"):""}};for(const r of e.split("\n"))t.push({name:"span",value:r,attributes:s});return n}function XN(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&up(RN,this))&&cp(HN,this,QN).call(this)}function YN(){if(null!==up(DN,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:r}}}=up(MN,this);let i=!!up(LN,this),a=up(i?LN:IN,this);for(const h of up(PN,this))if(!a||null!==Tf.intersect(h.data.rect,a)){a=h.data.rect,i=!0;break}const o=Tf.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=i?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];hp(DN,this,[100*(c-s)/t,100*(d-r)/n]);const{style:u}=up(AN,this);u.left="".concat(up(DN,this)[0],"%"),u.top="".concat(up(DN,this)[1],"%")}function QN(){hp(RN,this,!up(RN,this)),up(RN,this)?(cp(HN,this,$N).call(this),up(AN,this).addEventListener("click",up(CN,this)),up(AN,this).addEventListener("keydown",up(_N,this))):(cp(HN,this,JN).call(this),up(AN,this).removeEventListener("click",up(CN,this)),up(AN,this).removeEventListener("keydown",up(_N,this)))}function $N(){up(ON,this)||this.render(),this.isVisible?up(RN,this)&&up(AN,this).classList.add("focused"):(cp(HN,this,YN).call(this),up(AN,this).hidden=!1,up(AN,this).style.zIndex=parseInt(up(AN,this).style.zIndex)+1e3)}function JN(){up(AN,this).classList.remove("focused"),!up(RN,this)&&this.isVisible&&(up(AN,this).hidden=!0,up(AN,this).style.zIndex=parseInt(up(AN,this).style.zIndex)-1e3)}class ZN extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Wp.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ek=new WeakMap;class tk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),lp(this,ek,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),r=hp(ek,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return up(ek,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var nk=new WeakMap;class sk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),lp(this,nk,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,i=hp(nk,this,this.svgFactory.createElement("svg:rect"));return i.setAttribute("x",r/2),i.setAttribute("y",r/2),i.setAttribute("width",t-r),i.setAttribute("height",n-r),i.setAttribute("stroke-width",r||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),s.append(i),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return up(nk,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var rk=new WeakMap;class ik extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),lp(this,rk,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,i=hp(rk,this,this.svgFactory.createElement("svg:ellipse"));return i.setAttribute("cx",t/2),i.setAttribute("cy",n/2),i.setAttribute("rx",t/2-r/2),i.setAttribute("ry",n/2-r/2),i.setAttribute("stroke-width",r||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),s.append(i),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return up(rk,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ak=new WeakMap;class ok extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),lp(this,ak,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:s},width:r,height:i}=this;if(!t)return this.container;const a=this.svgFactory.create(r,i,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],s=e[3]-t[c+1];o.push("".concat(n,",").concat(s))}o=o.join(" ");const l=hp(ak,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return up(ak,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class lk extends ok{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ck extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var dk=new WeakMap,uk=new WeakMap,hk=new WeakSet;class mk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),op(this,hk),lp(this,dk,null),lp(this,uk,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Wp.HIGHLIGHT:Wp.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:s,popupRef:r}}=this,{transform:i,width:a,height:o}=cp(hk,this,pk).call(this,t,e),l=this.svgFactory.create(a,o,!0),c=hp(dk,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",s.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",i);for(let d=0,u=n.length;d<u;d++){const e=this.svgFactory.createElement(this.svgElementName);up(uk,this).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:s}=e,r=up(dk,this);if(t>=0&&r.setAttribute("stroke-width",t||1),n)for(let i=0,a=up(uk,this).length;i<a;i++)up(uk,this)[i].setAttribute("points",n[i].join(","));if(s){const{transform:e,width:t,height:n}=cp(hk,this,pk).call(this,this.data.rotation,s);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return up(uk,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function pk(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class fk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Wp.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class gk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class vk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class bk extends oN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Wp.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var yk=new WeakMap,wk=new WeakSet;class jk extends oN{constructor(e){var t;super(e,{isRenderable:!0}),op(this,wk),lp(this,yk,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",Pe({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",cp(wk,this,_k).bind(this)),hp(yk,this,n);const{isMac:s}=Af.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(s?e.metaKey:e.ctrlKey)&&cp(wk,this,_k).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return up(yk,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function _k(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var Nk=new WeakMap,kk=new WeakMap,Ck=new WeakMap,Sk=new WeakMap,Ak=new WeakSet;class Ek{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:o}=e;op(this,Ak),lp(this,Nk,null),lp(this,kk,null),lp(this,Ck,new Map),lp(this,Sk,null),this.div=t,hp(Nk,this,n),hp(kk,this,s),hp(Sk,this,o||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return up(Ck,this).size>0}async render(e){const{annotations:t}=e,n=this.div;tg(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new J_,annotationStorage:e.annotationStorage||new zb,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const e=a.annotationType===Qp.POPUP;if(e){const e=s.get(a.id);if(!e)continue;r.elements=e}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const t=nN.create(r);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=s.get(a.popupRef);e?e.push(t):s.set(a.popupRef,[t])}const n=t.render();var i;if(a.hidden&&(n.style.visibility="hidden"),await cp(Ak,this,Tk).call(this,n,a.id),t._isEditable)up(Ck,this).set(t.data.id,t),null===(i=this._annotationEditorUIManager)||void 0===i||i.renderAnnotationElement(t)}cp(Ak,this,Pk).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new J_,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=Ek._defaultBorderStyle),n.data=s;const e=nN.create(n);if(!e.isRenderable)continue;const t=e.render();await cp(Ak,this,Tk).call(this,t,s.id)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,tg(n,{rotation:t.rotation}),cp(Ak,this,Pk).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(up(Ck,this).values())}getEditableAnnotation(e){return up(Ck,this).get(e)}static get _defaultBorderStyle(){return xf(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:$p,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function Tk(e,t){var n,s;const r=e.firstChild||e,i=r.id="".concat(Df).concat(t),a=await(null===(n=up(Sk,this))||void 0===n?void 0:n.getAriaAttributes(i));if(a)for(const[o,l]of a)r.setAttribute(o,l);this.div.append(e),null===(s=up(Nk,this))||void 0===s||s.moveElementInDOM(this.div,e,r,!1)}function Pk(){if(!up(kk,this))return;const e=this.div;for(const[n,s]of up(kk,this)){const r=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;s.className="annotationContent";const{firstChild:i}=r;i?"CANVAS"===i.nodeName?i.replaceWith(s):i.classList.contains("annotationContent")?i.after(s):i.before(s):r.append(s);const a=up(Ck,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,r.id,s),a._hasNoCanvas=!1;else a.canvas=s}up(kk,this).clear()}const Mk=/\r\n?|\n/g;var Lk=new WeakMap,Rk=new WeakMap,Ok=new WeakMap,Dk=new WeakMap,Ik=new WeakMap,Fk=new WeakSet;class zk extends cb{static get _keyboardManager(){const e=zk.prototype,t=e=>e.isEmpty(),n=Dv.TRANSLATE_SMALL,s=Dv.TRANSLATE_BIG;return xf(this,"_keyboardManager",new Hg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}constructor(e){super(Pe(Pe({},e),{},{name:"freeTextEditor"})),op(this,Fk),lp(this,Lk,void 0),lp(this,Rk,""),lp(this,Ok,"".concat(this.id,"-editor")),lp(this,Dk,null),lp(this,Ik,void 0),hp(Lk,this,e.color||zk._defaultColor||cb._defaultLineColor),hp(Ik,this,e.fontSize||zk._defaultFontSize)}static initialize(e,t){cb.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Hp.FREETEXT_SIZE:zk._defaultFontSize=t;break;case Hp.FREETEXT_COLOR:zk._defaultColor=t}}updateParams(e,t){switch(e){case Hp.FREETEXT_SIZE:cp(Fk,this,Bk).call(this,t);break;case Hp.FREETEXT_COLOR:cp(Fk,this,Wk).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Hp.FREETEXT_SIZE,zk._defaultFontSize],[Hp.FREETEXT_COLOR,zk._defaultColor||cb._defaultLineColor]]}get propertiesToUpdate(){return[[Hp.FREETEXT_SIZE,up(Ik,this)],[Hp.FREETEXT_COLOR,up(Lk,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-zk._internalPadding*e,-(zk._internalPadding+up(Ik,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),hp(Dk,this,new AbortController);const e=this._uiManager.combinedSignal(up(Dk,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",up(Ok,this)),this._isDraggable=!0,null===(e=up(Dk,this))||void 0===e||e.abort(),hp(Dk,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=up(Rk,this),t=hp(Rk,this,cp(Fk,this,Hk).call(this).trimEnd());if(e===t)return;const n=e=>{hp(Rk,this,e),e?(cp(Fk,this,Gk).call(this),this._uiManager.rebuild(this),cp(Fk,this,Uk).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),cp(Fk,this,Uk).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){zk._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",up(Ok,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(up(Ik,this),"px * var(--total-scale-factor))"),n.color=up(Lk,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,s]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[i,a]=this.getInitialTranslation();[i,a]=this.pageTranslationToScreen(i,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(r[0]-c)/o,h=t+this.height-(r[1]-d)/l;break;case 90:u=e+(r[0]-c)/o,h=t-(r[1]-d)/l,[i,a]=[a,-i];break;case 180:u=e-this.width+(r[0]-c)/o,h=t-(r[1]-d)/l,[i,a]=[-i,-a];break;case 270:u=e+(r[0]-c-this.height*l)/o,h=t+(r[1]-d-this.width*o)/l,[i,a]=[-a,i]}this.setAt(u*n,h*s,i,a)}else this._moveAfterPaste(e,t);cp(Fk,this,Gk).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const s=Kk.call(zk,t.getData("text")||"").replaceAll(Mk,"\n");if(!s)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const i=r.getRangeAt(0);if(!s.includes("\n"))return i.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=i,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Mk,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(Vk.call(zk,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(Mk,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Vk.call(zk,n))}hp(Rk,this,"".concat(l.join("\n")).concat(s).concat(c.join("\n"))),cp(Fk,this,Gk).call(this);const d=new Range;let u=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}r.removeAllRanges(),r.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let s=null;if(e instanceof ZN){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:i,id:a,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;s=e={annotationType:Wp.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:r.slice(0),rotation:i,id:a,deleted:!1,popupRef:o}}const r=await super.deserialize(e,t,n);return hp(Ik,r,e.fontSize),hp(Lk,r,Tf.makeHexColor(...e.color)),hp(Rk,r,Kk.call(zk,e.value)),r.annotationElementId=e.id||null,r._initialData=s,r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=zk._internalPadding*this.parentScale,n=this.getRect(t,t),s=cb._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:up(Lk,this)),r={annotationType:Wp.FREETEXT,color:s,fontSize:up(Ik,this),value:cp(Fk,this,qk).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(r.isCopy=!0,r):this.annotationElementId&&!cp(Fk,this,Xk).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(up(Ik,this),"px * var(--total-scale-factor))"),n.color=up(Lk,this),t.replaceChildren();for(const r of up(Rk,this).split("\n")){const e=document.createElement("div");e.append(r?document.createTextNode(r):document.createElement("br")),t.append(e)}const s=zk._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:up(Rk,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function Bk(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-up(Ik,this))*this.parentScale),hp(Ik,this,e),cp(Fk,this,Uk).call(this)},n=up(Ik,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hp.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Wk(e){const t=e=>{hp(Lk,this,this.editorDiv.style.color=e)},n=up(Lk,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hp.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Hk(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===s.nodeName||(e.push(Vk.call(_p,s)),t=s)}return e.join("\n")}function Uk(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,s=t.style.display,r=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=s,t.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function Vk(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Mk,"")}function Gk(){if(this.editorDiv.replaceChildren(),up(Rk,this))for(const e of up(Rk,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function qk(){return up(Rk,this).replaceAll("\xa0"," ")}function Kk(e){return e.replaceAll(" ","\xa0")}function Xk(e){const{value:t,fontSize:n,color:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==s[t])||e.pageIndex!==r}_p=zk,Ee(zk,"_freeTextDefaultContent",""),Ee(zk,"_internalPadding",0),Ee(zk,"_defaultColor",null),Ee(zk,"_defaultFontSize",10),Ee(zk,"_type","freetext"),Ee(zk,"_editorType",Wp.FREETEXT);class Yk{toSVGPath(){pf("Abstract method `toSVGPath` must be implemented.")}get box(){pf("Abstract getter `box` must be implemented.")}serialize(e,t){pf("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,r,i){i||(i=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a]*s,i[a+1]=n+e[a+1]*r;return i}static _rescaleAndSwap(e,t,n,s,r,i){i||(i=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a+1]*s,i[a+1]=n+e[a]*r;return i}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let r=0,i=e.length;r<i;r+=2)s[r]=t+e[r],s[r+1]=n+e[r+1];return s}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,s,r){switch(r){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,r,i){return[(e+5*n)/6,(t+5*s)/6,(5*n+r)/6,(5*s+i)/6,(n+r)/2,(s+i)/2]}}Ee(Yk,"PRECISION",1e-4);var Qk=new WeakMap,$k=new WeakMap,Jk=new WeakMap,Zk=new WeakMap,eC=new WeakMap,tC=new WeakMap,nC=new WeakMap,sC=new WeakMap,rC=new WeakMap,iC=new WeakMap,aC=new WeakMap,oC=new WeakMap,lC=new WeakMap,cC=new WeakSet;class dC{constructor(e,t,n,s,r){let{x:i,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;op(this,cC),lp(this,Qk,void 0),lp(this,$k,[]),lp(this,Jk,void 0),lp(this,Zk,void 0),lp(this,eC,[]),lp(this,tC,new Float32Array(18)),lp(this,nC,void 0),lp(this,sC,void 0),lp(this,rC,void 0),lp(this,iC,void 0),lp(this,aC,void 0),lp(this,oC,void 0),lp(this,lC,[]),hp(Qk,this,t),hp(oC,this,s*n),hp(Zk,this,r),up(tC,this).set([NaN,NaN,NaN,NaN,i,a],6),hp(Jk,this,o),hp(iC,this,xC._*n),hp(rC,this,bC._*n),hp(aC,this,n),up(lC,this).push(i,a)}isEmpty(){return isNaN(up(tC,this)[8])}add(e){var t;let{x:n,y:s}=e;hp(nC,this,n),hp(sC,this,s);const[r,i,a,o]=up(Qk,this);let[l,c,d,u]=up(tC,this).subarray(8,12);const h=n-d,m=s-u,p=Math.hypot(h,m);if(p<up(rC,this))return!1;const f=p-up(iC,this),g=f/p,v=g*h,x=g*m;let b=l,y=c;l=d,c=u,d+=v,u+=x,null===(t=up(lC,this))||void 0===t||t.push(n,s);const w=v/f,j=-x/f*up(oC,this),_=w*up(oC,this);if(up(tC,this).set(up(tC,this).subarray(2,8),0),up(tC,this).set([d+j,u+_],4),up(tC,this).set(up(tC,this).subarray(14,18),12),up(tC,this).set([d-j,u-_],16),isNaN(up(tC,this)[6]))return 0===up(eC,this).length&&(up(tC,this).set([l+j,c+_],2),up(eC,this).push(NaN,NaN,NaN,NaN,(l+j-r)/a,(c+_-i)/o),up(tC,this).set([l-j,c-_],14),up($k,this).push(NaN,NaN,NaN,NaN,(l-j-r)/a,(c-_-i)/o)),up(tC,this).set([b,y,l,c,d,u],6),!this.isEmpty();up(tC,this).set([b,y,l,c,d,u],6);return Math.abs(Math.atan2(y-c,b-l)-Math.atan2(x,v))<Math.PI/2?([l,c,d,u]=up(tC,this).subarray(2,6),up(eC,this).push(NaN,NaN,NaN,NaN,((l+d)/2-r)/a,((c+u)/2-i)/o),[l,c,b,y]=up(tC,this).subarray(14,18),up($k,this).push(NaN,NaN,NaN,NaN,((b+l)/2-r)/a,((y+c)/2-i)/o),!0):([b,y,l,c,d,u]=up(tC,this).subarray(0,6),up(eC,this).push(((b+5*l)/6-r)/a,((y+5*c)/6-i)/o,((5*l+d)/6-r)/a,((5*c+u)/6-i)/o,((l+d)/2-r)/a,((c+u)/2-i)/o),[d,u,l,c,b,y]=up(tC,this).subarray(12,18),up($k,this).push(((b+5*l)/6-r)/a,((y+5*c)/6-i)/o,((5*l+d)/6-r)/a,((5*c+u)/6-i)/o,((l+d)/2-r)/a,((c+u)/2-i)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=up(eC,this),t=up($k,this);if(isNaN(up(tC,this)[6])&&!this.isEmpty())return cp(cC,this,hC).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push("L".concat(e[s+4]," ").concat(e[s+5])):n.push("C".concat(e[s]," ").concat(e[s+1]," ").concat(e[s+2]," ").concat(e[s+3]," ").concat(e[s+4]," ").concat(e[s+5]));cp(cC,this,pC).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push("L".concat(t[s+4]," ").concat(t[s+5])):n.push("C".concat(t[s]," ").concat(t[s+1]," ").concat(t[s+2]," ").concat(t[s+3]," ").concat(t[s+4]," ").concat(t[s+5]));return cp(cC,this,mC).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,r,i){return new AC(e,t,n,s,r,i)}getOutlines(){var e,t;const n=up(eC,this),s=up($k,this),r=up(tC,this),[i,a,o,l]=up(Qk,this),c=new Float32Array((null!==(e=null===(t=up(lC,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,m=c.length-2;h<m;h+=2)c[h]=(up(lC,this)[h]-i)/o,c[h+1]=(up(lC,this)[h+1]-a)/l;if(c[c.length-2]=(up(nC,this)-i)/o,c[c.length-1]=(up(sC,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return cp(cC,this,fC).call(this,c);const d=new Float32Array(up(eC,this).length+24+up($k,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=cp(cC,this,vC).call(this,d,u);for(let h=s.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(s[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=s[h+e],d[u+1]=s[h+e+1],u+=2);return cp(cC,this,gC).call(this,d,u),this.newFreeDrawOutline(d,c,up(Qk,this),up(aC,this),up(Jk,this),up(Zk,this))}}function uC(){const e=up(tC,this).subarray(4,6),t=up(tC,this).subarray(16,18),[n,s,r,i]=up(Qk,this);return[(up(nC,this)+(e[0]-t[0])/2-n)/r,(up(sC,this)+(e[1]-t[1])/2-s)/i,(up(nC,this)+(t[0]-e[0])/2-n)/r,(up(sC,this)+(t[1]-e[1])/2-s)/i]}function hC(){const[e,t,n,s]=up(Qk,this),[r,i,a,o]=cp(cC,this,uC).call(this);return"M".concat((up(tC,this)[2]-e)/n," ").concat((up(tC,this)[3]-t)/s," L").concat((up(tC,this)[4]-e)/n," ").concat((up(tC,this)[5]-t)/s," L").concat(r," ").concat(i," L").concat(a," ").concat(o," L").concat((up(tC,this)[16]-e)/n," ").concat((up(tC,this)[17]-t)/s," L").concat((up(tC,this)[14]-e)/n," ").concat((up(tC,this)[15]-t)/s," Z")}function mC(e){const t=up($k,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function pC(e){const[t,n,s,r]=up(Qk,this),i=up(tC,this).subarray(4,6),a=up(tC,this).subarray(16,18),[o,l,c,d]=cp(cC,this,uC).call(this);e.push("L".concat((i[0]-t)/s," ").concat((i[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((a[0]-t)/s," ").concat((a[1]-n)/r))}function fC(e){const t=up(tC,this),[n,s,r,i]=up(Qk,this),[a,o,l,c]=cp(cC,this,uC).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-s)/i,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-s)/i,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-s)/i,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-s)/i],0),this.newFreeDrawOutline(d,e,up(Qk,this),up(aC,this),up(Jk,this),up(Zk,this))}function gC(e,t){const n=up($k,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function vC(e,t){const n=up(tC,this).subarray(4,6),s=up(tC,this).subarray(16,18),[r,i,a,o]=up(Qk,this),[l,c,d,u]=cp(cC,this,uC).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-i)/o],t),t+24}var xC={_:8},bC={_:xC._+2},yC=new WeakMap,wC=new WeakMap,jC=new WeakMap,_C=new WeakMap,NC=new WeakMap,kC=new WeakMap,CC=new WeakMap,SC=new WeakSet;class AC extends Yk{constructor(e,t,n,s,r,i){super(),op(this,SC),lp(this,yC,void 0),lp(this,wC,new Float32Array(4)),lp(this,jC,void 0),lp(this,_C,void 0),lp(this,NC,void 0),lp(this,kC,void 0),lp(this,CC,void 0),hp(CC,this,e),hp(NC,this,t),hp(yC,this,n),hp(kC,this,s),hp(jC,this,r),hp(_C,this,i),this.lastPoint=[NaN,NaN],cp(SC,this,EC).call(this,i);const[a,o,l,c]=up(wC,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-a)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-a)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(up(CC,this)[4]," ").concat(up(CC,this)[5])];for(let t=6,n=up(CC,this).length;t<n;t+=6)isNaN(up(CC,this)[t])?e.push("L".concat(up(CC,this)[t+4]," ").concat(up(CC,this)[t+5])):e.push("C".concat(up(CC,this)[t]," ").concat(up(CC,this)[t+1]," ").concat(up(CC,this)[t+2]," ").concat(up(CC,this)[t+3]," ").concat(up(CC,this)[t+4]," ").concat(up(CC,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,s,r,i]=e;const a=r-n,o=i-s;let l,c;switch(t){case 0:l=Yk._rescale(up(CC,this),n,i,a,-o),c=Yk._rescale(up(NC,this),n,i,a,-o);break;case 90:l=Yk._rescaleAndSwap(up(CC,this),n,s,a,o),c=Yk._rescaleAndSwap(up(NC,this),n,s,a,o);break;case 180:l=Yk._rescale(up(CC,this),r,s,-a,o),c=Yk._rescale(up(NC,this),r,s,-a,o);break;case 270:l=Yk._rescaleAndSwap(up(CC,this),r,i,-a,-o),c=Yk._rescaleAndSwap(up(NC,this),r,i,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return up(wC,this)}newOutliner(e,t,n,s,r){return new dC(e,t,n,s,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,s,r,i]=up(wC,this),[a,o,l,c]=up(yC,this),d=r*l,u=i*c,h=n*l+a,m=s*c+o,p=this.newOutliner({x:up(NC,this)[0]*d+h,y:up(NC,this)[1]*u+m},up(yC,this),up(kC,this),e,up(_C,this),null!==t&&void 0!==t?t:up(jC,this));for(let f=2;f<up(NC,this).length;f+=2)p.add({x:up(NC,this)[f]*d+h,y:up(NC,this)[f+1]*u+m});return p.getOutlines()}}function EC(e){const t=up(CC,this);let n=t[4],s=t[5];const r=[n,s,n,s];let i=n,a=s;const o=e?Math.max:Math.min;for(let c=6,d=t.length;c<d;c+=6){const e=t[c+4],l=t[c+5];if(isNaN(t[c]))Tf.pointBoundingBox(e,l,r),a<l?(i=e,a=l):a===l&&(i=o(i,e));else{const e=[1/0,1/0,-1/0,-1/0];Tf.bezierBoundingBox(n,s,...t.slice(c,c+6),e),Tf.rectBoundingBox(...e,r),a<e[3]?(i=e[2],a=e[3]):a===e[3]&&(i=o(i,e[2]))}n=e,s=l}const l=up(wC,this);l[0]=r[0]-up(jC,this),l[1]=r[1]-up(jC,this),l[2]=r[2]-r[0]+2*up(jC,this),l[3]=r[3]-r[1]+2*up(jC,this),this.lastPoint=[i,a]}var TC=new WeakMap,PC=new WeakMap,MC=new WeakMap,LC=new WeakMap,RC=new WeakSet;class OC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];op(this,RC),lp(this,TC,void 0),lp(this,PC,void 0),lp(this,MC,[]),lp(this,LC,[]);const r=[1/0,1/0,-1/0,-1/0],i=10**-4;for(const{x:h,y:m,width:p,height:f}of e){const e=Math.floor((h-t)/i)*i,n=Math.ceil((h+p+t)/i)*i,s=Math.floor((m-t)/i)*i,a=Math.ceil((m+f+t)/i)*i,o=[e,s,a,!0],l=[n,s,a,!1];up(MC,this).push(o,l),Tf.rectBoundingBox(e,s,n,a,r)}const a=r[2]-r[0]+2*n,o=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n,d=up(MC,this).at(s?-1:-2),u=[d[0],d[2]];for(const h of up(MC,this)){const[e,t,n]=h;h[0]=(e-l)/a,h[1]=(t-c)/o,h[2]=(n-c)/o}hp(TC,this,new Float32Array([l,c,a,o])),hp(PC,this,u)}getOutlines(){up(MC,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of up(MC,this))t[3]?(e.push(...cp(RC,this,BC).call(this,t)),cp(RC,this,FC).call(this,t)):(cp(RC,this,zC).call(this,t),e.push(...cp(RC,this,BC).call(this,t)));return cp(RC,this,DC).call(this,e)}}function DC(e){const t=[],n=new Set;for(const i of e){const[e,n,s]=i;t.push([e,n,i],[e,s,i])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let i=0,a=t.length;i<a;i+=2){const e=t[i][2],s=t[i+1][2];e.push(s),s.push(e),n.add(e),n.add(s)}const s=[];let r;for(;n.size>0;){const e=n.values().next().value;let[t,i,a,o,l]=e;n.delete(e);let c=t,d=i;for(r=[t,a],s.push(r);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,i,a,o,l]=e,c!==t&&(r.push(c,d,t,d===i?i:a),c=t),d=d===i?a:i}r.push(c,d)}return new UC(s,up(TC,this),up(PC,this))}function IC(e){const t=up(LC,this);let n=0,s=t.length-1;for(;n<=s;){const r=n+s>>1,i=t[r][0];if(i===e)return r;i<e?n=r+1:s=r-1}return s+1}function FC(e){let[,t,n]=e;const s=cp(RC,this,IC).call(this,t);up(LC,this).splice(s,0,[t,n])}function zC(e){let[,t,n]=e;const s=cp(RC,this,IC).call(this,t);for(let r=s;r<up(LC,this).length;r++){const[e,s]=up(LC,this)[r];if(e!==t)break;if(e===t&&s===n)return void up(LC,this).splice(r,1)}for(let r=s-1;r>=0;r--){const[e,s]=up(LC,this)[r];if(e!==t)break;if(e===t&&s===n)return void up(LC,this).splice(r,1)}}function BC(e){const[t,n,s]=e,r=[[t,n,s]],i=cp(RC,this,IC).call(this,s);for(let a=0;a<i;a++){const[e,n]=up(LC,this)[a];for(let s=0,i=r.length;s<i;s++){const[,a,o]=r[s];if(!(n<=a||o<=e))if(a>=e)if(o>n)r[s][1]=n;else{if(1===i)return[];r.splice(s,1),s--,i--}else r[s][2]=e,o>n&&r.push([t,n,o])}}return r}var WC=new WeakMap,HC=new WeakMap;class UC extends Yk{constructor(e,t,n){super(),lp(this,WC,void 0),lp(this,HC,void 0),hp(HC,this,e),hp(WC,this,t),this.lastPoint=n}toSVGPath(){const e=[];for(const t of up(HC,this)){let[n,s]=t;e.push("M".concat(n," ").concat(s));for(let r=2;r<t.length;r+=2){const i=t[r],a=t[r+1];i===n?(e.push("V".concat(a)),s=a):a===s&&(e.push("H".concat(i)),n=i)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,s,r,i]=e;const a=[],o=r-n,l=i-s;for(const c of up(HC,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=i-c[t+1]*l;a.push(e)}return a}get box(){return up(WC,this)}get classNamesForOutlining(){return["highlightOutline"]}}class VC extends dC{newFreeDrawOutline(e,t,n,s,r,i){return new GC(e,t,n,s,r,i)}}class GC extends AC{newOutliner(e,t,n,s,r){return new VC(e,t,n,s,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var qC=new WeakMap,KC=new WeakMap,XC=new WeakMap,YC=new WeakMap,QC=new WeakMap,$C=new WeakMap,JC=new WeakMap,ZC=new WeakMap,eS=new WeakMap,tS=new WeakMap,nS=new WeakMap,sS=new WeakSet;class rS{static get _keyboardManager(){return xf(this,"_keyboardManager",new Hg([[["Escape","mac+Escape"],rS.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],rS.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],rS.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],rS.prototype._moveToPrevious],[["Home","mac+Home"],rS.prototype._moveToBeginning],[["End","mac+End"],rS.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:s=null}=e;op(this,sS),lp(this,qC,null),lp(this,KC,null),lp(this,XC,void 0),lp(this,YC,null),lp(this,QC,!1),lp(this,$C,!1),lp(this,JC,null),lp(this,ZC,void 0),lp(this,eS,null),lp(this,tS,null),lp(this,nS,void 0),n?(hp($C,this,!1),hp(nS,this,Hp.HIGHLIGHT_COLOR),hp(JC,this,n)):(hp($C,this,!0),hp(nS,this,Hp.HIGHLIGHT_DEFAULT_COLOR)),hp(tS,this,(null===n||void 0===n?void 0:n._uiManager)||s),hp(ZC,this,up(tS,this)._eventBus),hp(XC,this,(null===n||void 0===n?void 0:n.color)||(null===(t=up(tS,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98"),uS._||(uS._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=hp(qC,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=up(tS,this)._signal;e.addEventListener("click",cp(sS,this,lS).bind(this),{signal:t}),e.addEventListener("keydown",cp(sS,this,oS).bind(this),{signal:t});const n=hp(KC,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=up(XC,this),e.append(n),e}renderMainDropdown(){const e=hp(YC,this,cp(sS,this,iS).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===up(qC,this))return void cp(sS,this,lS).call(this,e);const t=e.target.getAttribute("data-color");t&&cp(sS,this,aS).call(this,t,e)}_moveToNext(e){var t,n;dp(sS,this,dS)?e.target!==up(qC,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=up(YC,this).firstChild)||void 0===n||n.focus():cp(sS,this,lS).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=up(YC,this))||void 0===t?void 0:t.firstChild)&&e.target!==up(qC,this)?(dp(sS,this,dS)||cp(sS,this,lS).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):dp(sS,this,dS)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;dp(sS,this,dS)?null===(t=up(YC,this).firstChild)||void 0===t||t.focus():cp(sS,this,lS).call(this,e)}_moveToEnd(e){var t;dp(sS,this,dS)?null===(t=up(YC,this).lastChild)||void 0===t||t.focus():cp(sS,this,lS).call(this,e)}hideDropdown(){var e,t;null===(e=up(YC,this))||void 0===e||e.classList.add("hidden"),null===(t=up(eS,this))||void 0===t||t.abort(),hp(eS,this,null)}_hideDropdownFromKeyboard(){var e;up($C,this)||(dp(sS,this,dS)?(this.hideDropdown(),up(qC,this).focus({preventScroll:!0,focusVisible:up(QC,this)})):null===(e=up(JC,this))||void 0===e||e.unselect())}updateColor(e){if(up(KC,this)&&(up(KC,this).style.backgroundColor=e),!up(YC,this))return;const t=up(tS,this).highlightColors.values();for(const n of up(YC,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=up(qC,this))||void 0===e||e.remove(),hp(qC,this,null),hp(KC,this,null),null===(t=up(YC,this))||void 0===t||t.remove(),hp(YC,this,null)}}function iS(){const e=document.createElement("div"),t=up(tS,this)._signal;e.addEventListener("contextmenu",Xf,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of up(tS,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",uS._[n]);const i=document.createElement("span");r.append(i),i.className="swatch",i.style.backgroundColor=s,r.setAttribute("aria-selected",s===up(XC,this)),r.addEventListener("click",cp(sS,this,aS).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",cp(sS,this,oS).bind(this),{signal:t}),e}function aS(e,t){t.stopPropagation(),up(ZC,this).dispatch("switchannotationeditorparams",{source:this,type:up(nS,this),value:e})}function oS(e){Np._keyboardManager.exec(this,e)}function lS(e){if(dp(sS,this,dS))return void this.hideDropdown();if(hp(QC,this,0===e.detail),up(eS,this)||(hp(eS,this,new AbortController),window.addEventListener("pointerdown",cp(sS,this,cS).bind(this),{signal:up(tS,this).combinedSignal(up(eS,this))})),up(YC,this))return void up(YC,this).classList.remove("hidden");const t=hp(YC,this,cp(sS,this,iS).call(this));up(qC,this).append(t)}function cS(e){var t;null!==(t=up(YC,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function dS(e){return up(YC,e)&&!up(YC,e).classList.contains("hidden")}Np=rS;var uS={_:null},hS=new WeakMap,mS=new WeakMap,pS=new WeakMap,fS=new WeakMap,gS=new WeakMap,vS=new WeakMap,xS=new WeakMap,bS=new WeakMap,yS=new WeakMap,wS=new WeakMap,jS=new WeakMap,_S=new WeakMap,NS=new WeakMap,kS=new WeakMap,CS=new WeakMap,SS=new WeakMap,AS=new WeakMap,ES=new WeakMap,TS=new WeakSet;class PS extends cb{static get _keyboardManager(){const e=PS.prototype;return xf(this,"_keyboardManager",new Hg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(Pe(Pe({},e),{},{name:"highlightEditor"})),op(this,TS),lp(this,hS,null),lp(this,mS,0),lp(this,pS,void 0),lp(this,fS,null),lp(this,gS,null),lp(this,vS,null),lp(this,xS,null),lp(this,bS,0),lp(this,yS,null),lp(this,wS,null),lp(this,jS,null),lp(this,_S,!1),lp(this,NS,null),lp(this,kS,void 0),lp(this,CS,null),lp(this,SS,""),lp(this,AS,void 0),lp(this,ES,""),this.color=e.color||PS._defaultColor,hp(AS,this,e.thickness||PS._defaultThickness),hp(kS,this,e.opacity||PS._defaultOpacity),hp(pS,this,e.boxes||null),hp(ES,this,e.methodOfCreation||""),hp(SS,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(hp(_S,this,!0),cp(TS,this,LS).call(this,e),cp(TS,this,FS).call(this)):up(pS,this)&&(hp(hS,this,e.anchorNode),hp(mS,this,e.anchorOffset),hp(xS,this,e.focusNode),hp(bS,this,e.focusOffset),cp(TS,this,MS).call(this),cp(TS,this,FS).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:up(_S,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:up(AS,this),methodOfCreation:up(ES,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;cb.initialize(e,t),PS._defaultColor||(PS._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case Hp.HIGHLIGHT_DEFAULT_COLOR:PS._defaultColor=t;break;case Hp.HIGHLIGHT_THICKNESS:PS._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return up(NS,this)}updateParams(e,t){switch(e){case Hp.HIGHLIGHT_COLOR:cp(TS,this,RS).call(this,t);break;case Hp.HIGHLIGHT_THICKNESS:cp(TS,this,OS).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Hp.HIGHLIGHT_DEFAULT_COLOR,PS._defaultColor],[Hp.HIGHLIGHT_THICKNESS,PS._defaultThickness]]}get propertiesToUpdate(){return[[Hp.HIGHLIGHT_COLOR,this.color||PS._defaultColor],[Hp.HIGHLIGHT_THICKNESS,up(AS,this)||PS._defaultThickness],[Hp.HIGHLIGHT_FREE,up(_S,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(hp(gS,this,new rS({editor:this})),e.addColorPicker(up(gS,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(cp(TS,this,HS).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,cp(TS,this,HS).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){cp(TS,this,IS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(cp(TS,this,FS).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)cp(TS,this,IS).call(this);else if(e){var n;cp(TS,this,FS).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;up(_S,this)?(e=(e-this.rotation+360)%360,n=zS.call(PS,up(wS,this).box,e)):n=zS.call(PS,[this.x,this.y,this.width,this.height],e),t.updateProperties(up(jS,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(up(CS,this),{bbox:zS.call(PS,up(vS,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();up(SS,this)&&(e.setAttribute("aria-label",up(SS,this)),e.setAttribute("role","mark")),up(_S,this)?e.classList.add("free"):this.div.addEventListener("keydown",cp(TS,this,BS).bind(this),{signal:this._uiManager._signal});const t=hp(yS,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=up(fS,this);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),Sg(this,up(yS,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(up(CS,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(up(CS,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:cp(TS,this,WS).call(this,!0);break;case 1:case 3:cp(TS,this,WS).call(this,!1)}}select(){var e;super.select(),up(CS,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(up(CS,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),up(CS,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(up(CS,this),{rootClass:{selected:!1}}),up(_S,this)||cp(TS,this,WS).call(this,!1))}get _mustFixPosition(){return!up(_S,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(up(jS,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(up(CS,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:s,x:r,y:i}=n;const{x:a,y:o,width:l,height:c}=s.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),cp(PS,this,qS).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",Yf,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Xf,{signal:u}),s.addEventListener("pointermove",cp(PS,this,GS).bind(this,e),{signal:u}),this._freeHighlight=new VC({x:r,y:i},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let s=null;if(e instanceof fk){const{data:{quadPoints:t,rect:n,rotation:r,id:i,color:a,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=e;s=e={annotationType:Wp.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:r,id:i,deleted:!1,popupRef:l}}else if(e instanceof mk){const{data:{inkLists:t,rect:n,rotation:r,id:i,color:a,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=e;s=e={annotationType:Wp.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:r,id:i,deleted:!1,popupRef:l}}const{color:r,quadPoints:i,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=Tf.makeHexColor(...r),hp(kS,l,o||1),a&&hp(AS,l,e.thickness),l.annotationElementId=e.id||null,l._initialData=s;const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(i){const e=hp(pS,l,[]);for(let t=0;t<i.length;t+=8)e.push({x:(i[t]-u)/c,y:1-(i[t+1]-h)/d,width:(i[t+2]-i[t])/c,height:(i[t+1]-i[t+5])/d});cp(TS,l,MS).call(l),cp(TS,l,FS).call(l),l.rotate(l.rotation)}else if(a){hp(_S,l,!0);const e=a[0],n={x:e[0]-u,y:d-(e[1]-h)},s=new VC(n,[0,0,c,d],1,up(AS,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),s.add(n);const{id:r,clipPathId:i}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:s.toSVGPath()}},!0,!0);cp(TS,l,LS).call(l,{highlightOutlines:s.getOutlines(),highlightId:r,clipPathId:i}),cp(TS,l,FS).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=cb._colorManager.convert(this.color),s={annotationType:Wp.HIGHLIGHT,color:n,opacity:up(kS,this),thickness:up(AS,this),quadPoints:cp(TS,this,US).call(this),outlines:cp(TS,this,VS).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:cp(TS,this,HS).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!cp(TS,this,KS).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function MS(){const e=new OC(up(pS,this),.001);hp(wS,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=up(wS,this).box;const t=new OC(up(pS,this),.0025,.001,"ltr"===this._uiManager.direction);hp(vS,this,t.getOutlines());const{lastPoint:n}=up(vS,this);hp(NS,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function LS(e){let{highlightOutlines:t,highlightId:n,clipPathId:s}=e;hp(wS,this,t);if(hp(vS,this,t.getNewOutline(up(AS,this)/2+1.5,.0025)),n>=0)hp(jS,this,n),hp(fS,this,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),hp(CS,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:up(vS,this).box,path:{d:up(vS,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(up(jS,this),{bbox:zS.call(kp,up(wS,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(up(CS,this),{bbox:zS.call(kp,up(vS,this).box,e),path:{d:up(vS,this).toSVGPath()}})}const[r,i,a,o]=t.box;switch(this.rotation){case 0:this.x=r,this.y=i,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=i,this.y=1-r,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-r,this.y=1-i,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-i,this.y=r,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=up(vS,this);hp(NS,this,[(l[0]-r)/a,(l[1]-i)/o])}function RS(e){const t=(e,t)=>{var n,s;this.color=e,hp(kS,this,t),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(up(jS,this),{root:{fill:e,"fill-opacity":t}}),null===(s=up(gS,this))||void 0===s||s.updateColor(e)},n=this.color,s=up(kS,this);this.addCommands({cmd:t.bind(this,e,kp._defaultOpacity),undo:t.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hp.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function OS(e){const t=up(AS,this),n=e=>{hp(AS,this,e),cp(TS,this,DS).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Hp.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function DS(e){if(!up(_S,this))return;cp(TS,this,LS).call(this,{highlightOutlines:up(wS,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function IS(){null!==up(jS,this)&&this.parent&&(this.parent.drawLayer.remove(up(jS,this)),hp(jS,this,null),this.parent.drawLayer.remove(up(CS,this)),hp(CS,this,null))}function FS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===up(jS,this)&&(({id:ip(hp,[jS,this])._,clipPathId:ip(hp,[fS,this])._}=e.drawLayer.draw({bbox:up(wS,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":up(kS,this)},rootClass:{highlight:!0,free:up(_S,this)},path:{d:up(wS,this).toSVGPath()}},!1,!0)),hp(CS,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:up(_S,this)},bbox:up(vS,this).box,path:{d:up(vS,this).toSVGPath()}},up(_S,this))),up(yS,this)&&(up(yS,this).style.clipPath=up(fS,this)))}function zS(e,t){let[n,s,r,i]=e;switch(t){case 90:return[1-s-i,n,i,r];case 180:return[1-n-r,1-s-i,r,i];case 270:return[s,1-n-r,i,r]}return[n,s,r,i]}function BS(e){kp._keyboardManager.exec(this,e)}function WS(e){if(!up(hS,this))return;const t=window.getSelection();e?t.setPosition(up(hS,this),up(mS,this)):t.setPosition(up(xS,this),up(bS,this))}function HS(){return up(_S,this)?this.rotation:0}function US(){if(up(_S,this))return null;const[e,t]=this.pageDimensions,[n,s]=this.pageTranslation,r=up(pS,this),i=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:d}of r){const r=o*e+n,u=(1-l)*t+s;i[a]=i[a+4]=r,i[a+1]=i[a+3]=u,i[a+2]=i[a+6]=r+c*e,i[a+5]=i[a+7]=u-d*t,a+=8}return i}function VS(e){return up(wS,this).serialize(e,cp(TS,this,HS).call(this))}function GS(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function qS(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function KS(e){const{color:t}=this._initialData;return e.color.some((e,n)=>e!==t[n])}kp=PS,Ee(PS,"_defaultColor",null),Ee(PS,"_defaultOpacity",1),Ee(PS,"_defaultThickness",12),Ee(PS,"_type","highlight"),Ee(PS,"_editorType",Wp.HIGHLIGHT),Ee(PS,"_freeHighlightId",-1),Ee(PS,"_freeHighlight",null),Ee(PS,"_freeHighlightClipId","");var XS=new WeakMap;class YS{constructor(){lp(this,XS,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){up(XS,this)[e]=t}toSVGProperties(){const e=up(XS,this);return hp(XS,this,Object.create(null)),{root:e}}reset(){hp(XS,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){pf("Not implemented")}}var QS=new WeakMap,$S=new WeakMap,JS=new WeakSet;class ZS extends cb{constructor(e){super(e),op(this,JS),lp(this,QS,null),lp(this,$S,void 0),Ee(this,"_drawId",null),hp($S,this,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(cp(JS,this,eA).call(this,e),cp(JS,this,sA).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[s,r]of Object.entries(t))n.has(s)?Object.assign(e[s],r):e[s]=r;return e}static getDefaultDrawingOptions(e){pf("Not implemented")}static get typesMap(){pf("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(lA._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)e.push([n,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,s]of this.constructor.typesMap)e.push([n,t[s]]);return e}_updateProperty(e,t,n){const s=this._drawingOptions,r=s[t],i=e=>{var n;s.updateProperty(t,e);const r=up(QS,this).updateProperty(t,e);r&&cp(JS,this,aA).call(this,r),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,ZS._mergeSVGProperties(up(QS,this).getPathResizingSVGProperties(cp(JS,this,iA).call(this)),{bbox:cp(JS,this,oA).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,ZS._mergeSVGProperties(up(QS,this).getPathResizedSVGProperties(cp(JS,this,iA).call(this)),{bbox:cp(JS,this,oA).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:cp(JS,this,oA).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,ZS._mergeSVGProperties(up(QS,this).getPathTranslatedSVGProperties(cp(JS,this,iA).call(this),this.parentDimensions),{bbox:cp(JS,this,oA).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,up($S,this)&&(hp($S,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){cp(JS,this,nA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(cp(JS,this,sA).call(this),cp(JS,this,aA).call(this,up(QS,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),cp(JS,this,nA).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),cp(JS,this,sA).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ZS._mergeSVGProperties({bbox:cp(JS,this,oA).call(this)},up(QS,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&cp(JS,this,aA).call(this,up(QS,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,s,r){pf("Not implemented")}static startDrawing(e,t,n,s){var r,i;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=s;if(hA._&&hA._!==d)return;const{viewport:{rotation:u}}=e,{width:h,height:m}=a.getBoundingClientRect(),p=cA._=new AbortController,f=e.combinedSignal(p);uA._||(uA._=c),null!==(r=hA._)&&void 0!==r||(hA._=d),window.addEventListener("pointerup",e=>{var t;uA._===e.pointerId?this._endDraw(e):null===(t=mA._)||void 0===t||t.delete(e.pointerId)},{signal:f}),window.addEventListener("pointercancel",e=>{var t;uA._===e.pointerId?this._currentParent.endDrawingSession():null===(t=mA._)||void 0===t||t.delete(e.pointerId)},{signal:f}),window.addEventListener("pointerdown",e=>{hA._===e.pointerType&&((mA._||(mA._=new Set)).add(e.pointerId),lA._.isCancellable()&&(lA._.removeLastElement(),lA._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Xf,{signal:f}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),a.addEventListener("touchmove",e=>{e.timeStamp===pA._&&Yf(e)},{signal:f}),e.toggleDrawing(),null===(i=t._editorUndoBar)||void 0===i||i.hide(),lA._?e.drawLayer.updateProperties(this._currentDrawId,lA._.startNew(o,l,h,m,u)):(t.updateUIForDefaultProperties(this),lA._=this.createDrawerInstance(o,l,h,m,u),dA._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(dA._.toSVGProperties(),lA._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(pA._=-1,!lA._)return;const{offsetX:n,offsetY:s,pointerId:r}=e;uA._===r&&((null===(t=mA._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,lA._.add(n,s)),pA._=e.timeStamp,Yf(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,lA._=null,dA._=null,hA._=null,pA._=NaN),cA._&&(cA._.abort(),cA._=null,uA._=NaN,mA._=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,lA._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=lA._,n=this._currentDrawId,s=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(s))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:Hp.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Hp.DRAW_STEP),!lA._.isEmpty()){const{pageDimensions:[n,s],scale:r}=t,i=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:lA._.getOutlines(n*r,s*r,r,this._INNER_MARGIN),drawingOptions:dA._,mustBeCommitted:!e});return this._cleanup(!0),i}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,s,r,i){pf("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:a}}=t.viewport,o=this.deserializeDraw(i,a,s,r,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),cp(JS,l,eA).call(l,{drawOutlines:o}),cp(JS,l,sA).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[s,r]=this.pageDimensions;return up(QS,this).serialize([t,n,s,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function eA(e){let{drawOutlines:t,drawId:n,drawingOptions:s}=e;hp(QS,this,t),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=cp(JS,this,tA).call(this,t,this.parent),cp(JS,this,aA).call(this,t.box)}function tA(e,t){const{id:n}=t.drawLayer.draw(Cp._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function nA(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function sA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=cp(JS,this,tA).call(this,up(QS,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function rA(e){let[t,n,s,r]=e;const{parentDimensions:[i,a],rotation:o}=this;switch(o){case 90:return[n,1-t,s*(a/i),r*(i/a)];case 180:return[1-t,1-n,s,r];case 270:return[1-n,t,s*(a/i),r*(i/a)];default:return[t,n,s,r]}}function iA(){const{x:e,y:t,width:n,height:s,parentDimensions:[r,i],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(r/i),s*(i/r)];case 180:return[1-e,1-t,n,s];case 270:return[t,1-e,n*(r/i),s*(i/r)];default:return[e,t,n,s]}}function aA(e){if([this.x,this.y,this.width,this.height]=cp(JS,this,rA).call(this,e),this.div){this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function oA(){const{x:e,y:t,width:n,height:s,rotation:r,parentRotation:i,parentDimensions:[a,o]}=this;switch((4*r+i)/90){case 1:return[1-t-s,e,s,n];case 2:return[1-e-n,1-t-s,n,s];case 3:return[t,1-e-n,s,n];case 4:return[e,t-n*(a/o),s*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),s*(o/a)];case 6:return[1-e-s*(o/a),1-t,s*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-s*(o/a),n*(a/o),s*(o/a)];case 8:return[e-n,t-s,n,s];case 9:return[1-t,e-n,s,n];case 10:return[1-e,1-t,n,s];case 11:return[t-s,1-e,s,n];case 12:return[e-s*(o/a),t,s*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-s*(o/a),n*(a/o),s*(o/a)];case 14:return[1-e,1-t-n*(a/o),s*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),s*(o/a)];default:return[e,t,n,s]}}Cp=ZS,Ee(ZS,"_currentDrawId",-1),Ee(ZS,"_currentParent",null);var lA={_:null},cA={_:null},dA={_:null},uA={_:NaN},hA={_:null},mA={_:null},pA={_:NaN};Ee(ZS,"_INNER_MARGIN",3);var fA=new WeakMap,gA=new WeakMap,vA=new WeakMap,xA=new WeakMap,bA=new WeakMap,yA=new WeakMap,wA=new WeakMap,jA=new WeakMap,_A=new WeakMap,NA=new WeakMap,kA=new WeakMap,CA=new WeakSet;class SA{constructor(e,t,n,s,r,i){op(this,CA),lp(this,fA,new Float64Array(6)),lp(this,gA,void 0),lp(this,vA,void 0),lp(this,xA,void 0),lp(this,bA,void 0),lp(this,yA,void 0),lp(this,wA,""),lp(this,jA,0),lp(this,_A,new zA),lp(this,NA,void 0),lp(this,kA,void 0),hp(NA,this,n),hp(kA,this,s),hp(xA,this,r),hp(bA,this,i),[e,t]=cp(CA,this,AA).call(this,e,t);const a=hp(gA,this,[NaN,NaN,NaN,NaN,e,t]);hp(yA,this,[e,t]),hp(vA,this,[{line:a,points:up(yA,this)}]),up(fA,this).set(a,0)}updateProperty(e,t){"stroke-width"===e&&hp(bA,this,t)}isEmpty(){return!up(vA,this)||0===up(vA,this).length}isCancellable(){return up(yA,this).length<=10}add(e,t){[e,t]=cp(CA,this,AA).call(this,e,t);const[n,s,r,i]=up(fA,this).subarray(2,6),a=e-r,o=t-i;return Math.hypot(up(NA,this)*a,up(kA,this)*o)<=2?null:(up(yA,this).push(e,t),isNaN(n)?(up(fA,this).set([r,i,e,t],2),up(gA,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(up(fA,this)[0])&&up(gA,this).splice(6,6),up(fA,this).set([n,s,r,i,e,t],0),up(gA,this).push(...Yk.createBezierPoints(n,s,r,i,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===up(yA,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,r){hp(NA,this,n),hp(kA,this,s),hp(xA,this,r),[e,t]=cp(CA,this,AA).call(this,e,t);const i=hp(gA,this,[NaN,NaN,NaN,NaN,e,t]);hp(yA,this,[e,t]);const a=up(vA,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),up(vA,this).push({line:i,points:up(yA,this)}),up(fA,this).set(i,0),hp(jA,this,0),this.toSVGPath(),null}getLastElement(){return up(vA,this).at(-1)}setLastElement(e){return up(vA,this)?(up(vA,this).push(e),hp(gA,this,e.line),hp(yA,this,e.points),hp(jA,this,0),{path:{d:this.toSVGPath()}}):up(_A,this).setLastElement(e)}removeLastElement(){if(!up(vA,this))return up(_A,this).removeLastElement();up(vA,this).pop(),hp(wA,this,"");for(let e=0,t=up(vA,this).length;e<t;e++){const{line:t,points:n}=up(vA,this)[e];hp(gA,this,t),hp(yA,this,n),hp(jA,this,0),this.toSVGPath()}return{path:{d:up(wA,this)}}}toSVGPath(){const e=Yk.svgRound(up(gA,this)[4]),t=Yk.svgRound(up(gA,this)[5]);if(2===up(yA,this).length)return hp(wA,this,"".concat(up(wA,this)," M ").concat(e," ").concat(t," Z")),up(wA,this);if(up(yA,this).length<=6){const n=up(wA,this).lastIndexOf("M");hp(wA,this,"".concat(up(wA,this).slice(0,n)," M ").concat(e," ").concat(t)),hp(jA,this,6)}if(4===up(yA,this).length){const e=Yk.svgRound(up(gA,this)[10]),t=Yk.svgRound(up(gA,this)[11]);return hp(wA,this,"".concat(up(wA,this)," L ").concat(e," ").concat(t)),hp(jA,this,12),up(wA,this)}const n=[];0===up(jA,this)&&(n.push("M ".concat(e," ").concat(t)),hp(jA,this,6));for(let s=up(jA,this),r=up(gA,this).length;s<r;s+=6){const[e,t,r,i,a,o]=up(gA,this).slice(s,s+6).map(Yk.svgRound);n.push("C".concat(e," ").concat(t," ").concat(r," ").concat(i," ").concat(a," ").concat(o))}return hp(wA,this,up(wA,this)+n.join(" ")),hp(jA,this,up(gA,this).length),up(wA,this)}getOutlines(e,t,n,s){const r=up(vA,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),up(_A,this).build(up(vA,this),e,t,n,up(xA,this),up(bA,this),s),hp(fA,this,null),hp(gA,this,null),hp(vA,this,null),hp(wA,this,null),up(_A,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function AA(e,t){return Yk._normalizePoint(e,t,up(NA,this),up(kA,this),up(xA,this))}var EA=new WeakMap,TA=new WeakMap,PA=new WeakMap,MA=new WeakMap,LA=new WeakMap,RA=new WeakMap,OA=new WeakMap,DA=new WeakMap,IA=new WeakMap,FA=new WeakSet;class zA extends Yk{constructor(){super(...arguments),op(this,FA),lp(this,EA,void 0),lp(this,TA,0),lp(this,PA,void 0),lp(this,MA,void 0),lp(this,LA,void 0),lp(this,RA,void 0),lp(this,OA,void 0),lp(this,DA,void 0),lp(this,IA,void 0)}build(e,t,n,s,r,i,a){hp(LA,this,t),hp(RA,this,n),hp(OA,this,s),hp(DA,this,r),hp(IA,this,i),hp(PA,this,null!==a&&void 0!==a?a:0),hp(MA,this,e),cp(FA,this,HA).call(this)}get thickness(){return up(IA,this)}setLastElement(e){return up(MA,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return up(MA,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of up(MA,this))if(e.push("M".concat(Yk.svgRound(t[4])," ").concat(Yk.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(Yk.svgRound(t[10])," ").concat(Yk.svgRound(t[11])));else for(let n=6,s=t.length;n<s;n+=6){const[s,r,i,a,o,l]=t.subarray(n,n+6).map(Yk.svgRound);e.push("C".concat(s," ").concat(r," ").concat(i," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,s,r,i]=e;const a=[],o=[],[l,c,d,u]=cp(FA,this,WA).call(this);let h,m,p,f,g,v,x,b,y;switch(up(DA,this)){case 0:y=Yk._rescale,h=n,m=s+i,p=r,f=-i,g=n+l*r,v=s+(1-c-u)*i,x=n+(l+d)*r,b=s+(1-c)*i;break;case 90:y=Yk._rescaleAndSwap,h=n,m=s,p=r,f=i,g=n+c*r,v=s+l*i,x=n+(c+u)*r,b=s+(l+d)*i;break;case 180:y=Yk._rescale,h=n+r,m=s,p=-r,f=i,g=n+(1-l-d)*r,v=s+c*i,x=n+(1-l)*r,b=s+(c+u)*i;break;case 270:y=Yk._rescaleAndSwap,h=n+r,m=s+i,p=-r,f=-i,g=n+(1-c-u)*r,v=s+(1-l-d)*i,x=n+(1-c)*r,b=s+(1-l)*i}for(const{line:w,points:j}of up(MA,this))a.push(y(w,h,m,p,f,t?new Array(w.length):null)),o.push(y(j,h,m,p,f,t?new Array(j.length):null));return{lines:a,points:o,rect:[g,v,x,b]}}static deserialize(e,t,n,s,r,i){let{paths:{lines:a,points:o},rotation:l,thickness:c}=i;const d=[];let u,h,m,p,f;switch(l){case 0:f=Yk._rescale,u=-e/n,h=t/s+1,m=1/n,p=-1/s;break;case 90:f=Yk._rescaleAndSwap,u=-t/s,h=-e/n,m=1/s,p=1/n;break;case 180:f=Yk._rescale,u=e/n+1,h=-t/s,m=-1/n,p=1/s;break;case 270:f=Yk._rescaleAndSwap,u=t/s+1,h=e/n+1,m=-1/s,p=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[s,r,i,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,s,r],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(Yk.createBezierPoints(s,r,i,o,t,l),3*(a-2)),[s,r,i,o]=[i,o,t,l]}}}for(let v=0,x=a.length;v<x;v++)d.push({line:f(a[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,m,p),points:f(o[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,m,p)});const g=new this.prototype.constructor;return g.build(d,n,s,1,l,c,r),g}get box(){return up(EA,this)}updateProperty(e,t){return"stroke-width"===e?cp(FA,this,UA).call(this,t):null}updateParentDimensions(e,t){let[n,s]=e;const[r,i]=cp(FA,this,BA).call(this);hp(LA,this,n),hp(RA,this,s),hp(OA,this,t);const[a,o]=cp(FA,this,BA).call(this),l=a-r,c=o-i,d=up(EA,this);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return hp(TA,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return up(EA,this).map(Yk.svgRound).join(" ")}get defaultProperties(){const[e,t]=up(EA,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Yk.svgRound(e)," ").concat(Yk.svgRound(t))}}}get rotationTransform(){const[,,e,t]=up(EA,this);let n=0,s=0,r=0,i=0,a=0,o=0;switch(up(TA,this)){case 90:s=t/e,r=-e/t,a=e;break;case 180:n=-1,i=-1,a=e,o=t;break;case 270:s=-t/e,r=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(s," ").concat(r," ").concat(i," ").concat(Yk.svgRound(a)," ").concat(Yk.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,s,r]=e;const[i,a]=cp(FA,this,BA).call(this),[o,l,c,d]=up(EA,this);if(Math.abs(c-i)<=Yk.PRECISION||Math.abs(d-a)<=Yk.PRECISION){const e=t+s/2-(o+c/2),i=n+r/2-(l+d/2);return{path:{"transform-origin":"".concat(Yk.svgRound(t)," ").concat(Yk.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(i,")")}}}const u=(s-2*i)/(c-2*i),h=(r-2*a)/(d-2*a),m=c/s,p=d/r;return{path:{"transform-origin":"".concat(Yk.svgRound(o)," ").concat(Yk.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(m," ").concat(p,") ")+"translate(".concat(Yk.svgRound(i)," ").concat(Yk.svgRound(a),") scale(").concat(u," ").concat(h,") ")+"translate(".concat(Yk.svgRound(-i)," ").concat(Yk.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,s,r]=e;const[i,a]=cp(FA,this,BA).call(this),o=up(EA,this),[l,c,d,u]=o;if(o[0]=t,o[1]=n,o[2]=s,o[3]=r,Math.abs(d-i)<=Yk.PRECISION||Math.abs(u-a)<=Yk.PRECISION){const e=t+s/2-(l+d/2),i=n+r/2-(c+u/2);for(const{line:t,points:n}of up(MA,this))Yk._translate(t,e,i,t),Yk._translate(n,e,i,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Yk.svgRound(t)," ").concat(Yk.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(s-2*i)/(d-2*i),m=(r-2*a)/(u-2*a),p=-h*(l+i)+t+i,f=-m*(c+a)+n+a;if(1!==h||1!==m||0!==p||0!==f)for(const{line:g,points:v}of up(MA,this))Yk._rescale(g,p,f,h,m,g),Yk._rescale(v,p,f,h,m,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Yk.svgRound(t)," ").concat(Yk.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,s]=e;const[r,i]=t,a=up(EA,this),o=n-a[0],l=s-a[1];if(up(LA,this)===r&&up(RA,this)===i)for(const{line:c,points:d}of up(MA,this))Yk._translate(c,o,l,c),Yk._translate(d,o,l,d);else{const e=up(LA,this)/r,t=up(RA,this)/i;hp(LA,this,r),hp(RA,this,i);for(const{line:n,points:s}of up(MA,this))Yk._rescale(n,o,l,e,t,n),Yk._rescale(s,o,l,e,t,s);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Yk.svgRound(n)," ").concat(Yk.svgRound(s))}}}get defaultSVGProperties(){const e=up(EA,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Yk.svgRound(e[0])," ").concat(Yk.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function BA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:up(IA,this);const t=up(PA,this)+e/2*up(OA,this);return up(DA,this)%180===0?[t/up(LA,this),t/up(RA,this)]:[t/up(RA,this),t/up(LA,this)]}function WA(){const[e,t,n,s]=up(EA,this),[r,i]=cp(FA,this,BA).call(this,0);return[e+r,t+i,n-2*r,s-2*i]}function HA(){const e=hp(EA,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of up(MA,this)){if(s.length<=12){for(let t=4,n=s.length;t<n;t+=6)Tf.pointBoundingBox(s[t],s[t+1],e);continue}let t=s[4],n=s[5];for(let r=6,i=s.length;r<i;r+=6){const[i,a,o,l,c,d]=s.subarray(r,r+6);Tf.bezierBoundingBox(t,n,i,a,o,l,c,d,e),t=c,n=d}}const[t,n]=cp(FA,this,BA).call(this);e[0]=If(e[0]-t,0,1),e[1]=If(e[1]-n,0,1),e[2]=If(e[2]+t,0,1),e[3]=If(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function UA(e){const[t,n]=cp(FA,this,BA).call(this);hp(IA,this,e);const[s,r]=cp(FA,this,BA).call(this),[i,a]=[s-t,r-n],o=up(EA,this);return o[0]-=i,o[1]-=a,o[2]+=2*i,o[3]+=2*a,o}class VA extends YS{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:cb._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new VA(this._viewParameters);return e.updateAll(this),e}}var GA=new WeakSet;class qA extends ZS{constructor(e){super(Pe(Pe({},e),{},{name:"inkEditor"})),op(this,GA),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){cb.initialize(e,t),this._defaultDrawingOptions=new VA(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return xf(this,"typesMap",new Map([[Hp.INK_THICKNESS,"stroke-width"],[Hp.INK_COLOR,"stroke"],[Hp.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,s,r){return new SA(e,t,n,s,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,s,r,i){return zA.deserialize(e,t,n,s,r,i)}static async deserialize(e,t,n){let s=null;if(e instanceof mk){const{data:{inkLists:t,rect:n,rotation:r,id:i,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c},parent:{page:{pageNumber:d}}}=e;s=e={annotationType:Wp.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:d-1,rect:n.slice(0),rotation:r,id:i,deleted:!1,popupRef:c}}const r=await super.deserialize(e,t,n);return r.annotationElementId=e.id||null,r._initialData=s,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:s}=e;this._drawingOptions=qA.getDefaultDrawingOptions({stroke:Tf.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":i,"stroke-width":a}}=this,o={annotationType:Wp.INK,color:cb._colorManager.convert(r),opacity:i,thickness:a,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!cp(GA,this,KA).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}}function KA(e){const{color:t,thickness:n,opacity:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==s||e.pageIndex!==r}Ee(qA,"_type","ink"),Ee(qA,"_editorType",Wp.INK),Ee(qA,"_defaultDrawingOptions",null);class XA extends zA{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class YA{static extractContoursFromText(e,t,n,s,r,i){let{fontFamily:a,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const u=d.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:h,actualBoundingBoxRight:m,actualBoundingBoxAscent:p,actualBoundingBoxDescent:f,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:x}=d.measureText(e),b=1.5,y=Math.ceil(Math.max(Math.abs(h)+Math.abs(m)||0,x)*b),w=Math.ceil(Math.max(Math.abs(p)+Math.abs(f)||200,Math.abs(g)+Math.abs(v)||200)*b);c=new OffscreenCanvas(y,w),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=u,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,y,w),d.fillStyle="black",d.fillText(e,.5*y/2,1.5*w/2);const j=cp(YA,this,rE).call(this,d.getImageData(0,0,y,w).data),_=cp(YA,this,sE).call(this,j),N=cp(YA,this,iE).call(this,_),k=cp(YA,this,ZA).call(this,j,y,w,N);return this.processDrawnLines({lines:{curves:k,width:y,height:w},pageWidth:n,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,r){const[i,a,o]=cp(YA,this,aE).call(this,e),[l,c]=cp(YA,this,nE).call(this,i,a,o,Math.hypot(a,o)*cp(YA,this,oE)._.sigmaSFactor,cp(YA,this,oE)._.sigmaR,cp(YA,this,oE)._.kernelSize),d=cp(YA,this,iE).call(this,c),u=cp(YA,this,ZA).call(this,l,a,o,d);return this.processDrawnLines({lines:{curves:u,width:a,height:o},pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:s,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:o,areContours:l}=e;i%180!==0&&([s,r]=[r,s]);const{curves:c,width:d,height:u}=n,h=null!==(t=n.thickness)&&void 0!==t?t:0,m=[],p=Math.min(s/d,r/u),f=p/s,g=p/r,v=[];for(const{points:b}of c){const e=o?cp(YA,this,tE).call(this,b):b;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),s=new Float32Array(3*(2===t?2:t-2));if(m.push({line:s,points:n}),2===t){n[0]=e[0]*f,n[1]=e[1]*g,s.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,i,a,l]=e;r*=f,i*=g,a*=f,l*=g,n.set([r,i,a,l],0),s.set([NaN,NaN,NaN,NaN,r,i],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*f,c=n[o+1]=e[o+1]*g;s.set(Yk.createBezierPoints(r,i,a,l,t,c),3*(o-2)),[r,i,a,l]=[a,l,t,c]}}if(0===m.length)return null;const x=l?new XA:new zA;return x.build(m,s,r,1,i,l?0:h,a),{outline:x,newCurves:v,areContours:l,thickness:h,width:d,height:u}}static async compressSignature(e){let t,{outlines:n,areContours:s,thickness:r,width:i,height:a}=e,o=1/0,l=-1/0,c=0;for(const x of n){c+=x.length;for(let e=2,t=x.length;e<t;e++){const t=x[e]-x[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const d=n.length,u=8+3*d,h=new Uint32Array(u);let m=0;h[m++]=u*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*t.BYTES_PER_ELEMENT,h[m++]=0,h[m++]=i,h[m++]=a,h[m++]=s?0:1,h[m++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),h[m++]=d,h[m++]=t.BYTES_PER_ELEMENT;for(const x of n)h[m++]=x.length-2,h[m++]=x[0],h[m++]=x[1];const p=new CompressionStream("deflate-raw"),f=p.writable.getWriter();await f.ready,f.write(h);const g=t.prototype.constructor;for(const x of n){const e=new g(x.length-2);for(let t=2,n=x.length;t<n;t++)e[t-2]=x[t]-x[t-2];f.write(e)}f.close();const v=await new Response(p.readable).arrayBuffer();return Ff(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Sf(atob(a))),{readable:c,writable:d}=new DecompressionStream("deflate-raw"),u=d.getWriter();await u.ready,u.write(l).then(async()=>{await u.ready,await u.close()}).catch(()=>{});let h=null,m=0;var t,n=!1,s=!1;try{for(var r,i=function(e){var t,n,s,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,s=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(s&&null!=(t=e[s]))return new mp(t.call(e));n="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(r=await i.next()).done;n=!1){const e=r.value;h||(h=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),h.set(e,m),m+=e.length}}catch(o){s=!0,t=o}finally{try{n&&null!=i.return&&await i.return()}finally{if(s)throw t}}const p=new Uint32Array(h.buffer,0,h.length>>2),f=p[1];if(0!==f)throw new Error("Invalid version: ".concat(f));const g=p[2],v=p[3],x=0===p[4],b=p[5],y=p[6],w=p[7],j=[],_=(8+3*y)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(w){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(h.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(h.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(h.buffer,_)}m=0;for(let e=0;e<y;e++){const t=p[3*e+8],n=new Float32Array(t+2);j.push(n);for(let s=0;s<2;s++)n[s]=p[3*e+8+s+1];for(let e=0;e<t;e++)n[e+2]=n[e]+N[m++]}return{areContours:x,thickness:b,outlines:j,width:g,height:v}}catch(zP){return mf("decompressSignature: ".concat(zP)),null}var a}}function QA(e,t,n,s){return s-=t,0===(n-=e)?s>0?0:4:1===n?s+6:2-s}function $A(e,t,n,s,r,i,a){const o=cp(Sp,this,QA).call(this,n,s,r,i);for(let l=0;l<8;l++){const r=(-l+o-a+16)%8;if(0!==e[(n+cp(Sp,this,lE)._[2*r])*t+(s+cp(Sp,this,lE)._[2*r+1])])return r}return-1}function JA(e,t,n,s,r,i,a){const o=cp(Sp,this,QA).call(this,n,s,r,i);for(let l=0;l<8;l++){const r=(l+o+a+16)%8;if(0!==e[(n+cp(Sp,this,lE)._[2*r])*t+(s+cp(Sp,this,lE)._[2*r+1])])return r}return-1}function ZA(e,t,n,s){const r=e.length,i=new Int32Array(r);for(let c=0;c<r;c++)i[c]=e[c]<=s?1:0;for(let c=1;c<n-1;c++)i[c*t]=i[c*t+t-1]=0;for(let c=0;c<t;c++)i[c]=i[t*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,s=i[n];if(0===s)continue;let r=c,d=e;if(1===s&&0===i[n-1])o+=1,d-=1;else{if(!(s>=1&&0===i[n+1])){1!==s&&(a=Math.abs(s));continue}o+=1,d+=1,s>1&&(a=s)}const u=[e,c],h=d===e+1,m={isHole:h,points:u,id:o,parent:0};let p;l.push(m);for(const e of l)if(e.id===a){p=e;break}p?p.isHole?m.parent=h?p.parent:a:m.parent=h?a:p.parent:m.parent=h?a:0;const f=cp(Sp,this,$A).call(this,i,t,c,e,r,d,0);if(-1===f){i[n]=-o,1!==i[n]&&(a=Math.abs(i[n]));continue}let g=cp(Sp,this,lE)._[2*f],v=cp(Sp,this,lE)._[2*f+1];const x=c+g,b=e+v;r=x,d=b;let y=c,w=e;for(;;){const s=cp(Sp,this,JA).call(this,i,t,y,w,r,d,1);g=cp(Sp,this,lE)._[2*s],v=cp(Sp,this,lE)._[2*s+1];const l=y+g,h=w+v;u.push(h,l);const m=y*t+w;if(0===i[m+1]?i[m]=-o:1===i[m]&&(i[m]=o),l===c&&h===e&&y===x&&w===b){1!==i[n]&&(a=Math.abs(i[n]));break}r=y,d=w,y=l,w=h}}}return l}function eE(e,t,n,s){if(n-t<=4){for(let r=t;r<n-2;r+=2)s.push(e[r],e[r+1]);return}const r=e[t],i=e[t+1],a=e[n-4]-r,o=e[n-3]-i,l=Math.hypot(a,o),c=a/l,d=o/l,u=c*i-d*r,h=o/a,m=1/l,p=Math.atan(h),f=Math.cos(p),g=Math.sin(p),v=m*(Math.abs(f)+Math.abs(g)),x=m*(1-v+v**2),b=Math.max(Math.atan(Math.abs(g+f)*x),Math.atan(Math.abs(g-f)*x));let y=0,w=t;for(let j=t+2;j<n-2;j+=2){const t=Math.abs(u-c*e[j+1]+d*e[j]);t>y&&(w=j,y=t)}y>(l*b)**2?(cp(Sp,this,eE).call(this,e,t,w+2,s),cp(Sp,this,eE).call(this,e,w,n,s)):s.push(r,i)}function tE(e){const t=[],n=e.length;return cp(Sp,this,eE).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function nE(e,t,n,s,r,i){const a=new Float32Array(i**2),o=-2*s**2,l=i>>1;for(let p=0;p<i;p++){const e=(p-l)**2;for(let t=0;t<i;t++)a[p*i+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*r**2;for(let p=0;p<256;p++)c[p]=Math.exp(p**2/d);const u=e.length,h=new Uint8Array(u),m=new Uint32Array(256);for(let p=0;p<n;p++)for(let s=0;s<t;s++){const r=p*t+s,o=e[r];let d=0,u=0;for(let h=0;h<i;h++){const r=p+h-l;if(!(r<0||r>=n))for(let n=0;n<i;n++){const m=s+n-l;if(m<0||m>=t)continue;const p=e[r*t+m],f=a[h*i+n]*c[Math.abs(p-o)];d+=p*f,u+=f}}m[h[r]=Math.round(d/u)]++}return[h,m]}function sE(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function rE(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let a=0,o=n.length;a<o;a++){if(0===e[3+(a<<2)]){s=n[a]=255;continue}const t=n[a]=e[a<<2];t>s&&(s=t),t<r&&(r=t)}const i=255/(s-r);for(let a=0;a<t;a++)n[a]=(n[a]-r)*i;return n}function iE(e){let t,n=-1/0,s=-1/0;const r=e.findIndex(e=>0!==e);let i=r,a=r;for(t=r;t<256;t++){const r=e[t];r>n&&(t-i>s&&(s=t-i,a=t-1),n=r,i=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function aE(e){const t=e,{width:n,height:s}=e,{maxDim:r}=cp(Sp,this,oE)._;let i=n,a=s;if(n>r||s>r){let o=n,l=s,c=Math.log2(Math.max(n,s)/r);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){i=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(i,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,i,a),o=i,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(r/i,r/a);i=Math.round(i*u),a=Math.round(a*u)}const o=new OffscreenCanvas(i,a).getContext("2d",{willReadFrequently:!0});o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,i,a);const l=o.getImageData(0,0,i,a).data;return[cp(Sp,this,rE).call(this,l),i,a]}Sp=YA;var oE={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},lE={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class cE extends YS{constructor(){super(),super.updateProperties({fill:cb._defaultLineColor,"stroke-width":0})}clone(){const e=new cE;return e.updateAll(this),e}}class dE extends VA{constructor(e){super(e),super.updateProperties({stroke:cb._defaultLineColor,"stroke-width":1})}clone(){const e=new dE(this._viewParameters);return e.updateAll(this),e}}var uE=new WeakMap,hE=new WeakMap,mE=new WeakMap,pE=new WeakMap;class fE extends ZS{constructor(e){super(Pe(Pe({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),lp(this,uE,!1),lp(this,hE,null),lp(this,mE,null),lp(this,pE,null),this._willKeepAspectRatio=!0,hp(mE,this,e.signatureData||null),hp(hE,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){cb.initialize(e,t),this._defaultDrawingOptions=new cE,this._defaultDrawnSignatureOptions=new dE(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return xf(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!up(hE,this)}}static computeTelemetryFinalData(e){var t,n;const s=e.get("hasDescription");return{hasAltText:null!==(t=s.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=s.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(up(mE,this)){const{lines:e,mustSmooth:t,areContours:n,description:s,uuid:r,heightInPage:i}=up(mE,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=YA.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:fE._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,i,s,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){hp(pE,this,e),this.addEditToolbar()}getUuid(){return up(pE,this)}get description(){return up(hE,this)}set description(e){hp(hE,this,e),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:s,height:r}=up(mE,this),i=Math.max(s,r);return{areContours:t,outline:YA.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:s,height:r},pageWidth:i,pageHeight:i,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&null!==up(hE,this)&&(await e.addEditSignatureButton(this._uiManager.signatureManager,up(pE,this),up(hE,this)),e.show()),e):null}addSignature(e,t,n,s){const{x:r,y:i}=this,{outline:a}=hp(mE,this,e);let o;hp(uE,this,a instanceof XA),hp(hE,this,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),up(uE,this)?o=fE.getDefaultDrawingOptions():(o=fE._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[l,c]=this.parentDimensions,[,d]=this.pageDimensions;let u=t/d;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(l*this.width,c*this.height),this.x=r,this.y=i,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return YA.process(e,t,n,s,fE._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return YA.extractContoursFromText(e,t,n,s,r,fE._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return YA.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:fE._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=fE.getDefaultDrawingOptions():(this._drawingOptions=fE._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n,rect:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,i={annotationType:Wp.SIGNATURE,isSignature:!0,areContours:up(uE,this),color:[0,0,0],thickness:up(uE,this)?0:r,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(i.paths={lines:t,points:n},i.uuid=up(pE,this),i.isCopy=!0):i.lines=t,up(hE,this)&&(i.accessibilityData={type:"Figure",alt:up(hE,this)}),i}static deserializeDraw(e,t,n,s,r,i){return i.areContours?XA.deserialize(e,t,n,s,r,i):zA.deserialize(e,t,n,s,r,i)}static async deserialize(e,t,n){var s;const r=await super.deserialize(e,t,n);return hp(uE,r,e.areContours),hp(hE,r,(null===(s=e.accessibilityData)||void 0===s?void 0:s.alt)||""),hp(pE,r,e.uuid),r}}Ee(fE,"_type","signature"),Ee(fE,"_editorType",Wp.SIGNATURE),Ee(fE,"_defaultDrawingOptions",null);var gE=new WeakMap,vE=new WeakMap,xE=new WeakMap,bE=new WeakMap,yE=new WeakMap,wE=new WeakMap,jE=new WeakMap,_E=new WeakMap,NE=new WeakMap,kE=new WeakMap,CE=new WeakMap,SE=new WeakSet;class AE extends cb{constructor(e){super(Pe(Pe({},e),{},{name:"stampEditor"})),op(this,SE),lp(this,gE,null),lp(this,vE,null),lp(this,xE,null),lp(this,bE,null),lp(this,yE,null),lp(this,wE,""),lp(this,jE,null),lp(this,_E,!1),lp(this,NE,null),lp(this,kE,!1),lp(this,CE,!1),hp(bE,this,e.bitmapUrl),hp(yE,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){cb.initialize(e,t)}static isHandlingMimeForPasting(e){return sg.includes(e)}static paste(e,t){t.pasteEditor({mode:Wp.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const s=e.get("hasAltText");return{hasAltText:null!==(t=s.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=s.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:r,height:i}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:s,width:r,height:i,channels:s.length/(r*i)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;up(vE,this)&&(hp(gE,this,null),this._uiManager.imageManager.deleteId(up(vE,this)),null===(e=up(jE,this))||void 0===e||e.remove(),hp(jE,this,null),up(NE,this)&&(clearTimeout(up(NE,this)),hp(NE,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(up(vE,this)&&null===up(jE,this)&&cp(SE,this,PE).call(this),this.isAttachedToDOM||this.parent.add(this))):up(vE,this)&&cp(SE,this,PE).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(up(xE,this)||up(gE,this)||up(bE,this)||up(yE,this)||up(vE,this)||up(_E,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),up(_E,this)||(up(gE,this)?cp(SE,this,ME).call(this):cp(SE,this,PE).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(hp(vE,this,n),s&&hp(gE,this,s),hp(_E,this,!1),cp(SE,this,ME).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==up(NE,this)&&clearTimeout(up(NE,this));hp(NE,this,setTimeout(()=>{hp(NE,this,null),cp(SE,this,RE).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:s,height:r}=up(gE,this),i=new ng;let a=up(gE,this),o=s,l=r,c=null;if(t){var d,u;if(s>t||r>t){const e=Math.min(t/s,t/r);o=Math.floor(s*e),l=Math.floor(r*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*i.sx),n=c.height=Math.ceil(l*i.sy);up(kE,this)||(a=cp(SE,this,LE).call(this,e,n));const h=c.getContext("2d");h.filter=this._uiManager.hcmFilter;let m="white",p="#cfcfd8";"none"!==this._uiManager.hcmFilter?p="black":null!==(d=(u=window).matchMedia)&&void 0!==d&&d.call(u,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",p="#42414d");const f=15,g=f*i.sx,v=f*i.sy,x=new OffscreenCanvas(2*g,2*v),b=x.getContext("2d");b.fillStyle=m,b.fillRect(0,0,2*g,2*v),b.fillStyle=p,b.fillRect(0,0,g,v),b.fillRect(g,v,g,v),h.fillStyle=h.createPattern(x,"repeat"),h.fillRect(0,0,e,n),h.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let h=null;if(n){let t,n;if(i.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=up(gE,this),s>e||r>e){const i=Math.min(e/s,e/r);t=Math.floor(s*i),n=Math.floor(r*i),up(kE,this)||(a=cp(SE,this,LE).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),h={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:h}}static async deserialize(e,t,n){let s=null,r=!1;if(e instanceof bk){var i;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:d},container:u,parent:{page:{pageNumber:h}},canvas:m}=e;let p,f;m?(delete e.canvas,({id:p,bitmap:f}=n.imageManager.getFromCanvas(u.id,m)),m.remove()):(r=!0,e._hasNoCanvas=!0);const g=(null===(i=await t._structTree.getAriaAttributes("".concat(Df).concat(l)))||void 0===i?void 0:i.get("aria-label"))||"";s=e={annotationType:Wp.STAMP,bitmapId:p,bitmap:f,pageIndex:h-1,rect:a.slice(0),rotation:o,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:g},isSvg:!1,structParent:c,popupRef:d}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=e;r?(n.addMissingCanvas(e.id,a),hp(_E,a,!0)):d&&n.imageManager.isValidId(d)?(hp(vE,a,d),l&&hp(gE,a,l)):hp(bE,a,c),hp(kE,a,u);const[m,p]=a.pageDimensions;return a.width=(o[2]-o[0])/m,a.height=(o[3]-o[1])/p,a.annotationElementId=e.id||null,h&&(a.altTextData=h),a._initialData=s,hp(CE,a,!!s),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Wp.STAMP,bitmapId:up(vE,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:up(kE,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=cp(SE,this,OE).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const e=cp(SE,this,DE).call(this,n);if(e.isSame)return null;var i;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(i=this._initialData.structParent)&&void 0!==i?i:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const a=up(kE,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(up(vE,this))){if(up(kE,this)){const e=t.stamps.get(up(vE,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=cp(SE,this,OE).call(this,!1))}}else t.stamps.set(up(vE,this),{area:a,serialized:n}),n.bitmap=cp(SE,this,OE).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function EE(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(hp(gE,this,e.bitmap),t||(hp(vE,this,e.id),hp(kE,this,e.isSvg)),e.file&&hp(wE,this,e.file.name),cp(SE,this,ME).call(this)):this.remove()}function TE(){if(hp(xE,this,null),this._uiManager.enableWaiting(!1),up(jE,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&up(gE,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&up(gE,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function PE(){if(up(vE,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(up(vE,this)).then(e=>cp(SE,this,EE).call(this,e,!0)).finally(()=>cp(SE,this,TE).call(this));if(up(bE,this)){const e=up(bE,this);return hp(bE,this,null),this._uiManager.enableWaiting(!0),void hp(xE,this,this._uiManager.imageManager.getFromUrl(e).then(e=>cp(SE,this,EE).call(this,e)).finally(()=>cp(SE,this,TE).call(this)))}if(up(yE,this)){const e=up(yE,this);return hp(yE,this,null),this._uiManager.enableWaiting(!0),void hp(xE,this,this._uiManager.imageManager.getFromFile(e).then(e=>cp(SE,this,EE).call(this,e)).finally(()=>cp(SE,this,TE).call(this)))}const e=document.createElement("input");e.type="file",e.accept=sg.join(",");const t=this._uiManager._signal;hp(xE,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),cp(SE,this,EE).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>cp(SE,this,TE).call(this))),e.click()}function ME(){var e;const{div:t}=this;let{width:n,height:s}=up(gE,this);const[r,i]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,s=this.height*i;else if(n>a*r||s>a*i){const e=Math.min(a*r/n,a*i/s);n*=e,s*=e}const[o,l]=this.parentDimensions;this.setDims(n*o/r,s*l/i),this._uiManager.enableWaiting(!1);const c=hp(jE,this,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/r,this.height=s/i,null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),cp(SE,this,RE).call(this),up(CE,this)||(this.parent.addUndoableEditor(this),hp(CE,this,!0)),this._reportTelemetry({action:"inserted_image"}),up(wE,this)&&this.div.setAttribute("aria-description",up(wE,this))}function LE(e,t){const{width:n,height:s}=up(gE,this);let r=n,i=s,a=up(gE,this);for(;r>2*e||i>2*t;){const n=r,s=i;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),i>2*t&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2));const o=new OffscreenCanvas(r,i);o.getContext("2d").drawImage(a,0,0,n,s,0,0,r,i),a=o.transferToImageBitmap()}return a}function RE(){const[e,t]=this.parentDimensions,{width:n,height:s}=this,r=new ng,i=Math.ceil(n*e*r.sx),a=Math.ceil(s*t*r.sy),o=up(jE,this);if(!o||o.width===i&&o.height===a)return;o.width=i,o.height=a;const l=up(kE,this)?up(gE,this):cp(SE,this,LE).call(this,i,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,i,a)}function OE(e){if(e){if(up(kE,this)){const e=this._uiManager.imageManager.getSvgUrl(up(vE,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=up(gE,this));return e.getContext("2d").drawImage(up(gE,this),0,0),e.toDataURL()}if(up(kE,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Bf.PDF_TO_CSS_UNITS),s=Math.round(this.height*t*Bf.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,s);return r.getContext("2d").drawImage(up(gE,this),0,0,up(gE,this).width,up(gE,this).height,0,0,n,s),r.transferToImageBitmap()}return structuredClone(up(gE,this))}function DE(e){var t;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===n,i=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&i,isSameAltText:i}}Ee(AE,"_type","stamp"),Ee(AE,"_editorType",Wp.STAMP);var IE=new WeakMap,FE=new WeakMap,zE=new WeakMap,BE=new WeakMap,WE=new WeakMap,HE=new WeakMap,UE=new WeakMap,VE=new WeakMap,GE=new WeakMap,qE=new WeakMap,KE=new WeakMap,XE=new WeakMap,YE=new WeakMap,QE=new WeakMap,$E=new WeakSet;class JE{constructor(e){let{uiManager:t,pageIndex:n,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;op(this,$E),lp(this,IE,void 0),lp(this,FE,!1),lp(this,zE,null),lp(this,BE,null),lp(this,WE,null),lp(this,HE,new Map),lp(this,UE,!1),lp(this,VE,!1),lp(this,GE,!1),lp(this,qE,null),lp(this,KE,null),lp(this,XE,null),lp(this,YE,null),lp(this,QE,void 0);const u=[...rT._.values()];if(!JE._initialized){JE._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),hp(QE,this,t),this.pageIndex=n,this.div=s,hp(IE,this,i),hp(zE,this,a),this.viewport=c,hp(XE,this,l),this.drawLayer=o,this._structTree=r,up(QE,this).addLayer(this)}get isEmpty(){return 0===up(HE,this).size}get isInvisible(){return this.isEmpty&&up(QE,this).getMode()===Wp.NONE}updateToolbar(e){up(QE,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:up(QE,this).getMode();switch(cp($E,this,sT).call(this),e){case Wp.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Wp.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Wp.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of rT._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=up(XE,this))||void 0===t?void 0:t.div)}setEditingState(e){up(QE,this).setEditingState(e)}addCommands(e){up(QE,this).addCommands(e)}cleanUndoStack(e){up(QE,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=up(zE,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){hp(GE,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of up(HE,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(up(QE,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!up(zE,this))return void hp(GE,this,!1);const t=up(zE,this).getEditableAnnotations();for(const n of t){if(n.hide(),up(QE,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}hp(GE,this,!1)}disable(){hp(VE,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of up(HE,this).values()){var n;r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(t.set(r.annotationElementId,r),null===(n=this.getEditableAnnotation(r.annotationElementId))||void 0===n||n.show(),r.remove()):e.set(r.annotationElementId,r))}if(up(zE,this)){const n=up(zE,this).getEditableAnnotations();for(const s of n){const{id:n}=s.data;if(up(QE,this).isDeletedAnnotationElement(n))continue;let r=t.get(n);r?(r.resetAnnotationElement(s),r.show(!1),s.show()):(r=e.get(n),r&&(up(QE,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(s)&&r.show(!1)),s.show())}}cp($E,this,sT).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of rT._.values())s.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),hp(VE,this,!1)}getEditableAnnotation(e){var t;return(null===(t=up(zE,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){up(QE,this).getActive()!==e&&up(QE,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=up(XE,this))&&void 0!==e&&e.div&&!up(YE,this)){hp(YE,this,new AbortController);const e=up(QE,this).combinedSignal(up(YE,this));up(XE,this).div.addEventListener("pointerdown",cp($E,this,ZE).bind(this),{signal:e}),up(XE,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=up(XE,this))&&void 0!==e&&e.div&&up(YE,this)&&(up(YE,this).abort(),hp(YE,this,null),up(XE,this).div.classList.remove("highlighting"))}enableClick(){if(up(BE,this))return;hp(BE,this,new AbortController);const e=up(QE,this).combinedSignal(up(BE,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=up(BE,this))||void 0===e||e.abort(),hp(BE,this,null)}attach(e){up(HE,this).set(e.id,e);const{annotationElementId:t}=e;t&&up(QE,this).isDeletedAnnotationElement(t)&&up(QE,this).removeDeletedAnnotationElement(e)}detach(e){var t;up(HE,this).delete(e.id),null===(t=up(IE,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!up(VE,this)&&e.annotationElementId&&up(QE,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),up(QE,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(up(QE,this).addDeletedAnnotationElement(e.annotationElementId),cb.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),up(QE,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!up(GE,this)),up(QE,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!up(WE,this)&&(e._focusEventsAllowed=!1,hp(WE,this,setTimeout(()=>{hp(WE,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:up(QE,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=up(IE,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return up(QE,this).getId()}combinedSignal(e){return up(QE,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=dp($E,this,eT))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await up(QE,this).updateMode(e.mode);const{offsetX:n,offsetY:s}=cp($E,this,nT).call(this),r=this.getNextId(),i=cp($E,this,tT).call(this,Pe({parent:this,id:r,x:n,y:s,uiManager:up(QE,this),isCentered:!0},t));i&&this.add(i)}async deserialize(e){var t,n;return await(null===(t=rT._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,up(QE,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getNextId(),r=cp($E,this,tT).call(this,Pe({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:up(QE,this),isCentered:t},n));return r&&this.add(r),r}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(cp($E,this,nT).call(this),!0,e)}setSelected(e){up(QE,this).setSelected(e)}toggleSelected(e){up(QE,this).toggleSelected(e)}unselect(e){up(QE,this).unselect(e)}pointerup(e){var t;const{isMac:n}=Af.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!up(UE,this))return;if(hp(UE,this,!1),null!==(t=dp($E,this,eT))&&void 0!==t&&t.isDrawer&&dp($E,this,eT).supportMultipleDrawings)return;if(!up(FE,this))return void hp(FE,this,!0);const s=up(QE,this).getMode();s!==Wp.STAMP&&s!==Wp.SIGNATURE?this.createAndAddNewEditor(e,!1):up(QE,this).unselectAll()}pointerdown(e){var t;if(up(QE,this).getMode()===Wp.HIGHLIGHT&&this.enableTextSelection(),up(UE,this))return void hp(UE,this,!1);const{isMac:n}=Af.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(hp(UE,this,!0),null!==(t=dp($E,this,eT))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const s=up(QE,this).getActive();hp(FE,this,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),up(qE,this))return void dp($E,this,eT).startDrawing(this,up(QE,this),!1,e);up(QE,this).setCurrentDrawingSession(this),hp(qE,this,new AbortController);const t=up(QE,this).combinedSignal(up(qE,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(hp(KE,this,null),this.commitOrRemove())},{signal:t}),dp($E,this,eT).startDrawing(this,up(QE,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&hp(KE,this,e))}up(KE,this)&&setTimeout(()=>{var e;null===(e=up(KE,this))||void 0===e||e.focus(),hp(KE,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return up(qE,this)?(up(QE,this).setCurrentDrawingSession(null),up(qE,this).abort(),hp(qE,this,null),hp(KE,this,null),dp($E,this,eT).endDrawing(e)):null}findNewParent(e,t,n){const s=up(QE,this).findParent(t,n);return null!==s&&s!==this&&(s.changeParent(e),!0)}commitOrRemove(){return!!up(qE,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){up(qE,this)&&dp($E,this,eT).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=up(QE,this).getActive())||void 0===e?void 0:e.parent)===this&&(up(QE,this).commitOrRemove(),up(QE,this).setActiveEditor(null)),up(WE,this)&&(clearTimeout(up(WE,this)),hp(WE,this,null));for(const n of up(HE,this).values()){var t;null===(t=up(IE,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,up(HE,this).clear(),up(QE,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,tg(this.div,t);for(const n of up(QE,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;up(QE,this).commitOrRemove(),cp($E,this,sT).call(this);const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,tg(this.div,{rotation:s}),n!==s)for(const r of up(HE,this).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return up(QE,this).viewParameters.realScale}}function ZE(e){up(QE,this).unselectAll();const{target:t}=e;if(t===up(XE,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&up(XE,this).div.contains(t)){const{isMac:t}=Af.platform;if(0!==e.button||e.ctrlKey&&t)return;up(QE,this).showAllEditors("highlight",!0,!0),up(XE,this).div.classList.add("free"),this.toggleDrawing(),PS.startHighlighting(this,"ltr"===up(QE,this).direction,{target:up(XE,this).div,x:e.x,y:e.y}),up(XE,this).div.addEventListener("pointerup",()=>{up(XE,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:up(QE,this)._signal}),e.preventDefault()}}function eT(e){return rT._.get(up(QE,e).getMode())}function tT(e){const t=dp($E,this,eT);return t?new t.prototype.constructor(e):null}function nT(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),i=Math.max(0,t),a=(r+Math.min(window.innerWidth,e+n))/2-e,o=(i+Math.min(window.innerHeight,t+s))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function sT(){for(const e of up(HE,this).values())e.isEmpty()&&e.remove()}Ee(JE,"_initialized",!1);var rT={_:new Map([zk,qA,AE,PS,fE].map(e=>[e._editorType,e]))},iT=new WeakMap,aT=new WeakMap,oT=new WeakMap,lT=new WeakSet;class cT{constructor(e){let{pageIndex:t}=e;op(this,lT),lp(this,iT,null),lp(this,aT,new Map),lp(this,oT,new Map),this.pageIndex=t}setParent(e){if(up(iT,this)){if(up(iT,this)!==e){if(up(aT,this).size>0)for(const t of up(aT,this).values())t.remove(),e.append(t);hp(iT,this,e)}}else hp(iT,this,e)}static get _svgFactory(){return xf(this,"_svgFactory",new J_)}draw(e){var t,n;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=(pT._=(t=pT._,n=t++,t),n),a=cp(lT,this,uT).call(this),o=cT._svgFactory.createElement("defs");a.append(o);const l=cT._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(i);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),s&&up(oT,this).set(i,l);const d=r?cp(lT,this,hT).call(this,o,c):null,u=cT._svgFactory.createElement("use");return a.append(u),u.setAttribute("href","#".concat(c)),this.updateProperties(a,e),up(aT,this).set(i,a),{id:i,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){var n,s;const r=(pT._=(n=pT._,s=n++,n),s),i=cp(lT,this,uT).call(this),a=cT._svgFactory.createElement("defs");i.append(a);const o=cT._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=cT._svgFactory.createElement("mask");a.append(e),c="mask_p".concat(this.pageIndex,"_").concat(r),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=cT._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=cT._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=cT._svgFactory.createElement("use");i.append(d),d.setAttribute("href","#".concat(l)),c&&d.setAttribute("mask","url(#".concat(c,")"));const u=d.cloneNode();return i.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),up(aT,this).set(r,i),r}finalizeDraw(e,t){up(oT,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:s,rootClass:r,path:i}=t,a="number"===typeof e?up(aT,this).get(e):e;if(a){if(n&&cp(lT,this,mT).call(this,a,n),s&&dT.call(cT,a,s),r){const{classList:e}=a;for(const[t,n]of Object.entries(r))e.toggle(t,n)}if(i){const e=a.firstChild.firstChild;cp(lT,this,mT).call(this,e,i)}}}updateParent(e,t){if(t===this)return;const n=up(aT,this).get(e);n&&(up(iT,t).append(n),up(aT,this).delete(e),up(aT,t).set(e,n))}remove(e){up(oT,this).delete(e),null!==up(iT,this)&&(up(aT,this).get(e).remove(),up(aT,this).delete(e))}destroy(){hp(iT,this,null);for(const e of up(aT,this).values())e.remove();up(aT,this).clear(),up(oT,this).clear()}}function dT(e,t){let[n,s,r,i]=t;const{style:a}=e;a.top="".concat(100*s,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*i,"%")}function uT(){const e=Ap._svgFactory.create(1,1,!0);return up(iT,this).append(e),e.setAttribute("aria-hidden",!0),e}function hT(e,t){const n=Ap._svgFactory.createElement("clipPath");e.append(n);const s="clip_".concat(t);n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Ap._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),s}function mT(e,t){for(const[n,s]of Object.entries(t))null===s?e.removeAttribute(n):e.setAttribute(n,s)}Ap=cT;var pT={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:OC},globalThis.pdfjsLib={AbortException:kf,AnnotationEditorLayer:JE,AnnotationEditorParamsType:Hp,AnnotationEditorType:Wp,AnnotationEditorUIManager:Dv,AnnotationLayer:Ek,AnnotationMode:Bp,AnnotationType:Qp,build:"47ad820d9",ColorPicker:rS,createValidAbsoluteUrl:gf,DOMSVGFactory:J_,DrawLayer:cT,FeatureTest:Af,fetchData:Wf,getDocument:a_,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Vf(e))return mf('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch(i){}return r||t},getUuid:Of,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:s=0}=t;const{width:r,height:i}=e.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new Hf({viewBox:a,userUnit:1,scale:n,rotation:s})},GlobalWorkerOptions:Ow,ImageKind:Yp,InvalidPDFException:jf,isDataScheme:Vf,isPdfFile:Gf,isValidExplicitDest:Xb,MathClamp:If,noContextMenu:Xf,normalizeUnicode:function(e){return Lf||(Lf=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Rf=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Lf,(e,t,n)=>t?t.normalize("NFKC"):Rf.get(n))},OPS:sf,OutputScale:ng,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:p_,PDFDateString:Qf,PDFWorker:k_,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Bf,RenderingCancelledException:Uf,ResponseException:_f,setLayerDimensions:tg,shadow:xf,SignatureExtractor:YA,stopEvent:Yf,SupportedImageMimeTypes:sg,TextLayer:qj,TouchManager:Rx,updateUrlHash:vf,Util:Tf,VerbosityLevel:nf,version:K_,XfaLayer:Z_};const fT=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];function gT(e,t){const n={};for(const s of fT){const r=e[s];r&&(n[s]=t?e=>r(e,t(s)):r)}return n}function vT(e){let t=!1;return{promise:new Promise((n,s)=>{e.then(e=>!t&&n(e)).catch(e=>!t&&s(e))}),cancel(){t=!0}}}function xT(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=xT(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}const bT=function(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=xT(e))&&(s&&(s+=" "),s+=t);return s};var yT="Invariant failed";function wT(e,t){if(!e)throw new Error(yT)}const jT=(0,s.createContext)(null);function _T(e){let{children:t,type:n}=e;return(0,De.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:t})}class NT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return wT(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){wT(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{wT(this.pdfDocument),wT(e),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(e=>{wT(Array.isArray(e),'"'.concat(e,'" is not a valid destination array.'));const t=e[0];new Promise(e=>{wT(this.pdfDocument),t instanceof Object?this.pdfDocument.getPageIndex(t).then(t=>{e(t)}).catch(()=>{wT(!1,'"'.concat(t,'" is not a valid page reference.'))}):"number"===typeof t?e(t):wT(!1,'"'.concat(t,'" is not a valid destination reference.'))}).then(t=>{const n=t+1;wT(this.pdfViewer),wT(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;wT(this.pdfViewer),wT(e>=1&&e<=this.pagesCount,'"'.concat(e,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const kT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},CT="undefined"!==typeof window,ST=CT&&"file:"===window.location.protocol;function AT(e){return function(e){return"undefined"!==typeof e}(e)&&null!==e}function ET(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function TT(e){wT(ET(e));const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}function PT(){return CT&&window.devicePixelRatio||1}const MT="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function LT(){pl(!ST,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(MT))}function RT(e){(null===e||void 0===e?void 0:e.cancel)&&e.cancel()}function OT(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function DT(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function IT(){return(0,s.useReducer)(DT,{value:void 0,error:void 0})}var FT=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const{Tm:zT}=e,BT=(e,t)=>{switch(t){case kT.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case kT.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function WT(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const HT=(0,s.forwardRef)(function(e,t){var{children:n,className:r,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:u="Loading PDF\u2026",noData:h="No PDF file specified.",onItemClick:m,onLoadError:p,onLoadProgress:f,onLoadSuccess:g,onPassword:v=BT,onSourceError:x,onSourceSuccess:b,options:y,renderMode:w,rotate:j,scale:_}=e,N=FT(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[k,C]=IT(),{value:S,error:A}=k,[E,T]=IT(),{value:P,error:M}=E,L=(0,s.useRef)(new NT),R=(0,s.useRef)([]),O=(0,s.useRef)(void 0),D=(0,s.useRef)(void 0);l&&l!==O.current&&WT(l)&&(pl(!Dd(l,O.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),O.current=l),y&&y!==D.current&&(pl(!Dd(y,D.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),D.current=y);const I=(0,s.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:s=n-1}=e;if(m)return void m({dest:t,pageIndex:s,pageNumber:n});const r=R.current[s];r?r.scrollIntoView():pl(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,s.useImperativeHandle)(t,()=>({linkService:L,pages:R,viewer:I}),[]),(0,s.useEffect)(function(){C({type:"RESET"})},[l,C]);const F=(0,s.useCallback)(async()=>{if(!l)return null;if("string"===typeof l){if(ET(l)){return{data:TT(l)}}return LT(),{url:l}}if(l instanceof zT)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(CT&&function(e){return wT(CT),e instanceof Blob}(l)){const e=await function(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(e)})}(l);return{data:e}}if(wT("object"===typeof l),wT(WT(l)),"url"in l&&"string"===typeof l.url){if(ET(l.url)){const{url:e}=l,t=FT(l,["url"]),n=TT(e);return Object.assign({data:n},t)}LT()}return l},[l]);(0,s.useEffect)(()=>{const e=vT(F());return e.promise.then(e=>{C({type:"RESOLVE",value:e})}).catch(e=>{C({type:"REJECT",error:e})}),()=>{RT(e)}},[F,C]),(0,s.useEffect)(()=>{"undefined"!==typeof S&&(!1!==S?b&&b():A&&(pl(!1,A.toString()),x&&x(A)))},[S]),(0,s.useEffect)(function(){T({type:"RESET"})},[T,S]),(0,s.useEffect)(function(){if(!S)return;const e=a_(y?Object.assign(Object.assign({},S),y):S);f&&(e.onProgress=f),v&&(e.onPassword=v);const t=e,n=t.promise.then(e=>{T({type:"RESOLVE",value:e})}).catch(e=>{t.destroyed||T({type:"REJECT",error:e})});return()=>{n.finally(()=>t.destroy())}},[y,T,S]),(0,s.useEffect)(()=>{"undefined"!==typeof P&&(!1!==P?P&&(g&&g(P),R.current=new Array(P.numPages),L.current.setDocument(P)):M&&(pl(!1,M.toString()),p&&p(M)))},[P]),(0,s.useEffect)(function(){L.current.setViewer(I.current),L.current.setExternalLinkRel(a),L.current.setExternalLinkTarget(o)},[a,o]);const z=(0,s.useCallback)((e,t)=>{R.current[e]=t},[]),B=(0,s.useCallback)(e=>{delete R.current[e]},[]),W=(0,s.useMemo)(()=>({imageResourcesPath:d,linkService:L.current,onItemClick:m,pdf:P,registerPage:z,renderMode:w,rotate:j,scale:_,unregisterPage:B}),[d,m,P,z,w,j,_,B]),H=(0,s.useMemo)(()=>gT(N,()=>P),[N,P]);return(0,De.jsx)("div",Object.assign({className:bT("react-pdf__Document",r),ref:c},H,{children:l?void 0===P||null===P?(0,De.jsx)(_T,{type:"loading",children:"function"===typeof u?u():u}):!1===P?(0,De.jsx)(_T,{type:"error",children:"function"===typeof i?i():i}):(0,De.jsx)(jT.Provider,{value:W,children:n}):(0,De.jsx)(_T,{type:"no-data",children:"function"===typeof h?h():h})}))}),UT=HT;function VT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){for(var t=0,s=n;t<s.length;t++){var r=s[t];"function"===typeof r?r(e):r&&(r.current=e)}}}const GT=(0,s.createContext)(null),qT={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},KT=/^H(\d+)$/;function XT(e){return"children"in e}function YT(e){return!!XT(e)&&(1===e.children.length&&0 in e.children&&"id"in e.children[0])}function QT(e){const t={};if(XT(e)){const{role:n}=e,s=n.match(KT);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(function(e){return e in qT}(n)){const e=qT[n];e&&(t.role=e)}}return t}function $T(e){const t={};if(XT(e)){if(void 0!==e.alt&&(t["aria-label"]=e.alt),void 0!==e.lang&&(t.lang=e.lang),YT(e)){const[n]=e.children;if(n){const e=$T(n);return Object.assign(Object.assign({},t),e)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function JT(e){return e?Object.assign(Object.assign({},QT(e)),$T(e)):null}function ZT(e){let{className:t,node:n}=e;const r=(0,s.useMemo)(()=>JT(n),[n]),i=(0,s.useMemo)(()=>XT(n)?YT(n)?null:n.children.map((e,t)=>(0,De.jsx)(ZT,{node:e},t)):null,[n]);return(0,De.jsx)("span",Object.assign({className:t},r,{children:i}))}function eP(){return(0,s.useContext)(GT)}function tP(){const e=eP();wT(e);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[r,i]=IT(),{value:a,error:o}=r,{customTextRenderer:l,page:c}=e;return(0,s.useEffect)(function(){i({type:"RESET"})},[i,c]),(0,s.useEffect)(function(){if(l)return;if(!c)return;const e=vT(c.getStructTree()),t=e;return e.promise.then(e=>{i({type:"RESOLVE",value:e})}).catch(e=>{i({type:"REJECT",error:e})}),()=>RT(t)},[l,c,i]),(0,s.useEffect)(()=>{void 0!==a&&(!1!==a?a&&n&&n(a):o&&(pl(!1,o.toString()),t&&t(o)))},[a]),a?(0,De.jsx)(ZT,{className:"react-pdf__Page__structTree structTree",node:a}):null}const nP=Bp;function sP(e){const t=eP();wT(t);const n=Object.assign(Object.assign({},t),e),{_className:r,canvasBackground:i,devicePixelRatio:a=PT(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:d,renderTextLayer:u,rotate:h,scale:m}=n,{canvasRef:p}=e;wT(c);const f=(0,s.useRef)(null);function g(e){(function(e){return"RenderingCancelledException"===e.name})(e)||(pl(!1,e.toString()),o&&o(e))}const v=(0,s.useMemo)(()=>c.getViewport({scale:m*a,rotation:h}),[a,c,h,m]),x=(0,s.useMemo)(()=>c.getViewport({scale:m,rotation:h}),[c,h,m]);(0,s.useEffect)(function(){if(!c)return;c.cleanup();const{current:e}=f;if(!e)return;e.width=v.width,e.height=v.height,e.style.width="".concat(Math.floor(x.width),"px"),e.style.height="".concat(Math.floor(x.height),"px"),e.style.visibility="hidden";const t={annotationMode:d?nP.ENABLE_FORMS:nP.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:v};i&&(t.background=i);const n=c.render(t),s=n;return n.promise.then(()=>{e.style.visibility="",c&&l&&l(OT(c,m))}).catch(g),()=>RT(s)},[i,c,d,v,x]);const b=(0,s.useCallback)(()=>{const{current:e}=f;e&&(e.width=0,e.height=0)},[]);return(0,s.useEffect)(()=>b,[b]),(0,De.jsx)("canvas",{className:"".concat(r,"__canvas"),dir:"ltr",ref:VT(p,f),style:{display:"block",userSelect:"none"},children:u?(0,De.jsx)(tP,{}):null})}function rP(){const e=eP();wT(e);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:d,scale:u}=e;wT(o);const[h,m]=IT(),{value:p,error:f}=h,g=(0,s.useRef)(null);pl(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,s.useEffect)(function(){m({type:"RESET"})},[o,m]),(0,s.useEffect)(function(){if(!o)return;const e=vT(o.getTextContent()),t=e;return e.promise.then(e=>{m({type:"RESOLVE",value:e})}).catch(e=>{m({type:"REJECT",error:e})}),()=>RT(t)},[o,m]),(0,s.useEffect)(()=>{void 0!==p&&(!1!==p?p&&r&&r(p):f&&(pl(!1,f.toString()),n&&n(f)))},[p]);const v=(0,s.useCallback)(()=>{a&&a()},[a]),x=(0,s.useCallback)(e=>{pl(!1,e.toString()),i&&i(e)},[i]);const b=(0,s.useMemo)(()=>o.getViewport({scale:u,rotation:d}),[o,d,u]);return(0,s.useLayoutEffect)(function(){if(!o||!p)return;const{current:e}=g;if(!e)return;e.innerHTML="";const n=o.streamTextContent({includeMarkedContent:!0}),s=new qj({container:e,textContentSource:n,viewport:b}),r=s;return s.render().then(()=>{const n=document.createElement("div");n.className="endOfContent",e.append(n);const s=e.querySelectorAll('[role="presentation"]');if(t){let e=0;p.items.forEach((n,r)=>{if(!function(e){return"str"in e}(n))return;const i=s[e];if(!i)return;const a=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:r},n));i.innerHTML=a,e+=n.str&&n.hasEOL?2:1})}v()}).catch(x),()=>RT(r)},[t,x,v,o,l,c,p,b]),(0,De.jsx)("div",{className:bT("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const e=g.current;e&&e.classList.remove("selecting")},onMouseDown:function(){const e=g.current;e&&e.classList.add("selecting")},ref:g})}function iP(){return(0,s.useContext)(jT)}function aP(){const e=iP(),t=eP();wT(t);const n=Object.assign(Object.assign({},e),t),{imageResourcesPath:r,linkService:i,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:d,pdf:u,renderForms:h,rotate:m,scale:p=1}=n;wT(u),wT(d),wT(i);const[f,g]=IT(),{value:v,error:x}=f,b=(0,s.useRef)(null);pl(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,s.useEffect)(function(){g({type:"RESET"})},[g,d]),(0,s.useEffect)(function(){if(!d)return;const e=vT(d.getAnnotations()),t=e;return e.promise.then(e=>{g({type:"RESOLVE",value:e})}).catch(e=>{g({type:"REJECT",error:e})}),()=>{RT(t)}},[g,d]),(0,s.useEffect)(()=>{void 0!==v&&(!1!==v?v&&o&&o(v):x&&(pl(!1,x.toString()),a&&a(x)))},[v]);const y=(0,s.useMemo)(()=>d.getViewport({scale:p,rotation:m}),[d,m,p]);return(0,s.useEffect)(function(){if(!u||!d||!i||!v)return;const{current:e}=b;if(!e)return;const t=y.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:e,l10n:null,page:d,structTreeLayer:null,viewport:t},s={annotations:v,annotationStorage:u.annotationStorage,div:e,imageResourcesPath:r,linkService:i,page:d,renderForms:h,viewport:t};e.innerHTML="";try{new Ek(n).render(s),c&&c()}catch(a){!function(e){pl(!1,"".concat(e)),l&&l(e)}(a)}return()=>{}},[v,r,i,d,u,h,y]),(0,De.jsx)("div",{className:bT("react-pdf__Page__annotations","annotationLayer"),ref:b})}var oP=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const lP=1;function cP(e){const t=iP(),n=Object.assign(Object.assign({},t),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:o,children:l,className:c,customRenderer:d,customTextRenderer:u,devicePixelRatio:h,error:m="Failed to load the page.",height:p,inputRef:f,loading:g="Loading page\u2026",noData:v="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:b,onGetStructTreeError:y,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:_,onLoadError:N,onLoadSuccess:k,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:S,onRenderError:A,onRenderSuccess:E,onRenderTextLayerError:T,onRenderTextLayerSuccess:P,pageIndex:M,pageNumber:L,pdf:R,registerPage:O,renderAnnotationLayer:D=!0,renderForms:I=!1,renderMode:F="canvas",renderTextLayer:z=!0,rotate:B,scale:W=lP,unregisterPage:H,width:U}=n,V=oP(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,q]=IT(),{value:K,error:X}=G,Y=(0,s.useRef)(null);wT(R);const Q=AT(L)?L-1:null!==M&&void 0!==M?M:null,$=null!==L&&void 0!==L?L:AT(M)?M+1:null,J=null!==B&&void 0!==B?B:K?K.rotate:null,Z=(0,s.useMemo)(()=>{if(!K)return null;let e=1;const t=null!==W&&void 0!==W?W:lP;if(U||p){const t=K.getViewport({scale:1,rotation:J});U?e=U/t.width:p&&(e=p/t.height)}return t*e},[p,K,J,W,U]);(0,s.useEffect)(function(){return()=>{AT(Q)&&i&&H&&H(Q)}},[i,R,Q,H]),(0,s.useEffect)(function(){q({type:"RESET"})},[q,R,Q]),(0,s.useEffect)(function(){if(!R||!$)return;const e=vT(R.getPage($)),t=e;return e.promise.then(e=>{q({type:"RESOLVE",value:e})}).catch(e=>{q({type:"REJECT",error:e})}),()=>RT(t)},[q,R,$]),(0,s.useEffect)(()=>{void 0!==K&&(!1!==K?function(){if(k){if(!K||!Z)return;k(OT(K,Z))}if(i&&O){if(!AT(Q)||!Y.current)return;O(Q,Y.current)}}():X&&(pl(!1,X.toString()),N&&N(X)))},[K,Z]);const ee=(0,s.useMemo)(()=>K&&AT(Q)&&$&&AT(J)&&AT(Z)?{_className:r,canvasBackground:a,customTextRenderer:u,devicePixelRatio:h,onGetAnnotationsError:x,onGetAnnotationsSuccess:b,onGetStructTreeError:y,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:_,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:S,onRenderError:A,onRenderSuccess:E,onRenderTextLayerError:T,onRenderTextLayerSuccess:P,page:K,pageIndex:Q,pageNumber:$,renderForms:I,renderTextLayer:z,rotate:J,scale:Z}:null,[r,a,u,h,x,b,y,w,j,_,C,S,A,E,T,P,K,Q,$,I,z,J,Z]),te=(0,s.useMemo)(()=>gT(V,()=>K?Z?OT(K,Z):void 0:K),[V,K,Z]),ne="".concat(Q,"@").concat(Z,"/").concat(J);function se(){switch(F){case"custom":return wT(d),(0,De.jsx)(d,{},"".concat(ne,"_custom"));case"none":return null;default:return(0,De.jsx)(sP,{canvasRef:o},"".concat(ne,"_canvas"))}}return(0,De.jsx)("div",Object.assign({className:bT(r,c),"data-page-number":$,ref:VT(f,Y),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":"".concat(Z),"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te,{children:$?null===R||void 0===K||null===K?(0,De.jsx)(_T,{type:"loading",children:"function"===typeof g?g():g}):!1===R||!1===K?(0,De.jsx)(_T,{type:"error",children:"function"===typeof m?m():m}):(0,De.jsxs)(GT.Provider,{value:ee,children:[se(),z?(0,De.jsx)(rP,{},"".concat(ne,"_text")):null,D?(0,De.jsx)(aP,{},"".concat(ne,"_annotations")):null,l]}):(0,De.jsx)(_T,{type:"no-data",children:"function"===typeof v?v():v})}))}(()=>{try{Ow.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(K_,"/pdf.worker.min.js")}catch(e){try{Ow.workerSrc="https://unpkg.com/pdfjs-dist@".concat(K_,"/build/pdf.worker.min.js")}catch(t){Ow.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@".concat(K_,"/build/pdf.worker.min.js")}}})();const dP=e=>{let{url:t,fileName:n="document.pdf",height:r="70vh"}=e;const[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(1),[c,d]=(0,s.useState)(1.1),[u,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)("");(0,s.useEffect)(()=>{l(1),a(null),h(!0),p("")},[t]);return(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,De.jsx)("div",{className:"small text-muted",children:n}),(0,De.jsxs)(Td,{children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:()=>d(e=>Math.max(.6,e-.2)),children:(0,De.jsx)(pi,{})}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:()=>d(e=>Math.min(2.5,e+.2)),children:(0,De.jsx)(fi,{})}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:()=>{try{const e=document.createElement("a");e.href=t,e.download=n,e.target="_blank",e.rel="noreferrer",e.click()}catch(e){console.error("Download error:",e)}},children:(0,De.jsx)(Lr,{})})]})]}),(0,De.jsxs)("div",{style:{height:r,overflow:"auto",border:"1px solid #e5e7eb",borderRadius:8,background:"#f9fafb"},children:[u&&!m&&(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:r},children:(0,De.jsx)(Vi,{animation:"border"})}),m&&(0,De.jsxs)("div",{className:"text-center text-danger p-3",children:[(0,De.jsx)("div",{className:"mb-2",children:m}),(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>window.open(t,"_blank"),children:"Open in New Tab"})]}),!m&&(0,De.jsx)(UT,{file:t,onLoadSuccess:e=>{let{numPages:t}=e;a(t),h(!1)},onLoadError:e=>{console.error("PDF load error:",e),p((null===e||void 0===e?void 0:e.message)||"Failed to load PDF. Please try refreshing the page."),h(!1)},loading:" ",error:(0,De.jsx)("div",{className:"text-center text-danger p-3",children:"Failed to load PDF"}),children:(0,De.jsx)("div",{className:"d-flex flex-column align-items-center py-3",children:Array.from(new Array(i||0),(e,t)=>(0,De.jsx)("div",{className:"mb-3",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"white"},children:(0,De.jsx)(cP,{pageNumber:t+1,scale:c,renderTextLayer:!1,renderAnnotationLayer:!1})},"page_".concat(t+1)))})})]})]})},uP=e=>{var t,n,r,i,a,o,l,c,d,u,h,m,p,f,g,v,x,b,y,w,j,_,N,k,C;let{user:S,userRole:A,onLogout:E}=e;const T=Z(),[P,M]=(0,s.useState)([]),[L,R]=(0,s.useState)([]),[O,D]=(0,s.useState)(null),[I,F]=(0,s.useState)(!0),[z,B]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[U,V]=(0,s.useState)(!1),[G,q]=(0,s.useState)(!1),[K,X]=(0,s.useState)(null),[Y,Q]=(0,s.useState)([]),[$,J]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(null),[ne,se]=(0,s.useState)({open:!1,url:"",name:""}),[re,ie]=(0,s.useState)({deposit_amount:"",balance_amount:"",payment_status:"",payment_method:"",payment_notes:"",proof_id:""}),[ae,oe]=(0,s.useState)(""),[le,ce]=(0,s.useState)("all"),[de,ue]=(0,s.useState)("order_date"),[he,me]=(0,s.useState)("desc"),[pe,fe]=(0,s.useState)("all"),[ge,ve]=(0,s.useState)(1),[xe]=(0,s.useState)(10);(0,s.useEffect)(()=>{be()},[]);const be=async()=>{try{F(!0);const[e,t,n]=await Promise.all([Zi(),ia(),Ji("/orders/payments_dashboard/").catch(()=>null)]);M(e.results||e),R(t.results||t),n&&D(n),B("")}catch(e){B("Failed to load data: "+e.message)}finally{F(!1)}},ye={pending:{label:"Pending",color:"warning",icon:Sr},partial:{label:"Partial",color:"info",icon:Ir},paid:{label:"Paid",color:"success",icon:yr},overdue:{label:"Overdue",color:"danger",icon:Fr}},we=(()=>{let e=P;return"all"!==pe&&(e=e.filter(e=>e.payment_status===pe)),ae&&(e=e.filter(e=>{var t,n,s,r;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(ae.toLowerCase()))||(null===(n=e.customer)||void 0===n||null===(s=n.name)||void 0===s?void 0:s.toLowerCase().includes(ae.toLowerCase()))||(null===(r=e.total_amount)||void 0===r?void 0:r.toString().includes(ae))})),"all"!==le&&(e=e.filter(e=>e.payment_status===le)),e.sort((e,t)=>{let n=e[de],s=t[de];var r,i;"customer_name"===de&&(n=(null===(r=e.customer)||void 0===r?void 0:r.name)||"",s=(null===(i=t.customer)||void 0===i?void 0:i.name)||"");return"string"===typeof n?"asc"===he?n.localeCompare(s):s.localeCompare(n):"asc"===he?(parseFloat(n)||0)-(parseFloat(s)||0):(parseFloat(s)||0)-(parseFloat(n)||0)})})(),je=ge*xe,_e=je-xe,Ne=we.slice(_e,je),ke=Math.ceil(we.length/xe),Ce=e=>{de===e?me("asc"===he?"desc":"asc"):(ue(e),me("asc"))},Se=e=>{var t;X(e),ie({deposit_amount:e.deposit_amount||"",balance_amount:e.balance_amount||"",payment_status:e.payment_status||"",payment_method:e.payment_method||"",payment_notes:e.payment_notes||"",proof_id:""}),(t=e.id,Ji("/payment-proofs/?order=".concat(t))).then(e=>{const t=Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:Array.isArray(e)?e:[];Q(t.slice(0,5))}).catch(()=>Q([])),V(!0)},Ae=async e=>{try{await(t=e.id,Ji("/orders/".concat(t,"/mark_overdue/"),{method:"POST"})),H("Marked as overdue"),be()}catch(zP){B((null===zP||void 0===zP?void 0:zP.message)||"Failed to mark overdue")}var t},Ee=e=>de!==e?null:"asc"===he?(0,De.jsx)(ji,{}):(0,De.jsx)(wi,{}),Te=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e||0),Me=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),Le=e=>{const t=ye[e]||{label:e,color:"secondary",icon:zi},n=t.icon;return(0,De.jsxs)(Rn,{bg:t.color,className:"d-flex align-items-center gap-1",children:[(0,De.jsx)(n,{size:12}),t.label]})},Re=O?{total:null!==(t=null===(n=O.statistics)||void 0===n?void 0:n.total_orders)&&void 0!==t?t:P.length,pending:null!==(r=null===(i=O.statistics)||void 0===i||null===(a=i.payment_status_counts)||void 0===a?void 0:a.pending)&&void 0!==r?r:P.filter(e=>"pending"===e.payment_status).length,partial:null!==(o=null===(l=O.statistics)||void 0===l||null===(c=l.payment_status_counts)||void 0===c?void 0:c.partial)&&void 0!==o?o:P.filter(e=>"partial"===e.payment_status).length,paid:null!==(d=null===(u=O.statistics)||void 0===u||null===(h=u.payment_status_counts)||void 0===h?void 0:h.paid)&&void 0!==d?d:P.filter(e=>"paid"===e.payment_status).length,overdue:null!==(m=null===(p=O.statistics)||void 0===p||null===(f=p.payment_status_counts)||void 0===f?void 0:f.overdue)&&void 0!==m?m:P.filter(e=>"overdue"===e.payment_status).length,totalRevenue:null!==(g=null===(v=O.statistics)||void 0===v||null===(x=v.financial)||void 0===x?void 0:x.total_revenue)&&void 0!==g?g:P.reduce((e,t)=>e+(+t.total_amount||0),0),totalDeposits:null!==(b=null===(y=O.statistics)||void 0===y||null===(w=y.financial)||void 0===w?void 0:w.total_deposits)&&void 0!==b?b:P.reduce((e,t)=>e+(+t.deposit_amount||0),0),totalBalance:null!==(j=null===(_=O.statistics)||void 0===_||null===(N=_.financial)||void 0===N?void 0:N.total_balance)&&void 0!==j?j:P.reduce((e,t)=>e+(+t.balance_amount||0),0)}:(()=>{const e=P.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0),t=P.reduce((e,t)=>e+(parseFloat(t.deposit_amount)||0),0),n=P.reduce((e,t)=>e+(parseFloat(t.balance_amount)||0),0);return{total:P.length,pending:P.filter(e=>"pending"===e.payment_status).length,partial:P.filter(e=>"partial"===e.payment_status).length,paid:P.filter(e=>"paid"===e.payment_status).length,overdue:P.filter(e=>"overdue"===e.payment_status).length,totalRevenue:e,totalDeposits:t,totalBalance:n}})();return I&&0===P.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading payments..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:S,userRole:A,onLogout:E}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:S,onLogout:E,dashboardType:A}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(np,{title:"OOX Furniture - Payment Management",subtitle:"OOX Furniture payments, deposits, balances, and financial transactions tracking",icon:ti,onRefresh:be,accentColor:"#10b981",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:(0,De.jsxs)(Xs,{variant:"success",onClick:()=>T("/owner/orders"),className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(oi,{className:"me-2"}),"New Order"]})})}),z&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>B(""),children:[(0,De.jsx)(Fr,{className:"me-2"}),z]}),W&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>H(""),children:[(0,De.jsx)(wr,{className:"me-2"}),W]}),(0,De.jsxs)(Sn,{className:"mb-4",children:["owner"===A&&(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(xr,{size:40,className:"text-success mb-2"}),(0,De.jsx)("h3",{className:"mb-1 text-success",children:Te(Re.totalRevenue)}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Revenue"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(zi,{size:40,className:"text-info mb-2"}),(0,De.jsx)("h3",{className:"mb-1 text-info",children:Te(we.reduce((e,t)=>e+(+t.deposit_amount||0),0))}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Deposits (Visible Orders)"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ir,{size:40,className:"text-warning mb-2"}),(0,De.jsx)("h3",{className:"mb-1 text-warning",children:Te(we.reduce((e,t)=>e+(+t.balance_amount||0),0))}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Outstanding (Visible Orders)"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Hr,{size:40,className:"text-primary mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:we.length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Orders (Visible)"})]})})})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Sr,{size:30,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.pending}),(0,De.jsx)("small",{className:"text-muted",children:"Pending"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ir,{size:30,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.partial}),(0,De.jsx)("small",{className:"text-muted",children:"Partial"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(yr,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.paid}),(0,De.jsx)("small",{className:"text-muted",children:"Paid"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fr,{size:30,className:"text-danger mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.overdue}),(0,De.jsx)("small",{className:"text-muted",children:"Overdue"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Fc,{activeKey:pe,onSelect:e=>fe(e),className:"mb-3",children:[(0,De.jsx)(Vc,{eventKey:"all",title:"All Payments (".concat(Re.total,")")}),(0,De.jsx)(Vc,{eventKey:"pending",title:"Pending (".concat(Re.pending,")")}),(0,De.jsx)(Vc,{eventKey:"partial",title:"Partial (".concat(Re.partial,")")}),(0,De.jsx)(Vc,{eventKey:"paid",title:"Paid (".concat(Re.paid,")")}),(0,De.jsx)(Vc,{eventKey:"overdue",title:"Overdue (".concat(Re.overdue,")")})]}),(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Search by order number, customer, or amount...",value:ae,onChange:e=>oe(e.target.value)})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Select,{value:le,onChange:e=>ce(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Status"}),(0,De.jsx)("option",{value:"pending",children:"Pending"}),(0,De.jsx)("option",{value:"partial",children:"Partial"}),(0,De.jsx)("option",{value:"paid",children:"Paid"}),(0,De.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,De.jsxs)(Pn,{md:5,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Lr,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(ci,{className:"me-1"}),"Print Report"]})]})]})]})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Ki,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Ce("order_number"),children:["Order # ",Ee("order_number")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Ce("customer_name"),children:["Customer ",Ee("customer_name")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Ce("total_amount"),children:["Total Amount ",Ee("total_amount")]}),(0,De.jsx)("th",{children:"Deposit"}),(0,De.jsx)("th",{children:"Balance"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Ce("payment_status"),children:["Status ",Ee("payment_status")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Ce("order_date"),children:["Order Date ",Ee("order_date")]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:Ne.map(e=>{var t,n,s,r,i;return(0,De.jsxs)("tr",{children:[(0,De.jsxs)("td",{children:[(0,De.jsxs)("div",{className:"fw-medium text-primary",children:["#",e.order_number]}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"35px",height:"35px",fontSize:"1rem",fontWeight:"bold"},children:(null===(t=e.customer)||void 0===t||null===(n=t.name)||void 0===n||null===(s=n.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:(null===(r=e.customer)||void 0===r?void 0:r.name)||"Unknown Customer"}),(0,De.jsx)("small",{className:"text-muted",children:null===(i=e.customer)||void 0===i?void 0:i.phone})]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{className:"fw-bold text-success fs-5",children:Te(e.total_amount)})}),(0,De.jsxs)("td",{children:[(0,De.jsx)("div",{className:"text-info",children:Te(e.deposit_amount)}),e.deposit_amount>0&&(0,De.jsxs)("small",{className:"text-muted",children:[(parseFloat(e.deposit_amount)/parseFloat(e.total_amount)*100).toFixed(0),"%"]})]}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{className:"text-warning",children:Te(e.balance_amount)})}),(0,De.jsx)("td",{children:Le(e.payment_status)}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:Me(e.order_date)})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Td,{size:"sm",children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{X(e),q(!0)})(e),children:(0,De.jsx)(Br,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Update Payment"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>Se(e),children:(0,De.jsx)(Rr,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Order"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>T("/owner/orders"),children:(0,De.jsx)(Hr,{})})}),("owner"===A||"admin"===A)&&(0,De.jsx)(Rh,{placement:"top",overlay:(0,De.jsx)(Ah,{children:"Mark Overdue"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>Ae(e),children:(0,De.jsx)(Fr,{})})})]})})]},e.id)})})]}),0===we.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(ti,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No payments found"}),(0,De.jsx)("p",{className:"text-muted",children:ae?"Try adjusting your search criteria":"No orders with payment information yet"}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>T("/owner/orders"),children:[(0,De.jsx)(oi,{className:"me-1"}),"Create First Order"]})]})]}),ke>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",_e+1," to ",Math.min(je,we.length)," of ",we.length," payments"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===ge,onClick:()=>ve(ge-1),children:"Previous"}),[...Array(ke)].map((e,t)=>(0,De.jsx)(Xs,{variant:ge===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>ve(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:ge===ke,onClick:()=>ve(ge+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Vo,{show:U,onHide:()=>V(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Update Payment Information"})}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault();try{if("eft"===(re.payment_method||(null===K||void 0===K?void 0:K.payment_method)||"").toLowerCase()&&!re.proof_id){if(!ee)return void B("Payment proof required for EFT payments");try{J(!0);const e=new FormData;e.append("order",K.id),re.deposit_amount&&e.append("amount",re.deposit_amount),e.append("payment_type","deposit_payment"),e.append("proof_image",ee);const t=await oa(e,!0);null!==t&&void 0!==t&&t.id&&(re.proof_id=t.id)}catch(t){return J(!1),void B((null===t||void 0===t?void 0:t.message)||"Failed to upload payment proof")}finally{J(!1)}}const e=e=>{const t="string"===typeof e&&""===e.trim()?null:Number(e);return null===t||Number.isNaN(t)?void 0:t},n=Pe(Pe(Pe({},void 0!==e(re.deposit_amount)?{deposit_amount:e(re.deposit_amount)}:{}),re.balance_amount&&""!==re.balance_amount.trim()?{balance_amount:e(re.balance_amount)}:{}),{},{payment_status:re.payment_status,payment_method:re.payment_method,payment_notes:re.payment_notes});"eft"===(re.payment_method||(null===K||void 0===K?void 0:K.payment_method)||"").toLowerCase()&&re.proof_id&&(n.proof_id=re.proof_id),await ra(K.id,n),H("Payment information updated successfully"),V(!1),be()}catch(n){B("Failed to update payment: "+n.message)}},children:[(0,De.jsx)(Vo.Body,{children:K&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"mb-4 p-3 bg-light rounded",children:[(0,De.jsx)("h6",{children:"Order Details"}),(0,De.jsxs)("div",{className:"row",children:[(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Order #:"})," ",K.order_number,(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Customer:"})," ",null===(k=K.customer)||void 0===k?void 0:k.name]}),(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Total Amount:"})," ",Te(K.total_amount),(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Order Date:"})," ",Me(K.order_date)]})]})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Deposit Amount"}),(0,De.jsx)(Gl.Control,{type:"number",step:"0.01",value:re.deposit_amount,onChange:e=>ie(Pe(Pe({},re),{},{deposit_amount:e.target.value})),placeholder:"0.00"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Balance Amount (Being Paid)"}),(0,De.jsx)(Gl.Control,{type:"number",step:"0.01",value:re.balance_amount,onChange:e=>ie(Pe(Pe({},re),{},{balance_amount:e.target.value})),placeholder:"0.00"}),(0,De.jsx)(Gl.Text,{className:"text-muted",children:"Leave empty to auto-calculate (Total - Deposit)"})]})})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Payment Status *"}),(0,De.jsxs)(Gl.Select,{value:re.payment_status,onChange:e=>ie(Pe(Pe({},re),{},{payment_status:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select status..."}),(0,De.jsx)("option",{value:"deposit_pending",children:"Deposit Pending"}),(0,De.jsx)("option",{value:"deposit_paid",children:"Deposit Paid"}),(0,De.jsx)("option",{value:"fully_paid",children:"Fully Paid"}),(0,De.jsx)("option",{value:"overdue",children:"Overdue"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Payment Method"}),(0,De.jsxs)(Gl.Select,{value:re.payment_method,onChange:e=>ie(Pe(Pe({},re),{},{payment_method:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Select method..."}),(0,De.jsx)("option",{value:"cash",children:"Cash"}),(0,De.jsx)("option",{value:"card",children:"Card"}),(0,De.jsx)("option",{value:"EFT",children:"EFT"}),(0,De.jsx)("option",{value:"cheque",children:"Cheque"}),(0,De.jsx)("option",{value:"other",children:"Other"})]})]})})]}),"eft"===(re.payment_method||(null===K||void 0===K?void 0:K.payment_method)||"").toLowerCase()&&(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Payment Proof (required for EFT)"}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(Gl.Control,{placeholder:"Enter proof ID (recent uploaded proof)",value:re.proof_id,onChange:e=>ie(Pe(Pe({},re),{},{proof_id:e.target.value}))}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>T("/owner/payments"),children:"Refresh"})]}),(0,De.jsx)("div",{className:"form-text",children:"Upload proof via PaymentProofs module if needed, then paste its ID here. Backend validates proof belongs to this order and is recent."}),Y.length>0&&(0,De.jsxs)("div",{className:"mt-2",children:[(0,De.jsx)("div",{className:"small text-muted mb-1",children:"Recent proofs for this order:"}),(0,De.jsx)("div",{className:"d-flex flex-wrap gap-2",children:Y.map(e=>(0,De.jsxs)(Xs,{size:"sm",variant:"outline-primary",onClick:()=>ie(Pe(Pe({},re),{},{proof_id:String(e.id)})),children:["Use ID ",e.id]},e.id))}),(0,De.jsx)("div",{className:"d-flex flex-wrap gap-2 mt-2",children:Y.map(e=>(0,De.jsxs)(Xs,{size:"sm",variant:"outline-secondary",onClick:()=>(async e=>{if(null!==e&&void 0!==e&&e.id)try{let n="";try{const t=await ua(e.id,300);n=(null===t||void 0===t?void 0:t.url)||""}catch(t){}n||(n=da(e.id));const s=(null===e||void 0===e?void 0:e.file_name)||"proof_".concat(e.id,".pdf");se({open:!0,url:n,name:s})}catch(zP){B((null===zP||void 0===zP?void 0:zP.message)||"Unable to open proof")}})(e),children:["Preview #",e.id]},"pv-".concat(e.id)))})]}),(0,De.jsxs)("div",{className:"mt-3",children:[(0,De.jsx)("div",{className:"small text-muted mb-1",children:"Or upload proof image now (auto-attaches to this order):"}),(0,De.jsx)(Gl.Control,{type:"file",accept:"image/*,application/pdf",onChange:e=>{var t;return te((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),$&&(0,De.jsx)("div",{className:"small text-muted mt-1",children:"Uploading proof..."})]})]})})}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Payment Notes"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,value:re.payment_notes,onChange:e=>ie(Pe(Pe({},re),{},{payment_notes:e.target.value})),placeholder:"Add any payment notes or special instructions..."})]})})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>V(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"success",type:"submit",children:"Update Payment"})]})]})]}),(0,De.jsxs)(Vo,{show:G,onHide:()=>q(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Payment Details"})}),(0,De.jsx)(Vo.Body,{children:K&&(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Order Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Number:"}),(0,De.jsx)("br",{}),"#",K.order_number]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Customer:"}),(0,De.jsx)("br",{}),null===(C=K.customer)||void 0===C?void 0:C.name]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Date:"}),(0,De.jsx)("br",{}),Me(K.order_date)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Status:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Rn,{bg:"primary",children:K.order_status})]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Payment Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Total Amount:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-success fs-5 fw-bold",children:Te(K.total_amount)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Deposit Paid:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-info",children:Te(K.deposit_amount)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Balance Due:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-warning",children:Te(K.balance_amount)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Payment Status:"}),(0,De.jsx)("br",{}),Le(K.payment_status)]}),K.payment_method&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Payment Method:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Rn,{bg:"secondary",children:K.payment_method})]})]})]})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>q(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>{q(!1),Se(K)},children:"Update Payment"})]})]})]}),(0,De.jsxs)(Vo,{show:ne.open,onHide:()=>se({open:!1,url:"",name:""}),size:"lg",centered:!0,children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Proof of Payment"})}),(0,De.jsx)(Vo.Body,{children:ne.url?(0,De.jsx)(dP,{url:ne.url,fileName:ne.name,height:"75vh"}):(0,De.jsx)("div",{className:"text-muted",children:"No document"})})]})]})]})},hP=e=>{var t,n,r,i,a,o;let{user:l,userRole:c,onLogout:d}=e;const u=Z(),[h,m]=(0,s.useState)([]),[p,f]=(0,s.useState)([]),[g,v]=(0,s.useState)(!0),[x,b]=(0,s.useState)(""),[y,w]=(0,s.useState)(""),[j,_]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(null),[A,E]=(0,s.useState)({order_status:"",expected_delivery_date:"",actual_delivery_date:"",delivery_notes:"",delivery_address:""}),[T,P]=(0,s.useState)(""),[M,L]=(0,s.useState)("all"),[R,O]=(0,s.useState)("expected_delivery_date"),[D,I]=(0,s.useState)("asc"),[F,z]=(0,s.useState)("ready"),[B,W]=(0,s.useState)(1),[H]=(0,s.useState)(10);(0,s.useEffect)(()=>{U()},[]);const U=async()=>{try{v(!0);const[e,t]=await Promise.all([Zi(),ia()]);m(e.results||e),f(t.results||t),b("")}catch(e){b("Failed to load data: "+e.message)}finally{v(!1)}},V={out_for_delivery:{label:"Out for Delivery",color:"warning",icon:Mi},delivered:{label:"Delivered",color:"success",icon:yr},failed_delivery:{label:"Failed",color:"danger",icon:Ei},returned:{label:"Returned",color:"secondary",icon:ui}},G=()=>h.filter(e=>["out_for_delivery","delivered","failed_delivery","returned"].includes(e.order_status)),q=(()=>{let e=G();return"transit"===F?e=e.filter(e=>"out_for_delivery"===e.order_status):"delivered"===F?e=e.filter(e=>"delivered"===e.order_status):"issues"===F&&(e=e.filter(e=>["failed_delivery","returned"].includes(e.order_status))),T&&(e=e.filter(e=>{var t,n,s,r,i,a,o;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(T.toLowerCase()))||(null===(n=e.customer)||void 0===n||null===(s=n.name)||void 0===s?void 0:s.toLowerCase().includes(T.toLowerCase()))||(null===(r=e.customer)||void 0===r||null===(i=r.address)||void 0===i?void 0:i.toLowerCase().includes(T.toLowerCase()))||(null===(a=e.customer)||void 0===a||null===(o=a.phone)||void 0===o?void 0:o.includes(T))})),"all"!==M&&(e=e.filter(e=>e.order_status===M)),e.sort((e,t)=>{let n=e[R],s=t[R];var r,i;"customer_name"===R&&(n=(null===(r=e.customer)||void 0===r?void 0:r.name)||"",s=(null===(i=t.customer)||void 0===i?void 0:i.name)||"");return"string"===typeof n?"asc"===D?n.localeCompare(s):s.localeCompare(n):"asc"===D?new Date(n||0)-new Date(s||0):new Date(s||0)-new Date(n||0)})})(),K=B*H,X=K-H,Y=q.slice(X,K),Q=Math.ceil(q.length/H),$=e=>{R===e?I("asc"===D?"desc":"asc"):(O(e),I("asc"))},J=e=>{var t;S(e),E({order_status:e.order_status||"",expected_delivery_date:e.expected_delivery_date||"",actual_delivery_date:e.actual_delivery_date||"",delivery_notes:e.delivery_notes||"",delivery_address:(null===(t=e.customer)||void 0===t?void 0:t.address)||""}),_(!0)},ee=e=>R!==e?null:"asc"===D?(0,De.jsx)(ji,{}):(0,De.jsx)(wi,{}),te=e=>e?new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"Not set",ne=e=>e?new Date(e).toLocaleString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not set",se=e=>{if(!e)return"";const t=String(e).trim().replace(/[^\d+]/g,"");return t.startsWith("+27")?t:t.startsWith("27")?"+".concat(t):t.startsWith("0")?"+27".concat(t.slice(1)):t.startsWith("+")?t:"+".concat(t)},re=e=>{let t=e.order_status;const n=V[t]||{label:t,color:"secondary",icon:hr},s=n.icon;return(0,De.jsxs)(Rn,{bg:n.color,className:"d-flex align-items-center gap-1",children:[(0,De.jsx)(s,{size:12}),n.label]})},ie=e=>{if(!e.expected_delivery_date)return!1;return new Date(e.expected_delivery_date)<new Date&&"delivered"!==e.order_status},ae=(()=>{const e=G();return{total:e.length,transit:e.filter(e=>"out_for_delivery"===e.order_status).length,delivered:e.filter(e=>"delivered"===e.order_status).length,issues:e.filter(e=>["failed_delivery","returned"].includes(e.order_status)).length,overdue:e.filter(e=>ie(e)).length}})();return g&&0===h.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading deliveries..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:l,userRole:c,onLogout:d}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:l,onLogout:d,dashboardType:c}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(np,{title:"OOX Furniture - Delivery Management",subtitle:"OOX Furniture order deliveries, logistics management, and delivery status monitoring",icon:Mi,onRefresh:U,accentColor:"#06b6d4",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:(0,De.jsxs)(Xs,{variant:"info",onClick:()=>u("/owner/orders"),className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(hr,{className:"me-2"}),"View Orders"]})})}),x&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>b(""),children:[(0,De.jsx)(Fr,{className:"me-2"}),x]}),y&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>w(""),children:[(0,De.jsx)(wr,{className:"me-2"}),y]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Mi,{size:30,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ae.transit}),(0,De.jsx)("small",{className:"text-muted",children:"In Transit"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(yr,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ae.delivered}),(0,De.jsx)("small",{className:"text-muted",children:"Delivered"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ei,{size:30,className:"text-danger mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ae.issues}),(0,De.jsx)("small",{className:"text-muted",children:"Issues"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Sr,{size:30,className:"text-danger mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ae.overdue}),(0,De.jsx)("small",{className:"text-muted",children:"Overdue"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(vi,{size:30,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ae.total}),(0,De.jsx)("small",{className:"text-muted",children:"Total"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Fc,{activeKey:F,onSelect:e=>z(e),className:"mb-3",children:[(0,De.jsx)(Vc,{eventKey:"transit",title:"In Transit (".concat(ae.transit,")")}),(0,De.jsx)(Vc,{eventKey:"delivered",title:"Delivered (".concat(ae.delivered,")")}),(0,De.jsx)(Vc,{eventKey:"issues",title:"Issues (".concat(ae.issues,")")})]}),(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Search by order number, customer, or address...",value:T,onChange:e=>P(e.target.value)})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Select,{value:M,onChange:e=>L(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Status"}),(0,De.jsx)("option",{value:"out_for_delivery",children:"Out for Delivery"}),(0,De.jsx)("option",{value:"delivered",children:"Delivered"}),(0,De.jsx)("option",{value:"failed_delivery",children:"Failed Delivery"}),(0,De.jsx)("option",{value:"returned",children:"Returned"})]})}),(0,De.jsxs)(Pn,{md:5,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Lr,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(ui,{className:"me-1"}),"Plan Routes"]})]})]})]})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Ki,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>$("order_number"),children:["Order # ",ee("order_number")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>$("customer_name"),children:["Customer ",ee("customer_name")]}),(0,De.jsx)("th",{children:"Delivery Address"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>$("expected_delivery_date"),children:["Expected ",ee("expected_delivery_date")]}),(0,De.jsx)("th",{children:"Actual Delivery"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Priority"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:Y.map(e=>{var t,n,s,r,i,a;return(0,De.jsxs)("tr",{className:ie(e)?"table-warning":"",children:[(0,De.jsxs)("td",{children:[(0,De.jsxs)("div",{className:"fw-medium text-primary",children:["#",e.order_number]}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"35px",height:"35px",fontSize:"1rem",fontWeight:"bold"},children:(null===(t=e.customer)||void 0===t||null===(n=t.name)||void 0===n||null===(s=n.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:(null===(r=e.customer)||void 0===r?void 0:r.name)||"Unknown Customer"}),(0,De.jsxs)("small",{className:"text-muted",children:[(0,De.jsx)(ri,{className:"me-1",size:10}),null===(i=e.customer)||void 0===i?void 0:i.phone]})]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-start",children:[(0,De.jsx)(Zr,{className:"me-2 text-muted mt-1",size:12}),(0,De.jsx)("small",{className:"text-muted",style:{maxWidth:"200px"},children:(null===(a=e.customer)||void 0===a?void 0:a.address)||"No address provided"})]})}),(0,De.jsxs)("td",{children:[(0,De.jsx)("div",{className:ie(e)?"text-danger fw-bold":"text-muted",children:te(e.expected_delivery_date)}),ie(e)&&(0,De.jsxs)(Rn,{bg:"danger",className:"mt-1",children:[(0,De.jsx)(Sr,{className:"me-1",size:10}),"OVERDUE"]})]}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:ne(e.actual_delivery_date)})}),(0,De.jsx)("td",{children:re(e)}),(0,De.jsx)("td",{children:ie(e)?(0,De.jsx)(Rn,{bg:"danger",children:"High"}):"out_for_delivery"===e.order_status?(0,De.jsx)(Rn,{bg:"warning",children:"Medium"}):(0,De.jsx)(Rn,{bg:"secondary",children:"Normal"})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Td,{size:"sm",children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{S(e),k(!0)})(e),children:(0,De.jsx)(Br,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Update Delivery"}),children:(0,De.jsx)(Xs,{variant:"outline-info",onClick:()=>J(e),children:(0,De.jsx)(Rr,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Order"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>u("/owner/orders"),children:(0,De.jsx)(kr,{})})})]})})]},e.id)})})]}),0===q.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Mi,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No deliveries found"}),(0,De.jsx)("p",{className:"text-muted",children:T?"Try adjusting your search criteria":"No orders ready for delivery yet"}),(0,De.jsxs)(Xs,{variant:"info",onClick:()=>u("/owner/orders"),children:[(0,De.jsx)(hr,{className:"me-1"}),"View All Orders"]})]})]}),Q>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",X+1," to ",Math.min(K,q.length)," of ",q.length," deliveries"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===B,onClick:()=>W(B-1),children:"Previous"}),[...Array(Q)].map((e,t)=>(0,De.jsx)(Xs,{variant:B===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>W(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:B===Q,onClick:()=>W(B+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Vo,{show:j,onHide:()=>_(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Update Delivery Information"})}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault();try{const e={order_status:A.order_status,expected_delivery_date:A.expected_delivery_date||null,actual_delivery_date:A.actual_delivery_date||null,delivery_notes:A.delivery_notes};await ea(C.id,e),w("Delivery information updated successfully"),_(!1),U()}catch(t){b("Failed to update delivery: "+t.message)}},children:[(0,De.jsx)(Vo.Body,{children:C&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"mb-4 p-3 bg-light rounded",children:[(0,De.jsx)("h6",{children:"Order Details"}),(0,De.jsxs)("div",{className:"row",children:[(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Order #:"})," ",C.order_number,(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Customer:"})," ",null===(t=C.customer)||void 0===t?void 0:t.name]}),(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Phone:"})," ",null===(n=C.customer)||void 0===n?void 0:n.phone,(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Production Status:"})," ",(0,De.jsx)(Rn,{bg:"info",children:C.production_status})]})]})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Delivery Status *"}),(0,De.jsxs)(Gl.Select,{value:A.order_status,onChange:e=>E(Pe(Pe({},A),{},{order_status:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select status..."}),(0,De.jsx)("option",{value:"out_for_delivery",children:"Out for Delivery"}),(0,De.jsx)("option",{value:"delivered",children:"Delivered"}),(0,De.jsx)("option",{value:"failed_delivery",children:"Failed Delivery"}),(0,De.jsx)("option",{value:"returned",children:"Returned"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Expected Delivery Date"}),(0,De.jsx)(Gl.Control,{type:"date",value:A.expected_delivery_date,onChange:e=>E(Pe(Pe({},A),{},{expected_delivery_date:e.target.value}))})]})})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Actual Delivery Date & Time"}),(0,De.jsx)(Gl.Control,{type:"datetime-local",value:A.actual_delivery_date,onChange:e=>E(Pe(Pe({},A),{},{actual_delivery_date:e.target.value}))})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Delivery Address"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:2,value:A.delivery_address,onChange:e=>E(Pe(Pe({},A),{},{delivery_address:e.target.value})),placeholder:"Delivery address...",readOnly:!0})]})})]}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Delivery Notes"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:4,value:A.delivery_notes,onChange:e=>E(Pe(Pe({},A),{},{delivery_notes:e.target.value})),placeholder:"Add delivery notes, instructions, or issues encountered..."})]})})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"info",type:"submit",children:"Update Delivery"})]})]})]}),(0,De.jsxs)(Vo,{show:N,onHide:()=>k(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Delivery Details"})}),(0,De.jsx)(Vo.Body,{children:C&&(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Order Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Number:"}),(0,De.jsx)("br",{}),"#",C.order_number]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Customer:"}),(0,De.jsx)("br",{}),null===(r=C.customer)||void 0===r?void 0:r.name]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Phone:"}),(0,De.jsx)("br",{}),(0,De.jsx)(ri,{className:"me-2"}),(0,De.jsx)("span",{children:(null===(i=C.customer)||void 0===i?void 0:i.phone)||"No phone"}),(null===(a=C.customer)||void 0===a?void 0:a.phone)&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)(Xs,{size:"sm",variant:"outline-primary",href:"tel:".concat(se(C.customer.phone)),className:"ms-2",children:[(0,De.jsx)(ri,{className:"me-1"})," Call"]}),(0,De.jsxs)(Xs,{size:"sm",variant:"success",href:(e=>{const t=se(e);if(!t)return"#";const n=t.replace(/\D/g,"");return"https://wa.me/".concat(n)})(C.customer.phone),target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:[(0,De.jsx)(nr,{className:"me-1"})," WhatsApp"]})]})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Production Status:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Rn,{bg:"info",children:C.production_status})]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Delivery Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Status:"}),(0,De.jsx)("br",{}),re(C)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Expected Delivery:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:ie(C)?"text-danger fw-bold":"",children:te(C.expected_delivery_date)}),ie(C)&&(0,De.jsx)(Rn,{bg:"danger",className:"ms-2",children:"OVERDUE"})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Actual Delivery:"}),(0,De.jsx)("br",{}),ne(C.actual_delivery_date)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Delivery Address:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Zr,{className:"me-2"}),(null===(o=C.customer)||void 0===o?void 0:o.address)||"No address provided"]}),C.delivery_notes&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Notes:"}),(0,De.jsx)("br",{}),(0,De.jsx)("small",{className:"text-muted",children:C.delivery_notes})]})]})]})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>k(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"info",onClick:()=>{k(!1),J(C)},children:"Update Delivery"})]})]})]})]})]})},mP=e=>{let{user:t,userRole:n,onLogout:r}=e;const i=Z(),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(""),[g,v]=(0,s.useState)({total_materials:0,in_stock:0}),[x,b]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[j,_]=(0,s.useState)({assigned:0,started:0,completed:0}),[N,k]=(0,s.useState)("30");(0,s.useEffect)(()=>{C()},[]);const C=async()=>{try{m(!0);const[t,n,s]=await Promise.all([Zi(),ia(),ha()]);o(t.results||t),c(n.results||n),u(s.results||s);try{const[e,t,n]=await Promise.all([Ta(),Pa(),Ca()]);v(e||{total_materials:0,in_stock:0}),b(t||[]);const s=Array.isArray(null===n||void 0===n?void 0:n.orders)?n.orders:Array.isArray(n)?n:[];w(s);const[r,i,a]=await Promise.all([Oa("assigned").catch(()=>[]),Oa("started").catch(()=>[]),Oa("completed").catch(()=>[])]),o=e=>Array.isArray(null===e||void 0===e?void 0:e.results)?e.results.length:Array.isArray(e)?e.length:0;_({assigned:o(r),started:o(i),completed:o(a)})}catch(e){}f("")}catch(t){f("Failed to load analytics data: "+t.message)}finally{m(!1)}},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"created_at";if(!N||"all"===N)return e;const n=new Date,s=parseInt(N),r=new Date(n.getTime()-24*s*60*60*1e3);return e.filter(e=>new Date(e[t])>=r)},A=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e||0),E=e=>"".concat(Math.round(e||0),"%"),T=(()=>{const e=S(a,"order_date"),t=e.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0),n=e.reduce((e,t)=>e+(parseFloat(t.deposit_amount)||0),0),s=e.reduce((e,t)=>e+(parseFloat(t.balance_amount)||0),0),r=e.length>0?t/e.length:0,i=e.filter(e=>"paid"===e.payment_status),o=i.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return{totalRevenue:t,totalDeposits:n,outstandingBalance:s,averageOrderValue:r,paidRevenue:o,totalOrders:e.length,paidOrders:i.length,collectionRate:e.length>0?i.length/e.length*100:0}})(),P=(()=>{const e=S(a,"order_date"),t={pending:e.filter(e=>"pending"===e.order_status).length,confirmed:e.filter(e=>"confirmed"===e.order_status).length,in_production:e.filter(e=>"in_production"===e.production_status).length,order_ready:e.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,delivered:e.filter(e=>"delivered"===e.order_status).length,cancelled:e.filter(e=>"cancelled"===e.order_status).length},n=e.filter(e=>{if(!e.expected_delivery_date)return!1;return new Date(e.expected_delivery_date)<new Date&&"delivered"!==e.order_status}).length;return Pe(Pe({},t),{},{overdue:n,total:e.length})})(),M=(()=>{const e=S(l),t=l.filter(e=>a.some(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e.id})),n=l.map(e=>{const t=a.filter(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e.id}),n=t.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return Pe(Pe({},e),{},{orderCount:t.length,totalValue:n})}),s=n.sort((e,t)=>t.totalValue-e.totalValue).slice(0,5);return{total:l.length,new:e.length,active:t.length,withEmail:l.filter(e=>e.email).length,topCustomers:s,retentionRate:l.length>0?t.length/l.length*100:0}})(),L=(()=>{const e={not_started:a.filter(e=>"not_started"===e.production_status||!e.production_status).length,in_production:a.filter(e=>"in_production"===e.production_status).length,completed:a.filter(e=>"completed"===e.production_status).length},t=a.filter(e=>"delivered"===e.order_status).length,n=a.filter(e=>"delivered"===e.order_status).length,s=n>0?t/n*100:0;return Pe(Pe({},e),{},{avgProductionTime:5,onTimeRate:s})})(),R=(()=>{const e={owner:d.filter(e=>"owner"===e.role).length,admin:d.filter(e=>"admin"===e.role).length,warehouse:d.filter(e=>"warehouse"===e.role).length,delivery:d.filter(e=>"delivery"===e.role).length},t=d.filter(e=>e.is_active).length,n=d.filter(e=>{if(!e.last_login)return!1;return new Date(e.last_login)>new Date(Date.now()-6048e5)}).length;return Pe(Pe({},e),{},{active:t,total:d.length,recentLogins:n})})();return h&&0===a.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading analytics..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:t,userRole:n,onLogout:r}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:t,onLogout:r,dashboardType:n}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(np,{title:"OOX Furniture - Business Analytics",subtitle:"OOX Furniture comprehensive business intelligence and performance metrics",icon:xr,onRefresh:C,accentColor:"#f59e0b",children:(0,De.jsxs)("div",{className:"d-flex gap-3 justify-content-end align-items-center",children:[(0,De.jsxs)(Gl.Select,{value:N,onChange:e=>k(e.target.value),style:{width:"150px",borderRadius:"12px",border:"2px solid #f59e0b40",fontWeight:"600"},children:[(0,De.jsx)("option",{value:"7",children:"Last 7 days"}),(0,De.jsx)("option",{value:"30",children:"Last 30 days"}),(0,De.jsx)("option",{value:"90",children:"Last 3 months"}),(0,De.jsx)("option",{value:"365",children:"Last year"}),(0,De.jsx)("option",{value:"all",children:"All time"})]}),(0,De.jsxs)(Xs,{variant:"primary",className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(Lr,{className:"me-2"}),"Export Report"]})]})}),p&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>f(""),children:[(0,De.jsx)(Fr,{className:"me-2"}),p]}),(0,De.jsxs)(Sn,{className:"mb-4",children:["owner"===n&&(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ti,{size:40,className:"text-success mb-3"}),(0,De.jsx)("h3",{className:"text-success mb-1",children:A(T.totalRevenue)}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Total Revenue"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(ir,{className:"text-success me-1",size:14}),(0,De.jsx)("small",{className:"text-success",children:"+12% vs last period"})]})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Cr,{size:40,className:"text-primary mb-3"}),(0,De.jsx)("h3",{className:"text-primary mb-1",children:T.totalOrders}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Total Orders"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(ir,{className:"text-success me-1",size:14}),(0,De.jsx)("small",{className:"text-success",children:"+8% vs last period"})]})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fi,{size:40,className:"text-info mb-3"}),(0,De.jsx)("h3",{className:"text-info mb-1",children:M.total}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Total Customers"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(ir,{className:"text-success me-1",size:14}),(0,De.jsxs)("small",{className:"text-success",children:["+",M.new," new"]})]})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(xr,{size:40,className:"text-warning mb-3"}),(0,De.jsx)("h3",{className:"text-warning mb-1",children:A(T.averageOrderValue)}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Avg Order Value"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(Dr,{className:"text-secondary me-1",size:14}),(0,De.jsx)("small",{className:"text-secondary",children:"Stable"})]})]})})})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(ti,{className:"me-2 text-success"}),"Financial Overview"]}),(0,De.jsxs)(Td,{size:"sm",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Br,{className:"me-1"}),"Details"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(li,{className:"me-1"}),"Print"]})]})]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{children:["owner"===n&&(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Total Revenue"}),(0,De.jsx)("span",{className:"fw-bold text-success",children:A(T.totalRevenue)})]}),(0,De.jsx)(Jo,{variant:"success",now:100,height:8})]}),(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Collected"}),(0,De.jsx)("span",{className:"fw-bold text-info",children:A(T.paidRevenue)})]}),(0,De.jsx)(Jo,{variant:"info",now:75,height:8})]}),(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Outstanding"}),(0,De.jsx)("span",{className:"fw-bold text-warning",children:A(T.outstandingBalance)})]}),(0,De.jsx)(Jo,{variant:"warning",now:50,height:8})]})]}),(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Avg Order Value"}),(0,De.jsx)("span",{className:"fw-bold text-secondary",children:A(T.averageOrderValue)})]}),(0,De.jsx)(Jo,{variant:"secondary",now:65,height:8})]}),(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Paid Orders"}),(0,De.jsx)("span",{className:"fw-bold text-success",children:T.paidOrders})]}),(0,De.jsx)(Jo,{variant:"success",now:T.collectionRate,height:8})]})]})]})})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(br,{className:"me-2 text-primary"}),"Order Status Breakdown"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-warning rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Pending"})]}),(0,De.jsx)(Rn,{bg:"warning",children:P.pending})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-info rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"In Production"})]}),(0,De.jsx)(Rn,{bg:"info",children:P.in_production})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Ready for Delivery"})]}),(0,De.jsx)(Rn,{bg:"primary",children:P.order_ready})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-success rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Delivered"})]}),(0,De.jsx)(Rn,{bg:"success",children:P.delivered})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-danger rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Overdue"})]}),(0,De.jsx)(Rn,{bg:"danger",children:P.overdue})]})]}),(0,De.jsx)("hr",{}),(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-primary",children:P.total}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Orders"})]})]})]})})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(hr,{size:36,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:g.total_materials||0}),(0,De.jsx)("small",{className:"text-muted",children:"Total Materials"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(hr,{size:36,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:g.in_stock||0}),(0,De.jsx)("small",{className:"text-muted",children:"Materials In Stock"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fr,{size:32,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:x.length}),(0,De.jsx)("small",{className:"text-muted",children:"Low Stock Alerts"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Cr,{size:32,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:j.started}),(0,De.jsx)("small",{className:"text-muted",children:"Active Tasks"})]})})})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsxs)(ps.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Low Stock (Top 8)"}),(0,De.jsx)(Rn,{bg:x.length?"warning":"secondary",children:x.length})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Material"}),(0,De.jsx)("th",{children:"Current"}),(0,De.jsx)("th",{children:"Threshold"})]})}),(0,De.jsxs)("tbody",{children:[x.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.material_name}),(0,De.jsxs)("td",{children:[e.current_stock," ",e.unit]}),(0,De.jsx)("td",{children:e.threshold})]},e.id)),0===x.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"None"})})]})]})})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsxs)(ps.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Orders Snapshot"}),(0,De.jsxs)(Rn,{bg:"success",children:["Ready: ",y.filter(e=>"ready_for_delivery"===e.production_status).length]})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Customer"}),(0,De.jsx)("th",{children:"Production"})]})}),(0,De.jsxs)("tbody",{children:[y.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.order_number}),(0,De.jsx)("td",{children:e.customer_name}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"ready_for_delivery"===e.production_status?"success":"in_production"===e.production_status?"warning":"secondary",children:e.production_status})})]},e.id)),0===y.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"No orders"})})]})]})})]})})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Fi,{className:"me-2 text-info"}),"Customer Analytics"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Sn,{className:"mb-3",children:[(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-info",children:M.total}),(0,De.jsx)("small",{className:"text-muted",children:"Total Customers"})]})}),(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-success",children:M.active}),(0,De.jsx)("small",{className:"text-muted",children:"Active Customers"})]})})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Customer Retention Rate"}),(0,De.jsx)(Rn,{bg:"success",children:E(M.retentionRate)})]}),(0,De.jsx)(Jo,{variant:"success",now:M.retentionRate,height:6})]}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Customers with Email"}),(0,De.jsx)("span",{className:"fw-bold",children:M.withEmail})]})}),(0,De.jsx)("div",{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"New Customers (Period)"}),(0,De.jsx)(Rn,{bg:"info",children:M.new})]})})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(hr,{className:"me-2 text-warning"}),"Production Metrics"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Sn,{className:"mb-3",children:[(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-warning",children:L.in_production}),(0,De.jsx)("small",{className:"text-muted",children:"In Production"})]})}),(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-success",children:L.completed}),(0,De.jsx)("small",{className:"text-muted",children:"Completed"})]})})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"On-Time Delivery Rate"}),(0,De.jsx)(Rn,{bg:"success",children:E(L.onTimeRate)})]}),(0,De.jsx)(Jo,{variant:"success",now:L.onTimeRate,height:6})]}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Not Started"}),(0,De.jsx)(Rn,{bg:"secondary",children:L.not_started})]})}),(0,De.jsx)("div",{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Ready for Delivery"}),(0,De.jsx)(Rn,{bg:"primary",children:L.ready_for_delivery})]})})]})]})})]}),(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Ni,{className:"me-2 text-warning"}),"Top Customers by Revenue"]})}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsx)("div",{className:"table-responsive",children:(0,De.jsxs)(Ki,{className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Rank"}),(0,De.jsx)("th",{children:"Customer"}),(0,De.jsx)("th",{children:"Orders"}),(0,De.jsx)("th",{children:"Total Revenue"}),(0,De.jsx)("th",{children:"Avg Order Value"})]})}),(0,De.jsxs)("tbody",{children:[M.topCustomers.map((e,t)=>{var n,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)(Rn,{bg:0===t?"warning":1===t?"secondary":"light",children:["#",t+1]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"32px",height:"32px",fontSize:"0.9rem",fontWeight:"bold"},children:(null===(n=e.name)||void 0===n||null===(s=n.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:e.name}),(0,De.jsx)("small",{className:"text-muted",children:e.phone})]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"info",children:e.orderCount})}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"fw-bold text-success",children:A(e.totalValue)})}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"text-muted",children:A(e.orderCount>0?e.totalValue/e.orderCount:0)})})]},e.id)}),0===M.topCustomers.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:"5",className:"text-center text-muted py-4",children:"No customer data available"})})]})]})})})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Fi,{className:"me-2 text-secondary"}),"Team Overview"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("div",{className:"mb-4",children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h3",{className:"text-primary",children:R.total}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Team Members"})]})}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Active Users"}),(0,De.jsx)(Rn,{bg:"success",children:R.active})]})}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Recent Logins (7 days)"}),(0,De.jsx)(Rn,{bg:"info",children:R.recentLogins})]})}),(0,De.jsx)("hr",{}),(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Owners"}),(0,De.jsx)(Rn,{bg:"warning",children:R.owner})]})}),(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Admins"}),(0,De.jsx)(Rn,{bg:"primary",children:R.admin})]})}),(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Warehouse"}),(0,De.jsx)(Rn,{bg:"success",children:R.warehouse})]})}),(0,De.jsx)("div",{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Delivery"}),(0,De.jsx)(Rn,{bg:"info",children:R.delivery})]})})]})]})})]}),(0,De.jsx)(Sn,{children:(0,De.jsx)(Pn,{children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Wr,{className:"me-2 text-primary"}),"Quick Actions"]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex gap-3 flex-wrap",children:[(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>i("/owner/orders"),children:[(0,De.jsx)(Cr,{className:"me-2"}),"View All Orders"]}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>i("/owner/customers"),children:[(0,De.jsx)(Fi,{className:"me-2"}),"Manage Customers"]}),(0,De.jsxs)(Xs,{variant:"info",onClick:()=>i("/owner/payments"),children:[(0,De.jsx)(ti,{className:"me-2"}),"Payment Overview"]}),(0,De.jsxs)(Xs,{variant:"warning",onClick:()=>i("/owner/deliveries"),children:[(0,De.jsx)(Mi,{className:"me-2"}),"Delivery Status"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Lr,{className:"me-2"}),"Export Full Report"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(li,{className:"me-2"}),"Print Dashboard"]})]})})]})})})]})]})]})},pP={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"https://internaloox-1.onrender.com/api",fP=e=>{let{onLogin:t}=e;const n=Z(),[r,i]=(0,s.useState)({username:"",password:"",role:"admin"}),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{const e=()=>{f(window.innerWidth<768)};e(),window.addEventListener("resize",e);const t=setInterval(()=>v(new Date),6e4);return()=>{window.removeEventListener("resize",e),clearInterval(t)}},[]);const x=e=>{const{name:t,value:n}=e.target;i(e=>Pe(Pe({},e),{},{[t]:n})),d&&u("")};return(0,De.jsxs)("div",{className:"oox-mobile-container",style:{minHeight:"100vh",background:"#f8f9fa",position:"relative",overflow:"hidden"},children:[(0,De.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"\n            radial-gradient(circle at 20% 80%, rgba(245, 158, 11, 0.3) 0%, transparent 50%),\n            radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.3) 0%, transparent 50%),\n            radial-gradient(circle at 40% 40%, rgba(59, 130, 246, 0.2) 0%, transparent 50%)\n          ",animation:"float 20s ease-in-out infinite"}}),(0,De.jsx)("div",{className:"oox-floating-particles",children:[...Array(20)].map((e,t)=>(0,De.jsx)("div",{style:{position:"absolute",width:"".concat(10*Math.random()+5,"px"),height:"".concat(10*Math.random()+5,"px"),background:"rgba(255, 255, 255, 0.1)",borderRadius:"50%",top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),animation:"float ".concat(10*Math.random()+10,"s ease-in-out infinite"),animationDelay:"".concat(5*Math.random(),"s")}},t))}),(0,De.jsxs)("div",{className:"oox-animate-fadeInUp",style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100vh",padding:p?"1rem":"2rem"},children:[(0,De.jsxs)("div",{className:"oox-mobile-text-center oox-mobile-mb-4",children:[(0,De.jsxs)("div",{className:"oox-logo",style:{width:p?"100px":"120px",height:p?"100px":"120px",margin:"0 auto 1.5rem",position:"relative"},children:[(0,De.jsx)(Tr,{size:p?50:60,style:{color:"white"}}),(0,De.jsx)("div",{style:{position:"absolute",top:"-10px",left:"-10px",right:"-10px",bottom:"-10px",border:"3px solid rgba(255, 255, 255, 0.3)",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}})]}),(0,De.jsx)("h1",{className:"oox-brand-gradient",style:{fontSize:p?"2.5rem":"3.5rem",fontWeight:"900",margin:"0 0 0.5rem 0",textShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",background:"linear-gradient(135deg, #ffffff 0%, #f59e0b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"OOX FURNITURE"}),(0,De.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:p?"1.1rem":"1.3rem",fontWeight:"600",margin:"0 0 0.5rem 0",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Internal Order Management System"}),(0,De.jsxs)("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,De.jsx)(cr,{style:{color:"#f59e0b"}}),(0,De.jsx)("span",{children:"Powered by Innovation"}),(0,De.jsx)(Gr,{style:{color:"#10b981"}})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-card oox-animate-slideInLeft",style:{maxWidth:"400px",margin:"0 auto",position:"relative"},children:[(0,De.jsxs)("div",{className:"oox-mobile-text-center oox-mobile-mb-4",children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-center oox-mobile-mb-3",children:[(0,De.jsx)(Ni,{style:{color:"#f59e0b",fontSize:"1.5rem",marginRight:"0.5rem"}}),(0,De.jsx)("h2",{style:{margin:0,color:"#1e293b",fontWeight:"700",fontSize:"1.5rem"},children:"Welcome Back"}),(0,De.jsx)(Ni,{style:{color:"#f59e0b",fontSize:"1.5rem",marginLeft:"0.5rem"}})]}),(0,De.jsx)("p",{style:{color:"#6b7280",margin:0,fontSize:"0.95rem"},children:"Access your OOX Furniture dashboard"}),(0,De.jsxs)("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,De.jsx)("span",{children:g.toLocaleDateString()}),(0,De.jsx)("span",{children:"\u2022"}),(0,De.jsx)("span",{children:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),d&&(0,De.jsxs)("div",{className:"oox-mobile-mb-3",style:{padding:"0.875rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,De.jsx)(Fr,{style:{color:"#dc2626",flexShrink:0}}),(0,De.jsx)("span",{style:{color:"#dc2626",fontSize:"0.875rem",fontWeight:"500"},children:d})]}),h&&(0,De.jsxs)("div",{className:"oox-mobile-mb-3",style:{padding:"0.875rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,De.jsx)(yr,{style:{color:"#059669",flexShrink:0}}),(0,De.jsx)("span",{style:{color:"#059669",fontSize:"0.875rem",fontWeight:"500"},children:h})]}),(0,De.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.username.trim()?r.password.trim()?r.role||(u("Role is required"),0):(u("Password is required"),0):(u("Username is required"),0)){c(!0),u(""),m("");try{const e=await fetch("".concat(pP,"/users/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.username,password:r.password,role:r.role,selected_role:r.role})});if(!e.ok){const t=await e.json();return u(t.error||"Login failed"),void c(!1)}const s=await e.json();localStorage.setItem("oox_token",s.access),localStorage.setItem("oox_refresh",s.refresh);const i=s.user||{};localStorage.setItem("oox_user",JSON.stringify(i)),localStorage.setItem("oox_selected_role",r.role||"");const a=i.role,o=a?a.charAt(0).toUpperCase()+a.slice(1):"Dashboard";m("Welcome to OOX Furniture ".concat(o,"!")),t(i);const l=e=>{switch(e){case"owner":return"/owner";case"admin":return"/admin";case"delivery":return"/delivery";case"warehouse_worker":return"/warehouse/worker";case"warehouse":case"warehouse_manager":return"/warehouse";default:return"/login"}};setTimeout(()=>{const e=localStorage.getItem("oox_selected_role")||r.role,t=(null===s||void 0===s?void 0:s.permissions)||{},i=e&&(e=>!0==={owner:t.can_access_owner,admin:t.can_access_admin,warehouse:t.can_access_warehouse,delivery:t.can_access_delivery,warehouse_worker:!0}[e])(e)?e:a;n(l(i))},1500)}catch(s){u("Network error. Please check your connection.")}finally{c(!1)}}},children:[(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:[(0,De.jsx)(Ii,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"Username"]}),(0,De.jsx)("input",{name:"username",type:"text",value:r.username,onChange:x,className:"oox-mobile-form-input",placeholder:"Enter your username",disabled:l,style:{paddingLeft:"1rem",fontSize:p?"16px":"0.875rem"}})]}),(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:[(0,De.jsx)(Di,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"Access Level"]}),(0,De.jsxs)("select",{name:"role",value:r.role,onChange:x,className:"oox-mobile-form-input",disabled:l,style:{fontSize:p?"16px":"0.875rem"},children:[(0,De.jsx)("option",{value:"admin",children:"Admin - Operations Control"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse - Production Floor"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery - Distribution Hub"}),(0,De.jsx)("option",{value:"owner",children:"Owner - Executive Portal"})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:[(0,De.jsx)(Jr,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"Password"]}),(0,De.jsxs)("div",{style:{position:"relative"},children:[(0,De.jsx)("input",{name:"password",type:a?"text":"password",value:r.password,onChange:x,className:"oox-mobile-form-input",placeholder:"Enter your password",disabled:l,style:{paddingRight:"3rem",fontSize:p?"16px":"0.875rem"}}),(0,De.jsx)("button",{type:"button",onClick:()=>o(!a),disabled:l,style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#6b7280",cursor:"pointer",padding:0},children:a?(0,De.jsx)(zr,{}):(0,De.jsx)(Br,{})})]})]}),(0,De.jsx)("button",{type:"submit",disabled:l,className:"oox-mobile-btn",style:{width:"100%",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"700"},children:l?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(_i,{style:{animation:"spin 1s linear infinite"}}),"Authenticating..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Di,{}),"Access OOX Dashboard"]})})]}),(0,De.jsxs)("div",{className:"oox-mobile-text-center",style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,De.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0 0 0.25rem 0",fontWeight:"500"},children:"\xa9 2024 OOX Furniture Management System"}),(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.7rem",color:"#d1d5db"},children:[(0,De.jsx)("span",{children:"Secure"}),(0,De.jsx)("span",{children:"\u2022"}),(0,De.jsx)("span",{children:"Reliable"}),(0,De.jsx)("span",{children:"\u2022"}),(0,De.jsx)("span",{children:"Mobile-First"})]})]})]}),p&&(0,De.jsxs)("div",{className:"oox-mobile-text-center oox-animate-fadeInUp",style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255, 255, 255, 0.1)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[(0,De.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem",margin:0,fontWeight:"500"},children:"\ud83d\udcf1 Optimized for mobile experience"}),(0,De.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.8rem",margin:"0.25rem 0 0 0"},children:"Tap any dashboard above for instant access"})]})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        @keyframes float {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          33% { transform: translateY(-10px) rotate(1deg); }\n          66% { transform: translateY(5px) rotate(-1deg); }\n        }\n        \n        @keyframes pulse {\n          0%, 100% { \n            transform: scale(1);\n            opacity: 0.7;\n          }\n          50% { \n            transform: scale(1.05);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})},gP={name:"",sku:"",description:"",price:"",currency:"ZAR",colors:[],fabrics:[],attributes:{}},vP=e=>{let{user:t}=e;const n=Z(),[r,i]=(0,s.useState)(gP),[a,o]=(0,s.useState)({}),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[p,f]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[x,b]=(0,s.useState)(!0),[y,w]=(0,s.useState)(""),[j,_]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{const[e,t]=await Promise.all([ba().catch(()=>({results:[]})),ya().catch(()=>({results:[]}))]),n=e=>e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[];f(n(e)),v(n(t))}catch(zP){}finally{b(!1)}})()},[]);const N=(0,s.useMemo)(()=>e=>{const t={};if((!e.name||e.name.trim().length<2)&&(t.name="Product name is required"),""===e.price||null===e.price)t.price="Price in Rands is required";else{const n=Number(e.price);(Number.isNaN(n)||n<0)&&(t.price="Enter a valid price (>= 0)")}return Array.isArray(e.colors)&&0!==e.colors.length||(t.colors="Select at least one color"),Object.keys(e.attributes||{}).forEach(e=>{e&&""!==e.trim()||(t.attributes="Attribute names cannot be empty")}),t},[]),k=(e,t)=>{i(n=>Pe(Pe({},n),{},{[e]:t})),a[e]&&o(t=>Pe(Pe({},t),{},{[e]:void 0}))},C=(e,t)=>{const n=Array.from(t.target.selectedOptions).map(e=>e.value);i(t=>Pe(Pe({},t),{},{[e]:n})),a[e]&&o(t=>Pe(Pe({},t),{},{[e]:void 0}))},S=Array.isArray(p)?p:[],A=Array.isArray(g)?g:[];return(0,De.jsxs)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[(0,De.jsx)(Zm,{user:t,onLogout:()=>n("/login"),dashboardType:"owner"===(null===t||void 0===t?void 0:t.role)?"owner":(null===t||void 0===t?void 0:t.role)||"warehouse"}),(0,De.jsxs)(Xe,{className:"py-4",children:[(0,De.jsxs)(Xs,{variant:"link",className:"mb-3",onClick:()=>n(-1),children:[(0,De.jsx)(rr,{className:"me-2"})," Back"]}),(0,De.jsx)(Sn,{className:"justify-content-center",children:(0,De.jsx)(Pn,{lg:10,xl:8,children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsxs)(ps.Header,{className:"d-flex align-items-center",children:[(0,De.jsx)(dr,{className:"me-2 text-primary"}),(0,De.jsx)("h5",{className:"mb-0",children:"Create New Product"}),(0,De.jsx)(Rn,{bg:"secondary",className:"ms-3",children:"Warehouse Manager"})]}),(0,De.jsxs)(ps.Body,{children:[d&&(0,De.jsxs)(Nn,{variant:"success",className:"d-flex align-items-center",children:[(0,De.jsx)(yr,{className:"me-2"})," ",d]}),h&&(0,De.jsx)(Nn,{variant:"danger",children:h}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault(),m(null);const s=N(r);if(o(s),!(Object.keys(s).filter(e=>s[e]).length>0)){c(!0);try{var a;const e={name:r.name.trim(),sku:r.sku?r.sku.trim():void 0,description:(null===(a=r.description)||void 0===a?void 0:a.trim())||"",price:Number(r.price),currency:r.currency||"ZAR",colors:(r.colors||[]).map(e=>Number(e)),fabrics:(r.fabrics||[]).map(e=>Number(e)),attributes:r.attributes||{}};Object.keys(e).forEach(t=>void 0===e[t]&&delete e[t]);const s=await(e=>Ji("/products/",{method:"POST",data:e}))(e);u('Product "'.concat((null===s||void 0===s?void 0:s.name)||e.name,'" created successfully')),setTimeout(()=>{i(gP);const e=null===t||void 0===t?void 0:t.role;n("owner"===e?"/owner":"admin"===e?"/admin":"/warehouse")},1e3)}catch(l){m((null===l||void 0===l?void 0:l.message)||"Failed to create product")}finally{c(!1)}}},noValidate:!0,children:[(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(Gl.Group,{controlId:"name",children:[(0,De.jsx)(Gl.Label,{children:"Product Name"}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"e.g., L-Shaped Couch",value:r.name,onChange:e=>k("name",e.target.value),isInvalid:!!a.name,required:!0}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:a.name})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{controlId:"sku",children:[(0,De.jsx)(Gl.Label,{children:"SKU (optional)"}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"e.g., OOX-LC-001",value:r.sku,onChange:e=>k("sku",e.target.value)})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{controlId:"price",children:[(0,De.jsx)(Gl.Label,{children:"Price (Rands)"}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:"R"}),(0,De.jsx)(Gl.Control,{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:r.price,onChange:e=>k("price",e.target.value),isInvalid:!!a.price,required:!0}),(0,De.jsx)(oc.Text,{children:"ZAR"}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:a.price})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{controlId:"colors",children:[(0,De.jsx)(Gl.Label,{children:"Colors (select one or more)"}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(ni,{})}),(0,De.jsxs)(Gl.Select,{multiple:!0,value:r.colors,onChange:e=>C("colors",e),isInvalid:!!a.colors,required:!0,children:[x&&(0,De.jsx)("option",{children:"Loading..."}),!x&&S.map((e,t)=>{var n,s,r,i;const a=null!==(n=null!==(s=null===e||void 0===e?void 0:e.id)&&void 0!==s?s:null===e||void 0===e?void 0:e.name)&&void 0!==n?n:e,o=null!==(r=null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:null===e||void 0===e?void 0:e.label)&&void 0!==r?r:String(a);return(0,De.jsx)("option",{value:a,children:o},"".concat(a,"-").concat(t))})]}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:a.colors})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{controlId:"fabrics",children:[(0,De.jsx)(Gl.Label,{children:"Fabrics (optional, multiple)"}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(Tr,{})}),(0,De.jsxs)(Gl.Select,{multiple:!0,value:r.fabrics,onChange:e=>C("fabrics",e),children:[x&&(0,De.jsx)("option",{children:"Loading..."}),!x&&A.map((e,t)=>{var n,s,r,i;const a=null!==(n=null!==(s=null===e||void 0===e?void 0:e.id)&&void 0!==s?s:null===e||void 0===e?void 0:e.name)&&void 0!==n?n:e,o=null!==(r=null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:null===e||void 0===e?void 0:e.label)&&void 0!==r?r:String(a);return(0,De.jsx)("option",{value:a,children:o},"".concat(a,"-").concat(t))})]})]})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{controlId:"description",children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:4,placeholder:"Short description of the product",value:r.description,onChange:e=>k("description",e.target.value)})]})})]}),(0,De.jsx)("hr",{className:"my-4"}),(0,De.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Additional Fields"}),(0,De.jsx)(Rn,{bg:"info",className:"ms-2",children:"Optional"})]}),a.attributes&&(0,De.jsx)(Nn,{variant:"warning",className:"py-2",children:a.attributes}),Object.keys(r.attributes||{}).length>0&&(0,De.jsx)("div",{className:"mb-3",children:Object.entries(r.attributes).map(e=>{let[t,n]=e;return(0,De.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,De.jsx)("div",{className:"me-2",style:{minWidth:180},children:(0,De.jsx)(Rn,{bg:"secondary",className:"text-uppercase",children:t})}),(0,De.jsx)(Gl.Control,{type:"text",value:n,onChange:e=>i(n=>Pe(Pe({},n),{},{attributes:Pe(Pe({},n.attributes||{}),{},{[t]:e.target.value})}))}),(0,De.jsx)(Xs,{variant:"outline-danger",className:"ms-2",onClick:()=>(e=>{i(t=>{const n=Pe({},t.attributes||{});return delete n[e],Pe(Pe({},t),{},{attributes:n})})})(t),children:(0,De.jsx)(Pi,{})})]},t)})}),(0,De.jsxs)(oc,{className:"mb-3",children:[(0,De.jsx)(Gl.Control,{placeholder:"New field name (e.g., Wood Type)",value:y,onChange:e=>w(e.target.value)}),(0,De.jsx)(Gl.Control,{placeholder:"Value",value:j,onChange:e=>_(e.target.value)}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:()=>{const e=y.trim();e&&(i(t=>Pe(Pe({},t),{},{attributes:Pe(Pe({},t.attributes||{}),{},{[e]:j})})),w(""),_(""),o(e=>Pe(Pe({},e),{},{attributes:void 0})))},disabled:!y.trim(),children:[(0,De.jsx)(oi,{className:"me-1"})," Add Field"]})]}),(0,De.jsx)("div",{className:"d-flex justify-content-end",children:(0,De.jsx)(Xs,{type:"submit",variant:"primary",disabled:l,className:"px-4",children:l?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Vi,{animation:"border",size:"sm",className:"me-2"}),"Saving..."]}):"Create Product"})})]})]})]})})})]})]})},xP={name:"",unit:"",unit_price:"",minimum_stock:"",description:""},bP=["units","metres","meters","boards","rolls","kilograms","kg","litres","liters"],yP=()=>{const{user:e}=(null===te||void 0===te?void 0:te())||{user:null},[t,n]=(0,s.useState)([]),r=()=>["owner","admin","warehouse_manager","warehouse"].includes(null===e||void 0===e?void 0:e.role),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(xP),[v,x]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{l(!0),d(null);try{const[e,t]=await Promise.all([Ea(),Ma().catch(()=>[])]);n(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.results)||[]),a(Array.isArray(t)?t:(null===t||void 0===t?void 0:t.results)||[])}catch(zP){d("Failed to load materials")}finally{l(!1)}})()},[]);const w=async e=>{var t;if(window.confirm('Delete material "'.concat(e.name,'"?')))try{await(t=e.id,Ji("/inventory/materials/".concat(t,"/"),{method:"DELETE"})),n(t=>t.filter(t=>t.id!==e.id))}catch(zP){alert("Delete failed: "+((null===zP||void 0===zP?void 0:zP.message)||"Unknown error"))}},j=(0,s.useMemo)(()=>e=>{var t,n;const s={};return null!==(t=e.name)&&void 0!==t&&t.trim()||(s.name="Name is required"),null!==(n=e.unit)&&void 0!==n&&n.trim()||(s.unit="Unit is required"),(""===e.unit_price||Number.isNaN(Number(e.unit_price))||Number(e.unit_price)<0)&&(s.unit_price="Valid unit price required"),""!==e.minimum_stock&&(Number.isNaN(Number(e.minimum_stock))||Number(e.minimum_stock)<0)&&(s.minimum_stock="Minimum stock must be >= 0"),s},[]),[_,N]=(0,s.useState)({}),k=(e,t)=>{g(n=>Pe(Pe({},n),{},{[e]:t})),N(t=>Pe(Pe({},t),{},{[e]:void 0}))};return(0,De.jsx)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:(0,De.jsxs)(Xe,{className:"py-4",children:[(0,De.jsx)(Sn,{className:"mb-3",children:(0,De.jsxs)(Pn,{className:"d-flex align-items-center justify-content-between",children:[(0,De.jsxs)("h4",{className:"mb-0",children:[(0,De.jsx)(hr,{className:"me-2 text-primary"}),"Inventory Materials"]}),r()&&(0,De.jsxs)(Xs,{variant:"success",onClick:()=>{p(null),g(xP),h(!0)},children:[(0,De.jsx)(oi,{className:"me-2"})," Add Material"]})]})}),c&&(0,De.jsx)(Nn,{variant:"danger",children:c}),b&&(0,De.jsx)(Nn,{variant:"success",children:b}),(0,De.jsx)(ps,{className:"shadow-sm",children:(0,De.jsx)(ps.Body,{children:o?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})}):(0,De.jsxs)(Ki,{responsive:!0,hover:!0,size:"sm",className:"align-middle",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Name"}),(0,De.jsx)("th",{children:"Category"}),(0,De.jsx)("th",{children:"Unit"}),(0,De.jsx)("th",{children:"Unit Price"}),(0,De.jsx)("th",{children:"Min Stock"}),(0,De.jsx)("th",{children:"Description"}),r()&&(0,De.jsx)("th",{style:{width:140}})]})}),(0,De.jsx)("tbody",{children:0===t.length?(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:7,className:"text-center text-muted py-4",children:"No materials"})}):t.map(e=>{var t,n,s,a;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.name}),(0,De.jsx)("td",{children:(null===(t=i.find(t=>{var n;return t.id===(null!==(n=e.category_id)&&void 0!==n?n:e.category)}))||void 0===t?void 0:t.name)||"-"}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"secondary",children:e.unit})}),(0,De.jsxs)("td",{children:["R ",Number(null!==(n=null!==(s=e.unit_price)&&void 0!==s?s:e.cost_per_unit)&&void 0!==n?n:0).toFixed(2)]}),(0,De.jsx)("td",{children:null!==(a=e.minimum_stock)&&void 0!==a?a:"-"}),(0,De.jsx)("td",{className:"text-truncate",style:{maxWidth:260},children:e.description}),r()&&(0,De.jsxs)("td",{className:"text-end",children:[(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>(e=>{var t,n,s;p(e),g({name:e.name||"",unit:e.unit||"",unit_price:null!==(t=null!==(n=e.unit_price)&&void 0!==n?n:e.cost_per_unit)&&void 0!==t?t:"",minimum_stock:null!==(s=e.minimum_stock)&&void 0!==s?s:"",description:e.description||""}),h(!0)})(e),children:(0,De.jsx)(Rr,{})}),(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>w(e),children:(0,De.jsx)(Pi,{})})]})]},e.id)})})]})})}),r()&&(0,De.jsxs)(Vo,{show:u,onHide:()=>h(!1),backdrop:"static",size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:m?"Edit Material":"Add Material"})}),(0,De.jsxs)(Vo.Body,{children:[_.general&&(0,De.jsx)(Nn,{variant:"danger",children:_.general}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault(),y(null);const t=j(f);if(N(t),!Object.values(t).filter(Boolean).length){x(!0);try{var s;const e={name:f.name.trim(),unit:f.unit,cost_per_unit:Number(f.unit_price),minimum_stock:""===f.minimum_stock?null:Number(f.minimum_stock),description:(null===(s=f.description)||void 0===s?void 0:s.trim())||""};let t;m?(t=await((e,t)=>Ji("/inventory/materials/".concat(e,"/"),{method:"PUT",data:t}))(m.id,e),n(e=>e.map(e=>e.id===m.id?t:e)),y("Material updated")):(t=await(e=>Ji("/inventory/materials/",{method:"POST",data:e}))(e),n(e=>[t,...e]),y("Material created")),h(!1),p(null),g(xP)}catch(e){N({general:(null===e||void 0===e?void 0:e.message)||"Save failed"})}finally{x(!1)}}},children:[(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:[(0,De.jsx)(Si,{className:"me-2"}),"Name"]}),(0,De.jsx)(Gl.Control,{value:f.name,onChange:e=>k("name",e.target.value),isInvalid:!!_.name}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:_.name})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:[(0,De.jsx)(hi,{className:"me-2"}),"Unit"]}),(0,De.jsxs)(Gl.Select,{value:f.unit,onChange:e=>k("unit",e.target.value),isInvalid:!!_.unit,children:[(0,De.jsx)("option",{value:"",children:"Select unit"}),bP.map(e=>(0,De.jsx)("option",{value:e,children:e},e))]}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:_.unit})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:[(0,De.jsx)(Mr,{className:"me-2"}),"Unit Price (ZAR)"]}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:"R"}),(0,De.jsx)(Gl.Control,{type:"number",min:"0",step:"0.01",value:f.unit_price,onChange:e=>k("unit_price",e.target.value),isInvalid:!!_.unit_price}),(0,De.jsx)(oc.Text,{children:"ZAR"}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:_.unit_price})]})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Minimum Stock"}),(0,De.jsx)(Gl.Control,{type:"number",min:"0",step:"0.01",value:f.minimum_stock,onChange:e=>k("minimum_stock",e.target.value),isInvalid:!!_.minimum_stock}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:_.minimum_stock})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,value:f.description,onChange:e=>k("description",e.target.value)})]})})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-end mt-4",children:[(0,De.jsx)(Xs,{variant:"secondary",className:"me-2",onClick:()=>h(!1),disabled:v,children:"Cancel"}),(0,De.jsx)(Xs,{type:"submit",variant:"primary",disabled:v,children:v?"Saving...":"Save"})]})]})]})]})]})})},wP=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)({material_id:"",direction:"in",quantity:"",unit_cost:"",reason:"",note:""}),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)({});(0,s.useEffect)(()=>{f()},[]);const f=async()=>{a(!0),l(null);try{const[e,n]=await Promise.all([Ea(),Ji("/inventory/stock-movements/")]);t(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.results)||[]),r(Array.isArray(n)?n:(null===n||void 0===n?void 0:n.results)||[])}catch(zP){l("Failed to load stock data: "+zP.message)}finally{a(!1)}},g=(0,s.useMemo)(()=>e=>{const t={};return e.material_id||(t.material_id="Select a material"),(!e.quantity||Number.isNaN(Number(e.quantity))||Number(e.quantity)<=0)&&(t.quantity="Enter a valid quantity"),"in"===e.direction&&(""===e.unit_cost||Number.isNaN(Number(e.unit_cost))||Number(e.unit_cost)<0)&&(t.unit_cost="Enter valid unit cost for stock-in"),e.reason&&""!==e.reason.trim()||(t.reason="Please provide a reason for this stock movement"),t},[]),v=(e,t)=>{if("direction"===e){const e="in"===String(t).toLowerCase().trim()?"in":"out";return d(t=>Pe(Pe({},t),{},{direction:e})),void p(e=>Pe(Pe({},e),{},{direction:void 0}))}d(n=>Pe(Pe({},n),{},{[e]:t})),p(t=>Pe(Pe({},t),{},{[e]:void 0}))};return i?(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,De.jsx)(Vi,{animation:"border",role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,De.jsx)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:(0,De.jsxs)(Xe,{className:"py-4",children:[(0,De.jsx)(Sn,{className:"mb-3",children:(0,De.jsxs)(Pn,{className:"d-flex align-items-center justify-content-between",children:[(0,De.jsxs)("h4",{className:"mb-0",children:[(0,De.jsx)(Ir,{className:"me-2 text-primary"}),"Stock In-House Management"]}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:f,disabled:i,children:[(0,De.jsx)(di,{className:"me-2"}),"Refresh"]})]})}),o&&(0,De.jsx)(Nn,{variant:"danger",className:"mb-4",children:o}),(0,De.jsxs)(ps,{className:"shadow-sm mb-4",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h5",{className:"mb-0",children:"Record Stock Movement"})}),(0,De.jsxs)(ps.Body,{children:[m.general&&(0,De.jsx)(Nn,{variant:"danger",children:m.general}),(0,De.jsxs)(Gl,{onSubmit:async e=>{e.preventDefault();const t=g(c);if(Object.keys(t).length>0)p(t);else{h(!0),p({});try{const e={material:c.material_id,movement_type:"in"===c.direction?"in":"out",quantity:parseFloat(c.quantity),unit_cost:"in"===c.direction?parseFloat(c.unit_cost):0,reason:c.reason.trim(),note:c.note||""};await(e=>Ji("/inventory/stock-movements/",{method:"POST",data:e}))(e),d({material_id:"",direction:"in",quantity:"",unit_cost:"",reason:"",note:""}),await f()}catch(e){p({general:e.message})}finally{h(!1)}}},children:[(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:5,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Material *"}),(0,De.jsxs)(Gl.Select,{value:c.material_id,onChange:e=>v("material_id",e.target.value),isInvalid:!!m.material_id,children:[(0,De.jsx)("option",{value:"",children:"Select material"}),e.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,") - Current: ",e.current_stock||0]},e.id))]}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:m.material_id})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Direction"}),(0,De.jsxs)(Gl.Select,{value:c.direction,onChange:e=>v("direction",e.target.value),children:[(0,De.jsx)("option",{value:"in",children:"Stock In"}),(0,De.jsx)("option",{value:"out",children:"Stock Out"})]})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Quantity *"}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(Gl.Control,{type:"number",step:"0.01",min:"0",value:c.quantity,onChange:e=>v("quantity",e.target.value),isInvalid:!!m.quantity,placeholder:"0.00"}),(0,De.jsx)(oc.Text,{children:(t=>{var n;return(null===(n=e.find(e=>e.id===t))||void 0===n?void 0:n.unit)||""})(c.material_id)})]}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:m.quantity})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsxs)(Gl.Label,{children:["Unit Cost ","in"===c.direction?"*":"(Optional)"]}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:"R"}),(0,De.jsx)(Gl.Control,{type:"number",step:"0.01",min:"0",value:c.unit_cost,onChange:e=>v("unit_cost",e.target.value),isInvalid:!!m.unit_cost,placeholder:"0.00",disabled:"out"===c.direction})]}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:m.unit_cost})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Reason *"}),(0,De.jsx)(Gl.Control,{type:"text",value:c.reason,onChange:e=>v("reason",e.target.value),isInvalid:!!m.reason,placeholder:"e.g., New stock purchase, Supplier delivery, etc."}),(0,De.jsx)(Gl.Control.Feedback,{type:"invalid",children:m.reason})]})})]}),(0,De.jsx)(Sn,{className:"g-3 mt-2",children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Notes"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:2,value:c.note,onChange:e=>v("note",e.target.value),placeholder:"Optional notes about this stock movement..."})]})})}),(0,De.jsx)(Sn,{className:"mt-3",children:(0,De.jsxs)(Pn,{children:[(0,De.jsx)(Xs,{type:"submit",variant:"primary",disabled:u,className:"me-2",children:u?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Vi,{animation:"border",size:"sm",className:"me-2"}),"Saving..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(oi,{className:"me-2"}),"Record Movement"]})}),(0,De.jsx)(Xs,{type:"button",variant:"outline-secondary",onClick:()=>d({material_id:"",direction:"in",quantity:"",unit_cost:"",reason:"",note:""}),children:"Clear Form"})]})})]})]})]}),(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h5",{className:"mb-0",children:"Recent Stock Movements"})}),(0,De.jsx)(ps.Body,{children:0===n.length?(0,De.jsx)(Nn,{variant:"info",children:"No stock movements recorded yet."}):(0,De.jsxs)(Ki,{responsive:!0,striped:!0,hover:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Material"}),(0,De.jsx)("th",{children:"Direction"}),(0,De.jsx)("th",{children:"Quantity"}),(0,De.jsx)("th",{children:"Unit Cost"}),(0,De.jsx)("th",{children:"Total Value"}),(0,De.jsx)("th",{children:"Reason"}),(0,De.jsx)("th",{children:"Notes"})]})}),(0,De.jsx)("tbody",{children:n.slice(0,20).map(e=>{return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(t=e.created_at,new Date(t).toLocaleString())}),(0,De.jsx)("td",{children:(0,De.jsx)("strong",{children:e.material_name||"Unknown"})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"in"===(e.movement_type||e.direction)?"success":"warning",children:"in"===(e.movement_type||e.direction)?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(sr,{className:"me-1"}),"In"]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(ir,{className:"me-1"}),"Out"]})})}),(0,De.jsxs)("td",{children:[e.quantity," ",e.material_unit||"units"]}),(0,De.jsx)("td",{children:e.unit_cost?"R".concat(parseFloat(e.unit_cost).toFixed(2)):"-"}),(0,De.jsx)("td",{children:e.unit_cost?"R".concat((parseFloat(e.quantity)*parseFloat(e.unit_cost)).toFixed(2)):"-"}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:e.reason||"-"})}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:e.note||"-"})})]},e.id);var t})})]})})]})]})})},jP=e=>{var t,n,r,i;let{user:a,onLogout:o,activeTab:l,onTabChange:c,notifications:d=[],isMobile:u=!1,isNavCollapsed:h=!1,onNavToggle:m}=e;const[p,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),x=Z(),b=d.filter(e=>!e.is_read).length;(0,s.useEffect)(()=>{const e=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=window.innerWidth<=768,n=window.innerHeight>window.innerWidth;v(e||t||t&&n)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]);const y=[{id:"overview",label:"Overview",icon:Kr,color:"#007bff",route:"/warehouse"},{id:"orders",label:"Orders",icon:Cr,color:"#28a745",route:"/warehouse/orders"},{id:"inventory",label:"Inventory",icon:hr,color:"#17a2b8",route:"/warehouse/products"},{id:"workers",label:"Workers",icon:Fi,color:"#6f42c1",route:"/warehouse/workers"},{id:"analytics",label:"Analytics",icon:vr,color:"#fd7e14",route:"/warehouse/analytics"},{id:"warehouse",label:"Warehouse Stock",icon:Bi,color:"#20c997",route:"/warehouse/stock"}],w=(e,t)=>{c(e),t&&window.location.pathname!==t&&x(t),u&&f(!1)},j=(0,De.jsxs)("div",{className:"warehouse-side-nav",style:{width:"100%",height:"100vh",backgroundColor:"#2c3e50",color:"white",display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:"2px 0 10px rgba(0,0,0,0.1)"},children:[(0,De.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #34495e",textAlign:"center",flexShrink:0,position:"relative"},children:[(0,De.jsxs)("div",{style:{fontSize:h?"18px":"24px",fontWeight:"bold",color:"#3498db",marginBottom:"5px"},children:[(0,De.jsx)(Bi,{className:"me-2"}),!h&&"OOX Warehouse"]}),!h&&(0,De.jsx)("div",{style:{fontSize:"14px",color:"#bdc3c7"},children:"Production Management System"}),(0,De.jsx)("div",{onClick:()=>m&&m(!h),style:{position:"absolute",top:"15px",right:"15px",cursor:"pointer",padding:"5px",borderRadius:"4px",backgroundColor:"#34495e",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#1a252f"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#34495e"},title:h?"Expand Navigation":"Collapse Navigation",children:h?(0,De.jsx)(or,{size:16}):(0,De.jsx)(Ti,{size:16})})]}),(0,De.jsx)("div",{style:{padding:h?"15px 10px":"15px 20px",borderBottom:"1px solid #34495e",backgroundColor:"#34495e",flexShrink:0,textAlign:h?"center":"left"},children:(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",justifyContent:h?"center":"flex-start"},children:[(0,De.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3498db",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold"},children:(null===a||void 0===a||null===(t=a.username)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase())||"U"}),!h&&(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px"},children:(null===a||void 0===a||null===(r=a.get_full_name)||void 0===r?void 0:r.call(a))||(null===a||void 0===a?void 0:a.username)||"User"}),(0,De.jsx)("div",{style:{fontSize:"12px",color:"#bdc3c7"},children:(null===a||void 0===a||null===(i=a.role)||void 0===i?void 0:i.replace("_"," ").toUpperCase())||"ROLE"})]})]})}),(0,De.jsx)("div",{style:{flex:1,overflow:"auto"},children:(0,De.jsx)(Gs,{className:"flex-column",style:{padding:"20px 0"},children:y.map(e=>{const t=e.icon,n=l===e.id;return(0,De.jsx)(Gs.Item,{children:(0,De.jsxs)(Gs.Link,{onClick:()=>w(e.id,e.route),style:{color:n?"white":"#bdc3c7",backgroundColor:n?e.color:"transparent",border:"none",padding:h?"15px 20px":"15px 25px",margin:"2px 15px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",justifyContent:h?"center":"flex-start"},onMouseEnter:e=>{n||(e.target.style.backgroundColor="#34495e",e.target.style.color="white")},onMouseLeave:e=>{n||(e.target.style.backgroundColor="transparent",e.target.style.color="#bdc3c7")},title:h?e.label:"",children:[(0,De.jsx)(t,{size:18}),!h&&e.label,!h&&"orders"===e.id&&(0,De.jsx)(Rn,{bg:"danger",style:{marginLeft:"auto",fontSize:"10px",padding:"4px 6px"},children:"New"})]})},e.id)})})}),(0,De.jsxs)("div",{style:{padding:h?"20px 10px":"20px",borderTop:"1px solid #34495e",backgroundColor:"#34495e",flexShrink:0},children:[(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",padding:"10px",backgroundColor:"#2c3e50",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",justifyContent:h?"center":"flex-start"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#1a252f"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#2c3e50"},children:[(0,De.jsx)(lr,{size:16,color:"#3498db"}),!h&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("span",{style:{fontSize:"14px"},children:"Notifications"}),b>0&&(0,De.jsx)(Rn,{bg:"danger",style:{marginLeft:"auto",fontSize:"10px",padding:"4px 6px"},children:b})]})]}),(0,De.jsxs)("div",{onClick:o,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",backgroundColor:"#e74c3c",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",justifyContent:h?"center":"flex-start"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#c0392b",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#e74c3c",e.currentTarget.style.transform="translateY(0)"},children:[(0,De.jsx)(xi,{size:16}),!h&&(0,De.jsx)("span",{style:{fontSize:"14px"},children:"Logout"})]})]})]}),_=()=>(0,De.jsx)("div",{onClick:()=>f(!0),style:{position:"fixed",top:"20px",left:"20px",zIndex:1050,backgroundColor:"#2c3e50",color:"white",padding:"12px",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:g?"block":"none"},children:(0,De.jsx)(or,{size:20})});var N,k,C,S;return g?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(_,{}),(0,De.jsxs)(Nd,{show:p,onHide:()=>f(!1),placement:"start",style:{width:"280px"},children:[(0,De.jsxs)(Nd.Header,{style:{backgroundColor:"#2c3e50",color:"white",border:"none"},children:[(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,De.jsx)(Bi,{color:"#3498db"}),(0,De.jsx)("strong",{children:"OOX Warehouse"})]}),(0,De.jsx)("div",{onClick:()=>f(!1),style:{cursor:"pointer",padding:"5px",color:"white",fontSize:"20px"},children:(0,De.jsx)(Ti,{})})]}),(0,De.jsx)(Nd.Body,{style:{padding:0,backgroundColor:"#2c3e50"},children:(0,De.jsxs)("div",{style:{padding:"20px 0"},children:[(0,De.jsx)("div",{style:{padding:"15px 20px",borderBottom:"1px solid #34495e",backgroundColor:"#34495e",marginBottom:"20px"},children:(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,De.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3498db",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold"},children:(null===a||void 0===a||null===(N=a.username)||void 0===N||null===(k=N.charAt(0))||void 0===k?void 0:k.toUpperCase())||"U"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px",color:"white"},children:(null===a||void 0===a||null===(C=a.get_full_name)||void 0===C?void 0:C.call(a))||(null===a||void 0===a?void 0:a.username)||"User"}),(0,De.jsx)("div",{style:{fontSize:"12px",color:"#bdc3c7"},children:(null===a||void 0===a||null===(S=a.role)||void 0===S?void 0:S.replace("_"," ").toUpperCase())||"ROLE"})]})]})}),(0,De.jsx)("div",{style:{padding:"0 20px"},children:y.map(e=>{const t=e.icon,n=l===e.id;return(0,De.jsxs)("div",{onClick:()=>w(e.id,e.route),style:{color:n?"white":"#bdc3c7",backgroundColor:n?e.color:"transparent",border:"none",padding:"18px 20px",margin:"8px 0",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",minHeight:"48px",userSelect:"none"},onMouseEnter:e=>{n||(e.target.style.backgroundColor="#34495e",e.target.style.color="white")},onMouseLeave:e=>{n||(e.target.style.backgroundColor="transparent",e.target.style.color="#bdc3c7")},children:[(0,De.jsx)(t,{size:20}),(0,De.jsx)("span",{style:{flex:1},children:e.label}),"orders"===e.id&&(0,De.jsx)(Rn,{bg:"danger",style:{fontSize:"10px",padding:"4px 6px",flexShrink:0},children:"New"})]},e.id)})}),(0,De.jsx)("div",{style:{padding:"20px",marginTop:"20px"},children:(0,De.jsxs)("div",{onClick:o,style:{display:"flex",alignItems:"center",gap:"10px",padding:"18px 20px",backgroundColor:"#e74c3c",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",color:"white",justifyContent:"center",minHeight:"48px",userSelect:"none"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#c0392b"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#e74c3c"},children:[(0,De.jsx)(xi,{size:20}),(0,De.jsx)("span",{style:{fontSize:"16px",fontWeight:"500"},children:"Logout"})]})})]})})]})]}):(0,De.jsx)("div",{style:{width:h?"80px":"280px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1e3,transition:"width 0.3s ease"},children:j})},_P=e=>{let{user:t,onLogout:n}=e;const r=$(),[i,a]=(0,s.useState)(new Date),[o,l]=(0,s.useState)("overview"),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=()=>{d(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{const e=r.pathname;e.includes("/warehouse/products")?l("inventory"):e.includes("/warehouse/orders")?l("orders"):e.includes("/warehouse/tasks")?l("task-management"):e.includes("/warehouse/workers")?l("workers"):e.includes("/warehouse/analytics")?l("analytics"):e.includes("/warehouse/delivery")?l("delivery"):e.includes("/warehouse/stock")?l("warehouse"):l("overview")},[r]),(0,s.useEffect)(()=>{const e=setInterval(()=>a(new Date),1e3);return()=>clearInterval(e)},[]);return(0,De.jsxs)("div",{className:"warehouse-dashboard",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[(0,De.jsx)(jP,{user:t,onLogout:n,activeTab:o,onTabChange:e=>{l(e)},currentTime:i,isMobile:c,isNavCollapsed:u,onNavToggle:e=>h(e)}),(0,De.jsx)("div",{style:{marginLeft:c?"0":u?"80px":"280px",minHeight:"100vh",paddingTop:c?"60px":"0",transition:"margin-left 0.3s ease"},children:(0,De.jsx)(Xe,{fluid:!0,className:"p-4",children:(0,De.jsx)(ge,{context:{user:t,onLogout:n}})})})]})},NP=e=>{let{show:t,onHide:n,product:r,onProductUpdate:i,user:a}=e;const[o,l]=(0,s.useState)("colors"),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)([]),[b,y]=(0,s.useState)({name:"",code:"",hex_value:"#000000"}),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)([]),[k,C]=(0,s.useState)([]),[S,A]=(0,s.useState)({name:"",code:"",description:""}),[E,T]=(0,s.useState)(null),[P,M]=(0,s.useState)(!1),[L,R]=(0,s.useState)(!1),O=()=>["owner","admin","warehouse_manager","warehouse"].includes(null===a||void 0===a?void 0:a.role);(0,s.useEffect)(()=>{t&&r&&D()},[t,r]);const D=async()=>{try{d(!0),h("");const[e,t]=await Promise.all([ba().catch(()=>({results:[]})),ya().catch(()=>({results:[]}))]),n=e=>(Array.isArray(e)?e:Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:[]).map(e=>e&&(e.color_name||e.color_code)?{id:e.id,name:e.color_name,code:e.color_code,hex_value:e.hex_color,is_reference:!0}:e),s=e=>(Array.isArray(e)?e:Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:[]).map(e=>e&&(e.fabric_name||e.fabric_letter)?{id:e.id,name:e.fabric_name,code:e.fabric_letter,description:e.fabric_type,is_reference:!0}:e);g(n(e)),N(s(t));const i=((null===r||void 0===r?void 0:r.colors)||(null===r||void 0===r?void 0:r.available_colors)||[]).map(e=>"string"===typeof e?{id:null,name:e}:e),a=((null===r||void 0===r?void 0:r.fabrics)||(null===r||void 0===r?void 0:r.available_fabrics)||[]).map(e=>"string"===typeof e?{id:null,name:e}:e);x(i),C(a)}catch(e){h("Failed to load colors and fabrics: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}finally{d(!1)}},I=async()=>{if(b.name.trim())try{h("");const e=await(e=>Ji("/colors/",{method:"POST",data:e}))(b);g([...f,e]),y({name:"",code:"",hex_value:"#000000"}),M(!1),p("Color added successfully!")}catch(e){h("Failed to add color: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}else h("Color name is required")},F=async(e,t)=>{try{h("");const n=f.find(t=>t.id===e);if(null!==n&&void 0!==n&&n.is_reference)return void h("Editing reference colors is not supported here. Create a custom color instead.");const s=await((e,t)=>Ji("/colors/".concat(e,"/"),{method:"PUT",data:t}))(e,t);g(f.map(t=>t.id===e?s:t)),j(null),p("Color updated successfully!")}catch(n){h("Failed to update color: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},z=async e=>{var t;if(window.confirm("Are you sure you want to delete this color?"))try{h("");const n=f.find(t=>t.id===e);if(null!==n&&void 0!==n&&n.is_reference)return void h("Deleting reference colors is not supported here.");await(t=e,Ji("/colors/".concat(t,"/"),{method:"DELETE"})),g(f.filter(t=>t.id!==e)),x(v.filter(t=>t.id!==e)),p("Color deleted successfully!")}catch(n){h("Failed to delete color: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},B=async()=>{if(S.name.trim())try{h("");const e=await(e=>Ji("/fabrics/",{method:"POST",data:e}))(S);N([..._,e]),A({name:"",code:"",description:""}),R(!1),p("Fabric added successfully!")}catch(e){h("Failed to add fabric: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}else h("Fabric name is required")},W=async(e,t)=>{try{h("");const n=_.find(t=>t.id===e);if(null!==n&&void 0!==n&&n.is_reference)return void h("Editing reference fabrics is not supported here. Create a custom fabric instead.");const s=await((e,t)=>Ji("/fabrics/".concat(e,"/"),{method:"PUT",data:t}))(e,t);N(_.map(t=>t.id===e?s:t)),T(null),p("Fabric updated successfully!")}catch(n){h("Failed to update fabric: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},H=async e=>{var t;if(window.confirm("Are you sure you want to delete this fabric?"))try{h("");const n=_.find(t=>t.id===e);if(null!==n&&void 0!==n&&n.is_reference)return void h("Deleting reference fabrics is not supported here.");await(t=e,Ji("/fabrics/".concat(t,"/"),{method:"DELETE"})),N(_.filter(t=>t.id!==e)),C(k.filter(t=>t.id!==e)),p("Fabric deleted successfully!")}catch(n){h("Failed to delete fabric: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}};return(0,De.jsxs)(Vo,{show:t,onHide:n,size:"xl",scrollable:!0,children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsxs)(Vo.Title,{children:[(0,De.jsx)($r,{className:"me-2"}),"Manage Colors & Fabrics",r&&(0,De.jsxs)("div",{className:"fs-6 text-muted mt-1",children:["Product: ",r.name]})]})}),(0,De.jsxs)(Vo.Body,{children:[u&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>h(""),children:[(0,De.jsx)(Fr,{className:"me-2"}),u]}),m&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>p(""),children:[(0,De.jsx)(wr,{className:"me-2"}),m]}),c?(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading colors and fabrics..."})]}):(0,De.jsxs)(Fc,{activeKey:o,onSelect:l,className:"mb-4",children:[(0,De.jsx)(Vc,{eventKey:"colors",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(ni,{className:"me-2"}),"Colors (",v.length,")"]}),children:(0,De.jsxs)("div",{children:[(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(ni,{className:"me-2"}),"Product Colors (",v.length,")"]}),(0,De.jsx)("small",{className:"text-muted",children:"Colors assigned to this product"})]}),(0,De.jsx)(ps.Body,{children:0===v.length?(0,De.jsxs)("div",{className:"text-center text-muted py-3",children:[(0,De.jsx)(ni,{size:32,className:"mb-2"}),(0,De.jsx)("p",{children:"No colors assigned to this product"})]}):(0,De.jsx)(Sn,{children:v.map(e=>(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border",style:{borderLeftColor:e.hex_value||"#000",borderLeftWidth:"4px"},children:(0,De.jsx)(ps.Body,{className:"py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:e.hex_value||"#000",border:"1px solid #ddd",borderRadius:"3px"}}),O()&&(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>{return t=e.id,void x(v.filter(e=>e.id!==t));var t},children:(0,De.jsx)(Ti,{})})]})]})})})},e.id))})})]}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(ni,{className:"me-2"}),"All Available Colors (",f.length,")"]}),O()&&(0,De.jsxs)(Xs,{size:"sm",variant:"primary",onClick:()=>M(!P),children:[(0,De.jsx)(oi,{className:"me-1"}),"Add New Color"]})]}),(0,De.jsxs)(ps.Body,{children:[P&&O()&&(0,De.jsx)(ps,{className:"mb-3 border-primary",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Color Name *"}),(0,De.jsx)(Gl.Control,{type:"text",value:b.name,onChange:e=>y(Pe(Pe({},b),{},{name:e.target.value})),placeholder:"e.g., Royal Blue"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Color Code"}),(0,De.jsx)(Gl.Control,{type:"text",value:b.code,onChange:e=>y(Pe(Pe({},b),{},{code:e.target.value})),placeholder:"e.g., RB001"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Hex Color"}),(0,De.jsx)(Gl.Control,{type:"color",value:b.hex_value,onChange:e=>y(Pe(Pe({},b),{},{hex_value:e.target.value}))})]})}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsx)(Gl.Label,{children:"\xa0"}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"success",onClick:I,children:(0,De.jsx)(wr,{})}),(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>M(!1),children:(0,De.jsx)(Ti,{})})]})]})]})})}),(0,De.jsx)(Sn,{children:f.map(e=>{const t=v.find(t=>t.id===e.id),n=w===e.id;return(0,De.jsx)(Pn,{md:6,lg:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border ".concat(t?"border-success bg-light":""),children:(0,De.jsx)(ps.Body,{className:"py-2",children:n?(0,De.jsxs)(Gl,{children:[(0,De.jsx)(Gl.Group,{className:"mb-2",children:(0,De.jsx)(Gl.Control,{size:"sm",type:"text",defaultValue:e.name,onBlur:t=>F(e.id,{name:t.target.value})})}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{size:"sm",variant:"success",onClick:()=>j(null),children:(0,De.jsx)(wr,{})}),(0,De.jsx)(Xs,{size:"sm",variant:"secondary",onClick:()=>j(null),children:(0,De.jsx)(Ti,{})})]})]}):(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:e.hex_value||"#000",border:"1px solid #ddd",borderRadius:"3px"}}),(0,De.jsxs)(Td,{size:"sm",children:[!t&&O()&&(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Add to Product"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>(e=>{v.find(t=>t.id===e.id)||x([...v,e])})(e),children:(0,De.jsx)(oi,{})})}),O()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Edit Color"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>j(e.id),children:(0,De.jsx)(Rr,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Delete Color"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>z(e.id),children:(0,De.jsx)(Pi,{})})})]})]})]})]})})})},e.id)})}),0===f.length&&(0,De.jsxs)("div",{className:"text-center text-muted py-4",children:[(0,De.jsx)(ni,{size:48,className:"mb-3"}),(0,De.jsx)("h6",{children:"No Colors Available"}),(0,De.jsx)("p",{children:"Add the first color to get started"})]})]})]})]})}),(0,De.jsx)(Vc,{eventKey:"fabrics",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(Tr,{className:"me-2"}),"Fabrics (",k.length,")"]}),children:(0,De.jsxs)("div",{children:[(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(Tr,{className:"me-2"}),"Product Fabrics (",k.length,")"]}),(0,De.jsx)("small",{className:"text-muted",children:"Fabrics assigned to this product"})]}),(0,De.jsx)(ps.Body,{children:0===k.length?(0,De.jsxs)("div",{className:"text-center text-muted py-3",children:[(0,De.jsx)(Tr,{size:32,className:"mb-2"}),(0,De.jsx)("p",{children:"No fabrics assigned to this product"})]}):(0,De.jsx)(Sn,{children:k.map(e=>(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border border-secondary",children:(0,De.jsx)(ps.Body,{className:"py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]}),e.description&&(0,De.jsx)("div",{className:"small text-muted",children:e.description})]}),O()&&(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>{return t=e.id,void C(k.filter(e=>e.id!==t));var t},children:(0,De.jsx)(Ti,{})})]})})})},e.id))})})]}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)($r,{className:"me-2"}),"All Available Fabrics (",_.length,")"]}),O()&&(0,De.jsxs)(Xs,{size:"sm",variant:"primary",onClick:()=>R(!L),children:[(0,De.jsx)(oi,{className:"me-1"}),"Add New Fabric"]})]}),(0,De.jsxs)(ps.Body,{children:[L&&O()&&(0,De.jsx)(ps,{className:"mb-3 border-primary",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Fabric Name *"}),(0,De.jsx)(Gl.Control,{type:"text",value:S.name,onChange:e=>A(Pe(Pe({},S),{},{name:e.target.value})),placeholder:"e.g., Cotton Blend"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Fabric Code"}),(0,De.jsx)(Gl.Control,{type:"text",value:S.code,onChange:e=>A(Pe(Pe({},S),{},{code:e.target.value})),placeholder:"e.g., CB001"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{type:"text",value:S.description,onChange:e=>A(Pe(Pe({},S),{},{description:e.target.value})),placeholder:"Brief description"})]})}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsx)(Gl.Label,{children:"\xa0"}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"success",onClick:B,children:(0,De.jsx)(wr,{})}),(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>R(!1),children:(0,De.jsx)(Ti,{})})]})]})]})})}),(0,De.jsx)(Sn,{children:_.map(e=>{const t=k.find(t=>t.id===e.id),n=E===e.id;return(0,De.jsx)(Pn,{md:6,lg:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border ".concat(t?"border-success bg-light":""),children:(0,De.jsx)(ps.Body,{className:"py-2",children:n?(0,De.jsxs)(Gl,{children:[(0,De.jsx)(Gl.Group,{className:"mb-2",children:(0,De.jsx)(Gl.Control,{size:"sm",type:"text",defaultValue:e.name,onBlur:t=>W(e.id,{name:t.target.value})})}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{size:"sm",variant:"success",onClick:()=>T(null),children:(0,De.jsx)(wr,{})}),(0,De.jsx)(Xs,{size:"sm",variant:"secondary",onClick:()=>T(null),children:(0,De.jsx)(Ti,{})})]})]}):(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]}),e.description&&(0,De.jsx)("div",{className:"small text-muted",children:e.description})]}),(0,De.jsxs)(Td,{size:"sm",children:[!t&&O()&&(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Add to Product"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>(e=>{k.find(t=>t.id===e.id)||C([...k,e])})(e),children:(0,De.jsx)(oi,{})})}),O()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Edit Fabric"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>T(e.id),children:(0,De.jsx)(Rr,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Delete Fabric"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>H(e.id),children:(0,De.jsx)(Pi,{})})})]})]})]})})})},e.id)})}),0===_.length&&(0,De.jsxs)("div",{className:"text-center text-muted py-4",children:[(0,De.jsx)(Tr,{size:48,className:"mb-3"}),(0,De.jsx)("h6",{children:"No Fabrics Available"}),(0,De.jsx)("p",{children:"Add the first fabric to get started"})]})]})]})]})})]})]}),(0,De.jsx)(Vo.Footer,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,De.jsx)("div",{className:"text-muted small",children:O()?"You can manage colors and fabrics for this product":"View-only mode - contact your manager to make changes"}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:n,children:"Close"}),O()&&(0,De.jsxs)(Xs,{variant:"primary",onClick:async()=>{try{h(""),d(!0);const e={colors:v.map(e=>e.name).filter(Boolean),fabrics:k.map(e=>e.name).filter(Boolean)};await wa(r.id,e);const t=Pe(Pe({},r),{},{colors:v.map(e=>e.name),fabrics:k.map(e=>e.name),available_colors:v,available_fabrics:k});i(t),p("Product colors and fabrics updated successfully!"),setTimeout(()=>{n()},1500)}catch(e){h("Failed to update product: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}finally{d(!1)}},disabled:c,children:[(0,De.jsx)(mi,{className:"me-1"}),"Save Changes"]})]})]})})]})},kP=()=>{var e,t;Z();const{user:n,onLogout:r}=te(),[i,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(""),[v,x]=(0,s.useState)("name"),[b,y]=(0,s.useState)("asc"),[w,j]=(0,s.useState)("all"),[_,N]=(0,s.useState)("grid"),[k,C]=(0,s.useState)(!1),[S,A]=(0,s.useState)(!1),[E,T]=(0,s.useState)(null),[P,M]=(0,s.useState)("view"),[L,R]=(0,s.useState)([]),[O,D]=(0,s.useState)([]),[I,F]=(0,s.useState)(""),[z,B]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[U,V]=(0,s.useState)(""),[G,q]=(0,s.useState)({name:"",sku:"",description:"",price:"",currency:"ZAR",available_colors:[],available_fabrics:[],attributes:{}}),[K,X]=(0,s.useState)(null),Y=()=>["owner","admin","warehouse_manager","warehouse"].includes(null===n||void 0===n?void 0:n.role),Q=()=>["owner","admin","warehouse_manager","warehouse","warehouse_worker"].includes(null===n||void 0===n?void 0:n.role),$=(0,s.useCallback)(async()=>{try{a(!0),l("");const[t,n,s,r]=await Promise.all([Ji("/products/"),ba().catch(()=>({results:[]})),ya().catch(()=>({results:[]})),Ji("/inventory/materials/warehouse_dashboard/").catch(()=>null)]);let i=[];i=[...Array.isArray(null===t||void 0===t?void 0:t.results)?t.results:Array.isArray(t)?t:[]];let o=null===t||void 0===t?void 0:t.next;const c=localStorage.getItem("oox_token"),d={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"https://internaloox-1.onrender.com/api";for(;o;)try{const e=o.startsWith("http")?o:"".concat(d).concat(o),t=await fetch(e,{headers:c?{Authorization:"Bearer ".concat(c)}:{}});if(!t.ok)break;const n=await t.json(),s=Array.isArray(null===n||void 0===n?void 0:n.results)?n.results:Array.isArray(n)?n:[];i.push(...s),o=(null===n||void 0===n?void 0:n.next)||null}catch(e){break}h(i),p(i);const u=e=>{if(!e)return[];let t=[];if(Array.isArray(e))t=e;else{if(!Array.isArray(e.results))return[];t=e.results}return t.map(e=>e.color_name?Pe(Pe({},e),{},{name:e.color_name,code:e.color_code,hex_color:e.hex_color}):e.fabric_name?Pe(Pe({},e),{},{name:e.fabric_name,letter:e.fabric_letter,type:e.fabric_type}):e)};R(u(n)),D(u(s)),X(r)}catch(e){l("Failed to load products: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}finally{a(!1)}},[]);(0,s.useEffect)(()=>{Q()?$():(l("You do not have permission to view products."),a(!1))},[$,n]),(0,s.useEffect)(()=>{let e=[...u];if(f.trim()){const t=f.toLowerCase();e=e.filter(e=>(e.name||"").toLowerCase().includes(t)||(e.sku||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.colors||e.available_colors||[]).some(e=>!!e&&("string"===typeof e?e.toLowerCase().includes(t):"object"===typeof e&&null!==e&&(e.name||"").toLowerCase().includes(t)))||(e.fabrics||e.available_fabrics||[]).some(e=>!!e&&("string"===typeof e?e.toLowerCase().includes(t):"object"===typeof e&&null!==e&&(e.name||"").toLowerCase().includes(t))))}"all"!==w&&("with-colors"===w?e=e.filter(e=>(e.colors||e.available_colors||[]).length>0):"with-fabrics"===w?e=e.filter(e=>(e.fabrics||e.available_fabrics||[]).length>0):"no-colors"===w?e=e.filter(e=>!(e.colors&&e.colors.length>0)&&!(e.available_colors&&e.available_colors.length>0)):"no-fabrics"===w&&(e=e.filter(e=>!(e.fabrics&&e.fabrics.length>0)&&!(e.available_fabrics&&e.available_fabrics.length>0)))),e.sort((e,t)=>{let n=e[v]||"",s=t[v]||"";return"price"===v?(n=parseFloat(n)||0,s=parseFloat(s)||0):"string"===typeof n&&(n=n.toLowerCase(),s=s.toLowerCase()),"asc"===b?n>s?1:-1:n<s?1:-1}),p(e)},[u,f,w,v,b]);const J=e=>{T(e),M("view"),C(!0)},ee=e=>{Y()?(T(e),q({name:e.name||"",sku:e.sku||"",description:e.description||"",price:e.price||"",currency:e.currency||"ZAR",colors:e.colors||e.available_colors||[],fabrics:e.fabrics||e.available_fabrics||[],attributes:e.attributes||{}}),M("edit"),C(!0)):l("You do not have permission to edit products.")},ne=()=>{Y()?(T(null),q({name:"",sku:"",description:"",price:"",currency:"ZAR",colors:[],fabrics:[],attributes:{}}),M("create"),C(!0)):l("You do not have permission to create products.")},se=async e=>{var t;if(Y()){if(window.confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await(t=e.id,Ji("/products/".concat(t,"/"),{method:"DELETE"})),d("Product deleted successfully!"),$()}catch(n){l("Failed to delete product: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}}else l("You do not have permission to delete products.")},re=e=>{Y()?(T(e),A(!0)):l("You do not have permission to manage colors and fabrics.")},ie=e=>e&&0!==e.length?e.slice(0,3).map((e,t)=>{if(!e)return null;const n="string"===typeof e?e:e.name||"Unknown Color";return(0,De.jsx)(Rn,{bg:"primary",className:"me-1",children:n},t)}).filter(e=>null!==e):"No colors",ae=e=>e&&0!==e.length?e.slice(0,3).map((e,t)=>{if(!e)return null;const n="string"===typeof e?e:e.name||"Unknown Fabric";return(0,De.jsx)(Rn,{bg:"secondary",className:"me-1",children:n},t)}).filter(e=>null!==e):"No fabrics",oe=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e||0);return i?(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Vi,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading products..."})]}):Q()?(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("h3",{className:"mb-1",children:[(0,De.jsx)(hr,{className:"me-2 text-primary"}),"Product Management"]}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Manage products with colors and fabric variations"})]}),Y()&&(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",onClick:$,children:[(0,De.jsx)(Ci,{className:"me-1"}),"Refresh"]}),(0,De.jsxs)(Xs,{variant:"primary",onClick:ne,children:[(0,De.jsx)(oi,{className:"me-1"}),"Add Product"]})]})]}),K&&(0,De.jsxs)(Sn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(hr,{size:32,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:K.total_products||m.length}),(0,De.jsx)("small",{className:"text-muted",children:"Total Products"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(ni,{size:32,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:L.length}),(0,De.jsx)("small",{className:"text-muted",children:"Available Colors"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Tr,{size:32,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:O.length}),(0,De.jsx)("small",{className:"text-muted",children:"Available Fabrics"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(vr,{size:32,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:oe(m.reduce((e,t)=>e+(parseFloat(t.price)||0),0))}),(0,De.jsx)("small",{className:"text-muted",children:"Total Value"})]})})})]}),o&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>l(""),children:o}),c&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>d(""),children:c}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3 align-items-end",children:[(0,De.jsxs)(Pn,{md:4,children:[(0,De.jsx)(Gl.Label,{children:"Search Products"}),(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{type:"text",placeholder:"Search by name, SKU, color, fabric...",value:f,onChange:e=>g(e.target.value)})]})]}),(0,De.jsxs)(Pn,{md:3,children:[(0,De.jsx)(Gl.Label,{children:"Filter By"}),(0,De.jsxs)(Gl.Select,{value:w,onChange:e=>j(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Products"}),(0,De.jsx)("option",{value:"with-colors",children:"With Colors"}),(0,De.jsx)("option",{value:"with-fabrics",children:"With Fabrics"}),(0,De.jsx)("option",{value:"no-colors",children:"No Colors"}),(0,De.jsx)("option",{value:"no-fabrics",children:"No Fabrics"})]})]}),(0,De.jsxs)(Pn,{md:3,children:[(0,De.jsx)(Gl.Label,{children:"Sort By"}),(0,De.jsxs)(Gl.Select,{value:"".concat(v,"-").concat(b),onChange:e=>{const[t,n]=e.target.value.split("-");x(t),y(n)},children:[(0,De.jsx)("option",{value:"name-asc",children:"Name A-Z"}),(0,De.jsx)("option",{value:"name-desc",children:"Name Z-A"}),(0,De.jsx)("option",{value:"price-asc",children:"Price Low-High"}),(0,De.jsx)("option",{value:"price-desc",children:"Price High-Low"})]})]}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsx)(Gl.Label,{children:"View"}),(0,De.jsxs)(Td,{className:"w-100",children:[(0,De.jsx)(Xs,{variant:"grid"===_?"primary":"outline-primary",onClick:()=>N("grid"),children:(0,De.jsx)($r,{})}),(0,De.jsx)(Xs,{variant:"table"===_?"primary":"outline-primary",onClick:()=>N("table"),children:(0,De.jsx)(hr,{})})]})]})]})})}),0===m.length?(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(hr,{size:64,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No Products Found"}),(0,De.jsx)("p",{className:"text-muted",children:f?"Try adjusting your search criteria":"No products available yet"}),Y()&&(0,De.jsxs)(Xs,{variant:"primary",onClick:ne,children:[(0,De.jsx)(oi,{className:"me-1"}),"Create First Product"]})]})}):"grid"===_?(0,De.jsx)(Sn,{children:m.map(e=>(0,De.jsx)(Pn,{lg:4,md:6,className:"mb-4",children:(0,De.jsx)(ps,{className:"h-100 shadow-sm product-card",style:{transition:"all 0.3s ease"},children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"card-title mb-1",children:e.name}),(0,De.jsxs)("small",{className:"text-muted",children:["SKU: ",e.sku||"N/A"]})]}),(0,De.jsx)(Rn,{bg:"success",className:"fs-6",children:oe(e.price)})]}),(0,De.jsx)("p",{className:"card-text text-muted mb-3",style:{height:"60px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description||"No description available"}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"mb-2",children:[(0,De.jsx)("small",{className:"fw-bold",children:"Colors:"}),(0,De.jsx)("div",{children:ie(e.colors||e.available_colors)})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("small",{className:"fw-bold",children:"Fabrics:"}),(0,De.jsx)("div",{children:ae(e.fabrics||e.available_fabrics)})]})]}),(0,De.jsx)("div",{className:"mt-auto",children:(0,De.jsxs)(Td,{className:"w-100",children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>J(e),children:(0,De.jsx)(Br,{})})}),Y()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Manage Colors & Fabrics"}),children:(0,De.jsx)(Xs,{variant:"outline-info",onClick:()=>re(e),children:(0,De.jsx)(ni,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Edit Product"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>ee(e),children:(0,De.jsx)(Rr,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Delete Product"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>se(e),children:(0,De.jsx)(Pi,{})})})]})]})})]})})},e.id))}):(0,De.jsx)(ps,{children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"table-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>{x("name"),y("name"===v&&"asc"===b?"desc":"asc")},children:["Product Name ","name"===v&&("asc"===b?(0,De.jsx)(yi,{}):(0,De.jsx)(bi,{}))]}),(0,De.jsx)("th",{children:"SKU"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>{x("price"),y("price"===v&&"asc"===b?"desc":"asc")},children:["Price ","price"===v&&("asc"===b?(0,De.jsx)(yi,{}):(0,De.jsx)(bi,{}))]}),(0,De.jsx)("th",{children:"Colors"}),(0,De.jsx)("th",{children:"Fabrics"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:m.map(e=>{var t;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),(0,De.jsxs)("small",{className:"text-muted",children:[null===(t=e.description)||void 0===t?void 0:t.slice(0,50),"..."]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("code",{children:e.sku||"N/A"})}),(0,De.jsx)("td",{className:"fw-bold text-success",children:oe(e.price)}),(0,De.jsx)("td",{children:ie(e.colors||e.available_colors)}),(0,De.jsx)("td",{children:ae(e.fabrics||e.available_fabrics)}),(0,De.jsx)("td",{children:(0,De.jsxs)(Td,{size:"sm",children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>J(e),children:(0,De.jsx)(Br,{})})}),Y()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Manage Colors & Fabrics"}),children:(0,De.jsx)(Xs,{variant:"outline-info",onClick:()=>re(e),children:(0,De.jsx)(ni,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Edit Product"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>ee(e),children:(0,De.jsx)(Rr,{})})}),(0,De.jsx)(Rh,{overlay:(0,De.jsx)(Ah,{children:"Delete Product"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>se(e),children:(0,De.jsx)(Pi,{})})})]})]})})]},e.id)})})]})}),(0,De.jsxs)(Vo,{show:k,onHide:()=>C(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"create"===P?"Create New Product":"edit"===P?"Edit Product":"Product Details"})}),(0,De.jsx)(Vo.Body,{children:"view"===P&&E?(0,De.jsx)("div",{children:(0,De.jsxs)(Sn,{children:[(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsx)("h5",{children:E.name}),(0,De.jsx)("p",{className:"text-muted",children:E.description}),(0,De.jsxs)("p",{children:[(0,De.jsx)("strong",{children:"SKU:"})," ",E.sku||"N/A"]}),(0,De.jsxs)("p",{children:[(0,De.jsx)("strong",{children:"Price:"})," ",oe(E.price)]})]}),(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Available Colors:"}),(0,De.jsx)("div",{className:"mt-2",children:(null===(e=E.available_colors)||void 0===e?void 0:e.length)>0?E.available_colors.map((e,t)=>{if(!e)return null;const n="string"===typeof e?e:e.name||"Unknown Color";return(0,De.jsxs)(Rn,{bg:"primary",className:"me-1 mb-1",children:[(0,De.jsx)(ni,{className:"me-1"}),n]},t)}).filter(e=>null!==e):"No colors available"})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("strong",{children:"Available Fabrics:"}),(0,De.jsx)("div",{className:"mt-2",children:(null===(t=E.available_fabrics)||void 0===t?void 0:t.length)>0?E.available_fabrics.map((e,t)=>{if(!e)return null;const n="string"===typeof e?e:e.name||"Unknown Fabric";return(0,De.jsxs)(Rn,{bg:"secondary",className:"me-1 mb-1",children:[(0,De.jsx)(Tr,{className:"me-1"}),n]},t)}).filter(e=>null!==e):"No fabrics available"})]})]})]})}):(0,De.jsxs)(Gl,{children:[(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Product Name *"}),(0,De.jsx)(Gl.Control,{type:"text",value:G.name,onChange:e=>q(Pe(Pe({},G),{},{name:e.target.value})),required:!0})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"SKU"}),(0,De.jsx)(Gl.Control,{type:"text",value:G.sku,onChange:e=>q(Pe(Pe({},G),{},{sku:e.target.value}))})]})})]}),(0,De.jsxs)(Sn,{children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Description"}),(0,De.jsx)(Gl.Control,{as:"textarea",rows:3,value:G.description,onChange:e=>q(Pe(Pe({},G),{},{description:e.target.value}))})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Price (ZAR) *"}),(0,De.jsx)(Gl.Control,{type:"number",step:"0.01",value:G.price,onChange:e=>q(Pe(Pe({},G),{},{price:e.target.value})),required:!0})]})})]}),(0,De.jsx)("div",{className:"text-muted",children:(0,De.jsx)("small",{children:"Colors and fabrics can be managed after saving the product."})})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),"view"!==P&&(0,De.jsx)(Xs,{variant:"primary",onClick:async()=>{try{l(""),"create"===P?(await(e=>Ji("/products/",{method:"POST",data:e}))(G),d("Product created successfully!")):"edit"===P&&(await wa(E.id,G),d("Product updated successfully!")),C(!1),$()}catch(e){l("Failed to save product: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}},children:"create"===P?"Create Product":"Save Changes"}),"view"===P&&Y()&&(0,De.jsxs)(Xs,{variant:"warning",onClick:()=>ee(E),children:[(0,De.jsx)(Rr,{className:"me-1"}),"Edit Product"]})]})]}),(0,De.jsx)(NP,{show:S,onHide:()=>A(!1),product:E,onProductUpdate:e=>{h(u.map(t=>t.id===e.id?e:t)),d("Product updated successfully!")},user:n})]}):(0,De.jsxs)(Nn,{variant:"danger",children:[(0,De.jsx)(hr,{className:"me-2"}),"You do not have permission to view products."]})},CP=()=>{const e=Z();return(0,De.jsx)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:(0,De.jsxs)("div",{className:"p-4",children:[(0,De.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,De.jsxs)("h4",{className:"mb-0",children:[(0,De.jsx)(hr,{className:"me-2 text-primary"}),"Stock Management"]})}),(0,De.jsxs)(Nn,{variant:"info",className:"mb-4",children:[(0,De.jsx)(Fr,{className:"me-2"}),(0,De.jsx)("strong",{children:"Stock Management Hub:"})," Choose from the options below to manage your warehouse inventory and stock movements."]}),(0,De.jsxs)(Sn,{className:"g-4",children:[(0,De.jsx)(Pn,{lg:4,md:6,children:(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsx)("div",{className:"text-center mb-3",children:(0,De.jsx)(hr,{className:"text-primary",size:48})}),(0,De.jsx)("h5",{className:"text-center mb-3",children:"Materials Management"}),(0,De.jsx)("p",{className:"text-muted text-center flex-grow-1",children:"Manage materials catalog, suppliers, and inventory thresholds. Add new materials, update specifications, and set minimum stock levels."}),(0,De.jsxs)(Xs,{variant:"primary",className:"w-100",onClick:()=>e("/warehouse/inventory/materials"),children:[(0,De.jsx)(hr,{className:"me-2"}),"Open Materials"]})]})})}),(0,De.jsx)(Pn,{lg:4,md:6,children:(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsx)("div",{className:"text-center mb-3",children:(0,De.jsx)(Ir,{className:"text-warning",size:48})}),(0,De.jsx)("h5",{className:"text-center mb-3",children:"Stock In-House"}),(0,De.jsx)("p",{className:"text-muted text-center flex-grow-1",children:"Record stock movements, track inventory levels, and manage stock coming in and out of the warehouse."}),(0,De.jsxs)(Xs,{variant:"warning",className:"w-100",onClick:()=>e("/warehouse/inventory/stock-in-house"),children:[(0,De.jsx)(Ir,{className:"me-2"}),"Manage Stock Movements"]})]})})}),(0,De.jsx)(Pn,{lg:4,md:6,children:(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsx)("div",{className:"text-center mb-3",children:(0,De.jsx)(oi,{className:"text-success",size:48})}),(0,De.jsx)("h5",{className:"text-center mb-3",children:"Quick Stock Entry"}),(0,De.jsx)("p",{className:"text-muted text-center flex-grow-1",children:"Add stock quickly from the dashboard. Fast entry for common materials and bulk stock updates."}),(0,De.jsxs)(Xs,{variant:"success",className:"w-100",onClick:()=>e("/warehouse"),children:[(0,De.jsx)(oi,{className:"me-2"}),"Quick Entry"]})]})})}),(0,De.jsx)(Pn,{lg:4,md:6,children:(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsx)("div",{className:"text-center mb-3",children:(0,De.jsx)(xr,{className:"text-info",size:48})}),(0,De.jsx)("h5",{className:"text-center mb-3",children:"Stock Analytics"}),(0,De.jsx)("p",{className:"text-muted text-center flex-grow-1",children:"View stock analytics, low stock alerts, and inventory reports. Monitor stock trends and performance."}),(0,De.jsxs)(Xs,{variant:"info",className:"w-100",onClick:()=>e("/warehouse/analytics"),children:[(0,De.jsx)(xr,{className:"me-2"}),"View Analytics"]})]})})}),(0,De.jsx)(Pn,{lg:4,md:6,children:(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsx)("div",{className:"text-center mb-3",children:(0,De.jsx)(Bi,{className:"text-secondary",size:48})}),(0,De.jsx)("h5",{className:"text-center mb-3",children:"Warehouse Dashboard"}),(0,De.jsx)("p",{className:"text-muted text-center flex-grow-1",children:"Return to the main warehouse dashboard for an overview of all operations and quick access to key functions."}),(0,De.jsxs)(Xs,{variant:"secondary",className:"w-100",onClick:()=>e("/warehouse"),children:[(0,De.jsx)(Bi,{className:"me-2"}),"Go to Dashboard"]})]})})}),(0,De.jsx)(Pn,{lg:4,md:6,children:(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsx)("div",{className:"text-center mb-3",children:(0,De.jsx)(Fr,{className:"text-danger",size:48})}),(0,De.jsx)("h5",{className:"text-center mb-3",children:"Low Stock Alerts"}),(0,De.jsx)("p",{className:"text-muted text-center flex-grow-1",children:"View and manage low stock alerts. Get notified when materials are running low and need restocking."}),(0,De.jsxs)(Xs,{variant:"outline-danger",className:"w-100",onClick:()=>e("/warehouse/inventory/materials"),children:[(0,De.jsx)(Fr,{className:"me-2"}),"View Alerts"]})]})})})]}),(0,De.jsx)("div",{className:"mt-5",children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h5",{className:"mb-0",children:"Quick Actions"})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Xs,{variant:"outline-primary",className:"w-100",onClick:()=>e("/warehouse/inventory/stock-in-house"),children:[(0,De.jsx)(Ir,{className:"me-2"}),"Record Stock Movement"]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Xs,{variant:"outline-success",className:"w-100",onClick:()=>e("/warehouse/inventory/materials"),children:[(0,De.jsx)(oi,{className:"me-2"}),"Add New Material"]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Xs,{variant:"outline-warning",className:"w-100",onClick:()=>e("/warehouse/analytics"),children:[(0,De.jsx)(xr,{className:"me-2"}),"View Reports"]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Xs,{variant:"outline-info",className:"w-100",onClick:()=>e("/warehouse"),children:[(0,De.jsx)(Bi,{className:"me-2"}),"Dashboard Overview"]})})]})})]})})]})})},SP=["warehouse_worker","warehouse","delivery","admin","owner"];const AP=e=>{let{currentUser:t}=e;const[n,r]=(0,s.useState)(!0),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)("warehouse_worker"),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[v,x]=(0,s.useState)({username:"",password:"",confirmPassword:"",role:"warehouse_worker",first_name:"",last_name:"",email:""}),[b,y]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),[_,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)([]),S=(0,s.useMemo)(()=>function(e){const t="warehouse_manager"===e?"warehouse":e;return"owner"===t?SP:"admin"===t?["warehouse","warehouse_worker","delivery"]:"warehouse"===t?["warehouse_worker"]:[]}(null===t||void 0===t?void 0:t.role),[t]),A=async()=>{r(!0),a("");try{let e=[];const n="warehouse_manager"===u?"warehouse":u;if("warehouse"!==(null===t||void 0===t?void 0:t.role)&&"warehouse_manager"!==(null===t||void 0===t?void 0:t.role)||"warehouse_worker"!==n){const t=await ma("role=".concat(n));e=Array.isArray(null===t||void 0===t?void 0:t.results)?t.results:Array.isArray(t)?t:[]}else{const t=await pa().catch(()=>[]);e=Array.isArray(null===t||void 0===t?void 0:t.warehouse_workers)&&t.warehouse_workers||Array.isArray(null===t||void 0===t?void 0:t.results)&&t.results||Array.isArray(t)&&t||[]}l(e)}catch(zP){a((null===zP||void 0===zP?void 0:zP.message)||"Failed to load users")}finally{r(!1)}};(0,s.useEffect)(()=>{A()},[u]);const E=o.filter(e=>{const t=c.toLowerCase();return!t||"".concat(e.username," ").concat(e.first_name||""," ").concat(e.last_name||""," ").concat(e.email||"").toLowerCase().includes(t)}),T=async e=>{j(!0),N(!0),C([]);try{const n=await(t=e.id,Ji("/tasks/tasks/?assigned_worker=".concat(t))).catch(()=>({results:[]})),s=Array.isArray(null===n||void 0===n?void 0:n.results)?n.results:Array.isArray(n)?n:[];C(s)}catch(n){C([])}finally{N(!1)}var t};return(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,De.jsx)("h4",{className:"mb-0",children:"Workers"}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Gl.Select,{size:"sm",value:u,onChange:e=>h(e.target.value),children:[(0,De.jsx)("option",{value:"warehouse_worker",children:"Warehouse Workers"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse Staff (Managers)"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery Personnel"})]}),S.length>0&&(0,De.jsxs)(Xs,{onClick:()=>{g(null),x({username:"",password:"",confirmPassword:"",role:S[0]||"warehouse_worker",first_name:"",last_name:"",email:""}),p(!0)},variant:"primary",children:[(0,De.jsx)(Oi,{className:"me-2"}),"Add"]})]})]}),(0,De.jsx)(ps,{className:"mb-3",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(oc,{children:[(0,De.jsx)(oc.Text,{children:(0,De.jsx)(gi,{})}),(0,De.jsx)(Gl.Control,{placeholder:"Search workers...",value:c,onChange:e=>d(e.target.value)})]})})}),i&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>a(""),children:i}),n?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})}):(0,De.jsx)(ps,{children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Username"}),(0,De.jsx)("th",{children:"Name"}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsx)("th",{children:"Role"}),(0,De.jsx)("th",{style:{width:220},children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[E.map(e=>{var t;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.username}),(0,De.jsxs)("td",{children:[e.first_name," ",e.last_name]}),(0,De.jsx)("td",{children:e.email}),(0,De.jsx)("td",{className:"text-capitalize",children:null===(t=e.role)||void 0===t?void 0:t.replace("_"," ")}),(0,De.jsxs)("td",{children:[(0,De.jsxs)(Xs,{size:"sm",variant:"outline-secondary",className:"me-2",onClick:()=>T(e),children:[(0,De.jsx)(qr,{className:"me-1"}),"History"]}),S.includes(e.role)&&(0,De.jsxs)(Xs,{size:"sm",variant:"outline-primary",className:"me-2",onClick:()=>(e=>{g(e),x({username:e.username,password:"",confirmPassword:"",role:e.role,first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||""}),p(!0)})(e),children:[(0,De.jsx)(Rr,{className:"me-1"}),"Edit"]}),S.includes(e.role)&&(0,De.jsxs)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>(async e=>{if(window.confirm("Delete user ".concat(e.username,"?")))try{await va(e.id),await A()}catch(zP){alert((null===zP||void 0===zP?void 0:zP.message)||"Failed to delete user")}})(e),children:[(0,De.jsx)(Pi,{className:"me-1"}),"Delete"]})]})]},e.id)}),0===E.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:5,className:"text-center text-muted py-4",children:"No users found"})})]})]})}),(0,De.jsxs)(Vo,{show:m,onHide:()=>p(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:f?"Edit User":"Create User"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)(Gl,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Username"}),(0,De.jsx)(Gl.Control,{value:v.username,onChange:e=>x(Pe(Pe({},v),{},{username:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)(Gl.Label,{children:["Password ",f?"(leave blank to keep)":""]}),(0,De.jsx)(Gl.Control,{type:"password",value:v.password,onChange:e=>x(Pe(Pe({},v),{},{password:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)(Gl.Label,{children:["Confirm Password ",f?"(leave blank if unchanged)":""]}),(0,De.jsx)(Gl.Control,{type:"password",value:v.confirmPassword,onChange:e=>x(Pe(Pe({},v),{},{confirmPassword:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"First Name"}),(0,De.jsx)(Gl.Control,{value:v.first_name,onChange:e=>x(Pe(Pe({},v),{},{first_name:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Last Name"}),(0,De.jsx)(Gl.Control,{value:v.last_name,onChange:e=>x(Pe(Pe({},v),{},{last_name:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Email"}),(0,De.jsx)(Gl.Control,{type:"email",value:v.email,onChange:e=>x(Pe(Pe({},v),{},{email:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-2",children:[(0,De.jsx)(Gl.Label,{children:"Role"}),(0,De.jsx)(Gl.Select,{value:v.role,onChange:e=>x(Pe(Pe({},v),{},{role:e.target.value})),children:S.map(e=>(0,De.jsx)("option",{value:e,children:e.replace("_"," ")},e))})]})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",disabled:b,onClick:async()=>{if(f){if(v.password&&v.password!==v.confirmPassword)return void alert("Passwords do not match")}else{if(!v.password||v.password.length<4)return void alert("Password is required (min 4 chars)");if(v.password!==v.confirmPassword)return void alert("Passwords do not match")}y(!0);try{if(f){const e=Pe({},v);e.password?e.password_confirm=v.confirmPassword:delete e.password,delete e.confirmPassword,await ga(f.id,e)}else{const e=Pe({},v);e.password_confirm=v.confirmPassword,delete e.confirmPassword,await fa(e)}p(!1),await A()}catch(zP){alert((null===zP||void 0===zP?void 0:zP.message)||"Save failed")}finally{y(!1)}},children:b?"Saving...":"Save"})]})]}),(0,De.jsxs)(Vo,{show:w,onHide:()=>j(!1),size:"lg",children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Task History"})}),(0,De.jsx)(Vo.Body,{children:_?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})}):(0,De.jsxs)(Ki,{responsive:!0,hover:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Task"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Order"}),(0,De.jsx)("th",{children:"Updated"})]})}),(0,De.jsxs)("tbody",{children:[k.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.title||e.name||"Task ".concat(e.id)}),(0,De.jsx)("td",{children:e.status}),(0,De.jsx)("td",{children:e.order_number||e.order||"-"}),(0,De.jsx)("td",{children:new Date(e.updated_at||e.modified||Date.now()).toLocaleString()})]},e.id)),0===k.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:4,className:"text-center text-muted py-4",children:"No history"})})]})]})}),(0,De.jsx)(Vo.Footer,{children:(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>j(!1),children:"Close"})})]})]})},EP=()=>{var e;const[t,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)(""),[a,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!1),d=(0,s.useRef)(null),[u,h]=(0,s.useState)(0),m=async()=>{n(!0),i("");try{var e,t;const n=await Na();o(n),null!==n&&void 0!==n&&null!==(e=n.summary)&&void 0!==e&&null!==(t=e.currently_running)&&void 0!==t&&t.time_elapsed?h(n.summary.currently_running.time_elapsed):h(0)}catch(zP){i((null===zP||void 0===zP?void 0:zP.message)||"Failed to load worker dashboard")}finally{n(!1)}};(0,s.useEffect)(()=>{m()},[]),(0,s.useEffect)(()=>{var e;return null!==a&&void 0!==a&&null!==(e=a.summary)&&void 0!==e&&e.currently_running?d.current||(d.current=setInterval(()=>h(e=>e+1),1e3)):d.current&&(clearInterval(d.current),d.current=null,h(0)),()=>{d.current&&clearInterval(d.current)}},[null===a||void 0===a||null===(e=a.summary)||void 0===e?void 0:e.currently_running]);const p=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c(!0);try{await function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ji("/tasks/tasks/".concat(e,"/worker_action/"),{method:"POST",data:Pe({action:t},n)})}(e,t,n),await m()}catch(zP){alert((null===zP||void 0===zP?void 0:zP.message)||"Action failed")}finally{c(!1)}};if(t)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})});if(r)return(0,De.jsx)(Nn,{variant:"danger",children:r});const f=(null===a||void 0===a?void 0:a.summary)||{},g=(null===a||void 0===a?void 0:a.assigned_tasks)||[],v=(null===a||void 0===a?void 0:a.active_tasks)||[],x=(null===a||void 0===a?void 0:a.completed_tasks)||[],b=f.currently_running||null;return(0,De.jsxs)("div",{className:"worker-dashboard",children:[(0,De.jsxs)(Sn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-muted",children:"Assigned"}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:f.assigned_count||0})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-muted",children:"Active"}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:f.active_count||0})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-muted",children:"Completed Today"}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:f.completed_today||0})]})})})]}),(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-warning",children:[(0,De.jsx)(ps.Header,{children:"Current Task"}),(0,De.jsx)(ps.Body,{children:b?(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:b.title}),(0,De.jsxs)("div",{className:"text-muted",children:["Elapsed: ",(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return"".concat(t,"h ").concat(n,"m ").concat(s,"s")})(u)]}),b.order_item_details&&(0,De.jsxs)("div",{className:"mt-2",children:[(0,De.jsxs)("div",{className:"small text-muted",children:[(0,De.jsx)("strong",{children:"Product:"})," ",b.order_item_details.product_name,b.order_item_details.quantity&&" (Qty: ".concat(b.order_item_details.quantity,")")]}),(0,De.jsxs)("div",{className:"d-flex gap-2 mt-1",children:[b.order_item_details.color_name&&(0,De.jsx)(Rn,{bg:"light",text:"dark",className:"border",style:{backgroundColor:b.order_item_details.hex_color||"#f8f9fa",color:b.order_item_details.hex_color?"#000":"#6c757d"},children:b.order_item_details.color_name}),b.order_item_details.fabric_name&&(0,De.jsx)(Rn,{bg:"secondary",className:"text-white",children:b.order_item_details.fabric_name})]})]}),(0,De.jsxs)("div",{className:"mt-3 d-flex gap-2",children:[(0,De.jsx)(Xs,{variant:"warning",disabled:l,onClick:()=>p(b.id,"pause",{reason:"Manual pause"}),children:"Pause"}),(0,De.jsx)(Xs,{variant:"primary",disabled:l,onClick:()=>p(b.id,"complete",{completion_notes:""}),children:"Complete"}),(0,De.jsx)(Xs,{variant:"outline-danger",disabled:l,onClick:()=>p(b.id,"flag",{reason:"Issue"}),children:"Flag"})]})]}):(0,De.jsx)("div",{className:"text-muted",children:"No current running task"})})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-info",children:[(0,De.jsx)(ps.Header,{children:"Assigned Tasks"}),(0,De.jsxs)(Jl,{variant:"flush",children:[g.slice(0,5).map(e=>(0,De.jsxs)(Jl.Item,{className:"d-flex justify-content-between align-items-start",children:[(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsxs)("small",{className:"text-muted",children:["Due: ",e.due_date?new Date(e.due_date).toLocaleString():"-"]}),e.order_item_details&&(0,De.jsxs)("div",{className:"mt-1",children:[(0,De.jsxs)("div",{className:"small text-muted",children:[e.order_item_details.product_name,e.order_item_details.quantity&&" (Qty: ".concat(e.order_item_details.quantity,")")]}),(0,De.jsxs)("div",{className:"d-flex gap-1 mt-1",children:[e.order_item_details.color_name&&(0,De.jsx)(Rn,{size:"sm",bg:"light",text:"dark",className:"border",style:{backgroundColor:e.order_item_details.hex_color||"#f8f9fa",color:e.order_item_details.hex_color?"#000":"#6c757d",fontSize:"0.7rem"},children:e.order_item_details.color_name}),e.order_item_details.fabric_name&&(0,De.jsx)(Rn,{bg:"secondary",className:"text-white",style:{fontSize:"0.7rem"},children:e.order_item_details.fabric_name})]})]})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 ms-2",children:[(0,De.jsx)(Xs,{size:"sm",variant:"success",disabled:l,onClick:()=>p(e.id,"start"),children:"Start"}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",disabled:l,onClick:()=>p(e.id,"flag",{reason:"Issue"}),children:"Flag"})]})]},e.id)),0===g.length&&(0,De.jsx)(Jl.Item,{className:"text-muted",children:"No assigned tasks"})]})]})})]}),(0,De.jsxs)(Sn,{className:"g-3 mt-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Header,{children:"Active Tasks"}),(0,De.jsxs)(Jl,{variant:"flush",children:[v.slice(0,5).map(e=>(0,De.jsxs)(Jl.Item,{className:"d-flex justify-content-between align-items-start",children:[(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsxs)("small",{className:"text-muted",children:["Status: ",e.status]}),e.order_item_details&&(0,De.jsxs)("div",{className:"mt-1",children:[(0,De.jsxs)("div",{className:"small text-muted",children:[e.order_item_details.product_name,e.order_item_details.quantity&&" (Qty: ".concat(e.order_item_details.quantity,")")]}),(0,De.jsxs)("div",{className:"d-flex gap-1 mt-1",children:[e.order_item_details.color_name&&(0,De.jsx)(Rn,{size:"sm",bg:"light",text:"dark",className:"border",style:{backgroundColor:e.order_item_details.hex_color||"#f8f9fa",color:e.order_item_details.hex_color?"#000":"#6c757d",fontSize:"0.7rem"},children:e.order_item_details.color_name}),e.order_item_details.fabric_name&&(0,De.jsx)(Rn,{bg:"secondary",className:"text-white",style:{fontSize:"0.7rem"},children:e.order_item_details.fabric_name})]})]})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 ms-2",children:["paused"===e.status&&(0,De.jsx)(Xs,{size:"sm",variant:"success",disabled:l,onClick:()=>p(e.id,"resume"),children:"Resume"}),"started"===e.status&&(0,De.jsx)(Xs,{size:"sm",variant:"warning",disabled:l,onClick:()=>p(e.id,"pause",{reason:"Manual pause"}),children:"Pause"}),(0,De.jsx)(Xs,{size:"sm",variant:"primary",disabled:l,onClick:()=>p(e.id,"complete",{completion_notes:""}),children:"Complete"})]})]},e.id)),0===v.length&&(0,De.jsx)(Jl.Item,{className:"text-muted",children:"No active tasks"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Header,{children:"Recently Completed"}),(0,De.jsxs)(Jl,{variant:"flush",children:[x.slice(0,5).map(e=>(0,De.jsx)(Jl.Item,{className:"d-flex justify-content-between align-items-start",children:(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsx)("small",{className:"text-muted",children:"Completed"}),e.order_item_details&&(0,De.jsxs)("div",{className:"mt-1",children:[(0,De.jsxs)("div",{className:"small text-muted",children:[e.order_item_details.product_name,e.order_item_details.quantity&&" (Qty: ".concat(e.order_item_details.quantity,")")]}),(0,De.jsxs)("div",{className:"d-flex gap-1 mt-1",children:[e.order_item_details.color_name&&(0,De.jsx)(Rn,{size:"sm",bg:"light",text:"dark",className:"border",style:{backgroundColor:e.order_item_details.hex_color||"#f8f9fa",color:e.order_item_details.hex_color?"#000":"#6c757d",fontSize:"0.7rem"},children:e.order_item_details.color_name}),e.order_item_details.fabric_name&&(0,De.jsx)(Rn,{bg:"secondary",className:"text-white",style:{fontSize:"0.7rem"},children:e.order_item_details.fabric_name})]})]})]})},e.id)),0===x.length&&(0,De.jsx)(Jl.Item,{className:"text-muted",children:"No completed tasks"})]})]})})]})]})},TP=e=>{let{title:t,value:n,variant:s="primary",footer:r}=e;return(0,De.jsx)(ps,{className:"border-".concat(s),children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("div",{className:"text-muted small mb-1",children:t}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:n}),r&&(0,De.jsx)("div",{className:"text-muted small mt-2",children:r})]})})},PP=()=>{const[e,t]=(0,s.useState)(!0),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)({total_materials:0,in_stock:0}),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)({assigned:0,started:0,completed:0}),m=async()=>{t(!0),r("");try{let t=null;try{t=await Ji("/orders/warehouse_analytics/")}catch(e){}if(t&&"object"===typeof t){const e=t.stock_analytics||{},n=t.order_analytics||{},s=t.task_analytics||{};a({total_materials:e.total_materials||0,in_stock:e.in_stock||0});const r=await Pa().catch(()=>null);l(r||[]);const i=Array.isArray(n.orders)?n.orders:Array.isArray(t.orders)?t.orders:[];i.length>0&&d(i),h({assigned:s.assigned||s.total_tasks||0,started:s.tasks_in_progress||0,completed:s.tasks_completed_week||0})}else{const[e,t,n]=await Promise.all([Ta(),Pa(),Ca()]);a(e||{total_materials:0,in_stock:0}),l(t||[]);const s=Array.isArray(null===n||void 0===n?void 0:n.orders)?n.orders:Array.isArray(n)?n:[];d(s);const[r,i,o]=await Promise.all([Oa("assigned").catch(()=>[]),Oa("started").catch(()=>[]),Oa("completed").catch(()=>[])]),c=e=>Array.isArray(null===e||void 0===e?void 0:e.results)?e.results.length:Array.isArray(e)?e.length:0;h({assigned:c(r),started:c(i),completed:c(o)})}}catch(zP){r((null===zP||void 0===zP?void 0:zP.message)||"Failed to load analytics")}finally{t(!1)}};if((0,s.useEffect)(()=>{m()},[]),e)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})});if(n)return(0,De.jsx)(Nn,{variant:"danger",onClose:()=>r(""),dismissible:!0,children:n});const p=c.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,f=c.filter(e=>"in_production"===e.production_status).length;return(0,De.jsxs)("div",{children:[(0,De.jsxs)(Sn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(TP,{title:"Total Materials",value:i.total_materials||0,variant:"primary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(TP,{title:"Materials In Stock",value:i.in_stock||0,variant:"success"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(TP,{title:"Low Stock Items",value:o.length,variant:"warning"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(TP,{title:"Orders In Production",value:f,variant:"info"})})]}),(0,De.jsxs)(Sn,{className:"g-3 mb-4",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(TP,{title:"Tasks Assigned",value:u.assigned,variant:"secondary"})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(TP,{title:"Tasks In Progress",value:u.started,variant:"warning"})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(TP,{title:"Tasks Completed Today",value:u.completed,variant:"success"})})]}),(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Low Stock Alerts"}),(0,De.jsx)(Rn,{bg:o.length>0?"warning":"secondary",children:o.length})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Material"}),(0,De.jsx)("th",{children:"Current"}),(0,De.jsx)("th",{children:"Threshold"})]})}),(0,De.jsxs)("tbody",{children:[o.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.material_name}),(0,De.jsxs)("td",{children:[e.current_stock," ",e.unit]}),(0,De.jsx)("td",{children:e.threshold})]},e.id)),0===o.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"No low stock alerts"})})]})]})})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Orders Snapshot"}),(0,De.jsxs)(Rn,{bg:"success",children:["Ready: ",p]})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Customer"}),(0,De.jsx)("th",{children:"Production"})]})}),(0,De.jsxs)("tbody",{children:[c.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.order_number}),(0,De.jsx)("td",{children:e.customer_name}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"completed"===e.production_status||"order_ready"===e.order_status?"success":"in_production"===e.production_status?"warning":"secondary",children:"completed"===e.production_status?"completed":"order_ready"===e.order_status?"order_ready":e.production_status||"not_started"})})]},e.id)),0===c.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"No orders"})})]})]})})]})})]})]})},MP=()=>{const[e,t]=(0,s.useState)(!0),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)([]),c=async()=>{t(!0),r("");try{const e=await(async()=>{try{const e=await Ji("/tasks/tasks/?status=pending_review");return Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:Array.isArray(e)?e:[]}catch(zP){try{const e=await Ji("/tasks/tasks/pending_approval/");return Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:Array.isArray(e)?e:[]}catch(e){return[]}}})();l(e)}catch(zP){r((null===zP||void 0===zP?void 0:zP.message)||"Failed to load approvals")}finally{t(!1)}};(0,s.useEffect)(()=>{c()},[]);return e?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})}):(0,De.jsxs)("div",{children:[n&&(0,De.jsx)(Nn,{variant:"danger",onClose:()=>r(""),dismissible:!0,children:n}),i&&(0,De.jsx)(Nn,{variant:"success",onClose:()=>a(""),dismissible:!0,children:i}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Tasks Pending Approval"}),(0,De.jsx)(Rn,{bg:o.length?"warning":"secondary",children:o.length})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Ki,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Task"}),(0,De.jsx)("th",{children:"Worker"}),(0,De.jsx)("th",{children:"Order"}),(0,De.jsx)("th",{children:"Completed"}),(0,De.jsx)("th",{className:"text-end",children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[o.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.title}),(0,De.jsx)("td",{children:e.assigned_worker_name||"-"}),(0,De.jsx)("td",{children:e.order_number||"-"}),(0,De.jsx)("td",{children:e.completed_at?new Date(e.completed_at).toLocaleString():"-"}),(0,De.jsxs)("td",{className:"text-end",children:[(0,De.jsx)(Xs,{size:"sm",variant:"outline-success",className:"me-2",onClick:()=>(async e=>{try{await Fa(e,"approve"),a("Task approved"),c()}catch(zP){r((null===zP||void 0===zP?void 0:zP.message)||"Failed to approve")}})(e.id),children:"Approve"}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>(async e=>{const t=window.prompt("Rejection reason (optional):")||"";try{await Fa(e,"reject",{reason:t}),a("Task rejected"),c()}catch(zP){r((null===zP||void 0===zP?void 0:zP.message)||"Failed to reject")}})(e.id),children:"Reject"})]})]},e.id)),0===o.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:5,className:"text-center text-muted py-4",children:"No tasks pending approval"})})]})]})})]})]})},LP=e=>{let{title:t,count:n,orders:s,onAdvance:r}=e;return(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:t}),(0,De.jsx)(Rn,{bg:"secondary",children:n||0})]}),(0,De.jsxs)(Jl,{variant:"flush",children:[(s||[]).map(e=>(0,De.jsxs)(Jl.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.order_number}),(0,De.jsx)("small",{className:"text-muted",children:e.customer_name})]}),r&&(0,De.jsx)(Xs,{size:"sm",variant:"outline-primary",onClick:()=>r(e.id),children:"Advance"})]},e.id)),(!s||0===s.length)&&(0,De.jsx)(Jl.Item,{className:"text-muted",children:"None"})]})]})},RP=e=>{var t,n,r,i,a,o,l,c,d,u,h,m;let{user:p,onLogout:f,userRole:g="owner"}=e;const[v,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[S,A]=(0,s.useState)("warehouse"),[E,T]=(0,s.useState)(""),[P,M]=(0,s.useState)({warehouse_users:[],delivery_users:[]}),L=async()=>{x(!0),y("");try{const e=await Ji("/orders/workflow_dashboard/");j(e);const t=await ta().catch(()=>null);null!==t&&void 0!==t&&t.assignment_options&&M(t.assignment_options)}catch(zP){y((null===zP||void 0===zP?void 0:zP.message)||"Failed to load workflow dashboard")}finally{x(!1)}};(0,s.useEffect)(()=>{L()},[]);const R=async e=>{try{await na(e),await L()}catch(zP){y((null===zP||void 0===zP?void 0:zP.message)||"Advance failed")}};if(v)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})});if(b)return(0,De.jsx)(Nn,{variant:"danger",onClose:()=>y(""),dismissible:!0,children:b});const O=(null===w||void 0===w?void 0:w.workflow_stages)||{},D=(0,De.jsxs)("div",{className:"p-3",children:[(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(LP,{title:"New",count:null===(t=O.new_orders)||void 0===t?void 0:t.count,orders:null===(n=O.new_orders)||void 0===n?void 0:n.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(LP,{title:"Paid",count:null===(r=O.paid_orders)||void 0===r?void 0:r.count,orders:null===(i=O.paid_orders)||void 0===i?void 0:i.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(LP,{title:"In Production",count:null===(a=O.in_production)||void 0===a?void 0:a.count,orders:null===(o=O.in_production)||void 0===o?void 0:o.orders,onAdvance:R})})]}),(0,De.jsxs)(Sn,{className:"g-3 mt-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(LP,{title:"Ready for Delivery",count:null===(l=O.ready_for_delivery)||void 0===l?void 0:l.count,orders:null===(c=O.ready_for_delivery)||void 0===c?void 0:c.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(LP,{title:"Out for Delivery",count:null===(d=O.out_for_delivery)||void 0===d?void 0:d.count,orders:null===(u=O.out_for_delivery)||void 0===u?void 0:u.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(LP,{title:"Completed",count:null===(h=O.completed)||void 0===h?void 0:h.count,orders:null===(m=O.completed)||void 0===m?void 0:m.orders})})]}),(0,De.jsxs)(Vo,{show:_,onHide:()=>N(!1),children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Assign Order"})}),(0,De.jsx)(Vo.Body,{children:(0,De.jsxs)(Gl,{children:[(0,De.jsxs)(Gl.Group,{className:"mb-3",children:[(0,De.jsx)(Gl.Label,{children:"Assignment Type"}),(0,De.jsxs)(Gl.Select,{value:S,onChange:e=>A(e.target.value),children:[(0,De.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery"})]})]}),(0,De.jsxs)(Gl.Group,{children:[(0,De.jsx)(Gl.Label,{children:"Assign To"}),(0,De.jsxs)(Gl.Select,{value:E,onChange:e=>T(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select user..."}),("warehouse"===S?P.warehouse_users:P.delivery_users).map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.role,")"]},e.id))]})]})]})}),(0,De.jsxs)(Vo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>N(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",disabled:!E,onClick:async()=>{try{await(e=k,t=S,n=Number(E),Ji("/orders/".concat(e,"/assign/"),{method:"POST",data:{assignment_type:t,assigned_user_id:n}})),N(!1),await L()}catch(zP){y((null===zP||void 0===zP?void 0:zP.message)||"Assign failed")}var e,t,n},children:"Assign"})]})]})]});return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:p,userRole:g,onLogout:f}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:p,onLogout:f,dashboardType:g}),D]})]})},OP=e=>{let{title:t,value:n,color:s="primary"}=e;return(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-".concat(s," fs-3 fw-bold"),children:n}),(0,De.jsx)("div",{className:"text-muted",children:t})]})})},DP=e=>{var t,n,r,i,a,o,l,c,d,u,h,m,p,f;let{user:g,onLogout:v}=e;const x=Z(),[b,y]=(0,s.useState)(!0),[w,j]=(0,s.useState)(""),[_,N]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{y(!0),j("");try{const e=await Ji("/orders/admin_warehouse_overview/");N(e)}catch(zP){j((null===zP||void 0===zP?void 0:zP.message)||"Failed to load overview")}finally{y(!1)}})()},[]),b)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})});if(w)return(0,De.jsx)(Nn,{variant:"danger",children:w});const k=(null===_||void 0===_?void 0:_.production_pipeline)||{},C=(null===_||void 0===_?void 0:_.task_overview)||{},S=(null===_||void 0===_?void 0:_.workforce_summary)||{},A=(null===_||void 0===_?void 0:_.navigation_message)||{};return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:g,userRole:"admin",onLogout:v}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:g,onLogout:v,dashboardType:"admin"}),(0,De.jsxs)("div",{className:"p-3",children:[(0,De.jsxs)(Sn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(OP,{title:"Cutting",value:null!==(t=k.cutting)&&void 0!==t?t:0,color:"primary"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(OP,{title:"Sewing",value:null!==(n=k.sewing)&&void 0!==n?n:0,color:"info"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(OP,{title:"Finishing",value:null!==(r=k.finishing)&&void 0!==r?r:0,color:"warning"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(OP,{title:"Quality",value:null!==(i=k.quality_check)&&void 0!==i?i:0,color:"secondary"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(OP,{title:"Completed",value:null!==(a=k.completed)&&void 0!==a?a:0,color:"success"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(OP,{title:"In Prod",value:null!==(o=k.total_in_production)&&void 0!==o?o:0,color:"dark"})})]}),(0,De.jsxs)(Sn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Active Tasks",value:null!==(l=C.total_active_tasks)&&void 0!==l?l:0,color:"primary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Pending",value:null!==(c=C.pending_tasks)&&void 0!==c?c:0,color:"secondary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"In Progress",value:null!==(d=C.in_progress_tasks)&&void 0!==d?d:0,color:"info"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Paused",value:null!==(u=C.paused_tasks)&&void 0!==u?u:0,color:"warning"})})]}),(0,De.jsxs)(Sn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Workers",value:null!==(h=S.total_workers)&&void 0!==h?h:0,color:"dark"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Managers",value:null!==(m=S.managers)&&void 0!==m?m:0,color:"secondary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Workers",value:null!==(p=S.workers)&&void 0!==p?p:0,color:"primary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(OP,{title:"Active",value:null!==(f=S.active_workers)&&void 0!==f?f:0,color:"success"})})]}),(0,De.jsxs)(ps,{className:"mb-3",children:[(0,De.jsx)(ps.Header,{children:"Warehouse Bottlenecks"}),(0,De.jsxs)(Jl,{variant:"flush",children:[((null===_||void 0===_?void 0:_.bottleneck_analysis)||[]).map((e,t)=>(0,De.jsx)(Jl.Item,{children:e},t)),(!(null!==_&&void 0!==_&&_.bottleneck_analysis)||0===_.bottleneck_analysis.length)&&(0,De.jsx)(Jl.Item,{className:"text-muted",children:"No bottlenecks"})]})]}),(0,De.jsx)(ps,{className:"border-success",children:(0,De.jsxs)(ps.Body,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:A.title||"Warehouse Operations"}),(0,De.jsx)("div",{className:"text-muted",children:A.description||"Use the Warehouse Dashboard for operations."})]}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>x(A.action_url||"/warehouse"),children:A.action_text||"Go to Warehouse Dashboard"})]})})]})]})]})},IP=e=>{let{user:t,onLogout:n}=e;const[r,i]=(0,s.useState)(!0),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(1),[h,m]=(0,s.useState)(20),[p,f]=(0,s.useState)(0),[g,v]=(0,s.useState)({order:"",customer:"",method:"",status:"",user:"",since:"",until:""}),[x,b]=(0,s.useState)({open:!1,url:"",name:""}),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;i(!0),o("");try{const s={page:e,page_size:t};Object.entries(n).forEach(e=>{let[t,n]=e;n&&(s[t]=n)});const r=await ca(s),i=Array.isArray(null===r||void 0===r?void 0:r.results)?r.results:Array.isArray(r)?r:[];c(i),f(void 0!==(null===r||void 0===r?void 0:r.count)?r.count:Array.isArray(r)?r.length:0),u(e),m(t)}catch(zP){o((null===zP||void 0===zP?void 0:zP.message)||"Failed to load transactions")}finally{i(!1)}};(0,s.useEffect)(()=>{y(1,h,g)},[]);const w=e=>v(t=>Pe(Pe({},t),{},{[e.target.name]:e.target.value}));return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Cd,{user:t,userRole:"owner",onLogout:n}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Zm,{user:t,onLogout:n,dashboardType:"owner"}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(ps,{className:"mb-3 border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(ti,{className:"text-success"}),(0,De.jsx)("h5",{className:"mb-0",children:"Payment Transactions"})]}),(0,De.jsx)("div",{className:"d-flex gap-2",children:(0,De.jsxs)(Xs,{variant:"outline-secondary",onClick:()=>y(d,h,g),children:[(0,De.jsx)(Ci,{className:"me-1"}),"Refresh"]})})]})}),(0,De.jsxs)(ps,{className:"mb-3",children:[(0,De.jsxs)(ps.Header,{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(Ur,{})," Filters"]}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Sn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(Gl.Control,{placeholder:"Order #",name:"order",value:g.order,onChange:w})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(Gl.Control,{placeholder:"Customer",name:"customer",value:g.customer,onChange:w})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{name:"method",value:g.method,onChange:w,children:[(0,De.jsx)("option",{value:"",children:"Method"}),(0,De.jsx)("option",{value:"cash",children:"Cash"}),(0,De.jsx)("option",{value:"card",children:"Card"}),(0,De.jsx)("option",{value:"EFT",children:"EFT"}),(0,De.jsx)("option",{value:"cheque",children:"Cheque"}),(0,De.jsx)("option",{value:"other",children:"Other"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Gl.Select,{name:"status",value:g.status,onChange:w,children:[(0,De.jsx)("option",{value:"",children:"Status"}),(0,De.jsx)("option",{value:"deposit_pending",children:"Deposit Pending"}),(0,De.jsx)("option",{value:"deposit_paid",children:"Deposit Paid"}),(0,De.jsx)("option",{value:"partial",children:"Partial"}),(0,De.jsx)("option",{value:"paid",children:"Paid"}),(0,De.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(Gl.Control,{placeholder:"User ID",name:"user",value:g.user,onChange:w})}),(0,De.jsx)(Pn,{md:1,children:(0,De.jsx)(Gl.Control,{type:"date",name:"since",value:g.since,onChange:w})}),(0,De.jsx)(Pn,{md:1,children:(0,De.jsx)(Gl.Control,{type:"date",name:"until",value:g.until,onChange:w})})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 mt-3",children:[(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>y(1,h,g),children:[(0,De.jsx)(gi,{className:"me-1"}),"Apply"]}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>{const e={order:"",customer:"",method:"",status:"",user:"",since:"",until:""};v(e),y(1,h,e)},children:"Reset"})]})]})]}),a&&(0,De.jsx)(Nn,{variant:"danger",onClose:()=>o(""),dismissible:!0,children:a}),r?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Vi,{animation:"border"})}):(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsx)("div",{className:"table-responsive",children:(0,De.jsxs)(Ki,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Actor"}),(0,De.jsx)("th",{children:"Method"}),(0,De.jsx)("th",{children:"Amount \u0394"}),(0,De.jsx)("th",{children:"New Balance"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Proof"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[l.map(e=>{var t,n,s,r,i,a;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:new Date(e.created_at).toLocaleString()}),(0,De.jsx)("td",{children:e.order_number||e.order}),(0,De.jsx)("td",{children:(null===(t=e.actor_user)||void 0===t?void 0:t.username)||"".concat((null===(n=e.actor_user)||void 0===n?void 0:n.first_name)||""," ").concat((null===(s=e.actor_user)||void 0===s?void 0:s.last_name)||"")}),(0,De.jsx)("td",{children:e.payment_method}),(0,De.jsx)("td",{children:null==e.amount_delta||Number.isNaN(Number(e.amount_delta))?"-":"R".concat(Number(e.amount_delta).toFixed(2))}),(0,De.jsx)("td",{children:null==e.new_balance||Number.isNaN(Number(e.new_balance))?"-":"R".concat(Number(e.new_balance).toFixed(2))}),(0,De.jsx)("td",{children:e.payment_status}),(0,De.jsx)("td",{children:null!==(r=e.proof)&&void 0!==r&&r.id?(0,De.jsx)("a",{href:e.proof.absolute_url||e.proof.proof_image||e.proof.id&&((null===(i=window)||void 0===i?void 0:i.OOX_API_BASE)||"https://internaloox-1.onrender.com/api")+"/payment-proofs/".concat(e.proof.id,"/file/"),target:"_blank",rel:"noreferrer",children:"View"}):"-"}),(0,De.jsx)("td",{children:null!==(a=e.proof)&&void 0!==a&&a.id?(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>(async e=>{const t=null===e||void 0===e?void 0:e.proof;if(null!==t&&void 0!==t&&t.id)try{let e="";try{const n=await ua(t.id,300);e=(null===n||void 0===n?void 0:n.url)||""}catch(n){}e||(e=da(t.id));const s=(null===t||void 0===t?void 0:t.file_name)||"proof_".concat(t.id,".pdf");b({open:!0,url:e,name:s})}catch(zP){o((null===zP||void 0===zP?void 0:zP.message)||"Unable to open proof")}})(e),children:"Preview"}):"-"})]},e.id)}),0===l.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:9,className:"text-center text-muted py-4",children:"No transactions"})})]})]})})}),p>h&&(0,De.jsxs)(ps.Footer,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"text-muted small",children:["Page ",d," of ",Math.ceil(p/h)]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:d<=1,onClick:()=>y(d-1,h,g),children:"Prev"}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:d*h>=p,onClick:()=>y(d+1,h,g),children:"Next"})]})]})]})]}),(0,De.jsxs)(Vo,{show:x.open,onHide:()=>b({open:!1,url:"",name:""}),size:"lg",centered:!0,children:[(0,De.jsx)(Vo.Header,{closeButton:!0,children:(0,De.jsx)(Vo.Title,{children:"Proof of Payment"})}),(0,De.jsx)(Vo.Body,{children:x.url?(0,De.jsx)(dP,{url:x.url,fileName:x.name,height:"75vh"}):(0,De.jsx)("div",{className:"text-muted",children:"No document"})})]})]})]})};const FP=function(){const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(!0),[i,a]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=localStorage.getItem("oox_user");if(e)try{const n=JSON.parse(e);t(n)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("oox_user"),a("Session expired. Please login again.")}r(!1)},[]);const o=e=>{t(e),a(null),localStorage.setItem("oox_user",JSON.stringify(e))},l=()=>{t(null),a(null),localStorage.removeItem("oox_user"),localStorage.removeItem("oox_token")},c=t=>{let{children:n,allowedRoles:s}=t;return e?s&&!s.includes(e.role)?(0,De.jsx)(fe,{to:"/login",replace:!0}):n:(0,De.jsx)(fe,{to:"/login",replace:!0})};return n?(0,De.jsx)(Xe,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:(0,De.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,De.jsx)(Yc,{children:(0,De.jsx)(Ne,{children:(0,De.jsxs)("div",{className:"App",children:[i&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>a(null),className:"position-fixed top-0 start-50 translate-middle-x mt-3",style:{zIndex:9999},children:i}),(0,De.jsxs)(be,{children:[(0,De.jsx)(ve,{path:"/login",element:e?(0,De.jsx)(fe,{to:(e=>{switch(e){case"owner":return"/owner";case"admin":return"/admin";case"delivery":return"/delivery";case"warehouse":case"warehouse_manager":case"warehouse_worker":return"/warehouse";default:return"/login"}})(e.role),replace:!0}):(0,De.jsx)(fP,{onLogin:o})}),(0,De.jsx)(ve,{path:"/owner",element:(0,De.jsx)(c,{allowedRoles:["owner"],children:(0,De.jsx)(Sd,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(za,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/customers",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(sp,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/payments",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(uP,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/deliveries",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(hP,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/warehouse",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(DP,{user:e,onLogout:l})})}),(0,De.jsxs)(ve,{path:"/warehouse/*",element:(0,De.jsx)(c,{allowedRoles:["warehouse","warehouse_manager","warehouse_worker","owner","admin"],children:(0,De.jsx)(_P,{user:e,onLogout:l})}),children:[(0,De.jsx)(ve,{index:!0,element:(0,De.jsx)(Jc,{user:e,onLogout:l})}),(0,De.jsx)(ve,{path:"products",element:(0,De.jsx)(kP,{})}),(0,De.jsx)(ve,{path:"products/new",element:(0,De.jsx)(vP,{user:e})}),(0,De.jsx)(ve,{path:"stock",element:(0,De.jsx)(CP,{})}),(0,De.jsx)(ve,{path:"workers",element:(0,De.jsx)(AP,{currentUser:e})}),(0,De.jsx)(ve,{path:"worker",element:(0,De.jsx)(EP,{})}),(0,De.jsx)(ve,{path:"analytics",element:(0,De.jsx)(PP,{})}),(0,De.jsx)(ve,{path:"approvals",element:(0,De.jsx)(c,{allowedRoles:["owner","admin","warehouse"],children:(0,De.jsx)(MP,{})})}),(0,De.jsx)(ve,{path:"inventory/materials",element:(0,De.jsx)(yP,{})}),(0,De.jsx)(ve,{path:"inventory/stock-in-house",element:(0,De.jsx)(wP,{})}),(0,De.jsx)(ve,{path:"inventory/stock",element:(0,De.jsx)(wP,{})}),(0,De.jsx)(ve,{path:"orders",element:(0,De.jsx)(tp,{user:e,userRole:null===e||void 0===e?void 0:e.role,onLogout:l})})]}),(0,De.jsx)(ve,{path:"/delivery",element:(0,De.jsx)(c,{allowedRoles:["delivery","owner","admin"],children:(0,De.jsx)(Zc,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/orders",element:(0,De.jsx)(c,{allowedRoles:["owner"],children:(0,De.jsx)(tp,{user:e,userRole:"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/orders",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(tp,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/customers",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(sp,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/users",element:(0,De.jsx)(c,{allowedRoles:["owner"],children:(0,De.jsx)(rp,{user:e,userRole:"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/payments",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(uP,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/transactions",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(IP,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/transactions",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(IP,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/deliveries",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(hP,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/analytics",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(mP,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/workflow",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(RP,{user:e,onLogout:l,userRole:(null===e||void 0===e?void 0:e.role)||"owner"})})}),(0,De.jsx)(ve,{path:"/",element:(0,De.jsx)(fP,{onLogin:o})}),(0,De.jsx)(ve,{path:"*",element:(0,De.jsx)(fe,{to:"/login",replace:!0})})]})]})})})};i.createRoot(document.getElementById("root")).render((0,De.jsx)(s.StrictMode,{children:(0,De.jsx)(FP,{})}))})()})();
//# sourceMappingURL=main.2172d165.js.map