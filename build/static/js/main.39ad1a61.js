/*! For license information please see main.39ad1a61.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},45:(e,t,n)=>{var s=n(738).default;e.exports=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},139:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,r(n)))}return e}function r(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)s.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},153:(e,t,n)=>{"use strict";var s=n(43),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,r={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:i,type:e,key:c,ref:d,props:r,_owner:o.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var y=b.prototype=new x;y.constructor=b,f(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var i,r={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,i)&&!N.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(1===l)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:r,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,i,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return a=a(l=e),e=""===r?"."+A(l,0):r,w(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),E(a,t,i,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",w(e))for(var c=0;c<e.length;c++){var d=r+A(o=e[c],c);l+=E(o,t,i,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,i,d=r+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var s=[],i=0;return E(e,s,"","",function(e){return t.call(n,e,i++)}),s}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},L={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:L,ReactCurrentOwner:_};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),r=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:r,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,i=e[s];if(!(0<r(i,t)))break e;e[s]=t,e[n]=i,n=s}}function s(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,i=e.length,a=i>>>1;s<a;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,n))c<i&&0>r(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<i&&0>r(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=s(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=s(d)}}function w(e){if(g=!1,y(e),!f)if(null!==s(c))f=!0,L(j);else{var t=s(d);null!==t&&R(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,x(S),S=-1),p=!0;var r=m;try{for(y(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&i(c),y(n)}else i(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&R(w,u.startTime-n),l=!1}return l}finally{h=null,m=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,k=null,S=-1,C=5,A=-1;function E(){return!(t.unstable_now()-A<C)}function T(){if(null!==k){var e=t.unstable_now();A=e;var n=!0;try{n=k(!0,e)}finally{n?_():(N=!1,k=null)}}else N=!1}if("function"===typeof b)_=function(){b(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=T,_=function(){M.postMessage(null)}}else _=function(){v(T,0)};function L(e){k=e,N||(N=!0,_())}function R(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,L(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,i,r){var a=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(e.sortIndex=r,n(d,e),null===s(c)&&e===s(d)&&(g?(x(S),S=-1):g=!0,R(w,r-a))):(e.sortIndex=o,n(c,e),f||p||(f=!0,L(j))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},391:(e,t,n)=>{"use strict";var s=n(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},440:e=>{"use strict";var t=function(){};e.exports=t},497:(e,t,n)=>{"use strict";var s=n(218);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,a){if(a!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(153)},693:(e,t,n)=>{var s=n(736);e.exports=function(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},730:(e,t,n)=>{"use strict";var s=n(43),i=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,s,i,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,s){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,s)&&(n=null),s||null===i?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,s=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,I=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),r=s.stack.split("\n"),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==r[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case j:return"Portal";case k:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=G(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=V(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(s&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function re(e,t){var n=V(t.value),s=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),i=fe(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,_e=null,Ne=null;function ke(e){if(e=bi(e)){if("function"!==typeof je)throw Error(r(280));var t=e.stateNode;t&&(t=wi(t),je(e.stateNode,e.type,t))}}function Se(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Te=!1;function Pe(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ae(e,t,n)}finally{Te=!1,(null!==_e||null!==Ne)&&(Ee(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var s=wi(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Le=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Le=!1}function Oe(e,t,n,s,i,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var De=!1,Ie=null,Fe=!1,ze=null,Be={onError:function(e){De=!0,Ie=e}};function We(e,t,n,s,i,r,a,o,l){De=!1,Ie=null,Oe.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(r(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(s=i.return)){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===s)return Ve(i),t;a=a.sibling}throw Error(r(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==s)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,st=i.unstable_IdlePriority,it=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,i=e.suspendedLanes,r=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?s=ut(o):0!==(r&=a)&&(s=ut(r))}else 0!==(a=n&~i)?s=ut(a):0!==r&&(s=ut(r));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(r=t&-t)||16===i&&0!==(4194240&r)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)i=1<<(n=31-at(t)),s|=e[n],t&=~i;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-at(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,_t,Nt,kt,St=!1,Ct=[],At=null,Et=null,Tt=null,Pt=new Map,Mt=new Map,Lt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,s,i,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&jt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function It(e){var t=xi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&jt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);ye=s,n.target.dispatchEvent(s),ye=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){St=!1,null!==At&&Ft(At)&&(At=null),null!==Et&&Ft(Et)&&(Et=null),null!==Tt&&Ft(Tt)&&(Tt=null),Pt.forEach(zt),Mt.forEach(zt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Wt(t,e)}if(0<Ct.length){Wt(Ct[0],e);for(var n=1;n<Ct.length;n++){var s=Ct[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==At&&Wt(At,e),null!==Et&&Wt(Et,e),null!==Tt&&Wt(Tt,e),Pt.forEach(t),Mt.forEach(t),n=0;n<Lt.length;n++)(s=Lt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)It(n),null===n.blockedOn&&Lt.shift()}var Ut=y.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,s){var i=bt,r=Ut.transition;Ut.transition=null;try{bt=1,Kt(e,t,n,s)}finally{bt=i,Ut.transition=r}}function qt(e,t,n,s){var i=bt,r=Ut.transition;Ut.transition=null;try{bt=4,Kt(e,t,n,s)}finally{bt=i,Ut.transition=r}}function Kt(e,t,n,s){if(Vt){var i=Yt(e,t,n,s);if(null===i)Vs(e,t,s,Xt,n),Ot(e,s);else if(function(e,t,n,s,i){switch(t){case"focusin":return At=Dt(At,e,t,n,s,i),!0;case"dragenter":return Et=Dt(Et,e,t,n,s,i),!0;case"mouseover":return Tt=Dt(Tt,e,t,n,s,i),!0;case"pointerover":var r=i.pointerId;return Pt.set(r,Dt(Pt.get(r)||null,e,t,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Mt.set(r,Dt(Mt.get(r)||null,e,t,n,s,i)),!0}return!1}(i,e,t,n,s))s.stopPropagation();else if(Ot(e,s),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var r=bi(i);if(null!==r&&wt(r),null===(r=Yt(e,t,n,s))&&Vs(e,t,s,Xt,n),r===i)break;i=r}null!==i&&s.stopPropagation()}else Vs(e,t,s,null,n)}}var Xt=null;function Yt(e,t,n,s){if(Xt=null,null!==(e=xi(e=we(s))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,s=n.length,i="value"in $t?$t.value:$t.textContent,r=i.length;for(e=0;e<s&&n[e]===i[e];e++);var a=s-e;for(t=1;t<=a&&n[s-t]===i[r-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,s,i,r){for(var a in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=I({},cn,{view:0,detail:0}),hn=rn(un),mn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(mn),fn=rn(I({},mn,{dataTransfer:0})),gn=rn(I({},un,{relatedTarget:0})),vn=rn(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(xn),yn=rn(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return Nn}var Sn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=rn(Sn),An=rn(I({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Tn=rn(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=I({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=rn(Pn),Ln=[9,13,27,32],Rn=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var Dn=d&&"TextEvent"in window&&!On,In=d&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,s){Se(s),0<(t=qs(t,"onChange")).length&&(n=new dn("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Xn(e){Fs(e,0)}function Yn(e){if(K(yi(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Zn="function"===typeof es.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ts(){qn&&(qn.detachEvent("onpropertychange",ns),Kn=qn=null)}function ns(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,we(e)),Pe(Xn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Kn=n,(qn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function is(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function rs(e,t){if("click"===e)return Yn(t)}function as(e,t){if("input"===e||"change"===e)return Yn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!u.call(t,i)||!os(e[i],t[i]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&us(n.ownerDocument.documentElement,n)){if(null!==s&&ms(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(s.start,i);s=void 0===s.end?r:Math.min(s.end,i),!e.extend&&r>s&&(i=s,s=r,r=i),i=ds(n,r);var a=ds(n,s);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),r>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=d&&"documentMode"in document&&11>=document.documentMode,gs=null,vs=null,xs=null,bs=!1;function ys(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bs||null==gs||gs!==X(s)||("selectionStart"in(s=gs)&&ms(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},xs&&ls(xs,s)||(xs=s,0<(s=qs(vs,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=gs)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},_s={},Ns={};function ks(e){if(_s[e])return _s[e];if(!js[e])return e;var t,n=js[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ns)return _s[e]=n[t];return e}d&&(Ns=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var Ss=ks("animationend"),Cs=ks("animationiteration"),As=ks("animationstart"),Es=ks("transitionend"),Ts=new Map,Ps="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){Ts.set(e,t),l(t,[e])}for(var Ls=0;Ls<Ps.length;Ls++){var Rs=Ps[Ls];Ms(Rs.toLowerCase(),"on"+(Rs[0].toUpperCase()+Rs.slice(1)))}Ms(Ss,"onAnimationEnd"),Ms(Cs,"onAnimationIteration"),Ms(As,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(Es,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ds=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Is(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,i,a,o,l,c){if(We.apply(this,arguments),De){if(!De)throw Error(r(198));var d=Ie;De=!1,Ie=null,Fe||(Fe=!0,ze=d)}}(s,t,void 0,e),e.currentTarget=null}function Fs(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&i.isPropagationStopped())break e;Is(i,o,c),r=l}else for(a=0;a<s.length;a++){if(l=(o=s[a]).instance,c=o.currentTarget,o=o.listener,l!==r&&i.isPropagationStopped())break e;Is(i,o,c),r=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zs(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var s=e+"__bubble";n.has(s)||(Us(t,e,2,!1),n.add(s))}function Bs(e,t,n){var s=0;t&&(s|=4),Us(n,e,s,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function Hs(e){if(!e[Ws]){e[Ws]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ds.has(t)||Bs(t,!1,e),Bs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ws]||(t[Ws]=!0,Bs("selectionchange",!1,t))}}function Us(e,t,n,s){switch(Qt(t)){case 1:var i=Gt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),s?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vs(e,t,n,s,i){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var a=s.tag;if(3===a||4===a){var o=s.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=s.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=xi(o)))return;if(5===(l=a.tag)||6===l){s=r=a;continue e}o=o.parentNode}}s=s.return}Pe(function(){var s=r,i=we(n),a=[];e:{var o=Ts.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ss:case Cs:case As:l=vn;break;case Es:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=s;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Me(p,h))&&d.push(Gs(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!xi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?xi(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=An,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:yi(l),m=null==c?o:yi(c),(o=new d(f,p+"leave",l,n,i)).target=u,o.relatedTarget=m,f=null,xi(i)===s&&((d=new d(h,p+"enter",c,n,i)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Ks(m))p++;for(m=0,f=h;f;f=Ks(f))m++;for(;0<p-m;)d=Ks(d),p--;for(;0<m-p;)h=Ks(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ks(d),h=Ks(h)}d=null}else d=null;null!==l&&Xs(a,o,l,d,!1),null!==c&&null!==u&&Xs(a,u,c,d,!0)}if("select"===(l=(o=s?yi(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Vn(o))if($n)g=as;else{g=is;var v=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=rs);switch(g&&(g=g(e,s))?Gn(a,g,n,i):(v&&v(e,o,s),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=s?yi(s):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gs=v,vs=s,xs=null);break;case"focusout":xs=vs=gs=null;break;case"mousedown":bs=!0;break;case"contextmenu":case"mouseup":case"dragend":bs=!1,ys(a,n,i);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":ys(a,n,i)}var x;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(x=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Hn=!0)),0<(v=qs(s,b)).length&&(b=new yn(b,e,null,n,i),a.push({event:b,listeners:v}),x?b.data=x:null!==(x=Wn(n))&&(b.data=x))),(x=Dn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=qs(s,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:s}),i.data=x))}Fs(a,t)})}function Gs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qs(e,t){for(var n=t+"Capture",s=[];null!==e;){var i=e,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=Me(e,n))&&s.unshift(Gs(e,r,i)),null!=(r=Me(e,t))&&s.push(Gs(e,r,i))),e=e.return}return s}function Ks(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xs(e,t,n,s,i){for(var r=t._reactName,a=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Me(n,r))&&a.unshift(Gs(n,l,o)):i||null!=(l=Me(n,r))&&a.push(Gs(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ys=/\r\n?/g,Qs=/\u0000|\uFFFD/g;function $s(e){return("string"===typeof e?e:""+e).replace(Ys,"\n").replace(Qs,"")}function Js(e,t,n){if(t=$s(t),$s(e)!==t&&n)throw Error(r(425))}function Zs(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var si="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ri="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ri?function(e){return ri.resolve(null).then(e).catch(oi)}:si;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===s)return e.removeChild(i),void Ht(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,mi="__reactProps$"+ui,pi="__reactContainer$"+ui,fi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function xi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function wi(e){return e[mi]||null}var ji=[],_i=-1;function Ni(e){return{current:e}}function ki(e){0>_i||(e.current=ji[_i],ji[_i]=null,_i--)}function Si(e,t){_i++,ji[_i]=e.current,e.current=t}var Ci={},Ai=Ni(Ci),Ei=Ni(!1),Ti=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=t[i];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){ki(Ei),ki(Ai)}function Ri(e,t,n){if(Ai.current!==Ci)throw Error(r(168));Si(Ai,t),Si(Ei,n)}function Oi(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var i in s=s.getChildContext())if(!(i in t))throw Error(r(108,U(e)||"Unknown",i));return I({},n,s)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ti=Ai.current,Si(Ai,e),Si(Ei,Ei.current),!0}function Ii(e,t,n){var s=e.stateNode;if(!s)throw Error(r(169));n?(e=Oi(e,t,Ti),s.__reactInternalMemoizedMergedChildContext=e,ki(Ei),ki(Ai),Si(Ai,e)):ki(Ei),Si(Ei,n)}var Fi=null,zi=!1,Bi=!1;function Wi(e){null===Fi?Fi=[e]:Fi.push(e)}function Hi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Hi),i}finally{bt=t,Bi=!1}}return null}var Ui=[],Vi=0,Gi=null,qi=0,Ki=[],Xi=0,Yi=null,Qi=1,$i="";function Ji(e,t){Ui[Vi++]=qi,Ui[Vi++]=Gi,Gi=e,qi=t}function Zi(e,t,n){Ki[Xi++]=Qi,Ki[Xi++]=$i,Ki[Xi++]=Yi,Yi=e;var s=Qi;e=$i;var i=32-at(s)-1;s&=~(1<<i),n+=1;var r=32-at(t)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|s,$i=r+e}else Qi=1<<r|n<<i|s,$i=e}function er(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function tr(e){for(;e===Gi;)Gi=Ui[--Vi],Ui[Vi]=null,qi=Ui[--Vi],Ui[Vi]=null;for(;e===Yi;)Yi=Ki[--Xi],Ki[Xi]=null,$i=Ki[--Xi],Ki[Xi]=null,Qi=Ki[--Xi],Ki[Xi]=null}var nr=null,sr=null,ir=!1,rr=null;function ar(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,sr=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,sr=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,sr=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(ir){var t=sr;if(t){var n=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=ci(n.nextSibling);var s=nr;t&&or(e,t)?ar(s,n):(e.flags=-4097&e.flags|2,ir=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,ir=!1,nr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!ir)return dr(e),ir=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=sr)){if(lr(e))throw hr(),Error(r(418));for(;t;)ar(e,t),t=ci(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){sr=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}sr=null}}else sr=nr?ci(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=sr;e;)e=ci(e.nextSibling)}function mr(){sr=nr=null,ir=!1}function pr(e){null===rr?rr=[e]:rr.push(e)}var fr=y.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var s=n.stateNode}if(!s)throw Error(r(147,e));var i=s,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xr(e){return(0,e._init)(e._payload)}function br(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function a(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Ic(n,e.mode,s)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,s){var r=n.type;return r===_?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===M&&xr(r)===t.type)?((s=i(t,n.props)).ref=gr(e,t,n),s.return=e,s):((s=Rc(n.type,n.key,n.props,null,e.mode,s)).ref=gr(e,t,n),s.return=e,s)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,s)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,s,r){return null===t||7!==t.tag?((t=Oc(n,e.mode,s,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function m(e,t,n,s){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,s):null;case j:return n.key===i?d(e,t,n,s):null;case M:return m(e,t,(i=n._init)(n._payload),s)}if(te(n)||O(n))return null!==i?null:u(e,t,n,s,null);vr(e,n)}return null}function p(e,t,n,s,i){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,i);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?n:s.key)||null,s,i);case j:return d(t,e=e.get(null===s.key?n:s.key)||null,s,i);case M:return p(e,t,n,(0,s._init)(s._payload),i)}if(te(s)||O(s))return u(t,e=e.get(n)||null,s,i,null);vr(t,s)}return null}function f(i,r,o,l){for(var c=null,d=null,u=r,f=r=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=m(i,u,o[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),r=a(v,r,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===o.length)return n(i,u),ir&&Ji(i,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(i,o[f],l))&&(r=a(u,r,f),null===d?c=u:d.sibling=u,d=u);return ir&&Ji(i,f),c}for(u=s(i,u);f<o.length;f++)null!==(g=p(u,i,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),r=a(g,r,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(i,e)}),ir&&Ji(i,f),c}function g(i,o,l,c){var d=O(l);if("function"!==typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,f=o,g=o=0,v=null,x=l.next();null!==f&&!x.done;g++,x=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=m(i,f,x.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(i,f),o=a(b,o,g),null===u?d=b:u.sibling=b,u=b,f=v}if(x.done)return n(i,f),ir&&Ji(i,g),d;if(null===f){for(;!x.done;g++,x=l.next())null!==(x=h(i,x.value,c))&&(o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return ir&&Ji(i,g),d}for(f=s(i,f);!x.done;g++,x=l.next())null!==(x=p(f,i,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return t(i,e)}),ir&&Ji(i,g),d}return function e(s,r,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=r;null!==d;){if(d.key===c){if((c=a.type)===_){if(7===d.tag){n(s,d.sibling),(r=i(d,a.props.children)).return=s,s=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&xr(c)===d.type){n(s,d.sibling),(r=i(d,a.props)).ref=gr(s,d,a),r.return=s,s=r;break e}n(s,d);break}t(s,d),d=d.sibling}a.type===_?((r=Oc(a.props.children,s.mode,l,a.key)).return=s,s=r):((l=Rc(a.type,a.key,a.props,null,s.mode,l)).ref=gr(s,r,a),l.return=s,s=l)}return o(s);case j:e:{for(d=a.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(s,r.sibling),(r=i(r,a.children||[])).return=s,s=r;break e}n(s,r);break}t(s,r),r=r.sibling}(r=Fc(a,s.mode,l)).return=s,s=r}return o(s);case M:return e(s,r,(d=a._init)(a._payload),l)}if(te(a))return f(s,r,a,l);if(O(a))return g(s,r,a,l);vr(s,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==r&&6===r.tag?(n(s,r.sibling),(r=i(r,a)).return=s,s=r):(n(s,r),(r=Ic(a,s.mode,l)).return=s,s=r),o(s)):n(s,r)}}var yr=br(!0),wr=br(!1),jr=Ni(null),_r=null,Nr=null,kr=null;function Sr(){kr=Nr=_r=null}function Cr(e){var t=jr.current;ki(jr),e._currentValue=t}function Ar(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Er(e,t){_r=e,kr=Nr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(kr!==e)if(e={context:e,memoizedValue:t,next:null},null===Nr){if(null===_r)throw Error(r(308));Nr=e,_r.dependencies={lanes:0,firstContext:e}}else Nr=Nr.next=e;return t}var Pr=null;function Mr(e){null===Pr?Pr=[e]:Pr.push(e)}function Lr(e,t,n,s){var i=t.interleaved;return null===i?(n.next=n,Mr(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rr(e,s)}function Rr(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Or=!1;function Dr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ir(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Al)){var i=s.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Rr(e,n)}return null===(i=s.interleaved)?(t.next=t,Mr(s)):(t.next=i.next,i.next=t),s.interleaved=t,Rr(e,n)}function Br(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Wr(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?i=r=t:r=r.next=t}else i=r=t;return n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hr(e,t,n,s){var i=e.updateQueue;Or=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?r=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=i.baseState;for(a=0,d=c=l=null,o=r;;){var h=o.lane,m=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=I({},u,h);break e;case 2:Or=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===r&&(i.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=u}}function Ur(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(null!==i){if(s.callback=null,s=n,"function"!==typeof i)throw Error(r(191,i));i.call(s)}}}var Vr={},Gr=Ni(Vr),qr=Ni(Vr),Kr=Ni(Vr);function Xr(e){if(e===Vr)throw Error(r(174));return e}function Yr(e,t){switch(Si(Kr,t),Si(qr,e),Si(Gr,Vr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Gr),Si(Gr,t)}function Qr(){ki(Gr),ki(qr),ki(Kr)}function $r(e){Xr(Kr.current);var t=Xr(Gr.current),n=le(t,e.type);t!==n&&(Si(qr,e),Si(Gr,n))}function Jr(e){qr.current===e&&(ki(Gr),ki(qr))}var Zr=Ni(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var sa=y.ReactCurrentDispatcher,ia=y.ReactCurrentBatchConfig,ra=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function ma(){throw Error(r(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function fa(e,t,n,s,i,a){if(ra=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Ja:Za,e=n(s,i),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(r(301));a+=1,la=oa=null,t.updateQueue=null,sa.current=eo,e=n(s,i)}while(da)}if(sa.current=$a,t=null!==oa&&null!==oa.next,ra=0,la=oa=aa=null,ca=!1,t)throw Error(r(300));return e}function ga(){var e=0!==ua;return ua=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function xa(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function ya(e){var t=xa(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=oa,i=s.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ra&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,aa.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==a);null===c?o=s:c.next=l,os(s,t.memoizedState)||(bo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Dl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=xa(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);os(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function ja(){}function _a(e,t){var n=aa,s=xa(),i=t(),a=!os(s.memoizedState,i);if(a&&(s.memoizedState=i,bo=!0),s=s.queue,Oa(Sa.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ta(9,ka.bind(null,n,s,i,t),void 0,null),null===El)throw Error(r(349));0!==(30&ra)||Na(n,t,i)}return i}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,s){t.value=n,t.getSnapshot=s,Ca(t)&&Aa(e)}function Sa(e,t,n){return n(function(){Ca(t)&&Aa(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Aa(e){var t=Rr(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ta(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Pa(){return xa().memoizedState}function Ma(e,t,n,s){var i=va();aa.flags|=e,i.memoizedState=Ta(1|t,n,void 0,void 0===s?null:s)}function La(e,t,n,s){var i=xa();s=void 0===s?null:s;var r=void 0;if(null!==oa){var a=oa.memoizedState;if(r=a.destroy,null!==s&&pa(s,a.deps))return void(i.memoizedState=Ta(t,n,r,s))}aa.flags|=e,i.memoizedState=Ta(1|t,n,r,s)}function Ra(e,t){return Ma(8390656,8,e,t)}function Oa(e,t){return La(2048,8,e,t)}function Da(e,t){return La(4,2,e,t)}function Ia(e,t){return La(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Fa.bind(null,t,e),n)}function Ba(){}function Wa(e,t){var n=xa();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=xa();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Ua(e,t,n){return 0===(21&ra)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(os(n,t)||(n=ft(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function Va(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var s=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=s}}function Ga(){return xa().memoizedState}function qa(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,n);else if(null!==(n=Lr(e,t,n,s))){nc(n,e,s,ec()),Qa(n,t,s)}}function Ka(e,t,n){var s=tc(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,i);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=r(a,n);if(i.hasEagerState=!0,i.eagerState=o,os(o,a)){var l=t.interleaved;return null===l?(i.next=i,Mr(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Lr(e,t,i,s))&&(nc(n,e,s,i=ec()),Qa(n,t,s))}}function Xa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,xt(e,n)}}var $a={readContext:Tr,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},Ja={readContext:Tr,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Tr,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=va();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=qa.bind(null,aa,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ea,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Va.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=aa,i=va();if(ir){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===El)throw Error(r(349));0!==(30&ra)||Na(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(Sa.bind(null,s,a,e),[e]),s.flags|=2048,Ta(9,ka.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=va(),t=El.identifierPrefix;if(ir){var n=$i;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Tr,useCallback:Wa,useContext:Tr,useEffect:Oa,useImperativeHandle:za,useInsertionEffect:Da,useLayoutEffect:Ia,useMemo:Ha,useReducer:ya,useRef:Pa,useState:function(){return ya(ba)},useDebugValue:Ba,useDeferredValue:function(e){return Ua(xa(),oa.memoizedState,e)},useTransition:function(){return[ya(ba)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:_a,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Tr,useCallback:Wa,useContext:Tr,useEffect:Oa,useImperativeHandle:za,useInsertionEffect:Da,useLayoutEffect:Ia,useMemo:Ha,useReducer:wa,useRef:Pa,useState:function(){return wa(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=xa();return null===oa?t.memoizedState=e:Ua(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:_a,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),i=tc(e),r=Fr(s,i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=zr(e,r,i))&&(nc(t,e,i,s),Br(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),i=tc(e),r=Fr(s,i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=zr(e,r,i))&&(nc(t,e,i,s),Br(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),i=Fr(n,s);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zr(e,i,s))&&(nc(t,e,s,n),Br(t,e,s))}};function io(e,t,n,s,i,r,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,a):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(i,r))}function ro(e,t,n){var s=!1,i=Ci,r=t.contextType;return"object"===typeof r&&null!==r?r=Tr(r):(i=Mi(t)?Ti:Ai.current,r=(s=null!==(s=t.contextTypes)&&void 0!==s)?Pi(e,i):Ci),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function ao(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Dr(e);var r=t.contextType;"object"===typeof r&&null!==r?i.context=Tr(r):(r=Mi(t)?Ti:Ai.current,i.context=Pi(e,r)),i.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&so.enqueueReplaceState(i,i.state,null),Hr(e,n,i,s),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=W(s),s=s.return}while(s);var i=n}catch(r){i="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Fr(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=s),uo(0,t)},n}function po(e,t,n){(n=Fr(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){uo(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var i=new Set;s.set(t,i)}else void 0===(i=s.get(t))&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,s,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fr(-1,1)).tag=2,zr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xo=y.ReactCurrentOwner,bo=!1;function yo(e,t,n,s){t.child=null===e?wr(t,null,n,s):yr(t,e.child,n,s)}function wo(e,t,n,s,i){n=n.render;var r=t.ref;return Er(t,i),s=fa(e,t,n,s,r,i),n=ga(),null===e||bo?(ir&&n&&er(t),t.flags|=1,yo(e,t,s,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function jo(e,t,n,s,i){if(null===e){var r=n.type;return"function"!==typeof r||Mc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,s,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,_o(e,t,r,s,i))}if(r=e.child,0===(e.lanes&i)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(a,s)&&e.ref===t.ref)return Vo(e,t,i)}return t.flags|=1,(e=Lc(r,s)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,s,i){if(null!==e){var r=e.memoizedProps;if(ls(r,s)&&e.ref===t.ref){if(bo=!1,t.pendingProps=s=r,0===(e.lanes&i))return t.lanes=e.lanes,Vo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return So(e,t,n,s,i)}function No(e,t,n){var s=t.pendingProps,i=s.children,r=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ll,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ll,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==r?r.baseLanes:n,Si(Ll,Ml),Ml|=s}else null!==r?(s=r.baseLanes|n,t.memoizedState=null):s=n,Si(Ll,Ml),Ml|=s;return yo(e,t,i,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,s,i){var r=Mi(n)?Ti:Ai.current;return r=Pi(t,r),Er(t,i),n=fa(e,t,n,s,r,i),s=ga(),null===e||bo?(ir&&s&&er(t),t.flags|=1,yo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function Co(e,t,n,s,i){if(Mi(n)){var r=!0;Di(t)}else r=!1;if(Er(t,i),null===t.stateNode)Uo(e,t),ro(t,n,s),oo(t,n,s,i),s=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Tr(c):c=Pi(t,c=Mi(n)?Ti:Ai.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==s||l!==c)&&ao(t,a,s,c),Or=!1;var h=t.memoizedState;a.state=h,Hr(t,s,a,i),l=t.memoizedState,o!==s||h!==l||Ei.current||Or?("function"===typeof d&&(no(t,n,d,s),l=t.memoizedState),(o=Or||io(t,n,o,s,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),a.props=s,a.state=l,a.context=c,s=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Ir(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Tr(l):l=Pi(t,l=Mi(n)?Ti:Ai.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,s,l),Or=!1,h=t.memoizedState,a.state=h,Hr(t,s,a,i);var p=t.memoizedState;o!==u||h!==p||Ei.current||Or?("function"===typeof m&&(no(t,n,m,s),p=t.memoizedState),(c=Or||io(t,n,c,s,h,p,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(s,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=l,s=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ao(e,t,n,s,r,i)}function Ao(e,t,n,s,i,r){ko(e,t);var a=0!==(128&t.flags);if(!s&&!a)return i&&Ii(t,n,!1),Vo(e,t,r);s=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&a?(t.child=yr(t,e.child,null,r),t.child=yr(t,null,o,r)):yo(e,t,o,r),t.memoizedState=s.state,i&&Ii(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Yr(e,t.containerInfo)}function To(e,t,n,s,i){return mr(),pr(i),t.flags|=256,yo(e,t,n,s),t.child}var Po,Mo,Lo,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var s,i=t.pendingProps,a=Zr.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&a)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Zr,1&a),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(s=a.dehydrated))return function(e,t,n,s,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,s=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=Dc({mode:"visible",children:s.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,0!==(1&t.mode)&&yr(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(s=i.nextSibling&&i.nextSibling.dataset)var l=s.dgst;return s=l,zo(e,t,o,s=co(a=Error(r(419)),s,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(s=El)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(s.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rr(e,i),nc(s,e,i,-1))}return fc(),zo(e,t,o,s=co(Error(r(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,sr=ci(i.nextSibling),nr=t,ir=!0,rr=null,null!==e&&(Ki[Xi++]=Qi,Ki[Xi++]=$i,Ki[Xi++]=Yi,Qi=e.id,$i=e.overflow,Yi=t),t=Fo(t,s.children),t.flags|=4096,t)}(e,t,l,i,s,a,n);if(o){o=i.fallback,l=t.mode,s=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==s?o=Lc(s,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Lc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,s){return null!==s&&pr(s),yr(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ar(e.return,t,n)}function Wo(e,t,n,s,i){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=i)}function Ho(e,t,n){var s=t.pendingProps,i=s.revealOrder,r=s.tail;if(yo(e,t,s.children,n),0!==(2&(s=Zr.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Si(Zr,s),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wo(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wo(t,!0,n,null,r);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,s|=14680064&i.subtreeFlags,s|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ko(e,t,n){var s=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Mi(t.type)&&Li(),qo(t),null;case 3:return s=t.stateNode,Qr(),ki(Ei),ki(Ai),na(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ac(rr),rr=null))),Mo(e,t),qo(t),null;case 5:Jr(t);var i=Xr(Kr.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(r(166));return qo(t),null}if(e=Xr(Gr.current),ur(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[hi]=t,s[mi]=a,e=0!==(1&t.mode),n){case"dialog":zs("cancel",s),zs("close",s);break;case"iframe":case"object":case"embed":zs("load",s);break;case"video":case"audio":for(i=0;i<Os.length;i++)zs(Os[i],s);break;case"source":zs("error",s);break;case"img":case"image":case"link":zs("error",s),zs("load",s);break;case"details":zs("toggle",s);break;case"input":Q(s,a),zs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},zs("invalid",s);break;case"textarea":ie(s,a),zs("invalid",s)}for(var l in xe(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==a.suppressHydrationWarning&&Js(s.textContent,c,e),i=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Js(s.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zs("scroll",s)}switch(n){case"input":q(s),Z(s,a,!0);break;case"textarea":q(s),ae(s);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(s.onclick=Zs)}s=i,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hi]=t,e[mi]=s,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,s),n){case"dialog":zs("cancel",e),zs("close",e),i=s;break;case"iframe":case"object":case"embed":zs("load",e),i=s;break;case"video":case"audio":for(i=0;i<Os.length;i++)zs(Os[i],e);i=s;break;case"source":zs("error",e),i=s;break;case"img":case"image":case"link":zs("error",e),zs("load",e),i=s;break;case"details":zs("toggle",e),i=s;break;case"input":Q(e,s),i=Y(e,s),zs("invalid",e);break;case"option":default:i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=I({},s,{value:void 0}),zs("invalid",e);break;case"textarea":ie(e,s),i=se(e,s),zs("invalid",e)}for(a in xe(n,i),c=i)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zs("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":q(e),Z(e,s,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=s.value&&e.setAttribute("value",""+V(s.value));break;case"select":e.multiple=!!s.multiple,null!=(a=s.value)?ne(e,!!s.multiple,a,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(r(166));if(n=Xr(Kr.current),Xr(Gr.current),ur(t)){if(s=t.stateNode,n=t.memoizedProps,s[hi]=t,(a=s.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Js(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Js(s.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hi]=t,t.stateNode=s}return qo(t),null;case 13:if(ki(Zr),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ir&&null!==sr&&0!==(1&t.mode)&&0===(128&t.flags))hr(),mr(),t.flags|=98560,a=!1;else if(a=ur(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));a[hi]=t}else mr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==rr&&(ac(rr),rr=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Qr(),Mo(e,t),null===e&&Hs(t.stateNode.containerInfo),qo(t),null;case 10:return Cr(t.type._context),qo(t),null;case 19:if(ki(Zr),null===(a=t.memoizedState))return qo(t),null;if(s=0!==(128&t.flags),null===(l=a.rendering))if(s)Go(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Hl&&(t.flags|=128,s=!0,Go(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ea(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ir)return qo(t),null}else 2*$e()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,s=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zr.current,Si(Zr,s?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Xo(e,t){switch(tr(t),t.tag){case 1:return Mi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qr(),ki(Ei),ki(Ai),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(ki(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Zr),null;case 4:return Qr(),null;case 10:return Cr(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},Lo=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Xr(Gr.current);var r,a=null;switch(n){case"input":i=Y(e,i),s=Y(e,s),a=[];break;case"select":i=I({},i,{value:void 0}),s=I({},s,{value:void 0}),a=[];break;case"textarea":i=se(e,i),s=se(e,s),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof s.onClick&&(e.onclick=Zs)}for(d in xe(n,s),n=null,i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=i?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zs("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,s){n!==s&&(t.flags|=4)};var Yo=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Nc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Nc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var i=s=s.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,void 0!==r&&el(t,n,r)}i=i.next}while(i!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[mi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var s=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=s)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(dl,n.stateNode));break;case 4:s=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=s,ul=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&el(n,t,a),i=i.next}while(i!==s)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(s=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=s):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var s=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(r(160));ml(a,o,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){Nc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Nc(e,e.return,g)}}if(4&s&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),be(l,o);var d=be(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):b(i,u,h,d)}switch(l){case"input":J(i,a);break;case"textarea":re(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):m!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[mi]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(r(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=$e())),4&s&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),vl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(h=Jo=u;null!==Jo;){switch(p=(m=Jo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){s=m,n=m.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nc(s,n,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Jo=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&s&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var s=n;break e}n=n.return}throw Error(r(160))}switch(s.tag){case 5:var i=s.stateNode;32&s.flags&&(he(i,""),s.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=s.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(r(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Jo=e,bl(e,t,n)}function bl(e,t,n){for(var s=0!==(1&e.mode);null!==Jo;){var i=Jo,r=i.child;if(22===i.tag&&s){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Yo;var c=Qo;if(Yo=a,(Qo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?jl(i):null!==l?(l.return=a,Jo=l):jl(i);for(;null!==r;)Jo=r,bl(r,t,n),r=r.sibling;Jo=i,Yo=o,Qo=c}yl(e)}else 0!==(8772&i.subtreeFlags)&&null!==r?(r.return=i,Jo=r):yl(e)}}function yl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qo)if(null===n)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ur(t,a,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ur(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(r(163))}Qo||512&t.flags&&il(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function jl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var i=t.return;try{s.componentDidMount()}catch(l){Nc(t,i,l)}}var r=t.return;try{il(t)}catch(l){Nc(t,r,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Nc(t,a,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var _l,Nl=Math.ceil,kl=y.ReactCurrentDispatcher,Sl=y.ReactCurrentOwner,Cl=y.ReactCurrentBatchConfig,Al=0,El=null,Tl=null,Pl=0,Ml=0,Ll=Ni(0),Rl=0,Ol=null,Dl=0,Il=0,Fl=0,zl=null,Bl=null,Wl=0,Hl=1/0,Ul=null,Vl=!1,Gl=null,ql=null,Kl=!1,Xl=null,Yl=0,Ql=0,$l=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Al)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==fr.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,s){if(50<Ql)throw Ql=0,$l=null,Error(r(185));vt(e,n,s),0!==(2&Al)&&e===El||(e===El&&(0===(2&Al)&&(Il|=n),4===Rl&&oc(e,Pl)),sc(e,s),1===n&&0===Al&&0===(1&t.mode)&&(Hl=$e()+500,zi&&Hi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var a=31-at(r),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&s)||(i[a]=mt(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var s=ht(e,e===El?Pl:0);if(0===s)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zi=!0,Wi(e)}(lc.bind(null,e)):Wi(lc.bind(null,e)),ai(function(){0===(6&Al)&&Hi()}),n=null;else{switch(yt(s)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Al))throw Error(r(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=ht(e,e===El?Pl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var i=Al;Al|=2;var a=pc();for(El===e&&Pl===t||(Ul=null,Hl=$e()+500,hc(e,t));;)try{xc();break}catch(l){mc(e,l)}Sr(),kl.current=a,Al=i,null!==Tl?t=0:(El=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(s=i,t=rc(e,i))),1===t)throw n=Ol,hc(e,0),oc(e,s),sc(e,$e()),n;if(6===t)oc(e,s);else{if(i=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!os(r(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,s))&&(0!==(a=pt(e))&&(s=a,t=rc(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,s),sc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,Bl,Ul);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=si(wc.bind(null,e,Bl,Ul),t);break}wc(e,Bl,Ul);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-at(s);a=1<<o,(o=t[o])>i&&(i=o),s&=~a}if(s=i,10<(s=(120>(s=$e()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nl(s/1960))-s)){e.timeoutHandle=si(wc.bind(null,e,Bl,Ul),s);break}wc(e,Bl,Ul);break;default:throw Error(r(329))}}}return sc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function rc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&Al))throw Error(r(327));jc();var t=ht(e,0);if(0===(1&t))return sc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var s=pt(e);0!==s&&(t=s,n=rc(e,s))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),sc(e,$e()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Ul),sc(e,$e()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Hl=$e()+500,zi&&Hi())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var n=Cl.transition,s=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=s,Cl.transition=n,0===(6&(Al=t))&&Hi()}}function uc(){Ml=Ll.current,ki(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tl)for(n=Tl.return;null!==n;){var s=n;switch(tr(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Li();break;case 3:Qr(),ki(Ei),ki(Ai),na();break;case 5:Jr(s);break;case 4:Qr();break;case 13:case 19:ki(Zr);break;case 10:Cr(s.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Tl=e=Lc(e.current,null),Pl=Ml=t,Rl=0,Ol=null,Fl=Il=Dl=0,Bl=zl=null,null!==Pr){for(t=0;t<Pr.length;t++)if(null!==(s=(n=Pr[t]).interleaved)){n.interleaved=null;var i=s.next,r=n.pending;if(null!==r){var a=r.next;r.next=i,s.next=a}n.pending=s}Pr=null}return e}function mc(e,t){for(;;){var n=Tl;try{if(Sr(),sa.current=$a,ca){for(var s=aa.memoizedState;null!==s;){var i=s.queue;null!==i&&(i.pending=null),s=s.next}ca=!1}if(ra=0,la=oa=aa=null,da=!1,ua=0,Sl.current=null,null===n||null===n.return){Rl=1,Ol=t,Tl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&fo(a,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(r(426))}else if(ir&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),pr(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Wr(a,mo(0,c,t));break e;case 1:l=c;var x=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Wr(a,po(a,l,t));break e}}a=a.return}while(null!==a)}yc(n)}catch(y){t=y,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=$a,null===e?$a:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===El||0===(268435455&Dl)&&0===(268435455&Il)||oc(El,Pl)}function gc(e,t){var n=Al;Al|=2;var s=pc();for(El===e&&Pl===t||(Ul=null,hc(e,t));;)try{vc();break}catch(i){mc(e,i)}if(Sr(),Al=n,kl.current=s,null!==Tl)throw Error(r(261));return El=null,Pl=0,Rl}function vc(){for(;null!==Tl;)bc(Tl)}function xc(){for(;null!==Tl&&!Ye();)bc(Tl)}function bc(e){var t=_l(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?yc(e):Tl=t,Sl.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Ml)))return void(Tl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Rl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var s=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,s){do{jc()}while(null!==Xl);if(0!==(6&Al))throw Error(r(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),r=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~r}}(e,a),e===El&&(Tl=El=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ec(tt,function(){return jc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(ei=Vt,ms(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===i&&(l=o),m===a&&++u===s&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(r(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}f=tl,tl=!1}(e,n),gl(n,e),ps(ti),Vt=!!ei,ti=ei=null,e.current=n,xl(n,e,i),Qe(),Al=l,bt=o,Cl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=i),a=e.pendingLanes,0===a&&(ql=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,$e()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&jc(),a=e.pendingLanes,0!==(1&a)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Hi()}(e,t,n,s)}finally{Cl.transition=i,bt=s}return null}function jc(){if(null!==Xl){var e=yt(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Xl)var s=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Al))throw Error(r(331));var i=Al;for(Al|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Jo=h;else for(;null!==Jo;){var m=(u=Jo).sibling,p=u.return;if(rl(u),u===d){Jo=null;break}if(null!==m){m.return=p,Jo=m;break}Jo=p}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Jo=x;break e}Jo=a.return}}var b=e.current;for(Jo=b;null!==Jo;){var y=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Jo=y;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Al=i,Hi(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(it,e)}catch(j){}s=!0}return s}finally{bt=n,Cl.transition=t}}return!1}function _c(e,t,n){e=zr(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),sc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===ql||!ql.has(s))){t=zr(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>$e()-Wl?hc(e,0):Fl|=n),sc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Rr(e,t))&&(vt(e,t,n),sc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(r(314))}null!==s&&s.delete(t),Sc(e,n)}function Ec(e,t){return Ke(e,t)}function Tc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,s){return new Tc(e,t,n,s)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,s,i,a){var o=2;if(s=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Oc(n.children,i,a,t);case N:o=8,i|=8;break;case k:return(e=Pc(12,n,t,2|i)).elementType=k,e.lanes=a,e;case E:return(e=Pc(13,n,t,i)).elementType=E,e.lanes=a,e;case T:return(e=Pc(19,n,t,i)).elementType=T,e.lanes=a,e;case L:return Dc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case A:o=11;break e;case P:o=14;break e;case M:o=16,s=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=s,t.lanes=a,t}function Oc(e,t,n,s){return(e=Pc(7,e,s,t)).lanes=n,e}function Dc(e,t,n,s){return(e=Pc(22,e,s,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,s,i,r,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Pc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dr(r),e}function Wc(e){if(!e)return Ci;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Oi(e,n,t)}return t}function Hc(e,t,n,s,i,r,a,o,l){return(e=Bc(n,s,!0,e,0,r,0,o,l)).context=Wc(null),n=e.current,(r=Fr(s=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zr(n,r,i),e.current.lanes=i,vt(e,i,s),sc(e,s),e}function Uc(e,t,n,s){var i=t.current,r=ec(),a=tc(i);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fr(r,a)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=zr(i,t,a))&&(nc(e,i,a,r),Br(e,i,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),mr();break;case 5:$r(t);break;case 1:Mi(t.type)&&Di(t);break;case 4:Yr(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Si(jr,s._currentValue),s._currentValue=i;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Si(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(Si(Zr,1&Zr.current),null!==(e=Vo(e,t,n))?e.sibling:null);Si(Zr,1&Zr.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Ho(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Zr,Zr.current),s)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Vo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ir&&0!==(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Uo(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Er(t,n),i=fa(null,t,s,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(s)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Dr(t),i.updater=so,t.stateNode=i,i._reactInternals=t,oo(t,s,e,n),t=Ao(null,t,s,!0,a,n)):(t.tag=0,ir&&a&&er(t),yo(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,s=(i=s._init)(s._payload),t.type=s,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(s),e=to(s,e),i){case 0:t=So(null,t,s,e,n);break e;case 1:t=Co(null,t,s,e,n);break e;case 11:t=wo(null,t,s,e,n);break e;case 14:t=jo(null,t,s,to(s.type,e),n);break e}throw Error(r(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,So(e,t,s,i=t.elementType===s?i:to(s,i),n);case 1:return s=t.type,i=t.pendingProps,Co(e,t,s,i=t.elementType===s?i:to(s,i),n);case 3:e:{if(Eo(t),null===e)throw Error(r(387));s=t.pendingProps,i=(a=t.memoizedState).element,Ir(e,t),Hr(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=To(e,t,s,n,i=lo(Error(r(423)),t));break e}if(s!==i){t=To(e,t,s,n,i=lo(Error(r(424)),t));break e}for(sr=ci(t.stateNode.containerInfo.firstChild),nr=t,ir=!0,rr=null,n=wr(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mr(),s===i){t=Vo(e,t,n);break e}yo(e,t,s,n)}t=t.child}return t;case 5:return $r(t),null===e&&cr(t),s=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(s,i)?o=null:null!==a&&ni(s,a)&&(t.flags|=32),ko(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Io(e,t,n);case 4:return Yr(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=yr(t,null,s,n):yo(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,wo(e,t,s,i=t.elementType===s?i:to(s,i),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Si(jr,s._currentValue),s._currentValue=o,null!==a)if(os(a.value,o)){if(a.children===i.children&&!Ei.current){t=Vo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===a.tag){(c=Fr(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ar(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ar(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}yo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Er(t,n),s=s(i=Tr(i)),t.flags|=1,yo(e,t,s,n),t.child;case 14:return i=to(s=t.type,t.pendingProps),jo(e,t,s,i=to(s.type,i),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:to(s,i),Uo(e,t),t.tag=1,Mi(s)?(e=!0,Di(t)):e=!1,Er(t,n),ro(t,s,i),oo(t,s,i,n),Ao(null,t,s,!0,e,n);case 19:return Ho(e,t,n);case 22:return No(e,t,n)}throw Error(r(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,s,i){var r=n._reactRootContainer;if(r){var a=r;if("function"===typeof i){var o=i;i=function(){var e=Vc(a);o.call(e)}}Uc(t,a,e,i)}else a=function(e,t,n,s,i){if(i){if("function"===typeof s){var r=s;s=function(){var e=Vc(a);r.call(e)}}var a=Hc(t,s,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Hs(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof s){var o=s;s=function(){var e=Vc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Hs(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,l,n,s)}),l}(n,t,e,i,s);return Vc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Uc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),sc(t,$e()),0===(6&Al)&&(Hl=$e()+500,Hi()))}break;case 13:dc(function(){var t=Rr(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},jt=function(e){if(13===e.tag){var t=Rr(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Rr(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Nt=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=wi(s);if(!i)throw Error(r(90));K(s),J(s,i)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[bi,yi,wi,Se,Ce,cc]},td={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{it=sd.inject(nd),rt=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(r(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(r(299));var n=!1,s="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,s,i),e[pi]=t.current,Hs(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(r(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(r(405));var s=null!=n&&n.hydratedSources||null,i=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Hs(e),s)for(e=0;e<s.length;e++)i=(i=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(r(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(r(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!$c(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,n)=>{var s=n(738).default,i=n(45);e.exports=function(e){var t=i(e,"string");return"symbol"==s(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},740:e=>{"use strict";e.exports=function(e,t,n,s,i,r,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,s,i,r,a,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},885:function(e,t,n){var s=n(897).default;e.exports=function(){"use strict";const e=new Map,t={set(t,n,s){e.has(t)||e.set(t,new Map);const i=e.get(t);i.has(n)||0===i.size?i.set(n,s):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(i.keys())[0],"."))},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;const s=e.get(t);s.delete(n),0===s.size&&e.delete(t)}},n="transitionend",i=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>"#".concat(CSS.escape(t)))),e),r=e=>{e.dispatchEvent(new Event(n))},a=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>a(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(i(e)):null,l=e=>{if(!a(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),d=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null},u=()=>{},h=e=>{e.offsetHeight},m=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,p=[],f=()=>"rtl"===document.documentElement.dir,g=e=>{var t;t=()=>{const t=m();if(t){const n=e.NAME,s=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=s,e.jQueryInterface)}},"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of p)e()}),p.push(t)):t()},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?e.call(...t):n},x=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void v(e);const s=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const s=Number.parseFloat(t),i=Number.parseFloat(n);return s||i?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let i=!1;const a=s=>{let{target:r}=s;r===t&&(i=!0,t.removeEventListener(n,a),v(e))};t.addEventListener(n,a),setTimeout(()=>{i||r(t)},s)},b=(e,t,n,s)=>{const i=e.length;let r=e.indexOf(t);return-1===r?!n&&s?e[i-1]:e[0]:(r+=n?1:-1,s&&(r=(r+i)%i),e[Math.max(0,Math.min(r,i-1))])},y=/[^.]*(?=\..*)\.|.*/,w=/\..*/,j=/::\d+$/,_={};let N=1;const k={mouseenter:"mouseover",mouseleave:"mouseout"},S=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function C(e,t){return t&&"".concat(t,"::").concat(N++)||e.uidEvent||N++}function A(e){const t=C(e);return e.uidEvent=t,_[t]=_[t]||{},_[t]}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===n)}function T(e,t,n){const s="string"==typeof t,i=s?n:t||n;let r=R(e);return S.has(r)||(r=e),[s,i,r]}function P(e,t,n,s,i){if("string"!=typeof t||!e)return;let[r,a,o]=T(t,n,s);if(t in k){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};a=e(a)}const l=A(e),c=l[o]||(l[o]={}),d=E(c,a,r?n:null);if(d)return void(d.oneOff=d.oneOff&&i);const u=C(a,t.replace(y,"")),h=r?function(e,t,n){return function s(i){const r=e.querySelectorAll(t);for(let{target:a}=i;a&&a!==this;a=a.parentNode)for(const o of r)if(o===a)return D(i,{delegateTarget:a}),s.oneOff&&O.off(e,i.type,t,n),n.apply(a,[i])}}(e,n,a):function(e,t){return function n(s){return D(s,{delegateTarget:e}),n.oneOff&&O.off(e,s.type,t),t.apply(e,[s])}}(e,a);h.delegationSelector=r?n:null,h.callable=a,h.oneOff=i,h.uidEvent=u,c[u]=h,e.addEventListener(o,h,r)}function M(e,t,n,s,i){const r=E(t[n],s,i);r&&(e.removeEventListener(n,r,Boolean(i)),delete t[n][r.uidEvent])}function L(e,t,n,s){const i=t[n]||{};for(const[r,a]of Object.entries(i))r.includes(s)&&M(e,t,n,a.callable,a.delegationSelector)}function R(e){return e=e.replace(w,""),k[e]||e}const O={on(e,t,n,s){P(e,t,n,s,!1)},one(e,t,n,s){P(e,t,n,s,!0)},off(e,t,n,s){if("string"!=typeof t||!e)return;const[i,r,a]=T(t,n,s),o=a!==t,l=A(e),c=l[a]||{},d=t.startsWith(".");if(void 0===r){if(d)for(const n of Object.keys(l))L(e,l,n,t.slice(1));for(const[n,s]of Object.entries(c)){const i=n.replace(j,"");o&&!t.includes(i)||M(e,l,a,s.callable,s.delegationSelector)}}else{if(!Object.keys(c).length)return;M(e,l,a,r,i?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const s=m();let i=null,r=!0,a=!0,o=!1;t!==R(t)&&s&&(i=s.Event(t,n),s(e).trigger(i),r=!i.isPropagationStopped(),a=!i.isImmediatePropagationStopped(),o=i.isDefaultPrevented());const l=D(new Event(t,{bubbles:r,cancelable:!0}),n);return o&&l.preventDefault(),a&&e.dispatchEvent(l),l.defaultPrevented&&i&&i.preventDefault(),l}};function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[n,s]of Object.entries(t))try{e[n]=s}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>s})}return e}function I(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function F(e){return e.replace(/[A-Z]/g,e=>"-".concat(e.toLowerCase()))}const z={setDataAttribute(e,t,n){e.setAttribute("data-bs-".concat(F(t)),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-".concat(F(t)))},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const s of n){let n=s.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1),t[n]=I(e.dataset[s])}return t},getDataAttribute:(e,t)=>I(e.getAttribute("data-bs-".concat(F(t))))};class B{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=a(t)?z.getDataAttribute(t,"config"):{};return s(s(s(s({},this.constructor.Default),"object"==typeof n?n:{}),a(t)?z.getDataAttributes(t):{}),"object"==typeof e?e:{})}_typeCheckConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[s,i]of Object.entries(t)){const t=e[s],r=a(t)?"element":null==(n=t)?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(r))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(s,'" provided type "').concat(r,'" but expected type "').concat(i,'".'))}var n}}class W extends B{constructor(e,n){super(),(e=o(e))&&(this._element=e,this._config=this._getConfig(n),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),O.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t){x(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(o(e),this.DATA_KEY)}static getOrCreateInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(e){return"".concat(e).concat(this.EVENT_KEY)}}const H=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map(e=>i(e)).join(","):null},U={find:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const n=[];let s=e.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>"".concat(e,':not([tabindex^="-"])')).join(",");return this.find(t,e).filter(e=>!c(e)&&l(e))},getSelectorFromElement(e){const t=H(e);return t&&U.findOne(t)?t:null},getElementFromSelector(e){const t=H(e);return t?U.findOne(t):null},getMultipleElementsFromSelector(e){const t=H(e);return t?U.find(t):[]}},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(e.EVENT_KEY),s=e.NAME;O.on(document,n,'[data-bs-dismiss="'.concat(s,'"]'),function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const i=U.getElementFromSelector(this)||this.closest(".".concat(s));e.getOrCreateInstance(i)[t]()})},G=".bs.alert",q="close".concat(G),K="closed".concat(G);class X extends W{static get NAME(){return"alert"}close(){if(O.trigger(this._element,q).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),O.trigger(this._element,K),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=X.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}})}}V(X,"close"),g(X);const Y='[data-bs-toggle="button"]';class Q extends W{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Q.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}O.on(document,"click.bs.button.data-api",Y,e=>{e.preventDefault();const t=e.target.closest(Y);Q.getOrCreateInstance(t).toggle()}),g(Q);const $=".bs.swipe",J="touchstart".concat($),Z="touchmove".concat($),ee="touchend".concat($),te="pointerdown".concat($),ne="pointerup".concat($),se={endCallback:null,leftCallback:null,rightCallback:null},ie={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class re extends B{constructor(e,t){super(),this._element=e,e&&re.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return se}static get DefaultType(){return ie}static get NAME(){return"swipe"}dispose(){O.off(this._element,$)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),v(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&v(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(O.on(this._element,te,e=>this._start(e)),O.on(this._element,ne,e=>this._end(e)),this._element.classList.add("pointer-event")):(O.on(this._element,J,e=>this._start(e)),O.on(this._element,Z,e=>this._move(e)),O.on(this._element,ee,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ae=".bs.carousel",oe=".data-api",le="ArrowLeft",ce="ArrowRight",de="next",ue="prev",he="left",me="right",pe="slide".concat(ae),fe="slid".concat(ae),ge="keydown".concat(ae),ve="mouseenter".concat(ae),xe="mouseleave".concat(ae),be="dragstart".concat(ae),ye="load".concat(ae).concat(oe),we="click".concat(ae).concat(oe),je="carousel",_e="active",Ne=".active",ke=".carousel-item",Se=Ne+ke,Ce={[le]:me,[ce]:he},Ae={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ee={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Te extends W{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=U.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===je&&this.cycle()}static get Default(){return Ae}static get DefaultType(){return Ee}static get NAME(){return"carousel"}next(){this._slide(de)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(ue)}pause(){this._isSliding&&r(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?O.one(this._element,fe,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void O.one(this._element,fe,()=>this.to(e));const n=this._getItemIndex(this._getActive());if(n===e)return;const s=e>n?de:ue;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&O.on(this._element,ge,e=>this._keydown(e)),"hover"===this._config.pause&&(O.on(this._element,ve,()=>this.pause()),O.on(this._element,xe,()=>this._maybeEnableCycle())),this._config.touch&&re.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of U.find(".carousel-item img",this._element))O.on(t,be,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(he)),rightCallback:()=>this._slide(this._directionToOrder(me)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new re(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Ce[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=U.findOne(Ne,this._indicatorsElement);t.classList.remove(_e),t.removeAttribute("aria-current");const n=U.findOne('[data-bs-slide-to="'.concat(e,'"]'),this._indicatorsElement);n&&(n.classList.add(_e),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),s=e===de,i=t||b(this._getItems(),n,s,this._config.wrap);if(i===n)return;const r=this._getItemIndex(i),a=t=>O.trigger(this._element,t,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:r});if(a(pe).defaultPrevented)return;if(!n||!i)return;const o=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=i;const l=s?"carousel-item-start":"carousel-item-end",c=s?"carousel-item-next":"carousel-item-prev";i.classList.add(c),h(i),n.classList.add(l),i.classList.add(l),this._queueCallback(()=>{i.classList.remove(l,c),i.classList.add(_e),n.classList.remove(_e,c,l),this._isSliding=!1,a(fe)},n,this._isAnimated()),o&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return U.findOne(Se,this._element)}_getItems(){return U.find(ke,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===he?ue:de:e===he?de:ue}_orderToDirection(e){return f()?e===ue?he:me:e===ue?me:he}static jQueryInterface(e){return this.each(function(){const t=Te.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}else t.to(e)})}}O.on(document,we,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=U.getElementFromSelector(this);if(!t||!t.classList.contains(je))return;e.preventDefault();const n=Te.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(n.to(s),void n._maybeEnableCycle()):"next"===z.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())}),O.on(window,ye,()=>{const e=U.find('[data-bs-ride="carousel"]');for(const t of e)Te.getOrCreateInstance(t)}),g(Te);const Pe=".bs.collapse",Me="show".concat(Pe),Le="shown".concat(Pe),Re="hide".concat(Pe),Oe="hidden".concat(Pe),De="click".concat(Pe,".data-api"),Ie="show",Fe="collapse",ze="collapsing",Be=":scope .".concat(Fe," .").concat(Fe),We='[data-bs-toggle="collapse"]',He={parent:null,toggle:!0},Ue={parent:"(null|element)",toggle:"boolean"};class Ve extends W{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=U.find(We);for(const s of n){const e=U.getSelectorFromElement(s),t=U.find(e).filter(e=>e===this._element);null!==e&&t.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return He}static get DefaultType(){return Ue}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>Ve.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(O.trigger(this._element,Me).defaultPrevented)return;for(const s of e)s.hide();const t=this._getDimension();this._element.classList.remove(Fe),this._element.classList.add(ze),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n="scroll".concat(t[0].toUpperCase()+t.slice(1));this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(Fe,Ie),this._element.style[t]="",O.trigger(this._element,Le)},this._element,!0),this._element.style[t]="".concat(this._element[n],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(O.trigger(this._element,Re).defaultPrevented)return;const e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),h(this._element),this._element.classList.add(ze),this._element.classList.remove(Fe,Ie);for(const t of this._triggerArray){const e=U.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(Fe),O.trigger(this._element,Oe)},this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(Ie)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=o(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(We);for(const t of e){const e=U.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=U.find(Be,this._config.parent);return U.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const n=Ve.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e]()}})}}O.on(document,De,We,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of U.getMultipleElementsFromSelector(this))Ve.getOrCreateInstance(t,{toggle:!1}).toggle()}),g(Ve);var Ge="top",qe="bottom",Ke="right",Xe="left",Ye="auto",Qe=[Ge,qe,Ke,Xe],$e="start",Je="end",Ze="clippingParents",et="viewport",tt="popper",nt="reference",st=Qe.reduce(function(e,t){return e.concat([t+"-"+$e,t+"-"+Je])},[]),it=[].concat(Qe,[Ye]).reduce(function(e,t){return e.concat([t,t+"-"+$e,t+"-"+Je])},[]),rt="beforeRead",at="read",ot="afterRead",lt="beforeMain",ct="main",dt="afterMain",ut="beforeWrite",ht="write",mt="afterWrite",pt=[rt,at,ot,lt,ct,dt,ut,ht,mt];function ft(e){return e?(e.nodeName||"").toLowerCase():null}function gt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vt(e){return e instanceof gt(e).Element||e instanceof Element}function xt(e){return e instanceof gt(e).HTMLElement||e instanceof HTMLElement}function bt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof gt(e).ShadowRoot||e instanceof ShadowRoot)}const yt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},i=t.elements[e];xt(i)&&ft(i)&&(Object.assign(i.style,n),Object.keys(s).forEach(function(e){var t=s[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],i=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});xt(s)&&ft(s)&&(Object.assign(s.style,r),Object.keys(i).forEach(function(e){s.removeAttribute(e)}))})}},requires:["computeStyles"]};function wt(e){return e.split("-")[0]}var jt=Math.max,_t=Math.min,Nt=Math.round;function kt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function St(){return!/^((?!chrome|android).)*safari/i.test(kt())}function Ct(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),i=1,r=1;t&&xt(e)&&(i=e.offsetWidth>0&&Nt(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&Nt(s.height)/e.offsetHeight||1);var a=(vt(e)?gt(e):window).visualViewport,o=!St()&&n,l=(s.left+(o&&a?a.offsetLeft:0))/i,c=(s.top+(o&&a?a.offsetTop:0))/r,d=s.width/i,u=s.height/r;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function At(e){var t=Ct(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function Et(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&bt(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Tt(e){return gt(e).getComputedStyle(e)}function Pt(e){return["table","td","th"].indexOf(ft(e))>=0}function Mt(e){return((vt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lt(e){return"html"===ft(e)?e:e.assignedSlot||e.parentNode||(bt(e)?e.host:null)||Mt(e)}function Rt(e){return xt(e)&&"fixed"!==Tt(e).position?e.offsetParent:null}function Ot(e){for(var t=gt(e),n=Rt(e);n&&Pt(n)&&"static"===Tt(n).position;)n=Rt(n);return n&&("html"===ft(n)||"body"===ft(n)&&"static"===Tt(n).position)?t:n||function(e){var t=/firefox/i.test(kt());if(/Trident/i.test(kt())&&xt(e)&&"fixed"===Tt(e).position)return null;var n=Lt(e);for(bt(n)&&(n=n.host);xt(n)&&["html","body"].indexOf(ft(n))<0;){var s=Tt(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(e)||t}function Dt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function It(e,t,n){return jt(e,_t(t,n))}function Ft(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function zt(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}const Bt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,s=e.name,i=e.options,r=n.elements.arrow,a=n.modifiersData.popperOffsets,o=wt(n.placement),l=Dt(o),c=[Xe,Ke].indexOf(o)>=0?"height":"width";if(r&&a){var d=function(e,t){return Ft("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:zt(e,Qe))}(i.padding,n),u=At(r),h="y"===l?Ge:Xe,m="y"===l?qe:Ke,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],f=a[l]-n.rects.reference[l],g=Ot(r),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=p/2-f/2,b=d[h],y=v-u[c]-d[m],w=v/2-u[c]/2+x,j=It(b,w,y),_=l;n.modifiersData[s]=((t={})[_]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&Et(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Wt(e){return e.split("-")[1]}var Ht={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ut(e){var t,n=e.popper,s=e.popperRect,i=e.placement,r=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=a.x,m=void 0===h?0:h,p=a.y,f=void 0===p?0:p,g="function"==typeof d?d({x:m,y:f}):{x:m,y:f};m=g.x,f=g.y;var v=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),b=Xe,y=Ge,w=window;if(c){var j=Ot(n),_="clientHeight",N="clientWidth";j===gt(n)&&"static"!==Tt(j=Mt(n)).position&&"absolute"===o&&(_="scrollHeight",N="scrollWidth"),(i===Ge||(i===Xe||i===Ke)&&r===Je)&&(y=qe,f-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[_])-s.height,f*=l?1:-1),i!==Xe&&(i!==Ge&&i!==qe||r!==Je)||(b=Ke,m-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[N])-s.width,m*=l?1:-1)}var k,S=Object.assign({position:o},c&&Ht),C=!0===d?function(e,t){var n=e.x,s=e.y,i=t.devicePixelRatio||1;return{x:Nt(n*i)/i||0,y:Nt(s*i)/i||0}}({x:m,y:f},gt(n)):{x:m,y:f};return m=C.x,f=C.y,l?Object.assign({},S,((k={})[y]=x?"0":"",k[b]=v?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+f+"px)":"translate3d("+m+"px, "+f+"px, 0)",k)):Object.assign({},S,((t={})[y]=x?f+"px":"",t[b]=v?m+"px":"",t.transform="",t))}const Vt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,s=n.gpuAcceleration,i=void 0===s||s,r=n.adaptive,a=void 0===r||r,o=n.roundOffsets,l=void 0===o||o,c={placement:wt(t.placement),variation:Wt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ut(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ut(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Gt={passive:!0};const qt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,r=void 0===i||i,a=s.resize,o=void 0===a||a,l=gt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(e){e.addEventListener("scroll",n.update,Gt)}),o&&l.addEventListener("resize",n.update,Gt),function(){r&&c.forEach(function(e){e.removeEventListener("scroll",n.update,Gt)}),o&&l.removeEventListener("resize",n.update,Gt)}},data:{}};var Kt={left:"right",right:"left",bottom:"top",top:"bottom"};function Xt(e){return e.replace(/left|right|bottom|top/g,function(e){return Kt[e]})}var Yt={start:"end",end:"start"};function Qt(e){return e.replace(/start|end/g,function(e){return Yt[e]})}function $t(e){var t=gt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Jt(e){return Ct(Mt(e)).left+$t(e).scrollLeft}function Zt(e){var t=Tt(e),n=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function en(e){return["html","body","#document"].indexOf(ft(e))>=0?e.ownerDocument.body:xt(e)&&Zt(e)?e:en(Lt(e))}function tn(e,t){var n;void 0===t&&(t=[]);var s=en(e),i=s===(null==(n=e.ownerDocument)?void 0:n.body),r=gt(s),a=i?[r].concat(r.visualViewport||[],Zt(s)?s:[]):s,o=t.concat(a);return i?o:o.concat(tn(Lt(a)))}function nn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sn(e,t,n){return t===et?nn(function(e,t){var n=gt(e),s=Mt(e),i=n.visualViewport,r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(i){r=i.width,a=i.height;var c=St();(c||!c&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:r,height:a,x:o+Jt(e),y:l}}(e,n)):vt(t)?function(e,t){var n=Ct(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):nn(function(e){var t,n=Mt(e),s=$t(e),i=null==(t=e.ownerDocument)?void 0:t.body,r=jt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=jt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-s.scrollLeft+Jt(e),l=-s.scrollTop;return"rtl"===Tt(i||n).direction&&(o+=jt(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:a,x:o,y:l}}(Mt(e)))}function rn(e){var t,n=e.reference,s=e.element,i=e.placement,r=i?wt(i):null,a=i?Wt(i):null,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2;switch(r){case Ge:t={x:o,y:n.y-s.height};break;case qe:t={x:o,y:n.y+n.height};break;case Ke:t={x:n.x+n.width,y:l};break;case Xe:t={x:n.x-s.width,y:l};break;default:t={x:n.x,y:n.y}}var c=r?Dt(r):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case $e:t[c]=t[c]-(n[d]/2-s[d]/2);break;case Je:t[c]=t[c]+(n[d]/2-s[d]/2)}}return t}function an(e,t){void 0===t&&(t={});var n=t,s=n.placement,i=void 0===s?e.placement:s,r=n.strategy,a=void 0===r?e.strategy:r,o=n.boundary,l=void 0===o?Ze:o,c=n.rootBoundary,d=void 0===c?et:c,u=n.elementContext,h=void 0===u?tt:u,m=n.altBoundary,p=void 0!==m&&m,f=n.padding,g=void 0===f?0:f,v=Ft("number"!=typeof g?g:zt(g,Qe)),x=h===tt?nt:tt,b=e.rects.popper,y=e.elements[p?x:h],w=function(e,t,n,s){var i="clippingParents"===t?function(e){var t=tn(Lt(e)),n=["absolute","fixed"].indexOf(Tt(e).position)>=0&&xt(e)?Ot(e):e;return vt(n)?t.filter(function(e){return vt(e)&&Et(e,n)&&"body"!==ft(e)}):[]}(e):[].concat(t),r=[].concat(i,[n]),a=r[0],o=r.reduce(function(t,n){var i=sn(e,n,s);return t.top=jt(i.top,t.top),t.right=_t(i.right,t.right),t.bottom=_t(i.bottom,t.bottom),t.left=jt(i.left,t.left),t},sn(e,a,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(vt(y)?y:y.contextElement||Mt(e.elements.popper),l,d,a),j=Ct(e.elements.reference),_=rn({reference:j,element:b,placement:i}),N=nn(Object.assign({},b,_)),k=h===tt?N:j,S={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},C=e.modifiersData.offset;if(h===tt&&C){var A=C[i];Object.keys(S).forEach(function(e){var t=[Ke,qe].indexOf(e)>=0?1:-1,n=[Ge,qe].indexOf(e)>=0?"y":"x";S[e]+=A[n]*t})}return S}function on(e,t){void 0===t&&(t={});var n=t,s=n.placement,i=n.boundary,r=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?it:l,d=Wt(s),u=d?o?st:st.filter(function(e){return Wt(e)===d}):Qe,h=u.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=u);var m=h.reduce(function(t,n){return t[n]=an(e,{placement:n,boundary:i,rootBoundary:r,padding:a})[wt(n)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}const ln={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var i=n.mainAxis,r=void 0===i||i,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,p=void 0===m||m,f=n.allowedAutoPlacements,g=t.options.placement,v=wt(g),x=l||(v!==g&&p?function(e){if(wt(e)===Ye)return[];var t=Xt(e);return[Qt(e),t,Qt(t)]}(g):[Xt(g)]),b=[g].concat(x).reduce(function(e,n){return e.concat(wt(n)===Ye?on(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:f}):n)},[]),y=t.rects.reference,w=t.rects.popper,j=new Map,_=!0,N=b[0],k=0;k<b.length;k++){var S=b[k],C=wt(S),A=Wt(S)===$e,E=[Ge,qe].indexOf(C)>=0,T=E?"width":"height",P=an(t,{placement:S,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),M=E?A?Ke:Xe:A?qe:Ge;y[T]>w[T]&&(M=Xt(M));var L=Xt(M),R=[];if(r&&R.push(P[C]<=0),o&&R.push(P[M]<=0,P[L]<=0),R.every(function(e){return e})){N=S,_=!1;break}j.set(S,R)}if(_)for(var O=function(e){var t=b.find(function(t){var n=j.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return N=t,"break"},D=p?3:1;D>0&&"break"!==O(D);D--);t.placement!==N&&(t.modifiersData[s]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function cn(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function dn(e){return[Ge,Ke,qe,Xe].some(function(t){return e[t]>=0})}const un={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,s=t.rects.reference,i=t.rects.popper,r=t.modifiersData.preventOverflow,a=an(t,{elementContext:"reference"}),o=an(t,{altBoundary:!0}),l=cn(a,s),c=cn(o,i,r),d=dn(l),u=dn(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},hn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,s=e.name,i=n.offset,r=void 0===i?[0,0]:i,a=it.reduce(function(e,n){return e[n]=function(e,t,n){var s=wt(e),i=[Xe,Ge].indexOf(s)>=0?-1:1,r="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=r[0],o=r[1];return a=a||0,o=(o||0)*i,[Xe,Ke].indexOf(s)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,r),e},{}),o=a[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=a}},mn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=rn({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}},pn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name,i=n.mainAxis,r=void 0===i||i,a=n.altAxis,o=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,m=void 0===h||h,p=n.tetherOffset,f=void 0===p?0:p,g=an(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=wt(t.placement),x=Wt(t.placement),b=!x,y=Dt(v),w="x"===y?"y":"x",j=t.modifiersData.popperOffsets,_=t.rects.reference,N=t.rects.popper,k="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,S="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(j){if(r){var E,T="y"===y?Ge:Xe,P="y"===y?qe:Ke,M="y"===y?"height":"width",L=j[y],R=L+g[T],O=L-g[P],D=m?-N[M]/2:0,I=x===$e?_[M]:N[M],F=x===$e?-N[M]:-_[M],z=t.elements.arrow,B=m&&z?At(z):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=W[T],U=W[P],V=It(0,_[M],B[M]),G=b?_[M]/2-D-V-H-S.mainAxis:I-V-H-S.mainAxis,q=b?-_[M]/2+D+V+U+S.mainAxis:F+V+U+S.mainAxis,K=t.elements.arrow&&Ot(t.elements.arrow),X=K?"y"===y?K.clientTop||0:K.clientLeft||0:0,Y=null!=(E=null==C?void 0:C[y])?E:0,Q=L+q-Y,$=It(m?_t(R,L+G-Y-X):R,L,m?jt(O,Q):O);j[y]=$,A[y]=$-L}if(o){var J,Z="x"===y?Ge:Xe,ee="x"===y?qe:Ke,te=j[w],ne="y"===w?"height":"width",se=te+g[Z],ie=te-g[ee],re=-1!==[Ge,Xe].indexOf(v),ae=null!=(J=null==C?void 0:C[w])?J:0,oe=re?se:te-_[ne]-N[ne]-ae+S.altAxis,le=re?te+_[ne]+N[ne]-ae-S.altAxis:ie,ce=m&&re?function(e,t,n){var s=It(e,t,n);return s>n?n:s}(oe,te,le):It(m?oe:se,te,m?le:ie);j[w]=ce,A[w]=ce-te}t.modifiersData[s]=A}},requiresIfExists:["offset"]};function fn(e,t,n){void 0===n&&(n=!1);var s,i,r=xt(t),a=xt(t)&&function(e){var t=e.getBoundingClientRect(),n=Nt(t.width)/e.offsetWidth||1,s=Nt(t.height)/e.offsetHeight||1;return 1!==n||1!==s}(t),o=Mt(t),l=Ct(e,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&(("body"!==ft(t)||Zt(o))&&(c=(s=t)!==gt(s)&&xt(s)?{scrollLeft:(i=s).scrollLeft,scrollTop:i.scrollTop}:$t(s)),xt(t)?((d=Ct(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=Jt(o))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function gn(e){var t=new Map,n=new Set,s=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var s=t.get(e);s&&i(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),s}var vn={placement:"bottom",modifiers:[],strategy:"absolute"};function xn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function bn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,s=void 0===n?[]:n,i=t.defaultOptions,r=void 0===i?vn:i;return function(e,t,n){void 0===n&&(n=r);var i,a,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},vn,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:o,setOptions:function(n){var i="function"==typeof n?n(o.options):n;u(),o.options=Object.assign({},r,o.options,i),o.scrollParents={reference:vt(e)?tn(e):e.contextElement?tn(e.contextElement):[],popper:tn(t)};var a,c,h=function(e){var t=gn(e);return pt.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((a=[].concat(s,o.options.modifiers),c=a.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return o.orderedModifiers=h.filter(function(e){return e.enabled}),o.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,s=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var r=i({state:o,name:t,instance:d,options:s});l.push(r||function(){})}}),d.update()},forceUpdate:function(){if(!c){var e=o.elements,t=e.reference,n=e.popper;if(xn(t,n)){o.rects={reference:fn(t,Ot(n),"fixed"===o.options.strategy),popper:At(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(e){return o.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<o.orderedModifiers.length;s++)if(!0!==o.reset){var i=o.orderedModifiers[s],r=i.fn,a=i.options,l=void 0===a?{}:a,u=i.name;"function"==typeof r&&(o=r({state:o,options:l,name:u,instance:d})||o)}else o.reset=!1,s=-1}}},update:(i=function(){return new Promise(function(e){d.forceUpdate(),e(o)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}),destroy:function(){u(),c=!0}};if(!xn(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}var yn=bn(),wn=bn({defaultModifiers:[qt,mn,Vt,yt]}),jn=bn({defaultModifiers:[qt,mn,Vt,yt,hn,ln,pn,Bt,un]});const _n=Object.freeze(Object.defineProperty({__proto__:null,afterMain:dt,afterRead:ot,afterWrite:mt,applyStyles:yt,arrow:Bt,auto:Ye,basePlacements:Qe,beforeMain:lt,beforeRead:rt,beforeWrite:ut,bottom:qe,clippingParents:Ze,computeStyles:Vt,createPopper:jn,createPopperBase:yn,createPopperLite:wn,detectOverflow:an,end:Je,eventListeners:qt,flip:ln,hide:un,left:Xe,main:ct,modifierPhases:pt,offset:hn,placements:it,popper:tt,popperGenerator:bn,popperOffsets:mn,preventOverflow:pn,read:at,reference:nt,right:Ke,start:$e,top:Ge,variationPlacements:st,viewport:et,write:ht},Symbol.toStringTag,{value:"Module"})),Nn="dropdown",kn=".bs.dropdown",Sn=".data-api",Cn="ArrowUp",An="ArrowDown",En="hide".concat(kn),Tn="hidden".concat(kn),Pn="show".concat(kn),Mn="shown".concat(kn),Ln="click".concat(kn).concat(Sn),Rn="keydown".concat(kn).concat(Sn),On="keyup".concat(kn).concat(Sn),Dn="show",In='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fn="".concat(In,".").concat(Dn),zn=".dropdown-menu",Bn=f()?"top-end":"top-start",Wn=f()?"top-start":"top-end",Hn=f()?"bottom-end":"bottom-start",Un=f()?"bottom-start":"bottom-end",Vn=f()?"left-start":"right-start",Gn=f()?"right-start":"left-start",qn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Kn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Xn extends W{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=U.next(this._element,zn)[0]||U.prev(this._element,zn)[0]||U.findOne(zn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qn}static get DefaultType(){return Kn}static get NAME(){return Nn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!O.trigger(this._element,Pn,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))O.on(e,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Dn),this._element.classList.add(Dn),O.trigger(this._element,Mn,e)}}hide(){if(c(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!O.trigger(this._element,En,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))O.off(e,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(Dn),this._element.classList.remove(Dn),this._element.setAttribute("aria-expanded","false"),z.removeDataAttribute(this._menu,"popper"),O.trigger(this._element,Tn,e),this._element.focus()}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!a(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(Nn.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_createPopper(){if(void 0===_n)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;"parent"===this._config.reference?e=this._parent:a(this._config.reference)?e=o(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=jn(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Dn)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vn;if(e.classList.contains("dropstart"))return Gn;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Wn:Bn:t?Un:Hn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(z.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),s(s({},e),v(this._config.popperConfig,[void 0,e]))}_selectMenuItem(e){let{key:t,target:n}=e;const s=U.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>l(e));s.length&&b(s,n,t===An,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const t=Xn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=U.find(Fn);for(const n of t){const t=Xn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),i=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!i||"outside"===t._config.autoClose&&i)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const r={relatedTarget:t._element};"click"===e.type&&(r.clickEvent=e),t._completeHide(r)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,s=[Cn,An].includes(e.key);if(!s&&!n)return;if(t&&!n)return;e.preventDefault();const i=this.matches(In)?this:U.prev(this,In)[0]||U.next(this,In)[0]||U.findOne(In,e.delegateTarget.parentNode),r=Xn.getOrCreateInstance(i);if(s)return e.stopPropagation(),r.show(),void r._selectMenuItem(e);r._isShown()&&(e.stopPropagation(),r.hide(),i.focus())}}O.on(document,Rn,In,Xn.dataApiKeydownHandler),O.on(document,Rn,zn,Xn.dataApiKeydownHandler),O.on(document,Ln,Xn.clearMenus),O.on(document,On,Xn.clearMenus),O.on(document,Ln,In,function(e){e.preventDefault(),Xn.getOrCreateInstance(this).toggle()}),g(Xn);const Yn="backdrop",Qn="show",$n="mousedown.bs.".concat(Yn),Jn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Zn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class es extends B{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Jn}static get DefaultType(){return Zn}static get NAME(){return Yn}show(e){if(!this._config.isVisible)return void v(e);this._append();const t=this._getElement();this._config.isAnimated&&h(t),t.classList.add(Qn),this._emulateAnimation(()=>{v(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Qn),this._emulateAnimation(()=>{this.dispose(),v(e)})):v(e)}dispose(){this._isAppended&&(O.off(this._element,$n),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=o(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),O.on(e,$n,()=>{v(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){x(e,this._getElement(),this._config.isAnimated)}}const ts=".bs.focustrap",ns="focusin".concat(ts),ss="keydown.tab".concat(ts),is="backward",rs={autofocus:!0,trapElement:null},as={autofocus:"boolean",trapElement:"element"};class os extends B{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return rs}static get DefaultType(){return as}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),O.off(document,ts),O.on(document,ns,e=>this._handleFocusin(e)),O.on(document,ss,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,O.off(document,ts))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=U.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===is?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?is:"forward")}}const ls=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cs=".sticky-top",ds="padding-right",us="margin-right";class hs{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ds,t=>t+e),this._setElementAttributes(ls,ds,t=>t+e),this._setElementAttributes(cs,us,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ds),this._resetElementAttributes(ls,ds),this._resetElementAttributes(cs,us)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const s=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,"".concat(n(Number.parseFloat(i)),"px"))})}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&z.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const n=z.getDataAttribute(e,t);null!==n?(z.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(a(e))t(e);else for(const n of U.find(e,this._element))t(n)}}const ms=".bs.modal",ps="hide".concat(ms),fs="hidePrevented".concat(ms),gs="hidden".concat(ms),vs="show".concat(ms),xs="shown".concat(ms),bs="resize".concat(ms),ys="click.dismiss".concat(ms),ws="mousedown.dismiss".concat(ms),js="keydown.dismiss".concat(ms),_s="click".concat(ms,".data-api"),Ns="modal-open",ks="show",Ss="modal-static",Cs={backdrop:!0,focus:!0,keyboard:!0},As={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Es extends W{constructor(e,t){super(e,t),this._dialog=U.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new hs,this._addEventListeners()}static get Default(){return Cs}static get DefaultType(){return As}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||O.trigger(this._element,vs,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ns),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(O.trigger(this._element,ps).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ks),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){O.off(window,ms),O.off(this._dialog,ms),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new es({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new os({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=U.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),h(this._element),this._element.classList.add(ks),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,O.trigger(this._element,xs,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){O.on(this._element,js,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),O.on(window,bs,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),O.on(this._element,ws,e=>{O.one(this._element,ys,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ns),this._resetAdjustments(),this._scrollBar.reset(),O.trigger(this._element,gs)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(O.trigger(this._element,fs).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Ss)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Ss),this._queueCallback(()=>{this._element.classList.remove(Ss),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]="".concat(t,"px")}if(!n&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]="".concat(t,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const n=Es.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}})}}O.on(document,_s,'[data-bs-toggle="modal"]',function(e){const t=U.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),O.one(t,vs,e=>{e.defaultPrevented||O.one(t,gs,()=>{l(this)&&this.focus()})});const n=U.findOne(".modal.show");n&&Es.getInstance(n).hide(),Es.getOrCreateInstance(t).toggle(this)}),V(Es),g(Es);const Ts=".bs.offcanvas",Ps=".data-api",Ms="load".concat(Ts).concat(Ps),Ls="show",Rs="showing",Os="hiding",Ds=".offcanvas.show",Is="show".concat(Ts),Fs="shown".concat(Ts),zs="hide".concat(Ts),Bs="hidePrevented".concat(Ts),Ws="hidden".concat(Ts),Hs="resize".concat(Ts),Us="click".concat(Ts).concat(Ps),Vs="keydown.dismiss".concat(Ts),Gs={backdrop:!0,keyboard:!0,scroll:!1},qs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ks extends W{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Gs}static get DefaultType(){return qs}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||O.trigger(this._element,Is,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new hs).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Rs),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ls),this._element.classList.remove(Rs),O.trigger(this._element,Fs,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(O.trigger(this._element,zs).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Os),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ls,Os),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new hs).reset(),O.trigger(this._element,Ws)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new es({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():O.trigger(this._element,Bs)}:null})}_initializeFocusTrap(){return new os({trapElement:this._element})}_addEventListeners(){O.on(this._element,Vs,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():O.trigger(this._element,Bs))})}static jQueryInterface(e){return this.each(function(){const t=Ks.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}})}}O.on(document,Us,'[data-bs-toggle="offcanvas"]',function(e){const t=U.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;O.one(t,Ws,()=>{l(this)&&this.focus()});const n=U.findOne(Ds);n&&n!==t&&Ks.getInstance(n).hide(),Ks.getOrCreateInstance(t).toggle(this)}),O.on(window,Ms,()=>{for(const e of U.find(Ds))Ks.getOrCreateInstance(e).show()}),O.on(window,Hs,()=>{for(const e of U.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ks.getOrCreateInstance(e).hide()}),V(Ks),g(Ks);const Xs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ys=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Qs=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,$s=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Ys.has(n)||Boolean(Qs.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(n))},Js={allowList:Xs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Zs={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ei={entry:"(string|element|function|null)",selector:"(string|element)"};class ti extends B{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Js}static get DefaultType(){return Zs}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content=s(s({},this._config.content),e),this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,i]of Object.entries(this._config.content))this._setContent(e,i,s);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},ei)}_setContent(e,t,n){const s=U.findOne(n,e);s&&((t=this._resolvePossibleFunction(t))?a(t)?this._putElementInTemplate(o(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),i=[].concat(...s.body.querySelectorAll("*"));for(const r of i){const e=r.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){r.remove();continue}const n=[].concat(...r.attributes),s=[].concat(t["*"]||[],t[e]||[]);for(const t of n)$s(t,s)||r.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return v(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const ni=new Set(["sanitize","allowList","sanitizeFn"]),si="fade",ii="show",ri=".tooltip-inner",ai=".modal",oi="hide.bs.modal",li="hover",ci="focus",di="click",ui={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},hi={allowList:Xs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},mi={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class pi extends W{constructor(e,t){if(void 0===_n)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return hi}static get DefaultType(){return mi}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),O.off(this._element.closest(ai),oi,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=O.trigger(this._element,this.constructor.eventName("show")),t=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(n),O.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ii),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))O.on(i,"mouseover",u);this._queueCallback(()=>{O.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!O.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ii),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))O.off(e,"mouseover",u);this._activeTrigger[di]=!1,this._activeTrigger[ci]=!1,this._activeTrigger[li]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),O.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(si,ii),t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(si),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new ti(s(s({},this._config),{},{content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{[ri]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(si)}_isShown(){return this.tip&&this.tip.classList.contains(ii)}_createPopper(e){const t=v(this._config.placement,[this,e,this._element]),n=ui[t.toUpperCase()];return jn(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return v(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return s(s({},t),v(this._config.popperConfig,[void 0,t]))}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)O.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[di]=!(t._isShown()&&t._activeTrigger[di]),t.toggle()});else if("manual"!==t){const e=t===li?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===li?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");O.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?ci:li]=!0,t._enter()}),O.on(this._element,n,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?ci:li]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},O.on(this._element.closest(ai),oi,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=z.getDataAttributes(this._element);for(const n of Object.keys(t))ni.has(n)&&delete t[n];return e=s(s({},t),"object"==typeof e&&e?e:{}),e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:o(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=pi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}g(pi);const fi=".popover-header",gi=".popover-body",vi=s(s({},pi.Default),{},{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),xi=s(s({},pi.DefaultType),{},{content:"(null|string|element|function)"});class bi extends pi{static get Default(){return vi}static get DefaultType(){return xi}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fi]:this._getTitle(),[gi]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=bi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}g(bi);const yi=".bs.scrollspy",wi="activate".concat(yi),ji="click".concat(yi),_i="load".concat(yi,".data-api"),Ni="active",ki="[href]",Si=".nav-link",Ci="".concat(Si,", .nav-item > ").concat(Si,", .list-group-item"),Ai={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ei={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ti extends W{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ai}static get DefaultType(){return Ei}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=o(e.target)||document.body,e.rootMargin=e.offset?"".concat(e.offset,"px 0px -30%"):e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(O.off(this._config.target,ji),O.on(this._config.target,ji,ki,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:s,behavior:"smooth"});n.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get("#".concat(e.target.id)),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,i=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const r of e){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(r));continue}const e=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&e){if(n(r),!s)return}else i||e||n(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=U.find(ki,this._config.target);for(const t of e){if(!t.hash||c(t))continue;const e=U.findOne(decodeURI(t.hash),this._element);l(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Ni),this._activateParents(e),O.trigger(this._element,wi,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))U.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(Ni);else for(const t of U.parents(e,".nav, .list-group"))for(const e of U.prev(t,Ci))e.classList.add(Ni)}_clearActiveClass(e){e.classList.remove(Ni);const t=U.find("".concat(ki,".").concat(Ni),e);for(const n of t)n.classList.remove(Ni)}static jQueryInterface(e){return this.each(function(){const t=Ti.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}O.on(window,_i,()=>{for(const e of U.find('[data-bs-spy="scroll"]'))Ti.getOrCreateInstance(e)}),g(Ti);const Pi=".bs.tab",Mi="hide".concat(Pi),Li="hidden".concat(Pi),Ri="show".concat(Pi),Oi="shown".concat(Pi),Di="click".concat(Pi),Ii="keydown".concat(Pi),Fi="load".concat(Pi),zi="ArrowLeft",Bi="ArrowRight",Wi="ArrowUp",Hi="ArrowDown",Ui="Home",Vi="End",Gi="active",qi="fade",Ki="show",Xi=".dropdown-toggle",Yi=":not(".concat(Xi,")"),Qi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',$i=".nav-link".concat(Yi,", .list-group-item").concat(Yi,', [role="tab"]').concat(Yi,", ").concat(Qi),Ji=".".concat(Gi,'[data-bs-toggle="tab"], .').concat(Gi,'[data-bs-toggle="pill"], .').concat(Gi,'[data-bs-toggle="list"]');class Zi extends W{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),O.on(this._element,Ii,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?O.trigger(t,Mi,{relatedTarget:e}):null;O.trigger(e,Ri,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Gi),this._activate(U.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),O.trigger(e,Oi,{relatedTarget:t})):e.classList.add(Ki)},e,e.classList.contains(qi)))}_deactivate(e,t){e&&(e.classList.remove(Gi),e.blur(),this._deactivate(U.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),O.trigger(e,Li,{relatedTarget:t})):e.classList.remove(Ki)},e,e.classList.contains(qi)))}_keydown(e){if(![zi,Bi,Wi,Hi,Ui,Vi].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!c(e));let n;if([Ui,Vi].includes(e.key))n=t[e.key===Ui?0:t.length-1];else{const s=[Bi,Hi].includes(e.key);n=b(t,e.target,s,!0)}n&&(n.focus({preventScroll:!0}),Zi.getOrCreateInstance(n).show())}_getChildren(){return U.find($i,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=U.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby","".concat(e.id)))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const s=(e,s)=>{const i=U.findOne(e,n);i&&i.classList.toggle(s,t)};s(Xi,Gi),s(".dropdown-menu",Ki),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Gi)}_getInnerElement(e){return e.matches($i)?e:U.findOne($i,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=Zi.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}})}}O.on(document,Di,Qi,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||Zi.getOrCreateInstance(this).show()}),O.on(window,Fi,()=>{for(const e of U.find(Ji))Zi.getOrCreateInstance(e)}),g(Zi);const er=".bs.toast",tr="mouseover".concat(er),nr="mouseout".concat(er),sr="focusin".concat(er),ir="focusout".concat(er),rr="hide".concat(er),ar="hidden".concat(er),or="show".concat(er),lr="shown".concat(er),cr="hide",dr="show",ur="showing",hr={animation:"boolean",autohide:"boolean",delay:"number"},mr={animation:!0,autohide:!0,delay:5e3};class pr extends W{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return mr}static get DefaultType(){return hr}static get NAME(){return"toast"}show(){O.trigger(this._element,or).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(cr),h(this._element),this._element.classList.add(dr,ur),this._queueCallback(()=>{this._element.classList.remove(ur),O.trigger(this._element,lr),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(O.trigger(this._element,rr).defaultPrevented||(this._element.classList.add(ur),this._queueCallback(()=>{this._element.classList.add(cr),this._element.classList.remove(ur,dr),O.trigger(this._element,ar)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(dr),super.dispose()}isShown(){return this._element.classList.contains(dr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){O.on(this._element,tr,e=>this._onInteraction(e,!0)),O.on(this._element,nr,e=>this._onInteraction(e,!1)),O.on(this._element,sr,e=>this._onInteraction(e,!0)),O.on(this._element,ir,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=pr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}})}}return V(pr),g(pr),{Alert:X,Button:Q,Carousel:Te,Collapse:Ve,Dropdown:Xn,Modal:Es,Offcanvas:Ks,Popover:bi,ScrollSpy:Ti,Tab:Zi,Toast:pr,Tooltip:pi}}()},897:(e,t,n)=>{var s=n(693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"===typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"===typeof s.then)return s}var r=Object.create(null);n.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&s;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>s[e]);return a.default=()=>s,n.d(r,a),r}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{dU:()=>kk,ng:()=>Dp,EA:()=>Pw,Tm:()=>d_,D6:()=>Hj,YE:()=>n_,rE:()=>U_});var t,s=n(43),i=n.t(s,2),r=n(391);n(885);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,s){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function p(e,n,s,i){void 0===i&&(i={});let{window:r=document.defaultView,v5Compat:c=!1}=i,m=r.history,p=t.Pop,f=null,g=v();function v(){return(m.state||{idx:null}).idx}function x(){p=t.Pop;let e=v(),n=null==e?null:e-g;g=e,f&&f({action:p,location:y.location,delta:n})}function b(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,m.replaceState(a({},m.state,{idx:g}),""));let y={get action(){return p},get location(){return e(r,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(o,x),f=e,()=>{r.removeEventListener(o,x),f=null}},createHref:e=>n(r,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=u(y.location,e,n);s&&s(i,e),g=v()+1;let a=d(i,g),o=y.createHref(i);try{m.pushState(a,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;r.location.assign(o)}c&&f&&f({action:p,location:y.location,delta:1})},replace:function(e,n){p=t.Replace;let i=u(y.location,e,n);s&&s(i,e),g=v();let r=d(i,g),a=y.createHref(i);m.replaceState(r,"",a),c&&f&&f({action:p,location:y.location,delta:0})},go:e=>m.go(e)};return y}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,s){let i=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let r=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let a=null;for(let o=0;null==a&&o<r.length;++o){let e=T(i);a=A(r[o],e,s)}return a}function x(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let i=(e,i,r)=>{let a={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(s),'Absolute route path "'+a.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(s.length));let o=D([s,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of b(e.path))i(e,t,s);else i(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===s.length)return i?[r,""]:[r];let a=b(s.join("/")),o=[];return o.push(...a.map(e=>""===e?r:[r,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,w=3,j=2,_=1,N=10,k=-2,S=e=>"*"===e;function C(e,t){let n=e.split("/"),s=n.length;return n.some(S)&&(s+=k),t&&(s+=j),n.filter(e=>!S(e)).reduce((e,t)=>e+(y.test(t)?w:""===t?_:N),s)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,i={},r="/",a=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===r?t:t.slice(r.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!s[s.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:D([r,d.pathname]),pathnameBase:I(D([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=D([r,d.pathnameBase]))}return a}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let r=new RegExp(i,t?void 0:"i");return[r,s]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((e,t,n)=>{let{paramName:s,isOptional:i}=t;if("*"===s){let e=o[n]||"";a=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[s]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:a,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function M(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function O(e,t,n,s){let i;void 0===s&&(s=!1),"string"===typeof e?i=m(e):(i=a({},e),l(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let r,o=""===e||""===i.pathname,c=o?"/":i.pathname;if(null==c)r=n;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:s="",hash:i=""}="string"===typeof e?m(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:F(s),hash:z(i)}}(i,r),u=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},U.apply(this,arguments)}const V=s.createContext(null);const G=s.createContext(null);const q=s.createContext(null);const K=s.createContext(null);const X=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=s.createContext(null);function Q(){return null!=s.useContext(K)}function $(){return Q()||l(!1),s.useContext(K).location}function J(e){s.useContext(q).static||s.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=s.useContext(X);return e?function(){let{router:e}=de(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=s.useRef(!1);J(()=>{n.current=!0});let i=s.useCallback(function(s,i){void 0===i&&(i={}),n.current&&("number"===typeof s?e.navigate(s):e.navigate(s,U({fromRouteId:t},i)))},[e,t]);return i}():function(){Q()||l(!1);let e=s.useContext(V),{basename:t,future:n,navigator:i}=s.useContext(q),{matches:r}=s.useContext(X),{pathname:a}=$(),o=JSON.stringify(R(r,n.v7_relativeSplatPath)),c=s.useRef(!1);J(()=>{c.current=!0});let d=s.useCallback(function(n,s){if(void 0===s&&(s={}),!c.current)return;if("number"===typeof n)return void i.go(n);let r=O(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:D([t,r.pathname])),(s.replace?i.replace:i.push)(r,s.state,s)},[t,i,o,a,e]);return d}()}const ee=s.createContext(null);function te(){return s.useContext(ee)}function ne(e,n,i,r){Q()||l(!1);let{navigator:a}=s.useContext(q),{matches:o}=s.useContext(X),c=o[o.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=$();if(n){var f;let e="string"===typeof n?m(n):n;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||l(!1),h=e}else h=p;let v=h.pathname||"/",x=v;if("/"!==u){let e=u.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=g(e,{pathname:x});let y=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:D([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,i,r);return n&&y?s.createElement(K.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function se(){let e=function(){var e;let t=s.useContext(Y),n=ue(ce.UseRouteError),i=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:r},n):null,null)}const ie=s.createElement(se,null);class re extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(X.Provider,{value:this.props.routeContext},s.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,r=s.useContext(V);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(X.Provider,{value:t},i)}function oe(e,t,n,i){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,c=null==(r=n)?void 0:r.errors;if(null!=c){let e=o.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:s}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||i){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,i,r)=>{let a,l=!1,h=null,m=null;var p;n&&(a=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||ie,d&&(u<0&&0===r?(p="route-fallback",!1||me[p]||(me[p]=!0),l=!0,m=null):u===r&&(l=!0,m=i.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,r+1)),g=()=>{let t;return t=a?h:l?m:i.route.Component?s.createElement(i.route.Component,null):i.route.element?i.route.element:e,s.createElement(ae,{match:i,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===r)?s.createElement(re,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=s.useContext(V);return t||l(!1),t}function ue(e){let t=s.useContext(G);return t||l(!1),t}function he(e){let t=function(){let e=s.useContext(X);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function fe(e){let{to:t,replace:n,state:i,relative:r}=e;Q()||l(!1);let{future:a,static:o}=s.useContext(q),{matches:c}=s.useContext(X),{pathname:d}=$(),u=Z(),h=O(t,R(c,a.v7_relativeSplatPath),d,"path"===r),m=JSON.stringify(h);return s.useEffect(()=>u(JSON.parse(m),{replace:n,state:i,relative:r}),[u,m,r,n,i]),null}function ge(e){return function(e){let t=s.useContext(X).outlet;return t?s.createElement(ee.Provider,{value:e},t):t}(e.context)}function ve(e){l(!1)}function xe(e){let{basename:n="/",children:i=null,location:r,navigationType:a=t.Pop,navigator:o,static:c=!1,future:d}=e;Q()&&l(!1);let u=n.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:u,navigator:o,static:c,future:U({v7_relativeSplatPath:!1},d)}),[u,d,o,c]);"string"===typeof r&&(r=m(r));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:x="default"}=r,b=s.useMemo(()=>{let e=P(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:x},navigationType:a}},[u,p,f,g,v,x,a]);return null==b?null:s.createElement(q.Provider,{value:h},s.createElement(K.Provider,{children:i,value:b}))}function be(e){let{children:t,location:n}=e;return ne(ye(t),n)}new Promise(()=>{});s.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,i)=>{if(!s.isValidElement(e))return;let r=[...t,i];if(e.type===s.Fragment)return void n.push.apply(n,ye(e.props.children,r));e.type!==ve&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ye(e.props.children,r)),n.push(a)}),n}var we=n(950),je=n.t(we,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(OP){}new Map;const _e=i.startTransition;je.flushSync,i.useId;function Ne(e){let{basename:t,children:n,future:i,window:r}=e,a=s.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),p(function(e,t){let{pathname:n="/",search:s="",hash:i=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),u("",{pathname:n,search:s,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),s="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");s=-1===n?t:t.slice(0,n)}return s+"#"+("string"===typeof t?t:h(t))},function(e,t){c("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}({window:r,v5Compat:!0}));let o=a.current,[l,d]=s.useState({action:o.action,location:o.location}),{v7_startTransition:f}=i||{},g=s.useCallback(e=>{f&&_e?_e(()=>d(e)):d(e)},[d,f]);return s.useLayoutEffect(()=>o.listen(g),[o,g]),s.useEffect(()=>pe(i),[i]),s.createElement(xe,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ae(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Ce(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}function Ee(e,t,n){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach(function(t){Ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Me(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}function Le(e,t){if(null==e)return{};var n,s,i=Me(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Re=n(139),Oe=n.n(Re),De=n(579);const Ie=["xxl","xl","lg","md","sm","xs"],Fe="xs",ze=s.createContext({prefixes:{},breakpoints:Ie,minBreakpoint:Fe}),{Consumer:Be,Provider:We}=ze;function He(e,t){const{prefixes:n}=(0,s.useContext)(ze);return e||n[t]||t}function Ue(){const{breakpoints:e}=(0,s.useContext)(ze);return e}function Ve(){const{minBreakpoint:e}=(0,s.useContext)(ze);return e}function Ge(){const{dir:e}=(0,s.useContext)(ze);return"rtl"===e}const qe=["bsPrefix","fluid","as","className"],Ke=s.forwardRef((e,t)=>{let{bsPrefix:n,fluid:s=!1,as:i="div",className:r}=e,a=Le(e,qe);const o=He(n,"container"),l="string"===typeof s?"-".concat(s):"-fluid";return(0,De.jsx)(i,Pe(Pe({ref:t},a),{},{className:Oe()(r,s?"".concat(o).concat(l):o)}))});Ke.displayName="Container";const Xe=Ke;function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ye.apply(null,arguments)}n(740);function Qe(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function $e(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!==typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Je(e,t,n){var i=(0,s.useRef)(void 0!==e),r=(0,s.useState)(t),a=r[0],o=r[1],l=void 0!==e,c=i.current;return i.current=l,!l&&c&&a!==t&&o(t),[l?e:a,(0,s.useCallback)(function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(s)),o(e)},[n])]}function Ze(e,t){return Object.keys(t).reduce(function(n,s){var i,r=n,a=r[Qe(s)],o=r[s],l=Me(r,[Qe(s),s].map($e)),c=t[s],d=Je(o,a,e[c]),u=d[0],h=d[1];return Ye({},l,((i={})[s]=u,i[c]=h,i))},e)}function et(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function tt(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function nt(e,t){try{var n=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,s)}finally{this.props=n,this.state=s}}et.__suppressDeprecationWarning=!0,tt.__suppressDeprecationWarning=!0,nt.__suppressDeprecationWarning=!0;const st=function(e){const t=(0,s.useRef)(e);return(0,s.useEffect)(()=>{t.current=e},[e]),t};function it(e){const t=st(e);return(0,s.useCallback)(function(){return t.current&&t.current(...arguments)},[t])}const rt=e=>s.forwardRef((t,n)=>(0,De.jsx)("div",Pe(Pe({},t),{},{ref:n,className:Oe()(t.className,e)}))),at=["className","bsPrefix","as"],ot=rt("h4");ot.displayName="DivStyledAsH4";const lt=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i=ot}=e,r=Le(e,at);return s=He(s,"alert-heading"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});lt.displayName="AlertHeading";const ct=lt;function dt(){return(0,s.useState)(null)}const ut=function(e){const t=(0,s.useRef)(e);return(0,s.useEffect)(()=>{t.current=e},[e]),t};function ht(e){const t=ut(e);return(0,s.useCallback)(function(){return t.current&&t.current(...arguments)},[t])}function mt(){const e=(0,s.useRef)(!0),t=(0,s.useRef)(()=>e.current);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function pt(e){const t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{t.current=e}),t.current}const ft="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,gt="undefined"!==typeof document||ft?s.useLayoutEffect:s.useEffect;new WeakMap;const vt=["as","disabled"];function xt(e){let{tagName:t,disabled:n,href:s,target:i,rel:r,role:a,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=s||null!=i||null!=r?"a":"button");const d={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},d];const u=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(s||(s="#"),n&&(s=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:n?void 0:l,href:s,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?r:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const bt=s.forwardRef((e,t)=>{let{as:n,disabled:s}=e,i=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,vt);const[r,{tagName:a}]=xt(Object.assign({tagName:n,disabled:s},i));return(0,De.jsx)(a,Object.assign({},i,r,{ref:t}))});bt.displayName="Button";const yt=bt,wt=["onKeyDown"];const jt=s.forwardRef((e,t)=>{let{onKeyDown:n}=e,s=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,wt);const[i]=xt(Object.assign({tagName:"a"},s)),r=ht(e=>{i.onKeyDown(e),null==n||n(e)});return(a=s.href)&&"#"!==a.trim()&&"button"!==s.role?(0,De.jsx)("a",Object.assign({ref:t},s,{onKeyDown:n})):(0,De.jsx)("a",Object.assign({ref:t},s,i,{onKeyDown:r}));var a});jt.displayName="Anchor";const _t=jt,Nt=["className","bsPrefix","as"],kt=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i=_t}=e,r=Le(e,Nt);return s=He(s,"alert-link"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});kt.displayName="AlertLink";const St=kt;function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}const At=!1,Et=s.createContext(null);var Tt="unmounted",Pt="exited",Mt="entering",Lt="entered",Rt="exiting",Ot=function(e){var t,n;function i(t,n){var s;s=e.call(this,t,n)||this;var i,r=n&&!n.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?r?(i=Pt,s.appearStatus=Mt):i=Lt:i=t.unmountOnExit||t.mountOnEnter?Tt:Pt,s.state={status:i},s.nextCallback=null,s}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ct(t,n),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Tt?{status:Pt}:null};var r=i.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Mt&&n!==Lt&&(t=Mt):n!==Mt&&n!==Lt||(t=Rt)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,s=this.props.timeout;return e=t=n=s,null!=s&&"number"!==typeof s&&(e=s.exit,t=s.enter,n=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Mt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:we.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pt&&this.setState({status:Tt})},r.performEnter=function(e){var t=this,n=this.props.enter,s=this.context?this.context.isMounting:e,i=this.props.nodeRef?[s]:[we.findDOMNode(this),s],r=i[0],a=i[1],o=this.getTimeouts(),l=s?o.appear:o.enter;!e&&!n||At?this.safeSetState({status:Lt},function(){t.props.onEntered(r)}):(this.props.onEnter(r,a),this.safeSetState({status:Mt},function(){t.props.onEntering(r,a),t.onTransitionEnd(l,function(){t.safeSetState({status:Lt},function(){t.props.onEntered(r,a)})})}))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),s=this.props.nodeRef?void 0:we.findDOMNode(this);t&&!At?(this.props.onExit(s),this.safeSetState({status:Rt},function(){e.props.onExiting(s),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:Pt},function(){e.props.onExited(s)})})})):this.safeSetState({status:Pt},function(){e.props.onExited(s)})},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(s){n&&(n=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:we.findDOMNode(this),s=null==e&&!this.props.addEndListener;if(n&&!s){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],r=i[0],a=i[1];this.props.addEndListener(r,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Tt)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Me(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(Et.Provider,{value:null},"function"===typeof n?n(e,i):s.cloneElement(s.Children.only(n),i))},i}(s.Component);function Dt(){}Ot.contextType=Et,Ot.propTypes={},Ot.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Dt,onEntering:Dt,onEntered:Dt,onExit:Dt,onExiting:Dt,onExited:Dt},Ot.UNMOUNTED=Tt,Ot.EXITED=Pt,Ot.ENTERING=Mt,Ot.ENTERED=Lt,Ot.EXITING=Rt;const It=Ot;function Ft(e){return"Escape"===e.code||27===e.keyCode}function zt(e){if(!e||"function"===typeof e)return null;const{major:t}=function(){const e=s.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return t>=19?e.props.ref:e.ref}function Bt(e){return e&&e.ownerDocument||document}function Wt(e,t){return function(e){var t=Bt(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Ht=/([A-Z])/g;var Ut=/^ms-/;function Vt(e){return function(e){return e.replace(Ht,"-$1").toLowerCase()}(e).replace(Ut,"-ms-")}var Gt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const qt=function(e,t){var n="",s="";if("string"===typeof t)return e.style.getPropertyValue(Vt(t))||Wt(e).getPropertyValue(Vt(t));Object.keys(t).forEach(function(i){var r=t[i];r||0===r?!function(e){return!(!e||!Gt.test(e))}(i)?n+=Vt(i)+": "+r+";":s+=i+"("+r+") ":e.style.removeProperty(Vt(i))}),s&&(n+="transform: "+s+";"),e.style.cssText+=";"+n},Kt=!("undefined"===typeof window||!window.document||!window.document.createElement);var Xt=!1,Yt=!1;try{var Qt={get passive(){return Xt=!0},get once(){return Yt=Xt=!0}};Kt&&(window.addEventListener("test",Qt,Qt),window.removeEventListener("test",Qt,!0))}catch(OP){}const $t=function(e,t,n,s){if(s&&"boolean"!==typeof s&&!Yt){var i=s.once,r=s.capture,a=n;!Yt&&i&&(a=n.__once||function e(s){this.removeEventListener(t,e,r),n.call(this,s)},n.__once=a),e.addEventListener(t,a,Xt?s:r)}e.addEventListener(t,n,s)};const Jt=function(e,t,n,s){var i=s&&"boolean"!==typeof s?s.capture:s;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const Zt=function(e,t,n,s){return $t(e,t,n,s),function(){Jt(e,t,n,s)}};function en(e,t,n){void 0===n&&(n=5);var s=!1,i=setTimeout(function(){s||function(e,t,n,s){if(void 0===n&&(n=!1),void 0===s&&(s=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,s),e.dispatchEvent(i)}}(e,"transitionend",!0)},t+n),r=Zt(e,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(i),r()}}function tn(e,t,n,s){null==n&&(n=function(e){var t=qt(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=en(e,n,s),r=Zt(e,"transitionend",t);return function(){i(),r()}}function nn(e,t){const n=qt(e,t)||"",s=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*s}function sn(e,t){const n=nn(e,"transitionDuration"),s=nn(e,"transitionDelay"),i=tn(e,n=>{n.target===e&&(i(),t(n))},n+s)}function rn(e){e.offsetHeight}const an=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const on=function(e,t){return(0,s.useMemo)(()=>function(e,t){const n=an(e),s=an(t);return e=>{n&&n(e),s&&s(e)}}(e,t),[e,t])};function ln(e){return e&&"setState"in e?we.findDOMNode(e):null!=e?e:null}const cn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],dn=s.forwardRef((e,t)=>{let{onEnter:n,onEntering:i,onEntered:r,onExit:a,onExiting:o,onExited:l,addEndListener:c,children:d,childRef:u}=e,h=Le(e,cn);const m=(0,s.useRef)(null),p=on(m,u),f=e=>{p(ln(e))},g=e=>t=>{e&&m.current&&e(m.current,t)},v=(0,s.useCallback)(g(n),[n]),x=(0,s.useCallback)(g(i),[i]),b=(0,s.useCallback)(g(r),[r]),y=(0,s.useCallback)(g(a),[a]),w=(0,s.useCallback)(g(o),[o]),j=(0,s.useCallback)(g(l),[l]),_=(0,s.useCallback)(g(c),[c]);return(0,De.jsx)(It,Pe(Pe({ref:t},h),{},{onEnter:v,onEntered:b,onEntering:x,onExit:y,onExited:j,onExiting:w,addEndListener:_,nodeRef:m,children:"function"===typeof d?(e,t)=>d(e,Pe(Pe({},t),{},{ref:f})):s.cloneElement(d,{ref:f})}))});dn.displayName="TransitionWrapper";const un=dn,hn=["className","children","transitionClasses","onEnter"],mn={[Mt]:"show",[Lt]:"show"},pn=s.forwardRef((e,t)=>{let{className:n,children:i,transitionClasses:r={},onEnter:a}=e;const o=Pe({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Le(e,hn)),l=(0,s.useCallback)((e,t)=>{rn(e),null==a||a(e,t)},[a]);return(0,De.jsx)(un,Pe(Pe({ref:t,addEndListener:sn},o),{},{onEnter:l,childRef:zt(i),children:(e,t)=>s.cloneElement(i,Pe(Pe({},t),{},{className:Oe()("fade",n,i.props.className,mn[e],r[e])}))}))});pn.displayName="Fade";const fn=pn;var gn=n(173),vn=n.n(gn);const xn=["className","variant","aria-label"],bn={"aria-label":vn().string,onClick:vn().func,variant:vn().oneOf(["white"])},yn=s.forwardRef((e,t)=>{let{className:n,variant:s,"aria-label":i="Close"}=e,r=Le(e,xn);return(0,De.jsx)("button",Pe({ref:t,type:"button",className:Oe()("btn-close",s&&"btn-close-".concat(s),n),"aria-label":i},r))});yn.displayName="CloseButton",yn.propTypes=bn;const wn=yn,jn=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],_n=s.forwardRef((e,t)=>{const n=Ze(e,{show:"onClose"}),{bsPrefix:s,show:i=!0,closeLabel:r="Close alert",closeVariant:a,className:o,children:l,variant:c="primary",onClose:d,dismissible:u,transition:h=fn}=n,m=Le(n,jn),p=He(s,"alert"),f=it(e=>{d&&d(!1,e)}),g=!0===h?fn:h,v=(0,De.jsxs)("div",Pe(Pe({role:"alert"},g?void 0:m),{},{ref:t,className:Oe()(o,p,c&&"".concat(p,"-").concat(c),u&&"".concat(p,"-dismissible")),children:[u&&(0,De.jsx)(wn,{onClick:f,"aria-label":r,variant:a}),l]}));return g?(0,De.jsx)(g,Pe(Pe({unmountOnExit:!0},m),{},{ref:void 0,in:i,children:v})):i?v:null});_n.displayName="Alert";const Nn=Object.assign(_n,{Link:St,Heading:ct}),kn=["bsPrefix","className","as"],Sn=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:i="div"}=e,r=Le(e,kn);const a=He(n,"row"),o=Ue(),l=Ve(),c="".concat(a,"-cols"),d=[];return o.forEach(e=>{const t=r[e];let n;delete r[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const s=e!==l?"-".concat(e):"";null!=n&&d.push("".concat(c).concat(s,"-").concat(n))}),(0,De.jsx)(i,Pe(Pe({ref:t},r),{},{className:Oe()(s,a,...d)}))});Sn.displayName="Row";const Cn=Sn,An=["as","bsPrefix","className"],En=["className"];const Tn=s.forwardRef((e,t)=>{const[n,{as:s="div",bsPrefix:i,spans:r}]=function(e){let{as:t,bsPrefix:n,className:s}=e,i=Le(e,An);n=He(n,"col");const r=Ue(),a=Ve(),o=[],l=[];return r.forEach(e=>{const t=i[e];let s,r,c;delete i[e],"object"===typeof t&&null!=t?({span:s,offset:r,order:c}=t):s=t;const d=e!==a?"-".concat(e):"";s&&o.push(!0===s?"".concat(n).concat(d):"".concat(n).concat(d,"-").concat(s)),null!=c&&l.push("order".concat(d,"-").concat(c)),null!=r&&l.push("offset".concat(d,"-").concat(r))}),[Pe(Pe({},i),{},{className:Oe()(s,...o,...l)}),{as:t,bsPrefix:n,spans:o}]}(e),{className:a}=n,o=Le(n,En);return(0,De.jsx)(s,Pe(Pe({},o),{},{ref:t,className:Oe()(a,!r.length&&i)}))});Tn.displayName="Col";const Pn=Tn,Mn=["bsPrefix","bg","pill","text","className","as"],Ln=s.forwardRef((e,t)=>{let{bsPrefix:n,bg:s="primary",pill:i=!1,text:r,className:a,as:o="span"}=e,l=Le(e,Mn);const c=He(n,"badge");return(0,De.jsx)(o,Pe(Pe({ref:t},l),{},{className:Oe()(a,c,i&&"rounded-pill",r&&"text-".concat(r),s&&"bg-".concat(s))}))});Ln.displayName="Badge";const Rn=Ln,On=["className","bsPrefix","as"],Dn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,On);return s=He(s,"card-body"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Dn.displayName="CardBody";const In=Dn,Fn=["className","bsPrefix","as"],zn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,Fn);return s=He(s,"card-footer"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});zn.displayName="CardFooter";const Bn=zn,Wn=s.createContext(null);Wn.displayName="CardHeaderContext";const Hn=Wn,Un=["bsPrefix","className","as"],Vn=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,as:r="div"}=e,a=Le(e,Un);const o=He(n,"card-header"),l=(0,s.useMemo)(()=>({cardHeaderBsPrefix:o}),[o]);return(0,De.jsx)(Hn.Provider,{value:l,children:(0,De.jsx)(r,Pe(Pe({ref:t},a),{},{className:Oe()(i,o)}))})});Vn.displayName="CardHeader";const Gn=Vn,qn=["bsPrefix","className","variant","as"],Kn=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,variant:i,as:r="img"}=e,a=Le(e,qn);const o=He(n,"card-img");return(0,De.jsx)(r,Pe({ref:t,className:Oe()(i?"".concat(o,"-").concat(i):o,s)},a))});Kn.displayName="CardImg";const Xn=Kn,Yn=["className","bsPrefix","as"],Qn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,Yn);return s=He(s,"card-img-overlay"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Qn.displayName="CardImgOverlay";const $n=Qn,Jn=["className","bsPrefix","as"],Zn=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="a"}=e,r=Le(e,Jn);return s=He(s,"card-link"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Zn.displayName="CardLink";const es=Zn,ts=["className","bsPrefix","as"],ns=rt("h6"),ss=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i=ns}=e,r=Le(e,ts);return s=He(s,"card-subtitle"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});ss.displayName="CardSubtitle";const is=ss,rs=["className","bsPrefix","as"],as=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="p"}=e,r=Le(e,rs);return s=He(s,"card-text"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});as.displayName="CardText";const os=as,ls=["className","bsPrefix","as"],cs=rt("h5"),ds=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i=cs}=e,r=Le(e,ls);return s=He(s,"card-title"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});ds.displayName="CardTitle";const us=ds,hs=["bsPrefix","className","bg","text","border","body","children","as"],ms=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,bg:i,text:r,border:a,body:o=!1,children:l,as:c="div"}=e,d=Le(e,hs);const u=He(n,"card");return(0,De.jsx)(c,Pe(Pe({ref:t},d),{},{className:Oe()(s,u,i&&"bg-".concat(i),r&&"text-".concat(r),a&&"border-".concat(a)),children:o?(0,De.jsx)(In,{children:l}):l}))});ms.displayName="Card";const ps=Object.assign(ms,{Img:Xn,Title:us,Subtitle:is,Body:In,Link:es,Text:os,Header:Gn,Footer:Bn,ImgOverlay:$n});var fs=Function.prototype.bind.call(Function.prototype.call,[].slice);function gs(e,t){return fs(e.querySelectorAll(t))}function vs(){const[,e]=(0,s.useReducer)(e=>e+1,0);return e}const xs=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const bs=function(e,t){return(0,s.useMemo)(()=>function(e,t){const n=xs(e),s=xs(t);return e=>{n&&n(e),s&&s(e)}}(e,t),[e,t])},ys=s.createContext(null);ys.displayName="NavContext";const ws=ys,js=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},_s=s.createContext(null),Ns=s.createContext(null);function ks(e){return"".concat("data-rr-ui-").concat(e)}const Ss=["as","active","eventKey"];function Cs(e){let{key:t,onClick:n,active:i,id:r,role:a,disabled:o}=e;const l=(0,s.useContext)(_s),c=(0,s.useContext)(ws),d=(0,s.useContext)(Ns);let u=i;const h={role:a};if(c){a||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=t?t:null),n=c.getControlledId(null!=t?t:null);h[ks("event-key")]=t,h.id=e||r,u=null==i&&null!=t?c.activeKey===t:i,!u&&(null!=d&&d.unmountOnExit||null!=d&&d.mountOnEnter)||(h["aria-controls"]=n)}return"tab"===h.role&&(h["aria-selected"]=u,u||(h.tabIndex=-1),o&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=ht(e=>{o||(null==n||n(e),null!=t&&l&&!e.isPropagationStopped()&&l(t,e))}),[h,{isActive:u}]}const As=s.forwardRef((e,t)=>{let{as:n=yt,active:s,eventKey:i}=e,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Ss);const[a,o]=Cs(Object.assign({key:js(i,r.href),active:s},r));return a[ks("active")]=o.isActive,(0,De.jsx)(n,Object.assign({},r,a,{ref:t}))});As.displayName="NavItem";const Es=As,Ts=["as","onSelect","activeKey","role","onKeyDown"];const Ps=()=>{},Ms=ks("event-key"),Ls=s.forwardRef((e,t)=>{let{as:n="div",onSelect:i,activeKey:r,role:a,onKeyDown:o}=e,l=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Ts);const c=vs(),d=(0,s.useRef)(!1),u=(0,s.useContext)(_s),h=(0,s.useContext)(Ns);let m,p;h&&(a=a||"tablist",r=h.activeKey,m=h.getControlledId,p=h.getControllerId);const f=(0,s.useRef)(null),g=e=>{const t=f.current;if(!t)return null;const n=gs(t,"[".concat(Ms,"]:not([aria-disabled=true])")),s=t.querySelector("[aria-selected=true]");if(!s||s!==document.activeElement)return null;const i=n.indexOf(s);if(-1===i)return null;let r=i+e;return r>=n.length&&(r=0),r<0&&(r=n.length-1),n[r]},v=(e,t)=>{null!=e&&(null==i||i(e,t),null==u||u(e,t))};(0,s.useEffect)(()=>{if(f.current&&d.current){const e=f.current.querySelector("[".concat(Ms,"][aria-selected=true]"));null==e||e.focus()}d.current=!1});const x=bs(t,f);return(0,De.jsx)(_s.Provider,{value:v,children:(0,De.jsx)(ws.Provider,{value:{role:a,activeKey:js(r),getControlledId:m||Ps,getControllerId:p||Ps},children:(0,De.jsx)(n,Object.assign({},l,{onKeyDown:e=>{if(null==o||o(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,c())},ref:x,role:a}))})})});Ls.displayName="Nav";const Rs=Object.assign(Ls,{Item:Es}),Os=s.createContext(null);Os.displayName="NavbarContext";const Ds=Os,Is=["className","bsPrefix","as"],Fs=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,Is);return s=He(s,"nav-item"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Fs.displayName="NavItem";const zs=Fs,Bs=["bsPrefix","className","as","active","eventKey","disabled"],Ws=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:i=_t,active:r,eventKey:a,disabled:o=!1}=e,l=Le(e,Bs);n=He(n,"nav-link");const[c,d]=Cs(Pe({key:js(a,l.href),active:r,disabled:o},l));return(0,De.jsx)(i,Pe(Pe(Pe({},l),c),{},{ref:t,disabled:o,className:Oe()(s,n,o&&"disabled",d.isActive&&"active")}))});Ws.displayName="NavLink";const Hs=Ws,Us=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Vs=s.forwardRef((e,t)=>{const n=Ze(e,{activeKey:"onSelect"}),{as:i="div",bsPrefix:r,variant:a,fill:o=!1,justify:l=!1,navbar:c,navbarScroll:d,className:u,activeKey:h}=n,m=Le(n,Us),p=He(r,"nav");let f,g,v=!1;const x=(0,s.useContext)(Ds),b=(0,s.useContext)(Hn);return x?(f=x.bsPrefix,v=null==c||c):b&&({cardHeaderBsPrefix:g}=b),(0,De.jsx)(Rs,Pe({as:i,ref:t,activeKey:h,className:Oe()(u,{[p]:!v,["".concat(f,"-nav")]:v,["".concat(f,"-nav-scroll")]:v&&d,["".concat(g,"-").concat(a)]:!!g,["".concat(p,"-").concat(a)]:!!a,["".concat(p,"-fill")]:o,["".concat(p,"-justified")]:l})},m))});Vs.displayName="Nav";const Gs=Object.assign(Vs,{Item:zs,Link:Hs}),qs=["as","bsPrefix","variant","size","active","disabled","className"],Ks=s.forwardRef((e,t)=>{let{as:n,bsPrefix:s,variant:i="primary",size:r,active:a=!1,disabled:o=!1,className:l}=e,c=Le(e,qs);const d=He(s,"btn"),[u,{tagName:h}]=xt(Pe({tagName:n,disabled:o},c)),m=h;return(0,De.jsx)(m,Pe(Pe(Pe({},u),c),{},{ref:t,disabled:o,className:Oe()(l,d,a&&"active",i&&"".concat(d,"-").concat(i),r&&"".concat(d,"-").concat(r),c.href&&o&&"disabled")}))});Ks.displayName="Button";const Xs=Ks;var Ys={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qs=s.createContext&&s.createContext(Ys),$s=function(){return $s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$s.apply(this,arguments)},Js=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};function Zs(e){return e&&e.map(function(e,t){return s.createElement(e.tag,$s({key:t},e.attr),Zs(e.child))})}function ei(e){return function(t){return s.createElement(ti,$s({attr:$s({},e.attr)},t),Zs(e.child))}}function ti(e){var t=function(t){var n,i=e.attr,r=e.size,a=e.title,o=Js(e,["attr","size","title"]),l=r||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),s.createElement("svg",$s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:n,style:$s($s({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&s.createElement("title",null,a),e.children)};return void 0!==Qs?s.createElement(Qs.Consumer,null,function(e){return t(e)}):t(Ys)}function ni(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function si(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function ii(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function ri(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(e)}function ai(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function oi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(e)}function li(e){return ei({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"}}]})(e)}function ci(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(e)}function di(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"}}]})(e)}function ui(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M560 288h-80v96l-32-21.3-32 21.3v-96h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16zm-384-64h224c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16h-80v96l-32-21.3L256 96V0h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16zm64 64h-80v96l-32-21.3L96 384v-96H16c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16z"}}]})(e)}function hi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"}}]})(e)}function mi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function pi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160H12c-6.627 0-12-5.373-12-12v-36c0-26.51 21.49-48 48-48h48V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h128V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h48c26.51 0 48 21.49 48 48v36c0 6.627-5.373 12-12 12zM12 192h424c6.627 0 12 5.373 12 12v260c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V204c0-6.627 5.373-12 12-12zm333.296 95.947l-28.169-28.398c-4.667-4.705-12.265-4.736-16.97-.068L194.12 364.665l-45.98-46.352c-4.667-4.705-12.266-4.736-16.971-.068l-28.397 28.17c-4.705 4.667-4.736 12.265-.068 16.97l82.601 83.269c4.667 4.705 12.265 4.736 16.97.068l142.953-141.805c4.705-4.667 4.736-12.265.068-16.97z"}}]})(e)}function fi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function gi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}]})(e)}function vi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(e)}function xi(e){return ei({tag:"svg",attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"}}]})(e)}function bi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function yi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function wi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function ji(e){return ei({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function _i(e){return ei({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function Ni(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z"}}]})(e)}function ki(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(e)}function Si(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function Ci(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function Ai(e){return ei({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"}}]})(e)}function Ei(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M160 224v64h320v-64c0-35.3 28.7-64 64-64h32c0-53-43-96-96-96H160c-53 0-96 43-96 96h32c35.3 0 64 28.7 64 64zm416-32h-32c-17.7 0-32 14.3-32 32v96H128v-96c0-17.7-14.3-32-32-32H64c-35.3 0-64 28.7-64 64 0 23.6 13 44 32 55.1V432c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-16h384v16c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16V311.1c19-11.1 32-31.5 32-55.1 0-35.3-28.7-64-64-64z"}}]})(e)}function Ti(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"}}]})(e)}function Pi(e){return ei({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"}}]})(e)}function Mi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Li(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function Ri(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function Oi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 304H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32zm0-192H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function Di(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"}}]})(e)}function Ii(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function Fi(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function zi(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function Bi(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function Wi(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"}}]})(e)}function Hi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function Ui(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"}}]})(e)}function Vi(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M485.5 0L576 160H474.9L405.7 0h79.8zm-128 0l69.2 160H149.3L218.5 0h139zm-267 0h79.8l-69.2 160H0L90.5 0zM0 192h100.7l123 251.7c1.5 3.1-2.7 5.9-5 3.3L0 192zm148.2 0h279.6l-137 318.2c-1 2.4-4.5 2.4-5.5 0L148.2 192zm204.1 251.7l123-251.7H576L357.3 446.9c-2.3 2.7-6.5-.1-5-3.2z"}}]})(e)}function Gi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}}]})(e)}function qi(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function Ki(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"}}]})(e)}function Xi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"}}]})(e)}function Yi(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"}}]})(e)}function Qi(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function $i(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function Ji(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function Zi(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(e)}function er(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]})(e)}function tr(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(e)}function nr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"}}]})(e)}function sr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(e)}function ir(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function rr(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function ar(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}}]})(e)}function or(e){return ei({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}}]})(e)}function lr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]})(e)}function cr(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M635.7 167.2L556.1 31.7c-8.8-15-28.3-20.1-43.5-11.5l-69 39.1L503.3 161c2.2 3.8.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9L416 75l-55.2 31.3 27.9 47.4c2.2 3.8.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9L333.2 122 278 153.3 337.8 255c2.2 3.7.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9l-59.7-101.7-55.2 31.3 27.9 47.4c2.2 3.8.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9l-27.9-47.5-55.2 31.3 59.7 101.7c2.2 3.7.9 8.5-2.9 10.7l-13.8 7.8c-3.8 2.2-8.7.9-10.9-2.9L84.9 262.9l-69 39.1C.7 310.7-4.6 329.8 4.2 344.8l79.6 135.6c8.8 15 28.3 20.1 43.5 11.5L624.1 210c15.2-8.6 20.4-27.8 11.6-42.8z"}}]})(e)}function dr(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function ur(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(e)}function hr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(e)}function mr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function pr(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function fr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function gr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 416h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-128-64h-48V48a16 16 0 0 0-16-16H80a16 16 0 0 0-16 16v304H16c-14.19 0-21.37 17.24-11.29 27.31l80 96a16 16 0 0 0 22.62 0l80-96C197.35 369.26 190.22 352 176 352zm256-192H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-64 128H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM496 32H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(e)}function vr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 416h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h48v304a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16V160h48c14.21 0 21.38-17.24 11.31-27.31l-80-96a16 16 0 0 0-22.62 0l-80 96C-5.35 142.74 1.77 160 16 160zm416 0H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-64 128H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM496 32H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(e)}function xr(e){return ei({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}}]})(e)}function br(e){return ei({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"}}]})(e)}function yr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)}function wr(e){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(e)}function jr(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M312 320h136V56c0-13.3-10.7-24-24-24H24C10.7 32 0 42.7 0 56v400c0 13.3 10.7 24 24 24h264V344c0-13.2 10.8-24 24-24zm129 55l-98 98c-4.5 4.5-10.6 7-17 7h-6V352h128v6.1c0 6.3-2.5 12.4-7 16.9z"}}]})(e)}function _r(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"}}]})(e)}function Nr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"}}]})(e)}function kr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}}]})(e)}function Sr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function Cr(e){return ei({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function Ar(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function Er(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function Tr(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"}}]})(e)}function Pr(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"}}]})(e)}function Mr(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Lr(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"}}]})(e)}function Rr(e){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Or(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(e)}function Dr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"}}]})(e)}function Ir(e){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M504 352H136.4c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0 96H136.1c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0-192H136.6c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm106.5-139L338.4 3.7a48.15 48.15 0 0 0-36.9 0L29.5 117C11.7 124.5 0 141.9 0 161.3V504c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V256c0-17.6 14.6-32 32.6-32h382.8c18 0 32.6 14.4 32.6 32v248c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V161.3c0-19.4-11.7-36.8-29.5-44.3z"}}]})(e)}function Fr(e){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}}]})(e)}const zr=["bsPrefix","variant","animation","size","as","className"],Br=s.forwardRef((e,t)=>{let{bsPrefix:n,variant:s,animation:i="border",size:r,as:a="div",className:o}=e,l=Le(e,zr);n=He(n,"spinner");const c="".concat(n,"-").concat(i);return(0,De.jsx)(a,Pe(Pe({ref:t},l),{},{className:Oe()(o,c,r&&"".concat(c,"-").concat(r),s&&"text-".concat(s))}))});Br.displayName="Spinner";const Wr=Br,Hr=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],Ur=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,striped:i,bordered:r,borderless:a,hover:o,size:l,variant:c,responsive:d}=e,u=Le(e,Hr);const h=He(n,"table"),m=Oe()(s,h,c&&"".concat(h,"-").concat(c),l&&"".concat(h,"-").concat(l),i&&"".concat(h,"-").concat("string"===typeof i?"striped-".concat(i):"striped"),r&&"".concat(h,"-bordered"),a&&"".concat(h,"-borderless"),o&&"".concat(h,"-hover")),p=(0,De.jsx)("table",Pe(Pe({},u),{},{className:m,ref:t}));if(d){let e="".concat(h,"-responsive");return"string"===typeof d&&(e="".concat(e,"-").concat(d)),(0,De.jsx)("div",{className:e,children:p})}return p});Ur.displayName="Table";const Vr=Ur,Gr=e=>{let{customers:t,loading:n,onEdit:s,onDelete:i}=e;return n?(0,De.jsxs)("div",{className:"text-center my-4",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("div",{className:"text-muted mt-2",children:"Loading customers..."})]}):t&&0!==t.length?(0,De.jsxs)(Vr,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Customer Name"}),(0,De.jsx)("th",{children:"Phone"}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsx)("th",{children:"Address"}),(0,De.jsx)("th",{children:"Orders"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:t.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.name}),(0,De.jsx)("td",{children:e.phone}),(0,De.jsx)("td",{children:e.email}),(0,De.jsx)("td",{children:e.address}),(0,De.jsx)("td",{children:e.orders_count||0}),(0,De.jsxs)("td",{children:[(0,De.jsx)(Xs,{size:"sm",variant:"outline-secondary",onClick:()=>s(e),className:"me-2",children:(0,De.jsx)(Li,{})}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>i(e),children:(0,De.jsx)(Ar,{})})]})]},e.id))})]}):(0,De.jsx)("div",{className:"text-center text-muted my-4",children:"No customers found."})},qr=e=>{let{payments:t,loading:n}=e;return n?(0,De.jsxs)("div",{className:"text-center my-4",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("div",{className:"text-muted mt-2",children:"Loading payments..."})]}):t&&0!==t.length?(0,De.jsxs)(Vr,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Payment #"}),(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Amount"}),(0,De.jsx)("th",{children:"Method"}),(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:t.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.id}),(0,De.jsx)("td",{children:e.order_number||e.order}),(0,De.jsx)("td",{children:e.amount}),(0,De.jsx)("td",{children:e.payment_method||e.method}),(0,De.jsx)("td",{children:e.payment_date||e.date}),(0,De.jsx)("td",{children:e.status||"-"}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"text-muted",children:"(Actions)"})})]},e.id))})]}):(0,De.jsx)("div",{className:"text-center text-muted my-4",children:"No payments found."})},Kr=e=>{let{reports:t,loading:n}=e;return n?(0,De.jsxs)("div",{className:"text-center my-4",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("div",{className:"text-muted mt-2",children:"Loading reports..."})]}):t&&0!==t.length?(0,De.jsxs)(Vr,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Report"}),(0,De.jsx)("th",{children:"Value"}),(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:t.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.name||e.report}),(0,De.jsx)("td",{children:e.value}),(0,De.jsx)("td",{children:e.date}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"text-muted",children:"(Actions)"})})]},e.id))})]}):(0,De.jsx)("div",{className:"text-center text-muted my-4",children:"No reports found."})},Xr={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"https://internaloox-1.onrender.com/api";async function Yr(e){let{method:t="GET",data:n,isForm:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i="".concat(Xr).concat(e),r={method:t,headers:{}},a=localStorage.getItem("oox_token");a&&(r.headers.Authorization="Bearer ".concat(a)),n&&(s?r.body=n:(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(n)));const o=await fetch(i,r);if(!o.ok){let e="Unknown error",t={};try{if(t=await o.json(),e=t.error||t.detail||o.statusText,400===o.status&&"object"===typeof t&&!t.error){const n=[];Object.keys(t).forEach(e=>{(Array.isArray(t[e])?t[e]:[t[e]]).forEach(t=>{n.push("".concat(e,": ").concat(t))})}),n.length>0&&(e=n.join("; "))}400===o.status&&t.required_fields&&(e+=" (Required: ".concat(t.required_fields.join(", "),")")),400===o.status&&t.valid_roles&&(e+=" (Valid roles: ".concat(t.valid_roles.join(", "),")")),403===o.status&&t.required_role&&(e+=" (Required role: ".concat(t.required_role,")"))}catch(l){}const n=new Error(e);throw n.status=o.status,n.data=t,n}return o.json()}const Qr=()=>Yr("/orders/"),$r=(e,t)=>Yr("/orders/".concat(e,"/"),{method:"PUT",data:t}),Jr=()=>Yr("/orders/management_data/"),Zr=e=>Yr("/orders/".concat(e,"/advance_workflow/"),{method:"POST"}),ea=(e,t)=>Yr("/orders/".concat(e,"/update_status/"),{method:"PATCH",data:t}),ta=(e,t)=>Yr("/orders/".concat(e,"/update_payment/"),{method:"PATCH",data:t}),na=()=>Yr("/customers/"),sa=e=>Yr("/customers/",{method:"POST",data:e}),ia=function(e){return Yr("/payment-proofs/",{method:"POST",data:e,isForm:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})},ra=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t&&null!==t&&""!==t});if(0===t.length)return"";const n=t.map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");return"?".concat(n)},aa=function(){const e=ra(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return Yr("/payments/transactions/".concat(e))},oa=e=>"".concat(Xr,"/payment-proofs/").concat(e,"/file/"),la=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Yr("/payment-proofs/".concat(e,"/signed_url/?expires=").concat(t))},ca=()=>Yr("/users/users/"),da=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?e.startsWith("?")?e:"?".concat(e):"";return Yr("/users/users/".concat(t))},ua=e=>Yr("/users/users/",{method:"POST",data:e}),ha=(e,t)=>Yr("/users/users/".concat(e,"/"),{method:"PUT",data:t}),ma=e=>Yr("/users/users/".concat(e,"/"),{method:"DELETE"}),pa=()=>Yr("/orders/products/"),fa=()=>Yr("/orders/colors/"),ga=()=>Yr("/orders/fabrics/"),va=e=>Yr("/orders/products/",{method:"POST",data:e}),xa=(e,t)=>Yr("/orders/products/".concat(e,"/"),{method:"PUT",data:t}),ba=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Yr("/tasks/tasks/".concat(e,"/perform_action/"),{method:"POST",data:Pe({action:t},n)})},ya=()=>Yr("/tasks/dashboard/worker_dashboard/"),wa=()=>Yr("/tasks/dashboard/supervisor_dashboard/"),ja=()=>Yr("/orders/warehouse_orders/"),_a=e=>Yr("/orders/".concat(e,"/order_details_for_tasks/")),Na=(e,t)=>Yr("/orders/".concat(e,"/assign_tasks_to_order/"),{method:"POST",data:t}),ka=()=>Yr("/inventory/materials/"),Sa=()=>Yr("/inventory/materials/warehouse_dashboard/"),Ca=()=>Yr("/inventory/materials/low_stock/"),Aa=()=>Yr("/inventory/material-categories/"),Ea=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?e.startsWith("?")?e:"?".concat(e):"";return Yr("/tasks/task_types/".concat(t))},Ta=()=>Yr("/tasks/templates/"),Pa=e=>Yr(e&&"all"!==e?"/tasks/tasks/?status=".concat(e):"/tasks/tasks/"),Ma=async e=>{switch(e){case"warehouse":case"admin":case"owner":return await wa();default:return await ya()}},La=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return{success:!0,data:await ba(e,t,n)}}catch(s){return{success:!1,error:s.message}}},Ra=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Yr("/tasks/tasks/".concat(e,"/manager_action/"),{method:"POST",data:Pe({action:t},n)})},Oa=e=>{let{user:t,onLogout:n}=e;const i=Z(),[r,a]=(0,s.useState)("overview"),[o,l]=(0,s.useState)(new Date),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)("");(0,s.useEffect)(()=>{const e=setInterval(()=>l(new Date),6e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{_();const e=setInterval(_,3e4);return()=>clearInterval(e)},[]);const _=async()=>{x(!0);try{const[e,t,n,s]=await Promise.all([Qr(),na(),Yr("/payment-proofs/"),ca()]);d(e.results||e),h(t.results||t),p(n.results||n),g(s.results||s)}catch(OP){y(OP.message)}finally{x(!1)}},N=()=>{var e;return(0,De.jsx)("div",{className:"admin-header mb-4",style:{background:"linear-gradient(135deg, #64748b 0%, #475569 100%)",color:"white",borderRadius:"15px",padding:"2rem",boxShadow:"0 10px 25px rgba(100, 116, 139, 0.2)",border:"2px solid #3b82f6"},children:(0,De.jsxs)(Cn,{className:"align-items-center",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,De.jsx)("div",{className:"p-3 rounded-circle me-3",style:{backgroundColor:"#3b82f6",color:"white"},children:(0,De.jsx)(Lr,{size:35})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"mb-0",style:{fontWeight:"700",fontSize:"2.3rem",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"OOX Operations Control"}),(0,De.jsxs)("p",{className:"mb-0 text-primary",style:{fontSize:"1.1rem",fontWeight:"500",color:"#93c5fd !important"},children:["OOX Furniture Admin Dashboard \u2022 ",o.toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]})}),(0,De.jsx)(Pn,{md:4,className:"text-end",children:(0,De.jsxs)("div",{className:"d-flex flex-column",children:[(0,De.jsxs)(Rn,{style:{backgroundColor:"#3b82f6",color:"white",fontSize:"0.9rem",padding:"8px 16px",borderRadius:"25px",marginBottom:"8px"},children:[(0,De.jsx)(Lr,{className:"me-2"}),(null===t||void 0===t?void 0:t.first_name)||"Admin"," \u2022 ",null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.toUpperCase()]}),(0,De.jsxs)("div",{style:{color:"#e2e8f0",fontSize:"1rem",fontWeight:"600"},children:[(0,De.jsx)(Si,{className:"me-2"}),o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})})]})})},k=e=>{let{title:t,value:n,icon:i,color:r,bgColor:a,change:o}=e;return(0,De.jsx)(ps,{className:"h-100 shadow-sm border-0",style:{background:"linear-gradient(135deg, ".concat(a,"15 0%, ").concat(a,"05 100%)"),borderLeft:"4px solid ".concat(r),borderRadius:"12px"},children:(0,De.jsxs)(ps.Body,{className:"p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h3",{className:"mb-1",style:{fontWeight:"700",color:r,fontSize:"2.2rem",fontFamily:"monospace"},children:n}),(0,De.jsx)("p",{className:"mb-0",style:{fontSize:"0.9rem",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},children:t})]}),(0,De.jsx)("div",{className:"p-3 rounded-circle",style:{backgroundColor:"".concat(r,"20")},children:s.createElement(i,{size:30,color:r})})]}),void 0!==o&&(0,De.jsxs)("div",{className:"small ".concat(o>=0?"text-success":"text-danger"),children:[o>=0?"\u2197":"\u2198"," ",Math.abs(o),"% from last month"]})]})})},S=()=>{const e=c.slice(0,5);return(0,De.jsxs)(ps,{className:"h-100 shadow-sm",children:[(0,De.jsxs)(ps.Header,{className:"bg-info text-white d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(oi,{className:"me-2"}),"Recent Activity"]}),(0,De.jsx)(Rn,{bg:"light",text:"dark",children:"LIVE"})]}),(0,De.jsx)(ps.Body,{style:{maxHeight:"300px",overflowY:"auto"},children:e.map((e,t)=>{var n;return(0,De.jsxs)("div",{className:"d-flex align-items-center mb-3 p-2",children:[(0,De.jsx)("div",{className:"me-3",children:(0,De.jsx)("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center",style:{width:"35px",height:"35px",fontSize:"0.8rem"},children:t+1})}),(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("div",{className:"fw-bold small",children:e.order_number}),(0,De.jsxs)("small",{className:"text-muted",children:[null===(n=e.customer)||void 0===n?void 0:n.name," \u2022 ",new Date(e.created_at).toLocaleDateString()]})]}),(0,De.jsx)(Rn,{bg:"completed"===e.production_status||"order_ready"===e.order_status?"success":"in_production"===e.production_status?"warning":"secondary",className:"small",children:"completed"===e.production_status?"COMPLETED":"order_ready"===e.order_status?"ORDER READY":(e.production_status||"pending").replace("_"," ").toUpperCase()})]},e.id)})})]})},C=()=>(0,De.jsx)(Gs,{variant:"pills",className:"mb-4 flex-nowrap",style:{overflowX:"auto"},children:[{key:"overview",label:"Overview",icon:gi,isTab:!0},{key:"orders",label:"Orders",icon:ki,isTab:!1,route:"/admin/orders"},{key:"customers",label:"Customers",icon:Bi,isTab:!1,route:"/admin/customers"},{key:"payments",label:"Payments",icon:Zi,isTab:!1,route:"/admin/payments"},{key:"reports",label:"Reports",icon:Bi,isTab:!1,route:"/admin/warehouse"}].map(e=>(0,De.jsxs)(Gs.Link,{active:r===e.key,onClick:()=>e.isTab?a(e.key):i(e.route),className:"d-flex align-items-center text-nowrap me-2",style:{backgroundColor:r===e.key?"#3b82f6":"transparent",color:r===e.key?"white":"#64748b",border:"2px solid ".concat(r===e.key?"#3b82f6":"#e2e8f0"),borderRadius:"20px",padding:"10px 20px",fontWeight:"600"},children:[(0,De.jsx)(e.icon,{className:"me-2"}),e.label]},e.key))});return v?(0,De.jsx)(Xe,{fluid:!0,className:"p-4",children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("div",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading admin dashboard..."})]})}):(0,De.jsxs)(Xe,{fluid:!0,className:"admin-dashboard",style:{backgroundColor:"#f8fafc",minHeight:"100vh",padding:"1rem"},children:[(0,De.jsx)(N,{}),(0,De.jsx)(Cn,{className:"mb-4",children:(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsx)(ps.Body,{className:"py-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h5",{className:"mb-0 text-primary",children:[(0,De.jsx)(ki,{className:"me-2"}),"Quick Actions"]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"primary",size:"lg",onClick:()=>i("/admin/orders"),className:"d-flex align-items-center",children:[(0,De.jsx)(ki,{className:"me-2"}),"Manage Orders"]}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:()=>i("/admin/customers"),children:[(0,De.jsx)(rr,{className:"me-1"}),"Add Customer"]}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>i("/admin/deliveries"),children:"Deliveries"}),(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>i("/admin/transactions"),children:"Transactions"}),(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>i("/admin/warehouse"),children:"Warehouse Overview"})]})]})})})})}),(0,De.jsx)(C,{}),b&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>y(""),children:b}),w&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>j(""),children:w}),"overview"===r&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{xl:4,md:6,className:"mb-3",children:(0,De.jsx)(k,{title:"In Production",value:c.filter(e=>"in_production"===e.production_status).length,icon:ki,color:"#3b82f6",bgColor:"#3b82f6"})}),(0,De.jsx)(Pn,{xl:4,md:6,className:"mb-3",children:(0,De.jsx)(k,{title:"Ready for Delivery",value:c.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,icon:bi,color:"#10b981",bgColor:"#10b981"})}),(0,De.jsx)(Pn,{xl:4,md:12,className:"mb-3",children:(0,De.jsx)(k,{title:"Deposit Pending",value:c.filter(e=>"deposit_pending"===e.payment_status||"deposit_pending"===e.order_status).length,icon:Ii,color:"#f59e0b",bgColor:"#f59e0b"})})]}),(0,De.jsx)(Cn,{className:"mb-4",children:(0,De.jsx)(Pn,{lg:12,children:(0,De.jsx)(ps,{className:"shadow-sm border-success",children:(0,De.jsxs)(ps.Body,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:"Warehouse Analytics"}),(0,De.jsx)("div",{className:"text-muted",children:"View low stock, production snapshot, and task overview"})]}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>i("/admin/warehouse"),children:"Open"})]})})})}),(0,De.jsx)(Cn,{className:"mb-4",children:(0,De.jsx)(Pn,{lg:12,className:"mb-3",children:(0,De.jsx)(S,{})})})]}),"customers"===r&&(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-success text-white",children:(0,De.jsx)("h5",{className:"mb-0",children:"Customer Management"})}),(0,De.jsx)(ps.Body,{children:(0,De.jsx)(Gr,{customers:u,loading:v})})]}),"payments"===r&&(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-warning text-dark",children:(0,De.jsx)("h5",{className:"mb-0",children:"Payment Tracking"})}),(0,De.jsx)(ps.Body,{children:(0,De.jsx)(qr,{payments:m,loading:v})})]}),"reports"===r&&(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-secondary text-white",children:(0,De.jsx)("h5",{className:"mb-0",children:"Reports & Analytics"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("div",{className:"text-muted mb-3",children:"Warehouse reports only"}),(0,De.jsx)(Kr,{reports:c.map(e=>({id:e.id,name:"Order ".concat(e.order_number," \u2022 ").concat(e.production_status||e.order_status),value:e.total_amount||"-",date:new Date(e.created_at).toLocaleDateString()})),loading:v})]})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .admin-dashboard {\n          font-family: 'Inter', sans-serif;\n        }\n        .admin-header {\n          animation: slideInDown 0.8s ease-out;\n        }\n        @keyframes slideInDown {\n          from {\n            opacity: 0;\n            transform: translateY(-30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        .card {\n          transition: transform 0.2s ease, box-shadow 0.2s ease;\n        }\n        .card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;\n        }\n        .nav-link {\n          transition: all 0.2s ease;\n        }\n        .nav-link:hover {\n          transform: translateY(-1px);\n        }\n        @media (max-width: 768px) {\n          .admin-header {\n            padding: 1.5rem !important;\n          }\n          .admin-header h1 {\n            font-size: 1.8rem !important;\n          }\n        }\n      "})]})};var Da;function Ia(e){if((!Da&&0!==Da||e)&&Kt){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Da=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Da}function Fa(e){const t=function(e){const t=(0,s.useRef)(e);return t.current=e,t}(e);(0,s.useEffect)(()=>()=>t.current(),[])}function za(e){void 0===e&&(e=Bt());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(OP){return e.body}}function Ba(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Wa(e){const t=function(e){const t=(0,s.useRef)(e);return t.current=e,t}(e);(0,s.useEffect)(()=>()=>t.current(),[])}const Ha=ks("modal-open");const Ua=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[n]:s.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(qt(s,n)||"0",10)+e.scrollBarWidth,"px")),s.setAttribute(Ha,""),qt(s,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Ha),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Va=(0,s.createContext)(Kt?window:void 0);Va.Provider;function Ga(){return(0,s.useContext)(Va)}const qa=(e,t)=>Kt?null==e?(t||Bt()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Ka(e,t){const n=Ga(),[i,r]=(0,s.useState)(()=>qa(e,null==n?void 0:n.document));if(!i){const t=qa(e);t&&r(t)}return(0,s.useEffect)(()=>{t&&i&&t(i)},[t,i]),(0,s.useEffect)(()=>{const t=qa(e);t!==i&&r(t)},[e,i]),i}const Xa=function(e){let{children:t,in:n,onExited:i,mountOnEnter:r,unmountOnExit:a}=e;const o=(0,s.useRef)(null),l=(0,s.useRef)(n),c=ht(i);(0,s.useEffect)(()=>{n?l.current=!0:c(o.current)},[n,c]);const d=bs(o,zt(t)),u=(0,s.cloneElement)(t,{ref:d});return n?u:a||!l.current&&r?null:u},Ya=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const Qa=["component"];const $a=s.forwardRef((e,t)=>{let{component:n}=e,i=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Qa);const r=function(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:r,onExiting:a,onExited:o,addEndListener:l,children:c}=e,d=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,Ya);const u=(0,s.useRef)(null),h=bs(u,zt(c)),m=e=>t=>{e&&u.current&&e(u.current,t)},p=(0,s.useCallback)(m(t),[t]),f=(0,s.useCallback)(m(n),[n]),g=(0,s.useCallback)(m(i),[i]),v=(0,s.useCallback)(m(r),[r]),x=(0,s.useCallback)(m(a),[a]),b=(0,s.useCallback)(m(o),[o]),y=(0,s.useCallback)(m(l),[l]);return Object.assign({},d,{nodeRef:u},t&&{onEnter:p},n&&{onEntering:f},i&&{onEntered:g},r&&{onExit:v},a&&{onExiting:x},o&&{onExited:b},l&&{addEndListener:y},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:h})):(0,s.cloneElement)(c,{ref:h})})}(i);return(0,De.jsx)(n,Object.assign({ref:t},r))}),Ja=$a;function Za(e){let{children:t,in:n,onExited:i,onEntered:r,transition:a}=e;const[o,l]=(0,s.useState)(!n);n&&o&&l(!1);const c=function(e){let{in:t,onTransition:n}=e;const i=(0,s.useRef)(null),r=(0,s.useRef)(!0),a=ht(n);return gt(()=>{if(!i.current)return;let e=!1;return a({in:t,element:i.current,initial:r.current,isStale:()=>e}),()=>{e=!0}},[t,a]),gt(()=>(r.current=!1,()=>{r.current=!0}),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(a(e)).then(()=>{e.isStale()||(e.in?null==r||r(e.element,e.initial):(l(!0),null==i||i(e.element)))},t=>{throw e.in||l(!0),t})}}),d=bs(c,zt(t));return o&&!n?null:(0,s.cloneElement)(t,{ref:d})}function eo(e,t,n){return e?(0,De.jsx)(Ja,Object.assign({},n,{component:e})):t?(0,De.jsx)(Za,Object.assign({},n,{transition:t})):(0,De.jsx)(Xa,Object.assign({},n))}const to=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let no;function so(e){const t=Ga(),n=e||function(e){return no||(no=new Ua({ownerDocument:null==e?void 0:e.document})),no}(t),i=(0,s.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,s.useCallback)(e=>{i.current.dialog=e},[]),setBackdropRef:(0,s.useCallback)(e=>{i.current.backdrop=e},[])})}const io=(0,s.forwardRef)((e,t)=>{let{show:n=!1,role:i="dialog",className:r,style:a,children:o,backdrop:l=!0,keyboard:c=!0,onBackdropClick:d,onEscapeKeyDown:u,transition:h,runTransition:m,backdropTransition:p,runBackdropTransition:f,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:x=!0,restoreFocusOptions:b,renderDialog:y,renderBackdrop:w=e=>(0,De.jsx)("div",Object.assign({},e)),manager:j,container:_,onShow:N,onHide:k=()=>{},onExit:S,onExited:C,onExiting:A,onEnter:E,onEntering:T,onEntered:P}=e,M=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,to);const L=Ga(),R=Ka(_),O=so(j),D=mt(),I=pt(n),[F,z]=(0,s.useState)(!n),B=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,()=>O,[O]),Kt&&!I&&n&&(B.current=za(null==L?void 0:L.document)),n&&F&&z(!1);const W=ht(()=>{if(O.add(),K.current=Zt(document,"keydown",G),q.current=Zt(document,"focus",()=>setTimeout(U),!0),N&&N(),g){var e,t;const n=za(null!=(e=null==(t=O.dialog)?void 0:t.ownerDocument)?e:null==L?void 0:L.document);O.dialog&&n&&!Ba(O.dialog,n)&&(B.current=n,O.dialog.focus())}}),H=ht(()=>{var e;(O.remove(),null==K.current||K.current(),null==q.current||q.current(),x)&&(null==(e=B.current)||null==e.focus||e.focus(b),B.current=null)});(0,s.useEffect)(()=>{n&&R&&W()},[n,R,W]),(0,s.useEffect)(()=>{F&&H()},[F,H]),Wa(()=>{H()});const U=ht(()=>{if(!v||!D()||!O.isTopModal())return;const e=za(null==L?void 0:L.document);O.dialog&&e&&!Ba(O.dialog,e)&&O.dialog.focus()}),V=ht(e=>{e.target===e.currentTarget&&(null==d||d(e),!0===l&&k())}),G=ht(e=>{c&&Ft(e)&&O.isTopModal()&&(null==u||u(e),e.defaultPrevented||k())}),q=(0,s.useRef)(),K=(0,s.useRef)();if(!R)return null;const X=Object.assign({role:i,ref:O.setDialogRef,"aria-modal":"dialog"===i||void 0},M,{style:a,className:r,tabIndex:-1});let Y=y?y(X):(0,De.jsx)("div",Object.assign({},X,{children:s.cloneElement(o,{role:"document"})}));Y=eo(h,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:S,onExiting:A,onExited:function(){z(!0),null==C||C(...arguments)},onEnter:E,onEntering:T,onEntered:P,children:Y});let Q=null;return l&&(Q=w({ref:O.setBackdropRef,onClick:V}),Q=eo(p,f,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Q})),(0,De.jsx)(De.Fragment,{children:we.createPortal((0,De.jsxs)(De.Fragment,{children:[Q,Y]}),R)})});io.displayName="Modal";const ro=Object.assign(io,{Manager:Ua});function ao(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}function oo(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const lo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",co=".sticky-top",uo=".navbar-toggler";class ho extends Ua{adjustAndStore(e,t,n){const s=t.style[e];t.dataset[e]=s,qt(t,{[e]:"".concat(parseFloat(qt(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],qt(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,s;if(s="modal-open",(n=t).classList?n.classList.add(s):ao(n,s)||("string"===typeof n.className?n.className=n.className+" "+s:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+s)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";gs(t,lo).forEach(t=>this.adjustAndStore(i,t,e.scrollBarWidth)),gs(t,co).forEach(t=>this.adjustAndStore(r,t,-e.scrollBarWidth)),gs(t,uo).forEach(t=>this.adjustAndStore(r,t,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,s;s="modal-open",(n=t).classList?n.classList.remove(s):"string"===typeof n.className?n.className=oo(n.className,s):n.setAttribute("class",oo(n.className&&n.className.baseVal||"",s));const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";gs(t,lo).forEach(e=>this.restore(i,e)),gs(t,co).forEach(e=>this.restore(r,e)),gs(t,uo).forEach(e=>this.restore(r,e))}}let mo;function po(e){return mo||(mo=new ho(e)),mo}const fo=ho,go=["className","bsPrefix","as"],vo=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,go);return s=He(s,"modal-body"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});vo.displayName="ModalBody";const xo=vo,bo=s.createContext({onHide(){}}),yo=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],wo=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,contentClassName:i,centered:r,size:a,fullscreen:o,children:l,scrollable:c}=e,d=Le(e,yo);n=He(n,"modal");const u="".concat(n,"-dialog"),h="string"===typeof o?"".concat(n,"-fullscreen-").concat(o):"".concat(n,"-fullscreen");return(0,De.jsx)("div",Pe(Pe({},d),{},{ref:t,className:Oe()(u,s,a&&"".concat(n,"-").concat(a),r&&"".concat(u,"-centered"),c&&"".concat(u,"-scrollable"),o&&h),children:(0,De.jsx)("div",{className:Oe()("".concat(n,"-content"),i),children:l})}))});wo.displayName="ModalDialog";const jo=wo,_o=["className","bsPrefix","as"],No=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,_o);return s=He(s,"modal-footer"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});No.displayName="ModalFooter";const ko=No,So=["closeLabel","closeVariant","closeButton","onHide","children"],Co=s.forwardRef((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:r=!1,onHide:a,children:o}=e,l=Le(e,So);const c=(0,s.useContext)(bo),d=it(()=>{null==c||c.onHide(),null==a||a()});return(0,De.jsxs)("div",Pe(Pe({ref:t},l),{},{children:[o,r&&(0,De.jsx)(wn,{"aria-label":n,variant:i,onClick:d})]}))});Co.displayName="AbstractModalHeader";const Ao=Co,Eo=["bsPrefix","className","closeLabel","closeButton"],To=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,closeLabel:i="Close",closeButton:r=!1}=e,a=Le(e,Eo);return n=He(n,"modal-header"),(0,De.jsx)(Ao,Pe(Pe({ref:t},a),{},{className:Oe()(s,n),closeLabel:i,closeButton:r}))});To.displayName="ModalHeader";const Po=To,Mo=["className","bsPrefix","as"],Lo=rt("h4"),Ro=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i=Lo}=e,r=Le(e,Mo);return s=He(s,"modal-title"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Ro.displayName="ModalTitle";const Oo=Ro,Do=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Io(e){return(0,De.jsx)(fn,Pe(Pe({},e),{},{timeout:null}))}function Fo(e){return(0,De.jsx)(fn,Pe(Pe({},e),{},{timeout:null}))}const zo=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,style:r,dialogClassName:a,contentClassName:o,children:l,dialogAs:c=jo,"data-bs-theme":d,"aria-labelledby":u,"aria-describedby":h,"aria-label":m,show:p=!1,animation:f=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:x,onShow:b,onHide:y,container:w,autoFocus:j=!0,enforceFocus:_=!0,restoreFocus:N=!0,restoreFocusOptions:k,onEntered:S,onExit:C,onExiting:A,onEnter:E,onEntering:T,onExited:P,backdropClassName:M,manager:L}=e,R=Le(e,Do);const[O,D]=(0,s.useState)({}),[I,F]=(0,s.useState)(!1),z=(0,s.useRef)(!1),B=(0,s.useRef)(!1),W=(0,s.useRef)(null),[H,U]=(0,s.useState)(null),V=on(t,U),G=it(y),q=Ge();n=He(n,"modal");const K=(0,s.useMemo)(()=>({onHide:G}),[G]);function X(){return L||po({isRTL:q})}function Y(e){if(!Kt)return;const t=X().getScrollbarWidth()>0,n=e.scrollHeight>Bt(e).documentElement.clientHeight;D({paddingRight:t&&!n?Ia():void 0,paddingLeft:!t&&n?Ia():void 0})}const Q=it(()=>{H&&Y(H.dialog)});Fa(()=>{Jt(window,"resize",Q),null==W.current||W.current()});const $=()=>{z.current=!0},J=e=>{z.current&&H&&e.target===H.dialog&&(B.current=!0),z.current=!1},Z=()=>{F(!0),W.current=tn(H.dialog,()=>{F(!1)})},ee=e=>{"static"!==g?B.current||e.target!==e.currentTarget?B.current=!1:null==y||y():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,s.useCallback)(e=>(0,De.jsx)("div",Pe(Pe({},e),{},{className:Oe()("".concat(n,"-backdrop"),M,!f&&"show")})),[f,M,n]),ne=Pe(Pe({},r),O);ne.display="block";return(0,De.jsx)(bo.Provider,{value:K,children:(0,De.jsx)(ro,{show:p,ref:V,backdrop:g,container:w,keyboard:!0,autoFocus:j,enforceFocus:_,restoreFocus:N,restoreFocusOptions:k,onEscapeKeyDown:e=>{v?null==x||x(e):(e.preventDefault(),"static"===g&&Z())},onShow:b,onHide:y,onEnter:(e,t)=>{e&&Y(e),null==E||E(e,t)},onEntering:(e,t)=>{null==T||T(e,t),$t(window,"resize",Q)},onEntered:S,onExit:e=>{null==W.current||W.current(),null==C||C(e)},onExiting:A,onExited:e=>{e&&(e.style.display=""),null==P||P(e),Jt(window,"resize",Q)},manager:X(),transition:f?Io:void 0,backdropTransition:f?Fo:void 0,renderBackdrop:te,renderDialog:e=>(0,De.jsx)("div",Pe(Pe({role:"dialog"},e),{},{style:ne,className:Oe()(i,n,I&&"".concat(n,"-static"),!f&&"show"),onClick:g?ee:void 0,onMouseUp:J,"data-bs-theme":d,"aria-label":m,"aria-labelledby":u,"aria-describedby":h,children:(0,De.jsx)(c,Pe(Pe({},R),{},{onMouseDown:$,className:a,contentClassName:o,children:l}))}))})})});zo.displayName="Modal";const Bo=Object.assign(zo,{Body:xo,Header:Po,Title:Oo,Footer:ko,Dialog:jo,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function Wo(e,t){let n=0;return s.Children.map(e,e=>s.isValidElement(e)?t(e,n++):e)}const Ho=["min","now","max","label","visuallyHidden","striped","animated","className","style","variant","bsPrefix"],Uo=["isChild"],Vo=["min","now","max","label","visuallyHidden","striped","animated","bsPrefix","variant","className","children"];function Go(e,t,n){const s=(e-t)/(n-t)*100;return Math.round(1e3*s)/1e3}function qo(e,t){let{min:n,now:s,max:i,label:r,visuallyHidden:a,striped:o,animated:l,className:c,style:d,variant:u,bsPrefix:h}=e,m=Le(e,Ho);return(0,De.jsx)("div",Pe(Pe({ref:t},m),{},{role:"progressbar",className:Oe()(c,"".concat(h,"-bar"),{["bg-".concat(u)]:u,["".concat(h,"-bar-animated")]:l,["".concat(h,"-bar-striped")]:l||o}),style:Pe({width:"".concat(Go(s,n,i),"%")},d),"aria-valuenow":s,"aria-valuemin":n,"aria-valuemax":i,children:a?(0,De.jsx)("span",{className:"visually-hidden",children:r}):r}))}const Ko=s.forwardRef((e,t)=>{let{isChild:n=!1}=e;const i=Pe({min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1},Le(e,Uo));if(i.bsPrefix=He(i.bsPrefix,"progress"),n)return qo(i,t);const{min:r,now:a,max:o,label:l,visuallyHidden:c,striped:d,animated:u,bsPrefix:h,variant:m,className:p,children:f}=i,g=Le(i,Vo);return(0,De.jsx)("div",Pe(Pe({ref:t},g),{},{className:Oe()(p,h),children:f?Wo(f,e=>(0,s.cloneElement)(e,{isChild:!0})):qo({min:r,now:a,max:o,label:l,visuallyHidden:c,striped:d,animated:u,bsPrefix:h,variant:m},t)}))});Ko.displayName="ProgressBar";const Xo=Ko,Yo=e=>{let{task:t,onTaskUpdate:n,showOrderInfo:i=!0,compact:r=!1,enableActions:a=!0}=e;const[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0),[u,h]=(0,s.useState)("started"===t.status);(0,s.useEffect)(()=>{let e;return u&&"started"===t.status&&(e=setInterval(()=>{d(e=>e+1)},1e3)),()=>clearInterval(e)},[u,t.status]),(0,s.useEffect)(()=>{t.active_session&&t.active_session.elapsed_time&&d(t.active_session.elapsed_time),h("started"===t.status)},[t]);const m=async e=>{if(!o){l(!0);try{const s=await La(t.id,e);s.success&&("start"===e?h(!0):"pause"===e||"complete"===e?h(!1):"resume"===e&&h(!0),n&&n(s.data))}catch(s){console.error("Task action failed:",s)}finally{l(!1)}}},p="assigned"===t.status&&!1!==t.can_start,f="started"===t.status,g="paused"===t.status,v="started"===t.status||"paused"===t.status;return(0,De.jsxs)(ps,{className:"task-card mb-3 ".concat(r?"compact":""),style:{borderLeft:"4px solid ".concat((e=>{switch(e){case"assigned":default:return"#6c757d";case"started":return"#28a745";case"paused":return"#ffc107";case"completed":return"#17a2b8";case"approved":return"#007bff"}})(t.status)),transition:"all 0.3s ease",cursor:"pointer"},children:[(0,De.jsxs)(ps.Body,{className:r?"p-3":"p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsx)("h6",{className:"mb-1 fw-bold text-truncate",title:t.title,children:t.title}),i&&t.order_info&&(0,De.jsxs)("small",{className:"text-muted",children:[(0,De.jsx)(di,{className:"me-1"}),t.order_info.order_number," - ",t.order_info.customer_name]})]}),(0,De.jsxs)("div",{className:"d-flex flex-column align-items-end",children:[(0,De.jsx)(Rn,{bg:(x=t.status,{assigned:"secondary",started:"success",paused:"warning",completed:"info",approved:"primary"}[x]||"secondary"),className:"mb-1",children:t.status.toUpperCase()}),t.priority&&(0,De.jsx)(Rn,{style:{backgroundColor:(e=>{switch(e){case"critical":return"#dc3545";case"high":return"#fd7e14";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}})(t.priority)},className:"text-white",children:t.priority.toUpperCase()})]})]}),(0,De.jsxs)(Cn,{className:"mb-3",children:[t.assigned_to&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("small",{className:"text-muted d-block",children:[(0,De.jsx)(Rr,{className:"me-1"}),t.assigned_to.first_name||t.assigned_to.username]})}),t.task_type&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("small",{className:"text-muted d-block",children:["Type: ",t.task_type.name]})})]}),("started"===t.status||"paused"===t.status||c>0)&&(0,De.jsxs)("div",{className:"timer-display mb-3 p-3 bg-light rounded",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Si,{className:"me-2 ".concat(u?"text-success":"text-warning")}),(0,De.jsx)("span",{className:"h5 mb-0 font-monospace",children:(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0")):"".concat(n,":").concat(s.toString().padStart(2,"0"))})(c)})]}),u&&(0,De.jsx)("div",{className:"pulse-indicator bg-success rounded-circle",style:{width:"12px",height:"12px"}})]}),t.estimated_duration&&(0,De.jsx)(Xo,{now:c/(3600*t.estimated_duration)*100,variant:c>3600*t.estimated_duration?"danger":"success",size:"sm",className:"mt-2"})]}),t.description&&!r&&(0,De.jsx)("p",{className:"text-muted small mb-3",children:t.description}),t.notes_count>0&&(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("small",{className:"text-info",children:[(0,De.jsx)(jr,{className:"me-1"}),t.notes_count," note",1!==t.notes_count?"s":""]})}),a&&(0,De.jsxs)(Cn,{className:"g-2",children:[p&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)(Xs,{variant:"success",size:"sm",className:"w-100",onClick:()=>m("start"),disabled:o,children:[(0,De.jsx)(ir,{className:"me-1"}),"Start"]})}),f&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)(Xs,{variant:"warning",size:"sm",className:"w-100",onClick:()=>m("pause"),disabled:o,children:[(0,De.jsx)(tr,{className:"me-1"}),"Pause"]})}),g&&(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)(Xs,{variant:"info",size:"sm",className:"w-100",onClick:()=>m("resume"),disabled:o,children:[(0,De.jsx)(ir,{className:"me-1"}),"Resume"]})}),v&&(0,De.jsx)(Pn,{xs:f?6:12,children:(0,De.jsxs)(Xs,{variant:"primary",size:"sm",className:"w-100",onClick:()=>m("complete"),disabled:o,children:[(0,De.jsx)(yi,{className:"me-1"}),"Complete"]})})]}),t.deadline&&new Date(t.deadline)<new Date&&"completed"!==t.status&&(0,De.jsx)("div",{className:"mt-3 p-2 bg-danger bg-opacity-10 border border-danger rounded",children:(0,De.jsxs)("small",{className:"text-danger",children:[(0,De.jsx)(Ii,{className:"me-1"}),"Overdue: ",new Date(t.deadline).toLocaleDateString()]})})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .task-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n        }\n        \n        .task-card.compact .card-body {\n          padding: 0.75rem;\n        }\n        \n        .timer-display {\n          border: 2px solid #e9ecef;\n        }\n        \n        .pulse-indicator {\n          animation: pulse 1.5s infinite;\n        }\n        \n        @keyframes pulse {\n          0% { opacity: 1; }\n          50% { opacity: 0.5; }\n          100% { opacity: 1; }\n        }\n        \n        .font-monospace {\n          font-family: 'Courier New', monospace;\n        }\n      "})]});var x},Qo=["as","className","type","tooltip"],$o={type:vn().string,tooltip:vn().bool,as:vn().elementType},Jo=s.forwardRef((e,t)=>{let{as:n="div",className:s,type:i="valid",tooltip:r=!1}=e,a=Le(e,Qo);return(0,De.jsx)(n,Pe(Pe({},a),{},{ref:t,className:Oe()(s,"".concat(i,"-").concat(r?"tooltip":"feedback"))}))});Jo.displayName="Feedback",Jo.propTypes=$o;const Zo=Jo,el=s.createContext({}),tl=["id","bsPrefix","className","type","isValid","isInvalid","as"],nl=s.forwardRef((e,t)=>{let{id:n,bsPrefix:i,className:r,type:a="checkbox",isValid:o=!1,isInvalid:l=!1,as:c="input"}=e,d=Le(e,tl);const{controlId:u}=(0,s.useContext)(el);return i=He(i,"form-check-input"),(0,De.jsx)(c,Pe(Pe({},d),{},{ref:t,type:a,id:n||u,className:Oe()(r,i,o&&"is-valid",l&&"is-invalid")}))});nl.displayName="FormCheckInput";const sl=nl,il=["bsPrefix","className","htmlFor"],rl=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,htmlFor:r}=e,a=Le(e,il);const{controlId:o}=(0,s.useContext)(el);return n=He(n,"form-check-label"),(0,De.jsx)("label",Pe(Pe({},a),{},{ref:t,htmlFor:r||o,className:Oe()(i,n)}))});rl.displayName="FormCheckLabel";const al=rl,ol=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],ll=s.forwardRef((e,t)=>{let{id:n,bsPrefix:i,bsSwitchPrefix:r,inline:a=!1,reverse:o=!1,disabled:l=!1,isValid:c=!1,isInvalid:d=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:m,className:p,style:f,title:g="",type:v="checkbox",label:x,children:b,as:y="input"}=e,w=Le(e,ol);i=He(i,"form-check"),r=He(r,"form-switch");const{controlId:j}=(0,s.useContext)(el),_=(0,s.useMemo)(()=>({controlId:n||j}),[j,n]),N=!b&&null!=x&&!1!==x||function(e,t){return s.Children.toArray(e).some(e=>s.isValidElement(e)&&e.type===t)}(b,al),k=(0,De.jsx)(sl,Pe(Pe({},w),{},{type:"switch"===v?"checkbox":v,ref:t,isValid:c,isInvalid:d,disabled:l,as:y}));return(0,De.jsx)(el.Provider,{value:_,children:(0,De.jsx)("div",{style:f,className:Oe()(p,N&&i,a&&"".concat(i,"-inline"),o&&"".concat(i,"-reverse"),"switch"===v&&r),children:b||(0,De.jsxs)(De.Fragment,{children:[k,N&&(0,De.jsx)(al,{title:g,children:x}),h&&(0,De.jsx)(Zo,{type:m,tooltip:u,children:h})]})})})});ll.displayName="FormCheck";const cl=Object.assign(ll,{Input:sl,Label:al});var dl=n(440),ul=n.n(dl);const hl=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],ml=s.forwardRef((e,t)=>{let{bsPrefix:n,type:i,size:r,htmlSize:a,id:o,className:l,isValid:c=!1,isInvalid:d=!1,plaintext:u,readOnly:h,as:m="input"}=e,p=Le(e,hl);const{controlId:f}=(0,s.useContext)(el);return n=He(n,"form-control"),(0,De.jsx)(m,Pe(Pe({},p),{},{type:i,size:a,ref:t,readOnly:h,id:o||f,className:Oe()(l,u?"".concat(n,"-plaintext"):n,r&&"".concat(n,"-").concat(r),"color"===i&&"".concat(n,"-color"),c&&"is-valid",d&&"is-invalid")}))});ml.displayName="FormControl";const pl=Object.assign(ml,{Feedback:Zo}),fl=["className","bsPrefix","as"],gl=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,fl);return s=He(s,"form-floating"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});gl.displayName="FormFloating";const vl=gl,xl=["controlId","as"],bl=s.forwardRef((e,t)=>{let{controlId:n,as:i="div"}=e,r=Le(e,xl);const a=(0,s.useMemo)(()=>({controlId:n}),[n]);return(0,De.jsx)(el.Provider,{value:a,children:(0,De.jsx)(i,Pe(Pe({},r),{},{ref:t}))})});bl.displayName="FormGroup";const yl=bl,wl=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],jl=s.forwardRef((e,t)=>{let{as:n="label",bsPrefix:i,column:r=!1,visuallyHidden:a=!1,className:o,htmlFor:l}=e,c=Le(e,wl);const{controlId:d}=(0,s.useContext)(el);i=He(i,"form-label");let u="col-form-label";"string"===typeof r&&(u="".concat(u," ").concat(u,"-").concat(r));const h=Oe()(o,i,a&&"visually-hidden",r&&u);return l=l||d,r?(0,De.jsx)(Pn,Pe({ref:t,as:"label",className:h,htmlFor:l},c)):(0,De.jsx)(n,Pe({ref:t,className:h,htmlFor:l},c))});jl.displayName="FormLabel";const _l=jl,Nl=["bsPrefix","className","id"],kl=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,id:r}=e,a=Le(e,Nl);const{controlId:o}=(0,s.useContext)(el);return n=He(n,"form-range"),(0,De.jsx)("input",Pe(Pe({},a),{},{type:"range",ref:t,className:Oe()(i,n),id:r||o}))});kl.displayName="FormRange";const Sl=kl,Cl=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Al=s.forwardRef((e,t)=>{let{bsPrefix:n,size:i,htmlSize:r,className:a,isValid:o=!1,isInvalid:l=!1,id:c}=e,d=Le(e,Cl);const{controlId:u}=(0,s.useContext)(el);return n=He(n,"form-select"),(0,De.jsx)("select",Pe(Pe({},d),{},{size:r,ref:t,className:Oe()(a,n,i&&"".concat(n,"-").concat(i),o&&"is-valid",l&&"is-invalid"),id:c||u}))});Al.displayName="FormSelect";const El=Al,Tl=["bsPrefix","className","as","muted"],Pl=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:i="small",muted:r}=e,a=Le(e,Tl);return n=He(n,"form-text"),(0,De.jsx)(i,Pe(Pe({},a),{},{ref:t,className:Oe()(s,n,r&&"text-muted")}))});Pl.displayName="FormText";const Ml=Pl,Ll=s.forwardRef((e,t)=>(0,De.jsx)(cl,Pe(Pe({},e),{},{ref:t,type:"switch"})));Ll.displayName="Switch";const Rl=Object.assign(Ll,{Input:cl.Input,Label:cl.Label}),Ol=["bsPrefix","className","children","controlId","label"],Dl=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,children:i,controlId:r,label:a}=e,o=Le(e,Ol);return n=He(n,"form-floating"),(0,De.jsxs)(yl,Pe(Pe({ref:t,className:Oe()(s,n),controlId:r},o),{},{children:[i,(0,De.jsx)("label",{htmlFor:r,children:a})]}))});Dl.displayName="FloatingLabel";const Il=Dl,Fl=["className","validated","as"],zl={_ref:vn().any,validated:vn().bool,as:vn().elementType},Bl=s.forwardRef((e,t)=>{let{className:n,validated:s,as:i="form"}=e,r=Le(e,Fl);return(0,De.jsx)(i,Pe(Pe({},r),{},{ref:t,className:Oe()(n,s&&"was-validated")}))});Bl.displayName="Form",Bl.propTypes=zl;const Wl=Object.assign(Bl,{Group:yl,Control:pl,Floating:vl,Check:cl,Switch:Rl,Label:_l,Text:Ml,Range:Sl,Select:El,FloatingLabel:Il}),Hl=e=>{var t,n,i;let{show:r,onHide:a,order:o,onTasksAssigned:l}=e;const[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{r&&o&&k()},[r,o]);const k=async()=>{d(!0),j(null);try{const[e,t,n,s]=await Promise.all([_a(o.id),Ea(),ca(),Ta().catch(()=>[])]);h(e),p(t),g(n.filter(e=>"warehouse"===e.role||"admin"===e.role)),x(s),0===b.length&&y([S()])}catch(e){j("Failed to load assignment data: "+e.message)}finally{d(!1)}},S=()=>({id:Date.now()+Math.random(),task_type_id:"",assigned_to_id:"",title:"",description:"",priority:"medium",estimated_duration:2,deadline:""}),C=(e,t,n)=>{y(b.map(s=>s.id===e?Pe(Pe({},s),{},{[t]:n}):s))},A=async e=>{e.preventDefault(),d(!0),j(null);const t=b.filter(e=>e.task_type_id&&e.assigned_to_id&&e.title.trim());if(0===t.length)return j("Please add at least one valid task with type, assignee, and title."),void d(!1);try{const e=await Na(o.id,{tasks:t});N("Successfully assigned ".concat(t.length," tasks to order ").concat(o.order_number)),setTimeout(()=>{l&&l(e),a()},1500)}catch(n){j("Failed to assign tasks: "+n.message)}finally{d(!1)}};return o?(0,De.jsxs)(Bo,{show:r,onHide:a,size:"xl",centered:!0,backdrop:"static",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(kr,{className:"me-2"}),"Assign Tasks to Order ",o.order_number]})}),(0,De.jsx)(Bo.Body,{className:"p-0",children:c&&!u?(0,De.jsxs)("div",{className:"text-center p-5",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-3",children:"Loading order details..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"bg-light p-4 border-bottom",children:[(0,De.jsxs)(Cn,{children:[(0,De.jsxs)(Pn,{md:8,children:[(0,De.jsxs)("h5",{className:"mb-2",children:[(0,De.jsx)(di,{className:"me-2 text-primary"}),o.customer_name||(null===u||void 0===u||null===(t=u.customer)||void 0===t?void 0:t.name)]}),(0,De.jsxs)("div",{className:"d-flex gap-3 mb-2",children:[(0,De.jsx)(Rn,{bg:(e=>{switch(e){case"critical":return"danger";case"high":return"warning";case"medium":return"info";case"low":return"success";default:return"secondary"}})(null===u||void 0===u?void 0:u.urgency),children:(null===u||void 0===u||null===(n=u.urgency)||void 0===n?void 0:n.toUpperCase())||"NORMAL"}),(0,De.jsxs)("small",{className:"text-muted",children:["Due: ",o.delivery_deadline||"No deadline"]}),(0,De.jsxs)("small",{className:"text-muted",children:["Total: R",o.total_amount]})]})]}),(0,De.jsx)(Pn,{md:4,className:"text-end",children:(null===u||void 0===u||null===(i=u.existing_tasks)||void 0===i?void 0:i.length)>0&&(0,De.jsx)("div",{children:(0,De.jsxs)("small",{className:"text-info",children:[u.existing_tasks.length," existing task(s)"]})})})]}),(null===u||void 0===u?void 0:u.items)&&(0,De.jsxs)("div",{className:"mt-3",children:[(0,De.jsx)("h6",{className:"text-muted mb-2",children:"Order Items:"}),(0,De.jsx)("div",{className:"d-flex flex-wrap gap-2",children:u.items.map((e,t)=>(0,De.jsxs)(Rn,{bg:"outline-secondary",className:"p-2",children:[e.quantity,"x ",e.product_name,e.fabric&&" (".concat(e.fabric,")"),e.color&&" - ".concat(e.color)]},t))})]})]}),(0,De.jsxs)("div",{className:"p-4",children:[w&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>j(null),children:w}),_&&(0,De.jsx)(Nn,{variant:"success",children:_}),v.length>0&&(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsx)("h6",{className:"mb-3",children:"Quick Templates:"}),(0,De.jsx)("div",{className:"d-flex gap-2 flex-wrap",children:v.map(e=>{var t;return(0,De.jsxs)(Xs,{variant:"outline-info",size:"sm",onClick:()=>(e=>{const t=e.tasks.map(e=>({id:Date.now()+Math.random(),task_type_id:e.task_type_id,assigned_to_id:"",title:e.title,description:e.description,priority:e.priority||"medium",estimated_duration:e.estimated_duration||2,deadline:""}));y(t)})(e),disabled:c,children:[e.name," (",(null===(t=e.tasks)||void 0===t?void 0:t.length)||0," tasks)"]},e.id)})})]}),(0,De.jsxs)(Wl,{onSubmit:A,children:[(0,De.jsxs)(Cn,{className:"mb-3",children:[(0,De.jsx)(Pn,{children:(0,De.jsx)("h6",{children:"Tasks to Assign:"})}),(0,De.jsx)(Pn,{xs:"auto",children:(0,De.jsxs)(Xs,{variant:"success",size:"sm",onClick:()=>{y([...b,S()])},disabled:c,children:[(0,De.jsx)(rr,{className:"me-1"}),"Add Task"]})})]}),b.map((e,t)=>(0,De.jsxs)(ps,{className:"mb-3 border",children:[(0,De.jsx)(ps.Header,{className:"bg-light py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("span",{className:"fw-bold",children:["Task #",t+1]}),b.length>1&&(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void y(b.filter(e=>e.id!==t));var t},disabled:c,children:(0,De.jsx)(Ar,{})})]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Task Type *"}),(0,De.jsxs)(Wl.Select,{value:e.task_type_id,onChange:t=>C(e.id,"task_type_id",t.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select task type..."}),m.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Assign to Worker *"}),(0,De.jsxs)(Wl.Select,{value:e.assigned_to_id,onChange:t=>C(e.id,"assigned_to_id",t.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select worker..."}),f.map(e=>(0,De.jsxs)("option",{value:e.id,children:[(0,De.jsx)(Rr,{className:"me-1"}),e.first_name||e.username,"admin"===e.role&&" (Admin)"]},e.id))]})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Task Title *"}),(0,De.jsx)(Wl.Control,{type:"text",value:e.title,onChange:t=>C(e.id,"title",t.target.value),placeholder:"e.g., Cut fabric for L-shaped couch",required:!0})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:2,value:e.description,onChange:t=>C(e.id,"description",t.target.value),placeholder:"Additional task details..."})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Priority"}),(0,De.jsxs)(Wl.Select,{value:e.priority,onChange:t=>C(e.id,"priority",t.target.value),children:[(0,De.jsx)("option",{value:"low",children:"Low"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"critical",children:"Critical"})]})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsxs)(Wl.Label,{children:[(0,De.jsx)(Si,{className:"me-1"}),"Est. Hours"]}),(0,De.jsx)(Wl.Control,{type:"number",min:"0.5",max:"24",step:"0.5",value:e.estimated_duration,onChange:t=>C(e.id,"estimated_duration",parseFloat(t.target.value))})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Deadline"}),(0,De.jsx)(Wl.Control,{type:"datetime-local",value:e.deadline,onChange:t=>C(e.id,"deadline",t.target.value)})]})})]})})]},e.id)),b.length>1&&(0,De.jsxs)(Nn,{variant:"info",children:[(0,De.jsx)(Ii,{className:"me-2"}),"Tasks will be created in sequence. Later tasks may depend on earlier ones being completed."]})]})]})]})}),(0,De.jsxs)(Bo.Footer,{className:"bg-light",children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:a,disabled:c,children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",onClick:A,disabled:c||0===b.length,children:c?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Wr,{animation:"border",size:"sm",className:"me-2"}),"Assigning Tasks..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(yi,{className:"me-2"}),"Assign ",b.length," Task",1!==b.length?"s":""]})})]})]}):null},Ul=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],Vl=s.forwardRef((e,t)=>{let{bsPrefix:n,active:s,disabled:i,eventKey:r,className:a,variant:o,action:l,as:c}=e,d=Le(e,Ul);n=He(n,"list-group-item");const[u,h]=Cs(Pe({key:js(r,d.href),active:s},d)),m=it(e=>{if(i)return e.preventDefault(),void e.stopPropagation();u.onClick(e)});i&&void 0===d.tabIndex&&(d.tabIndex=-1,d["aria-disabled"]=!0);const p=c||(l?d.href?"a":"button":"div");return(0,De.jsx)(p,Pe(Pe(Pe({ref:t},d),u),{},{onClick:m,className:Oe()(a,n,h.isActive&&"active",i&&"disabled",o&&"".concat(n,"-").concat(o),l&&"".concat(n,"-action"))}))});Vl.displayName="ListGroupItem";const Gl=Vl,ql=["className","bsPrefix","variant","horizontal","numbered","as"],Kl=s.forwardRef((e,t)=>{const n=Ze(e,{activeKey:"onSelect"}),{className:s,bsPrefix:i,variant:r,horizontal:a,numbered:o,as:l="div"}=n,c=Le(n,ql),d=He(i,"list-group");let u;return a&&(u=!0===a?"horizontal":"horizontal-".concat(a)),(0,De.jsx)(Rs,Pe(Pe({ref:t},c),{},{as:l,className:Oe()(s,d,r&&"".concat(d,"-").concat(r),u&&"".concat(d,"-").concat(u),o&&"".concat(d,"-numbered"))}))});Kl.displayName="ListGroup";const Xl=Object.assign(Kl,{Item:Gl}),Yl=e=>{let{show:t,onHide:n,onStockUpdated:i}=e;const[r,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),[v,x]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[_,N]=(0,s.useState)("in"),[k,S]=(0,s.useState)(""),[C,A]=(0,s.useState)(""),[E,T]=(0,s.useState)(""),[P,M]=(0,s.useState)(""),[L,R]=(0,s.useState)([]);(0,s.useEffect)(()=>{t&&O()},[t]);const O=async()=>{a(!0),p(null);try{const[e,t,n]=await Promise.all([ka(),Yr("/inventory/materials/stock_locations/"),Aa()]);l(e),d(t),h(n)}catch(e){p("Failed to load stock entry data: "+e.message)}finally{a(!1)}};return(0,De.jsxs)(Bo,{show:t,onHide:n,size:"xl",centered:!0,backdrop:"static",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(ui,{className:"me-2"}),"Quick Stock Entry"]})}),(0,De.jsx)(Bo.Body,{className:"p-0",children:r&&0===o.length?(0,De.jsxs)("div",{className:"text-center p-5",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-3",children:"Loading materials..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"p-4 border-bottom bg-light",children:[(0,De.jsx)("h6",{className:"mb-3",children:"Add Stock Movement"}),m&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>p(null),children:m}),f&&(0,De.jsx)(Nn,{variant:"success",children:f}),(0,De.jsx)(Wl,{children:(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Material *"}),(0,De.jsxs)(Wl.Select,{value:v,onChange:e=>x(e.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select material..."}),u.map(e=>{return(0,De.jsx)("optgroup",{label:e.name,children:(t=e.id,o.filter(e=>e.category_id===t)).map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))},e.id);var t})]}),v&&(0,De.jsx)("div",{className:"mt-2",children:(0,De.jsxs)(Rn,{bg:(e=>{switch(e){case"low":return"danger";case"medium":return"warning";case"good":return"success";default:return"secondary"}})((e=>{const t=o.find(t=>t.id===parseInt(e));return t?t.current_stock<=t.minimum_stock?"low":t.current_stock<=1.5*t.minimum_stock?"medium":"good":"unknown"})(v)),children:["Current Stock: ",(e=>{const t=o.find(t=>t.id===parseInt(e));return(null===t||void 0===t?void 0:t.current_stock)||0})(v)]})})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Movement Type *"}),(0,De.jsxs)(Wl.Select,{value:_,onChange:e=>N(e.target.value),required:!0,children:[(0,De.jsx)("option",{value:"in",children:"Stock In (+)"}),(0,De.jsx)("option",{value:"out",children:"Stock Out (-)"})]})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Quantity *"}),(0,De.jsx)(Wl.Control,{type:"number",min:"0",step:"0.01",value:b,onChange:e=>y(e.target.value),placeholder:"0.00",required:!0})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsxs)(Wl.Label,{children:[(0,De.jsx)($i,{className:"me-1"}),"Location *"]}),(0,De.jsxs)(Wl.Select,{value:w,onChange:e=>j(e.target.value),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select location..."}),c.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Reason"}),(0,De.jsxs)(Wl.Select,{value:k,onChange:e=>S(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select reason..."}),(0,De.jsx)("option",{value:"purchase",children:"Purchase/Delivery"}),(0,De.jsx)("option",{value:"production",children:"Production Use"}),(0,De.jsx)("option",{value:"adjustment",children:"Stock Adjustment"}),(0,De.jsx)("option",{value:"damaged",children:"Damaged/Waste"}),(0,De.jsx)("option",{value:"return",children:"Return"}),(0,De.jsx)("option",{value:"transfer",children:"Location Transfer"})]})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsxs)(Wl.Label,{children:[(0,De.jsx)(ri,{className:"me-1"}),"Batch Number"]}),(0,De.jsx)(Wl.Control,{type:"text",value:C,onChange:e=>A(e.target.value),placeholder:"Optional"})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Expiry Date"}),(0,De.jsx)(Wl.Control,{type:"date",value:E,onChange:e=>T(e.target.value)})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Notes"}),(0,De.jsx)(Wl.Control,{type:"text",value:P,onChange:e=>M(e.target.value),placeholder:"Optional notes"})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Xs,{variant:"success",onClick:()=>{var e;if(!v||!b||!w)return void p("Please fill in material, quantity, and location");const t=o.find(e=>e.id===parseInt(v)),n=(null===(e=c.find(e=>e.id===parseInt(w)))||void 0===e?void 0:e.name)||w,s={id:Date.now(),material_id:v,material_name:(null===t||void 0===t?void 0:t.name)||"Unknown",quantity:parseFloat(b),location_id:w,location_name:n,movement_type:_,reason:k,batch_number:C,expiry_date:E,notes:P};R([...L,s]),x(""),y(""),j(""),S(""),A(""),T(""),M("")},disabled:r||!v||!b||!w,children:[(0,De.jsx)(rr,{className:"me-2"}),"Add to Entry List"]})})]})})]}),(0,De.jsxs)("div",{className:"p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,De.jsxs)("h6",{className:"mb-0",children:["Stock Entries to Process (",L.length,")"]}),L.length>0&&(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>R([]),children:"Clear All"})]}),0===L.length?(0,De.jsxs)("div",{className:"text-center py-4 text-muted",children:[(0,De.jsx)(ui,{size:40,className:"mb-3"}),(0,De.jsx)("p",{children:"No stock entries added yet"})]}):(0,De.jsx)(Xl,{children:L.map(e=>(0,De.jsxs)(Xl.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"flex-grow-1",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h6",{className:"mb-1",children:e.material_name}),(0,De.jsxs)("small",{className:"text-muted",children:[(0,De.jsx)($i,{className:"me-1"}),e.location_name]})]}),(0,De.jsxs)("div",{className:"text-end",children:[(0,De.jsxs)(Rn,{bg:"in"===e.movement_type?"success":"warning",children:["in"===e.movement_type?"+":"-",e.quantity]}),e.reason&&(0,De.jsx)("div",{children:(0,De.jsx)("small",{className:"text-muted",children:e.reason})})]})]}),(e.batch_number||e.expiry_date||e.notes)&&(0,De.jsxs)("div",{className:"mt-2",children:[e.batch_number&&(0,De.jsxs)(Rn,{bg:"outline-secondary",className:"me-2",children:["Batch: ",e.batch_number]}),e.expiry_date&&(0,De.jsxs)(Rn,{bg:"outline-info",className:"me-2",children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]}),e.notes&&(0,De.jsxs)("small",{className:"text-muted d-block mt-1",children:["Note: ",e.notes]})]})]}),(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void R(L.filter(e=>e.id!==t));var t},className:"ms-3",children:(0,De.jsx)(Ji,{})})]},e.id))})]})]})}),(0,De.jsxs)(Bo.Footer,{className:"bg-light",children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",onClick:async e=>{if(e.preventDefault(),0!==L.length){a(!0),p(null);try{const e={entries:L.map(e=>({material_id:e.material_id,quantity:"out"===e.movement_type?-e.quantity:e.quantity,location_id:e.location_id,location:e.location_id,movement_type:e.movement_type,reason:e.reason,batch_number:e.batch_number,expiry_date:e.expiry_date,notes:e.notes}))};await(e=>Yr("/inventory/materials/quick_stock_entry/",{method:"POST",data:e}))(e),g("Successfully processed ".concat(L.length," stock entries")),R([]),i&&i(),setTimeout(()=>{g(null),n()},2e3)}catch(t){p("Failed to process stock entries: "+t.message)}finally{a(!1)}}else p("Please add at least one stock entry")},disabled:r||0===L.length,children:r?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Wr,{animation:"border",size:"sm",className:"me-2"}),"Processing..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(yi,{className:"me-2"}),"Process ",L.length," Entries"]})})]})]})},Ql=s.createContext(null);Ql.displayName="InputGroupContext";const $l=Ql,Jl=["className","bsPrefix","as"],Zl=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="span"}=e,r=Le(e,Jl);return s=He(s,"input-group-text"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Zl.displayName="InputGroupText";const ec=Zl,tc=["bsPrefix","size","hasValidation","className","as"],nc=s.forwardRef((e,t)=>{let{bsPrefix:n,size:i,hasValidation:r,className:a,as:o="div"}=e,l=Le(e,tc);n=He(n,"input-group");const c=(0,s.useMemo)(()=>({}),[]);return(0,De.jsx)($l.Provider,{value:c,children:(0,De.jsx)(o,Pe(Pe({ref:t},l),{},{className:Oe()(a,n,i&&"".concat(n,"-").concat(i),r&&"has-validation")}))})});nc.displayName="InputGroup";const sc=Object.assign(nc,{Text:ec,Radio:e=>(0,De.jsx)(ec,{children:(0,De.jsx)(sl,Pe({type:"radio"},e))}),Checkbox:e=>(0,De.jsx)(ec,{children:(0,De.jsx)(sl,Pe({type:"checkbox"},e))})});function ic(e,t,n){const i=(0,s.useRef)(void 0!==e),[r,a]=(0,s.useState)(t),o=void 0!==e,l=i.current;return i.current=o,!o&&l&&r!==t&&a(t),[o?e:r,(0,s.useCallback)(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const[i,...r]=t;let o=null==n?void 0:n(i,...r);return a(i),o},[n])]}const rc={prefix:String(Math.round(1e10*Math.random())),current:0},ac=s.createContext(rc),oc=s.createContext(!1);Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);let lc=new WeakMap;function cc(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,s.useContext)(ac),n=(0,s.useRef)(null);if(null===n.current&&!e){var i,r;let e=null===(r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===r||null===(i=r.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let n=lc.get(e);null==n?lc.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,lc.delete(e))}n.current=++t.current}return n.current}const dc="function"===typeof s.useId?function(e){let t=s.useId(),[n]=(0,s.useState)("function"===typeof s.useSyncExternalStore?s.useSyncExternalStore(mc,uc,hc):(0,s.useContext)(oc)),i=n?"react-aria":"react-aria".concat(rc.prefix);return e||"".concat(i,"-").concat(t)}:function(e){let t=(0,s.useContext)(ac),n=cc(!!e),i="react-aria".concat(t.prefix);return e||"".concat(i,"-").concat(n)};function uc(){return!1}function hc(){return!0}function mc(e){return()=>{}}const pc=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],fc=["activeKey","getControlledId","getControllerId"],gc=["as"];function vc(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function xc(e){let{active:t,eventKey:n,mountOnEnter:i,transition:r,unmountOnExit:a,role:o="tabpanel",onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:m}=e,p=vc(e,pc);const f=(0,s.useContext)(Ns);if(!f)return[Object.assign({},p,{role:o}),{eventKey:n,isActive:t,mountOnEnter:i,transition:r,unmountOnExit:a,onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:m}];const{activeKey:g,getControlledId:v,getControllerId:x}=f,b=vc(f,fc),y=js(n);return[Object.assign({},p,{role:o,id:v(n),"aria-labelledby":x(n)}),{eventKey:n,isActive:null==t&&null!=y?js(g)===y:t,transition:r||b.transition,mountOnEnter:null!=i?i:b.mountOnEnter,unmountOnExit:null!=a?a:b.unmountOnExit,onEnter:l,onEntering:c,onEntered:d,onExit:u,onExiting:h,onExited:m}]}const bc=s.forwardRef((e,t)=>{let{as:n="div"}=e,s=vc(e,gc);const[i,{isActive:r,onEnter:a,onEntering:o,onEntered:l,onExit:c,onExiting:d,onExited:u,mountOnEnter:h,unmountOnExit:m,transition:p=Xa}]=xc(s);return(0,De.jsx)(Ns.Provider,{value:null,children:(0,De.jsx)(_s.Provider,{value:null,children:(0,De.jsx)(p,{in:r,onEnter:a,onEntering:o,onEntered:l,onExit:c,onExiting:d,onExited:u,mountOnEnter:h,unmountOnExit:m,children:(0,De.jsx)(n,Object.assign({},i,{ref:t,hidden:!r,"aria-hidden":!r}))})})})});bc.displayName="TabPanel";const yc=e=>{const{id:t,generateChildId:n,onSelect:i,activeKey:r,defaultActiveKey:a,transition:o,mountOnEnter:l,unmountOnExit:c,children:d}=e,[u,h]=ic(r,a,i),m=dc(t),p=(0,s.useMemo)(()=>n||((e,t)=>m?"".concat(m,"-").concat(t,"-").concat(e):null),[m,n]),f=(0,s.useMemo)(()=>({onSelect:h,activeKey:u,transition:o,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:e=>p(e,"tabpane"),getControllerId:e=>p(e,"tab")}),[h,u,o,l,c,p]);return(0,De.jsx)(Ns.Provider,{value:f,children:(0,De.jsx)(_s.Provider,{value:h||null,children:d})})};yc.Panel=bc;const wc=yc,jc=["className","bsPrefix","as"],_c=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,jc);return s=He(s,"tab-content"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});_c.displayName="TabContent";const Nc=_c;function kc(e){return"boolean"===typeof e?e?fn:Xa:e}const Sc=["bsPrefix","transition"],Cc=["className","as"],Ac=s.forwardRef((e,t)=>{let{bsPrefix:n,transition:s}=e,i=Le(e,Sc);const[r,{isActive:a,onEnter:o,onEntering:l,onEntered:c,onExit:d,onExiting:u,onExited:h,mountOnEnter:m,unmountOnExit:p,transition:f=fn}]=xc(Pe(Pe({},i),{},{transition:kc(s)})),{className:g,as:v="div"}=r,x=Le(r,Cc),b=He(n,"tab-pane");return(0,De.jsx)(Ns.Provider,{value:null,children:(0,De.jsx)(_s.Provider,{value:null,children:(0,De.jsx)(f,{in:a,onEnter:o,onEntering:l,onEntered:c,onExit:d,onExiting:u,onExited:h,mountOnEnter:m,unmountOnExit:p,children:(0,De.jsx)(v,Pe(Pe({},x),{},{ref:t,className:Oe()(g,b,a&&"active")}))})})})});Ac.displayName="TabPane";const Ec=Ac,Tc=["id","onSelect","transition","mountOnEnter","unmountOnExit","variant","children","activeKey"];function Pc(e){let t;return function(e,t){let n=0;s.Children.forEach(e,e=>{s.isValidElement(e)&&t(e,n++)})}(e,e=>{null==t&&(t=e.props.eventKey)}),t}function Mc(e){const{title:t,eventKey:n,disabled:s,tabClassName:i,tabAttrs:r,id:a}=e.props;return null==t?null:(0,De.jsx)(zs,{as:"li",role:"presentation",children:(0,De.jsx)(Hs,Pe(Pe({as:"button",type:"button",eventKey:n,disabled:s,id:a,className:i},r),{},{children:t}))})}const Lc=e=>{const t=Ze(e,{activeKey:"onSelect"}),{id:n,onSelect:s,transition:i,mountOnEnter:r=!1,unmountOnExit:a=!1,variant:o="tabs",children:l,activeKey:c=Pc(l)}=t,d=Le(t,Tc);return(0,De.jsxs)(wc,{id:n,activeKey:c,onSelect:s,transition:kc(i),mountOnEnter:r,unmountOnExit:a,children:[(0,De.jsx)(Gs,Pe(Pe({id:n},d),{},{role:"tablist",as:"ul",variant:o,children:Wo(l,Mc)})),(0,De.jsx)(Nc,{children:Wo(l,e=>{const t=Pe({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,De.jsx)(Ec,Pe({},t))})})]})};Lc.displayName="Tabs";const Rc=Lc,Oc=["transition"],Dc=e=>{let{transition:t}=e,n=Le(e,Oc);return(0,De.jsx)(wc,Pe(Pe({},n),{},{transition:kc(t)}))};Dc.displayName="TabContainer";const Ic=Dc,Fc={eventKey:vn().oneOfType([vn().string,vn().number]),title:vn().node.isRequired,disabled:vn().bool,tabClassName:vn().string,tabAttrs:vn().object},zc=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};zc.propTypes=Fc;const Bc=Object.assign(zc,{Container:Ic,Content:Nc,Pane:Ec}),Wc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const[i,r]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),d=(0,s.useRef)(),u=(0,s.useRef)(!0),h=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||o(!0),c(null);try{const t=await e();u.current&&(r(t),c(null))}catch(n){u.current&&(c(n.message),console.error("Polling error:",n))}finally{u.current&&!t&&o(!1)}};(0,s.useEffect)(()=>(u.current=!0,h(),t>0&&(d.current=setInterval(()=>{h(!0)},t)),()=>{u.current=!1,d.current&&clearInterval(d.current)}),n),(0,s.useEffect)(()=>()=>{u.current=!1,d.current&&clearInterval(d.current)},[]);return{data:i,loading:a,error:l,refresh:()=>{h()},stopPolling:()=>{d.current&&(clearInterval(d.current),d.current=null)},startPolling:()=>{!d.current&&t>0&&(d.current=setInterval(()=>{h(!0)},t))}}},Hc=e=>{let{user:t}=e;const[n,i]=(0,s.useState)("orders"),[r,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[w,j]=(0,s.useState)([]),[_,N]=(0,s.useState)(""),[k,S]=(0,s.useState)("all"),[C,A]=(0,s.useState)("all"),[E,T]=(0,s.useState)("all"),[P,M]=(0,s.useState)("created_at"),[L,R]=(0,s.useState)("desc"),[O,D]=(0,s.useState)(!1),[I,F]=(0,s.useState)(!1),[z,B]=(0,s.useState)(!1),[W,H]=(0,s.useState)(null),[U,V]=(0,s.useState)(null),[G,q]=(0,s.useState)([]),[K,X]=(0,s.useState)({title:"",description:"",task_type_name:"",assigned_worker:"",priority:"medium",estimated_duration:60,deadline:"",materials_needed:[],instructions:"",template_id:null,order_item_id:""}),Y=["Material Preparation","Cutting","Frame Assembly","Foam Installation","Upholstery","Finishing","Quality Check","Packaging","Maintenance","Stock Management"],{data:Q,refresh:$}=Wc(()=>ja(),3e4),{data:J,refresh:Z}=Wc(()=>Pa(),15e3);(0,s.useEffect)(()=>{ee()},[]),(0,s.useEffect)(()=>{Q&&h(Q.orders||[])},[Q]),(0,s.useEffect)(()=>{J&&p(J.tasks||[])},[J]);const ee=async()=>{a(!0);try{const e=("owner"===(null===t||void 0===t?void 0:t.role)||null===t||void 0===t||t.role,"role=warehouse_worker,warehouse"),[n,s]=await Promise.all([Ea("is_active=true"),da(e)]),i=Array.isArray(null===n||void 0===n?void 0:n.task_types)&&n.task_types||Array.isArray(null===n||void 0===n?void 0:n.results)&&n.results||Array.isArray(n)&&n||[];g(i);const r=((null===s||void 0===s?void 0:s.users)&&Array.isArray(s.users)&&s.users||Array.isArray(null===s||void 0===s?void 0:s.results)&&s.results||Array.isArray(s)&&s||[]).map(e=>({id:e.id,first_name:e.first_name||e.username||"",last_name:e.last_name||"",username:e.username||"",role:e.role||""})),a="warehouse"===(null===t||void 0===t?void 0:t.role)?r.filter(e=>"warehouse_worker"===e.role||"warehouse"===e.role):r;x(a);try{const e=await Ta(),t=(null===e||void 0===e?void 0:e.templates)&&Array.isArray(e.templates)&&e.templates||Array.isArray(null===e||void 0===e?void 0:e.results)&&e.results||Array.isArray(e)&&e||[];y(t)}catch(OP){}}catch(e){l("Failed to load initial data: "+e.message)}finally{a(!1)}},te=async e=>{if(window.confirm("Are you sure you want to delete this task?")){a(!0);try{await(e=>Yr("/tasks/tasks/".concat(e,"/"),{method:"DELETE"}))(e),d("Task deleted successfully!"),Z()}catch(t){l("Failed to delete task: "+t.message)}finally{a(!1)}}},ne=async e=>{if(0!==G.length){a(!0);try{await((e,t)=>Yr("/tasks/tasks/bulk_assign/",{method:"POST",data:{task_ids:e,worker_id:t}}))(G,e),d("".concat(G.length," tasks assigned successfully!")),q([]),B(!1),Z()}catch(t){l("Failed to assign tasks: "+t.message)}finally{a(!1)}}},se=()=>{X({title:"",description:"",task_type_name:"",assigned_worker:"",priority:"medium",estimated_duration:60,deadline:"",materials_needed:[],instructions:"",template_id:null,order_item_id:""}),H(null),V(null),j([])},ie=e=>({critical:"danger",high:"warning",medium:"info",low:"success"}[e]||"secondary"),re=u.filter(e=>{var t,n;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(_.toLowerCase()))||(null===(n=e.customer_name)||void 0===n?void 0:n.toLowerCase().includes(_.toLowerCase()))}),ae=m.filter(e=>{var t,n,s;const i=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(_.toLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(_.toLowerCase())),r="all"===k||e.status===k,a="all"===C||e.priority===C,o="all"===E||(null===(s=e.assigned_worker)||void 0===s?void 0:s.id.toString())===E;return i&&r&&a&&o});return r&&0===u.length?(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading task management..."})]})}):(0,De.jsxs)(Xe,{fluid:!0,className:"task-management p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("h2",{className:"mb-1",children:[(0,De.jsx)(kr,{className:"me-2 text-primary"}),"Task Management"]}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Create, assign, and manage warehouse tasks within orders"})]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:()=>{$(),Z()},children:[(0,De.jsx)(_r,{className:"me-2"}),"Refresh"]}),G.length>0&&(0,De.jsxs)(Xs,{variant:"success",onClick:()=>B(!0),children:[(0,De.jsx)(Or,{className:"me-2"}),"Bulk Assign (",G.length,")"]})]})]}),o&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>l(null),children:o}),c&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>d(null),children:c}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{children:[(0,De.jsxs)(Pn,{md:4,children:[(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"Search orders or tasks...",value:_,onChange:e=>N(e.target.value)})]}),0===f.length&&(0,De.jsx)("div",{className:"small text-muted mt-2",children:"No task types found. Ensure backend returns /api/tasks/task_types/?is_active=true."})]}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{value:k,onChange:e=>S(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Status"}),(0,De.jsx)("option",{value:"assigned",children:"Assigned"}),(0,De.jsx)("option",{value:"started",children:"Started"}),(0,De.jsx)("option",{value:"paused",children:"Paused"}),(0,De.jsx)("option",{value:"completed",children:"Completed"}),(0,De.jsx)("option",{value:"approved",children:"Approved"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{value:C,onChange:e=>A(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Priority"}),(0,De.jsx)("option",{value:"critical",children:"Critical"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"low",children:"Low"})]})}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsxs)(Wl.Select,{value:E,onChange:e=>T(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Workers"}),v.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]}),0===v.length&&(0,De.jsx)("div",{className:"small text-muted mt-2",children:"No workers found. Managers see warehouse workers only."})]}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{value:"".concat(P,"-").concat(L),onChange:e=>{const[t,n]=e.target.value.split("-");M(t),R(n)},children:[(0,De.jsx)("option",{value:"created_at-desc",children:"Newest First"}),(0,De.jsx)("option",{value:"created_at-asc",children:"Oldest First"}),(0,De.jsx)("option",{value:"priority-desc",children:"High Priority First"}),(0,De.jsx)("option",{value:"deadline-asc",children:"Deadline Soon"})]})})]})})}),(0,De.jsxs)(Rc,{activeKey:n,onSelect:i,className:"mb-4",children:[(0,De.jsxs)(Bc,{eventKey:"orders",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(di,{className:"me-2"}),"Orders (",re.length,")"]}),children:[(0,De.jsx)(Cn,{children:re.map(e=>{var t,n,s,i,r,a,o,l;return(0,De.jsx)(Pn,{lg:6,xl:4,className:"mb-4",children:(0,De.jsxs)(ps,{className:"h-100 shadow-sm order-card",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h6",{className:"mb-0 fw-bold",children:e.order_number}),(0,De.jsx)("small",{className:"text-muted",children:e.customer_name})]}),(0,De.jsx)(Rn,{bg:ie(e.urgency),children:null===(t=e.urgency)||void 0===t?void 0:t.toUpperCase()})]}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("small",{className:"text-muted",children:"Task Progress"}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,De.jsxs)("span",{className:"small",children:[(null===(n=e.task_counts)||void 0===n?void 0:n.completed)||0," / ",(null===(s=e.task_counts)||void 0===s?void 0:s.total)||0," completed"]}),(0,De.jsxs)("span",{className:"small text-muted",children:[(null===(i=e.task_counts)||void 0===i?void 0:i.total)>0?Math.round(((null===(r=e.task_counts)||void 0===r?void 0:r.completed)||0)/e.task_counts.total*100):0,"%"]})]}),(0,De.jsx)(Xo,{now:(null===(a=e.task_counts)||void 0===a?void 0:a.total)>0?((null===(o=e.task_counts)||void 0===o?void 0:o.completed)||0)/e.task_counts.total*100:0,variant:"success",style:{height:"6px"}})]}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)(Cn,{className:"g-2 text-center",children:[(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"border rounded p-2",children:[(0,De.jsx)("div",{className:"fw-bold text-primary",children:e.items_count}),(0,De.jsx)("small",{className:"text-muted",children:"Items"})]})}),(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"border rounded p-2",children:[(0,De.jsxs)("div",{className:"fw-bold text-success",children:["R",null===(l=e.total_amount)||void 0===l?void 0:l.toFixed(2)]}),(0,De.jsx)("small",{className:"text-muted",children:"Value"})]})})]})}),(0,De.jsxs)("div",{className:"d-grid gap-2",children:[(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>(e=>{H(e),j([]),_a(e.id).then(e=>{const t=Array.isArray(null===e||void 0===e?void 0:e.items)?e.items:Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:[];j(t)}).catch(()=>j([])),D(!0)})(e),className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(rr,{className:"me-2"}),"Create Task"]}),(0,De.jsxs)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>{},className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(zi,{className:"me-2"}),"View Details"]})]})]})]})},e.id)})}),0===re.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(di,{size:60,className:"text-muted mb-3"}),(0,De.jsx)("h4",{className:"text-muted mb-2",children:"No orders found"}),(0,De.jsx)("p",{className:"text-muted",children:_?"Try adjusting your search criteria.":"No orders available for task creation."})]})]}),(0,De.jsx)(Bc,{eventKey:"tasks",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(kr,{className:"me-2"}),"All Tasks (",ae.length,")"]}),children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{width:"30",children:(0,De.jsx)(Wl.Check,{type:"checkbox",onChange:e=>{e.target.checked?q(ae.map(e=>e.id)):q([])},checked:G.length===ae.length&&ae.length>0})}),(0,De.jsx)("th",{children:"Task"}),(0,De.jsx)("th",{children:"Order"}),(0,De.jsx)("th",{children:"Worker"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Priority"}),(0,De.jsx)("th",{children:"Progress"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:ae.map(e=>{var t,n,s,i,r;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsx)(Wl.Check,{type:"checkbox",checked:G.includes(e.id),onChange:t=>{t.target.checked?q(t=>[...t,e.id]):q(t=>t.filter(t=>t!==e.id))}})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsx)("small",{className:"text-muted d-block",children:e.description}),e.order_item_details&&(0,De.jsxs)("small",{className:"text-muted",children:[e.order_item_details.product_name,e.order_item_details.fabric_name?" \u2022 ".concat(e.order_item_details.fabric_name):"",e.order_item_details.color_name?" \u2022 ".concat(e.order_item_details.color_name):""," \u2022 Qty ".concat(e.order_item_details.quantity)]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:null===(t=e.order)||void 0===t?void 0:t.order_number}),(0,De.jsx)("small",{className:"text-muted",children:null===(n=e.order)||void 0===n?void 0:n.customer_name})]})}),(0,De.jsx)("td",{children:e.assigned_worker?(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Rr,{className:"me-2 text-muted"}),(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"fw-semibold",children:[e.assigned_worker.first_name," ",e.assigned_worker.last_name]}),(0,De.jsx)("small",{className:"text-muted",children:e.assigned_worker.role})]})]}):(0,De.jsx)(Rn,{bg:"light",text:"dark",children:"Unassigned"})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:(r=e.status,{assigned:"secondary",started:"primary",paused:"warning",completed:"success",approved:"info",rejected:"danger"}[r]||"secondary"),children:null===(s=e.status)||void 0===s?void 0:s.replace("_"," ").toUpperCase()})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:ie(e.priority),children:null===(i=e.priority)||void 0===i?void 0:i.toUpperCase()})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"progress me-2",style:{width:"60px",height:"6px"},children:(0,De.jsx)("div",{className:"progress-bar bg-success",style:{width:"".concat(e.progress_percentage||0,"%")}})}),(0,De.jsxs)("small",{className:"text-muted",children:[e.progress_percentage||0,"%"]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>(e=>{var t,n;V(e),X({title:e.title||"",description:e.description||"",task_type_name:(null===(t=e.task_type)||void 0===t?void 0:t.name)||"",assigned_worker:(null===(n=e.assigned_worker)||void 0===n?void 0:n.id)||"",priority:e.priority||"medium",estimated_duration:e.estimated_duration||60,deadline:e.deadline||"",materials_needed:e.materials_needed?e.materials_needed.split(","):[],instructions:e.instructions||"",template_id:null}),F(!0)})(e),children:(0,De.jsx)(Li,{})}),(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>te(e.id),children:(0,De.jsx)(Ar,{})})]})})]},e.id)})})]}),0===ae.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(kr,{size:60,className:"text-muted mb-3"}),(0,De.jsx)("h4",{className:"text-muted mb-2",children:"No tasks found"}),(0,De.jsx)("p",{className:"text-muted",children:_?"Try adjusting your search criteria.":"No tasks have been created yet."})]})]})})})]}),(0,De.jsxs)(Bo,{show:O,onHide:()=>D(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(rr,{className:"me-2"}),"Create Task in Order: ",null===W||void 0===W?void 0:W.order_number]})}),(0,De.jsxs)(Wl,{onSubmit:async e=>{if(e.preventDefault(),W){a(!0);try{const e={title:K.title,description:K.description,task_type_name:K.task_type_name||void 0,assigned_to_id:K.assigned_worker?Number(K.assigned_worker):void 0,priority:K.priority,estimated_duration:parseInt(K.estimated_duration),due_date:K.deadline?new Date(K.deadline).toISOString():null,instructions:K.instructions};!e.task_type_name&&K.task_type&&(e.task_type_id=Number(K.task_type)),K.order_item_id&&(e.order_item_id=Number(K.order_item_id)),await((e,t)=>Yr("/orders/".concat(e,"/create_task/"),{method:"POST",data:t}))(W.id,e),d("Task created successfully!"),D(!1),se(),$(),Z()}catch(t){l("Failed to create task: "+t.message)}finally{a(!1)}}},children:[(0,De.jsxs)(Bo.Body,{children:[b.length>0&&(0,De.jsx)(Cn,{className:"mb-3",children:(0,De.jsxs)(Pn,{children:[(0,De.jsx)(Wl.Label,{children:"Use Template (Optional)"}),(0,De.jsxs)(Wl.Select,{value:K.template_id||"",onChange:e=>e.target.value&&(e=>{const t=b.find(t=>t.id===e);t&&X(n=>Pe(Pe({},n),{},{title:t.title,description:t.description,task_type_name:t.task_type_name||"",priority:t.priority,estimated_duration:t.estimated_duration,instructions:t.instructions,materials_needed:t.materials_needed?t.materials_needed.split(","):[],template_id:e}))})(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select a template..."}),b.map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]})}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Task Title *"}),(0,De.jsx)(Wl.Control,{type:"text",value:K.title,onChange:e=>X(t=>Pe(Pe({},t),{},{title:e.target.value})),required:!0,placeholder:"Enter task title"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Task Type *"}),(0,De.jsxs)(Wl.Select,{value:K.task_type_name,onChange:e=>X(t=>Pe(Pe({},t),{},{task_type_name:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select task type..."}),(f.length>0?f.map(e=>e.name):Y).map(e=>(0,De.jsx)("option",{value:e,children:e},e))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Order Item (optional)"}),(0,De.jsxs)(Wl.Select,{value:K.order_item_id,onChange:e=>X(t=>Pe(Pe({},t),{},{order_item_id:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"No specific item"}),w.map(e=>{var t;return(0,De.jsx)("option",{value:e.id,children:"".concat(e.product_name||(null===(t=e.product)||void 0===t?void 0:t.name)||"Item").concat(e.fabric_name?" \u2022 "+e.fabric_name:"").concat(e.color_name?" \u2022 "+e.color_name:""," \u2022 Qty ").concat(e.quantity)},e.id)})]})]})})]}),(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,value:K.description,onChange:e=>X(t=>Pe(Pe({},t),{},{description:e.target.value})),placeholder:"Describe what needs to be done..."})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Assign to Worker"}),(0,De.jsxs)(Wl.Select,{value:K.assigned_worker,onChange:e=>X(t=>Pe(Pe({},t),{},{assigned_worker:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Assign later..."}),v.map(e=>(0,De.jsxs)("option",{value:e.id,children:[(e.first_name||e.username)+(e.last_name?" "+e.last_name:"")," (",e.role,")"]},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Priority"}),(0,De.jsxs)(Wl.Select,{value:K.priority,onChange:e=>X(t=>Pe(Pe({},t),{},{priority:e.target.value})),children:[(0,De.jsx)("option",{value:"low",children:"Low"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"critical",children:"Critical"})]})]})})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Estimated Duration (minutes)"}),(0,De.jsx)(Wl.Control,{type:"number",min:"15",max:"480",value:K.estimated_duration,onChange:e=>X(t=>Pe(Pe({},t),{},{estimated_duration:e.target.value}))})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Deadline (Optional)"}),(0,De.jsx)(Wl.Control,{type:"datetime-local",value:K.deadline,onChange:e=>X(t=>Pe(Pe({},t),{},{deadline:e.target.value}))})]})})]}),(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Special Instructions"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:2,value:K.instructions,onChange:e=>X(t=>Pe(Pe({},t),{},{instructions:e.target.value})),placeholder:"Any special instructions or notes..."})]})]}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>D(!1),children:"Cancel"}),(0,De.jsxs)(Xs,{variant:"primary",type:"submit",disabled:r,children:[r?(0,De.jsx)(Wr,{animation:"border",size:"sm",className:"me-2"}):(0,De.jsx)(rr,{className:"me-2"}),"Create Task"]})]})]})]}),(0,De.jsxs)(Bo,{show:I,onHide:()=>F(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(Li,{className:"me-2"}),"Edit Task: ",null===U||void 0===U?void 0:U.title]})}),(0,De.jsxs)(Wl,{onSubmit:async e=>{if(e.preventDefault(),U){a(!0);try{await(t=U.id,n=K,Yr("/tasks/tasks/".concat(t,"/"),{method:"PUT",data:n})),d("Task updated successfully!"),F(!1),se(),Z()}catch(s){l("Failed to update task: "+s.message)}finally{a(!1)}var t,n}},children:[(0,De.jsxs)(Bo.Body,{children:[(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Task Title *"}),(0,De.jsx)(Wl.Control,{type:"text",value:K.title,onChange:e=>X(t=>Pe(Pe({},t),{},{title:e.target.value})),required:!0})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Task Type *"}),(0,De.jsxs)(Wl.Select,{value:K.task_type_name,onChange:e=>X(t=>Pe(Pe({},t),{},{task_type_name:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select task type..."}),(f.length>0?f.map(e=>e.name):Y).map(e=>(0,De.jsx)("option",{value:e,children:e},e))]})]})})]}),(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,value:K.description,onChange:e=>X(t=>Pe(Pe({},t),{},{description:e.target.value}))})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Assign to Worker"}),(0,De.jsxs)(Wl.Select,{value:K.assigned_worker,onChange:e=>X(t=>Pe(Pe({},t),{},{assigned_worker:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Unassigned"}),v.map(e=>(0,De.jsx)("option",{value:e.id,children:(e.first_name||e.username)+(e.last_name?" "+e.last_name:"")},e.id))]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Priority"}),(0,De.jsxs)(Wl.Select,{value:K.priority,onChange:e=>X(t=>Pe(Pe({},t),{},{priority:e.target.value})),children:[(0,De.jsx)("option",{value:"low",children:"Low"}),(0,De.jsx)("option",{value:"medium",children:"Medium"}),(0,De.jsx)("option",{value:"high",children:"High"}),(0,De.jsx)("option",{value:"critical",children:"Critical"})]})]})})]})]}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>F(!1),children:"Cancel"}),(0,De.jsxs)(Xs,{variant:"primary",type:"submit",disabled:r,children:[r?(0,De.jsx)(Wr,{animation:"border",size:"sm",className:"me-2"}):(0,De.jsx)(yi,{className:"me-2"}),"Update Task"]})]})]})]}),(0,De.jsxs)(Bo,{show:z,onHide:()=>B(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(Or,{className:"me-2"}),"Bulk Assign Tasks (",G.length,")"]})}),(0,De.jsxs)(Bo.Body,{children:[(0,De.jsxs)("p",{children:["Select a worker to assign ",G.length," selected tasks:"]}),(0,De.jsxs)(Wl.Select,{onChange:e=>e.target.value&&ne(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select worker..."}),v.map(e=>(0,De.jsxs)("option",{value:e.id,children:[(e.first_name||e.username)+(e.last_name?" "+e.last_name:"")," (",e.role,")"]},e.id))]})]}),(0,De.jsx)(Bo.Footer,{children:(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>B(!1),children:"Cancel"})})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .order-card {\n          transition: all 0.3s ease;\n          border: 1px solid #e9ecef;\n        }\n        \n        .order-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;\n        }\n        \n        .progress {\n          border-radius: 10px;\n        }\n        \n        .progress-bar {\n          border-radius: 10px;\n        }\n        \n        .table th {\n          border-top: none;\n          font-weight: 600;\n          color: #495057;\n        }\n        \n        .table td {\n          vertical-align: middle;\n        }\n        \n        @media (max-width: 768px) {\n          .task-management .d-flex.gap-2 {\n            flex-direction: column;\n            gap: 0.5rem !important;\n          }\n        }\n      "})]})},Uc=(0,s.createContext)(),Vc=(e,t)=>{switch(t.type){case"SET_ORDERS":return Pe(Pe({},e),{},{orders:t.payload});case"SET_TASKS":return Pe(Pe({},e),{},{tasks:t.payload});case"SET_DASHBOARD_DATA":return Pe(Pe({},e),{},{dashboardData:t.payload});case"SET_INVENTORY_DATA":return Pe(Pe({},e),{},{inventoryData:t.payload});case"SET_NOTIFICATIONS":return Pe(Pe({},e),{},{notifications:t.payload});case"UPDATE_TASK":return Pe(Pe({},e),{},{tasks:e.tasks.map(e=>Pe(Pe({},e),{},{tasks:e.tasks.map(e=>e.id===t.payload.id?Pe(Pe({},e),t.payload):e)}))});case"UPDATE_ORDER":return Pe(Pe({},e),{},{orders:e.orders.map(e=>e.id===t.payload.id?Pe(Pe({},e),t.payload):e)});case"ADD_NOTIFICATION":return Pe(Pe({},e),{},{notifications:[t.payload,...e.notifications.slice(0,9)]});case"MARK_NOTIFICATION_READ":return Pe(Pe({},e),{},{notifications:e.notifications.map(e=>e.id===t.payload?Pe(Pe({},e),{},{is_read:!0}):e)});case"SET_LOADING":return Pe(Pe({},e),{},{loading:t.payload});case"SET_ERROR":return Pe(Pe({},e),{},{error:t.payload});case"CLEAR_ERROR":return Pe(Pe({},e),{},{error:null});default:return e}},Gc=e=>{let{children:t}=e;const[n,i]=(0,s.useReducer)(Vc,{orders:[],tasks:[],dashboardData:null,inventoryData:null,notifications:[],loading:!1,error:null});return(0,De.jsx)(Uc.Provider,{value:Pe(Pe({},n),{},{setOrders:e=>{i({type:"SET_ORDERS",payload:e})},setTasks:e=>{i({type:"SET_TASKS",payload:e})},setDashboardData:e=>{i({type:"SET_DASHBOARD_DATA",payload:e})},setInventoryData:e=>{i({type:"SET_INVENTORY_DATA",payload:e})},setNotifications:e=>{i({type:"SET_NOTIFICATIONS",payload:e})},updateTask:e=>{i({type:"UPDATE_TASK",payload:e})},updateOrder:e=>{i({type:"UPDATE_ORDER",payload:e})},addNotification:e=>{i({type:"ADD_NOTIFICATION",payload:e})},markNotificationRead:e=>{i({type:"MARK_NOTIFICATION_READ",payload:e})},setLoading:e=>{i({type:"SET_LOADING",payload:e})},setError:e=>{i({type:"SET_ERROR",payload:e})},clearError:()=>{i({type:"CLEAR_ERROR"})}}),children:t})},qc=()=>{const[e,t]=(0,s.useState)(!1),{updateTask:n,addNotification:i}=(()=>{const e=(0,s.useContext)(Uc);if(!e)throw new Error("useWarehouse must be used within a WarehouseProvider");return e})(),r=async function(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t(!0);try{const t=await ba(e,s,{reason:r});n({id:e,status:{start:"started",pause:"paused",resume:"started",complete:"completed"}[s]||t.new_status,is_running:"start"===s||"resume"===s,time_elapsed:t.time_elapsed||0,can_start:void 0!==t.can_start&&t.can_start,can_pause:void 0!==t.can_pause&&t.can_pause,can_complete:void 0!==t.can_complete&&t.can_complete}),i({id:Date.now(),message:"Task ".concat(s,"ed successfully"),type:"success",is_read:!1,created_at:(new Date).toISOString()});try{window.dispatchEvent(new CustomEvent("oox:refresh"))}catch(a){}return{success:!0,data:t}}catch(o){return i({id:Date.now(),message:"Failed to ".concat(s," task: ").concat(o.message),type:"error",is_read:!1,created_at:(new Date).toISOString()}),{success:!1,error:o.message}}finally{t(!1)}};return{loading:e,startTask:e=>r(e,"start"),pauseTask:e=>r(e,"pause"),resumeTask:e=>r(e,"resume"),completeTask:(e,t)=>r(e,"complete",t),approveTask:e=>r(e,"approve"),rejectTask:(e,t)=>r(e,"reject",t),performAction:r}},Kc=()=>{const[e,t]=(0,s.useState)(new Set),[n,i]=(0,s.useState)("all"),{data:r,loading:a,error:o,refresh:l}=Wc(()=>Yr("/tasks/dashboard/tasks_by_order/"),15e3),{loading:c}=qc(),d=e=>{l()},u=e=>({critical:"danger",high:"warning",medium:"info",low:"success"}[e]||"secondary");if(a)return(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading your tasks..."})]})});if(o)return(0,De.jsxs)(Nn,{variant:"danger",className:"m-4",children:[(0,De.jsx)(Nn.Heading,{children:"Error Loading Tasks"}),(0,De.jsx)("p",{children:o}),(0,De.jsxs)(Xs,{variant:"outline-danger",onClick:l,children:[(0,De.jsx)(_r,{className:"me-2"}),"Retry"]})]});const{orders_with_tasks:h=[],summary:m={}}=r||{},p=(f=h,"all"===n?f:f.filter(e=>e.tasks.filter(e=>e.status===n).length>0).map(e=>Pe(Pe({},e),{},{tasks:e.tasks.filter(e=>e.status===n)})));var f;return(0,De.jsxs)("div",{className:"worker-order-tasks p-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("h2",{className:"mb-1",children:[(0,De.jsx)(kr,{className:"me-2 text-primary"}),"My Tasks by Order"]}),(0,De.jsxs)("p",{className:"text-muted mb-0",children:[m.total_orders," orders \u2022 ",m.total_tasks," tasks \u2022 ",m.active_tasks," active"]})]}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:l,disabled:a||c,children:[(0,De.jsx)(_r,{className:"me-2 ".concat(a||c?"fa-spin":"")}),"Refresh"]})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-primary mb-1",children:m.total_tasks||0}),(0,De.jsx)("small",{className:"text-muted",children:"Total Tasks"})]})})}),(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm bg-success-subtle",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-success mb-1",children:m.active_tasks||0}),(0,De.jsx)("small",{className:"text-success",children:"Active Tasks"})]})})}),(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm bg-warning-subtle",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-warning mb-1",children:p.reduce((e,t)=>e+t.tasks.filter(e=>"assigned"===e.status).length,0)}),(0,De.jsx)("small",{className:"text-warning",children:"Pending"})]})})}),(0,De.jsx)(Pn,{md:3,sm:6,className:"mb-3",children:(0,De.jsx)(ps,{className:"text-center h-100 border-0 shadow-sm bg-info-subtle",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-info mb-1",children:p.reduce((e,t)=>e+t.tasks.filter(e=>"completed"===e.status).length,0)}),(0,De.jsx)("small",{className:"text-info",children:"Completed"})]})})})]}),(0,De.jsx)("div",{className:"mb-4",children:(0,De.jsxs)("div",{className:"btn-group",role:"group",children:[(0,De.jsx)(Xs,{variant:"all"===n?"primary":"outline-primary",onClick:()=>i("all"),children:"All Tasks"}),(0,De.jsx)(Xs,{variant:"assigned"===n?"secondary":"outline-secondary",onClick:()=>i("assigned"),children:"Assigned"}),(0,De.jsx)(Xs,{variant:"started"===n?"success":"outline-success",onClick:()=>i("started"),children:"In Progress"}),(0,De.jsx)(Xs,{variant:"paused"===n?"warning":"outline-warning",onClick:()=>i("paused"),children:"Paused"}),(0,De.jsx)(Xs,{variant:"completed"===n?"info":"outline-info",onClick:()=>i("completed"),children:"Completed"})]})}),(0,De.jsx)("div",{className:"orders-list",children:p.map(n=>{var s;const i=e.has(n.order_info.id),r=n.tasks.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{});var a;return(0,De.jsxs)(ps,{className:"mb-4 border-start border-4 ".concat((a=n.order_info.urgency,{critical:"bg-danger-subtle border-danger",high:"bg-warning-subtle border-warning",medium:"bg-info-subtle border-info",low:"bg-success-subtle border-success"}[a]||"bg-light border-secondary")," order-card"),children:[(0,De.jsxs)(ps.Header,{className:"cursor-pointer",onClick:()=>(n=>{const s=new Set(e);s.has(n)?s.delete(n):s.add(n),t(s)})(n.order_info.id),style:{cursor:"pointer"},children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(di,{className:"me-2 text-primary"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1 fw-bold",children:n.order_info.order_number}),(0,De.jsx)("p",{className:"mb-0 text-muted",children:n.order_info.customer_name})]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,De.jsxs)("div",{className:"text-end",children:[(0,De.jsx)(Rn,{bg:u(n.order_info.urgency),className:"mb-1",children:null===(s=n.order_info.urgency)||void 0===s?void 0:s.toUpperCase()}),(0,De.jsx)("div",{children:(0,De.jsxs)("small",{className:"text-muted",children:["Due: ",n.order_info.delivery_deadline||"No deadline"]})})]}),(0,De.jsxs)("div",{className:"text-end",children:[(0,De.jsxs)("div",{className:"fw-bold text-primary",children:[n.tasks.length," task",1!==n.tasks.length?"s":""]}),(0,De.jsx)("small",{className:"text-muted",children:i?"\u25bc Click to collapse":"\u25b6 Click to expand"})]})]})]}),(0,De.jsx)("div",{className:"mt-2",children:(0,De.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[r.assigned>0&&(0,De.jsxs)(Rn,{bg:"secondary",className:"small",children:[r.assigned," Assigned"]}),r.started>0&&(0,De.jsxs)(Rn,{bg:"success",className:"small",children:[r.started," In Progress"]}),r.paused>0&&(0,De.jsxs)(Rn,{bg:"warning",className:"small",children:[r.paused," Paused"]}),r.completed>0&&(0,De.jsxs)(Rn,{bg:"info",className:"small",children:[r.completed," Completed"]})]})})]}),i&&(0,De.jsx)(ps.Body,{className:"bg-light",children:(0,De.jsx)(Cn,{children:n.tasks.map(e=>(0,De.jsx)(Pn,{lg:6,className:"mb-3",children:(0,De.jsx)(Yo,{task:e,onTaskUpdate:d,showOrderInfo:!1,compact:!0,enableActions:!0})},e.id))})})]},n.order_info.id)})}),0===p.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(kr,{size:60,className:"text-muted mb-3"}),(0,De.jsx)("h4",{className:"text-muted mb-2",children:"No tasks found"}),(0,De.jsx)("p",{className:"text-muted",children:"all"===n?"You don't have any tasks assigned to you at the moment.":'No tasks with "'.concat(n,'" status found.')}),"all"!==n&&(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>i("all"),children:"Show All Tasks"})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .order-card {\n          transition: all 0.3s ease;\n        }\n        \n        .order-card:hover {\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;\n        }\n        \n        .cursor-pointer:hover {\n          background-color: rgba(0,0,0,0.02);\n        }\n        \n        .btn-group .btn {\n          font-size: 0.9rem;\n        }\n        \n        @media (max-width: 768px) {\n          .btn-group {\n            flex-wrap: wrap;\n            gap: 0.25rem;\n          }\n          \n          .btn-group .btn {\n            font-size: 0.8rem;\n            padding: 0.375rem 0.5rem;\n          }\n          \n          .order-card .card-header {\n            padding: 1rem;\n          }\n          \n          .order-card .card-header h5 {\n            font-size: 1.1rem;\n          }\n        }\n      "})]})},Xc=e=>{var t,n;let{user:i,onLogout:r}=e;const a=Z();let o=null;try{o=te()}catch(u){}const l=(null===(t=o)||void 0===t?void 0:t.user)||i,[c,d]=(null===(n=o)||void 0===n||n.onLogout,(0,s.useState)(!0)),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(new Date),[v,x]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[w,j]=(0,s.useState)([]),[_,N]=(0,s.useState)([]),[k,S]=(0,s.useState)([]),[C,A]=(0,s.useState)(null),[E,T]=(0,s.useState)([]),[P,M]=(0,s.useState)(()=>(console.log("Setting default tab for role:",null===l||void 0===l?void 0:l.role),"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?"my-tasks":(["owner","admin","warehouse"].includes(null===l||void 0===l?void 0:l.role),"overview")));(0,s.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("tab");e&&M(e)},[]);const[L,R]=(0,s.useState)(null),[O,D]=(0,s.useState)(!1),[I,F]=(0,s.useState)(!1),[z,B]=(0,s.useState)(!1),[W,H]=(0,s.useState)("all"),[U,V]=(0,s.useState)("all");(0,s.useEffect)(()=>{const e=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{const e=setInterval(()=>{X(!0)},3e4);return()=>clearInterval(e)},[l]),(0,s.useEffect)(()=>{l&&X()},[l]),(0,s.useEffect)(()=>{const e=()=>X(!0);return window.addEventListener("oox:refresh",e),()=>window.removeEventListener("oox:refresh",e)},[l]);const G=()=>(console.log("Current user role:",null===l||void 0===l?void 0:l.role),["owner","admin","warehouse"].includes(null===l||void 0===l?void 0:l.role)),q=()=>"owner"===(null===l||void 0===l?void 0:l.role)?"/owner/orders":"admin"===(null===l||void 0===l?void 0:l.role)?"/admin/orders":"warehouse"===(null===l||void 0===l?void 0:l.role)||"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?"/warehouse/orders":"/",K=()=>["owner","admin","warehouse_worker","warehouse"].includes(null===l||void 0===l?void 0:l.role),X=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||d(!0),h(null);try{const e=await Ma(null===l||void 0===l?void 0:l.role);y(e),"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?await Y():G()&&await Q(),await $(),K()&&await J(),x((new Date).toISOString())}catch(t){h("Failed to load dashboard data: "+t.message)}finally{e||d(!1)}},Y=async()=>{try{const e=await ya();N(e.tasks||[])}catch(e){console.error("Failed to load worker dashboard:",e)}},Q=async()=>{try{const[e,t]=await Promise.all([ja(),wa()]);j(e.orders||[]),N(t.tasks||[])}catch(e){console.error("Failed to load supervisor dashboard:",e)}},$=async()=>{try{const e=await(async()=>{const e=await Yr("/tasks/notifications/");return(Array.isArray(e)?e:Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:[]).filter(e=>!e.is_read)})();S(e.notifications||[])}catch(e){console.error("Failed to load notifications:",e)}},J=async()=>{try{const[e,t]=await Promise.all([Sa(),Ca()]);A(e),T(t.alerts||[])}catch(e){console.error("Failed to load inventory data:",e)}},ee=((0,s.useCallback)(e=>{N(t=>t.map(t=>Pe(Pe({},t),{},{tasks:t.tasks.map(t=>t.id===e.id?Pe(Pe({},t),e):t)})))},[]),()=>(0,De.jsxs)("div",{children:[(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"bg-primary text-white",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1",children:"My Active Tasks"}),(0,De.jsx)("h2",{className:"mb-0",children:_.filter(e=>"started"===e.status).length})]}),(0,De.jsx)(kr,{size:40,className:"opacity-75"})]})})})}),(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"bg-success text-white",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1",children:"Completed Today"}),(0,De.jsx)("h2",{className:"mb-0",children:_.filter(e=>"completed"===e.status).length})]}),(0,De.jsx)(yi,{size:40,className:"opacity-75"})]})})})}),(0,De.jsx)(Pn,{children:(0,De.jsx)(ps,{className:"bg-warning text-white",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"mb-1",children:"Pending Tasks"}),(0,De.jsx)("h2",{className:"mb-0",children:_.filter(e=>"assigned"===e.status).length})]}),(0,De.jsx)(Si,{size:40,className:"opacity-75"})]})})})})]}),(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Header,{children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(kr,{className:"me-2"}),"My Tasks Overview"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("p",{className:"text-muted",children:'View and manage your assigned tasks in the "My Tasks" section.'}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>M("my-tasks"),children:"View My Tasks"})]})]})]})),ne=()=>(0,De.jsxs)("div",{children:[(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-primary text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ui,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Total Orders"}),(0,De.jsx)("h3",{children:w.length})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-success text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(kr,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Active Tasks"}),(0,De.jsx)("h3",{children:_.filter(e=>"started"===e.status).length})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-warning text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Or,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Workers Online"}),(0,De.jsx)("h3",{children:"8"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"bg-danger text-white",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ii,{size:30,className:"mb-2"}),(0,De.jsx)("h6",{children:"Urgent Orders"}),(0,De.jsx)("h3",{children:w.filter(e=>"critical"===e.urgency).length})]})})})]}),(0,De.jsx)(Cn,{className:"mb-4",children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsxs)(ps.Header,{className:"bg-warning text-dark d-flex justify-content-between align-items-center",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Approval Queue"}),(0,De.jsx)(Rn,{bg:"dark",children:w.filter(e=>"pending"===e.order_status).length})]}),(0,De.jsxs)(ps.Body,{style:{maxHeight:"300px",overflowY:"auto"},children:[w.filter(e=>"pending"===e.order_status).slice(0,8).map(e=>(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 rounded bg-light",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.order_number}),(0,De.jsx)("small",{className:"text-muted",children:e.customer_name})]}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-success",onClick:()=>a(q()),children:"Review"})]},e.id)),0===w.filter(e=>"pending"===e.order_status).length&&(0,De.jsx)("div",{className:"text-center text-muted",children:"No pending approvals"})]})]})})}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(kr,{className:"me-2"}),"Task Management"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("p",{className:"text-muted",children:"Create and assign tasks to warehouse workers within specific orders."}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>M("task-management"),children:"Manage Tasks"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(ui,{className:"me-2"}),"Recent Orders"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("p",{className:"text-muted",children:w.length>0?"".concat(w.length," orders ready for processing"):"No orders available"}),(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>a(q()),children:"View All Orders"})]})]})})]})]}),se=()=>(0,De.jsxs)("div",{children:[(0,De.jsx)(Cn,{className:"mb-4",children:(0,De.jsx)(Pn,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h4",{children:[(0,De.jsx)(ui,{className:"me-2 text-primary"}),"Inventory Management"]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"outline-success",onClick:()=>a("/warehouse/products/new"),children:[(0,De.jsx)(rr,{className:"me-2"}),"Add Product"]}),(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>a("/warehouse/inventory/materials"),children:"Manage Materials"}),(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>a("/warehouse/inventory/stock-in-house"),children:"Update Stock In-House"}),(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>B(!0),children:[(0,De.jsx)(rr,{className:"me-2"}),"Quick Stock Entry"]})]})]})})}),E.length>0&&(0,De.jsxs)(Nn,{variant:"warning",className:"mb-4",children:[(0,De.jsx)(Ii,{className:"me-2"}),(0,De.jsx)("strong",{children:"Low Stock Alert:"})," ",E.length," items are running low."]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{className:"text-center",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-primary",children:(null===C||void 0===C?void 0:C.total_materials)||0}),(0,De.jsx)("p",{className:"text-muted",children:"Total Materials"})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{className:"text-center",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-success",children:(null===C||void 0===C?void 0:C.in_stock)||0}),(0,De.jsx)("p",{className:"text-muted",children:"In Stock"})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{className:"text-center",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("h3",{className:"text-danger",children:E.length}),(0,De.jsx)("p",{className:"text-muted",children:"Low Stock"})]})})})]})]});return c?(0,De.jsx)("div",{className:"warehouse-dashboard",children:(0,De.jsx)(Xe,{fluid:!0,className:"d-flex justify-content-center align-items-center",style:{minHeight:"80vh"},children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading warehouse dashboard..."})]})})}):(0,De.jsxs)("div",{className:"warehouse-dashboard",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[(0,De.jsxs)(Xe,{fluid:!0,className:"p-4",children:[u&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>h(null),className:"mb-4",children:[(0,De.jsx)(Ii,{className:"me-2"}),u]}),m&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>p(null),className:"mb-4",children:[(0,De.jsx)(yi,{className:"me-2"}),m]}),(()=>{switch(P){case"overview":return"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?(0,De.jsx)(ee,{}):(0,De.jsx)(ne,{});case"task-management":return G()?(0,De.jsx)(Hc,{user:l}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ii,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access task management."})]})});case"my-tasks":return"warehouse_worker"===(null===l||void 0===l?void 0:l.role)?(0,De.jsx)(Kc,{}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ii,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"This section is only available for warehouse workers."})]})});case"inventory":return K()?(0,De.jsx)(se,{}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ii,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access inventory management."})]})});case"analytics":return["owner","admin","warehouse"].includes(null===l||void 0===l?void 0:l.role)?(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center py-5",children:[(0,De.jsx)(gi,{size:50,className:"text-muted mb-3"}),(0,De.jsx)("h5",{children:"Analytics Dashboard"}),(0,De.jsx)("p",{className:"text-muted mb-4",children:"Comprehensive warehouse analytics and reporting"}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>a("owner"===(null===l||void 0===l?void 0:l.role)||"admin"===(null===l||void 0===l?void 0:l.role)?"/owner/analytics":"/warehouse"),children:"View Full Analytics"})]})}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ii,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access analytics."})]})});case"workers":return G()?(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center py-5",children:[(0,De.jsx)(Or,{size:50,className:"text-muted mb-3"}),(0,De.jsx)("h5",{children:"Worker Management"}),(0,De.jsx)("p",{className:"text-muted mb-4",children:"Manage warehouse workers, schedules, and assignments"}),(0,De.jsx)(Xs,{variant:"primary",disabled:!0,children:"Coming Soon"})]})}):(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ii,{size:50,className:"text-warning mb-3"}),(0,De.jsx)("h5",{children:"Access Denied"}),(0,De.jsx)("p",{className:"text-muted",children:"You don't have permission to access worker management."})]})});default:return(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ii,{size:50,className:"text-muted mb-3"}),(0,De.jsx)("h5",{children:"Page Not Found"}),(0,De.jsx)("p",{className:"text-muted",children:"The requested page could not be found."})]})})}})()]}),(0,De.jsx)(Hl,{show:O,onHide:()=>D(!1),order:L,onTasksAssigned:()=>{D(!1),R(null),X(!0),p("Tasks assigned successfully!")}}),(0,De.jsx)(Yl,{show:z,onHide:()=>B(!1),onStockUpdated:()=>{B(!1),J(),p("Stock updated successfully!")}}),(0,De.jsxs)(Bo,{show:I,onHide:()=>F(!1),size:"lg",centered:!0,children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Order Details"})}),(0,De.jsx)(Bo.Body,{children:L&&(0,De.jsxs)("div",{children:[(0,De.jsxs)("h6",{children:["Order: ",L.order_number]}),(0,De.jsxs)("p",{children:["Customer: ",L.customer_name]}),(0,De.jsxs)("p",{children:["Total: R",L.total_amount]}),(0,De.jsxs)("p",{children:["Status: ",L.status]})]})}),(0,De.jsx)(Bo.Footer,{children:(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>F(!1),children:"Close"})})]}),v&&(0,De.jsx)("div",{className:"position-fixed bottom-0 end-0 p-3",children:(0,De.jsxs)("div",{className:"d-flex flex-column align-items-end gap-1",children:[(0,De.jsxs)("small",{className:"text-muted bg-white px-2 py-1 rounded shadow-sm",children:["Last updated: ",new Date(v).toLocaleTimeString()]}),(0,De.jsxs)("small",{className:"text-muted bg-white px-2 py-1 rounded shadow-sm",children:["Build: ","b64afdc5 - status-first workflow, task assignment + inventory fixes"]})]})}),(0,De.jsx)("style",{jsx:!0,children:"\n        .warehouse-dashboard .card {\n          border: none;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n          transition: all 0.3s ease;\n        }\n        \n        .warehouse-dashboard .card:hover {\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        \n        .btn {\n          transition: all 0.2s ease;\n          border-radius: 8px;\n        }\n        \n        .btn:hover {\n          transform: translateY(-1px);\n        }\n        \n        .badge {\n          font-size: 0.75em;\n          padding: 0.5em 0.75em;\n        }\n        \n        @media (max-width: 768px) {\n          .warehouse-dashboard .container-fluid {\n            padding: 1rem !important;\n          }\n        }\n      "})]})},Yc=e=>{var t,n,i,r,a,o;let{user:l,onLogout:c}=e;const[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),[x,b]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[j,_]=(0,s.useState)(!1),[N,k]=(0,s.useState)(new Date),[S,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=setInterval(()=>k(new Date),6e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{A();const e=setInterval(A,3e4);return()=>clearInterval(e)},[]);const A=async()=>{try{m(!0);const e=await Qr(),t=(e.results||e).filter(e=>"order_ready"===e.order_status||"out_for_delivery"===e.order_status||"delivered"===e.order_status);u(t)}catch(e){f("Failed to load delivery orders"),console.error(e)}finally{m(!1)}},E=()=>(0,De.jsxs)("div",{className:"oox-mobile-header oox-animate-fadeInUp",style:{background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"2px solid #fbbf24",boxShadow:"0 10px 30px rgba(251, 191, 36, 0.1)"},children:[(0,De.jsxs)("div",{className:"oox-brand",children:[(0,De.jsx)("div",{className:"oox-logo",style:{backgroundColor:"#fbbf24"},children:(0,De.jsx)(Er,{size:25,style:{color:"white"}})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"oox-title",style:{color:"#1f2937"},children:"OOX Delivery Hub"}),(0,De.jsxs)("p",{className:"oox-subtitle",style:{color:"#6b7280"},children:["OOX Furniture Route Management \u2022 ",(null===l||void 0===l?void 0:l.first_name)||"DRIVER"," \u2022 ",N.toLocaleDateString()]})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-stats",children:[(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.filter(e=>"out_for_delivery"===e.order_status).length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Out for Delivery"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.filter(e=>"delivered"===e.order_status).length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Delivered"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.filter(e=>"order_ready"===e.order_status).length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Ready"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:d.length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Total"})]})]})]}),T=e=>{let{title:t,value:n,icon:i,color:r,bgColor:a}=e;return(0,De.jsx)(ps,{className:"h-100 shadow-sm border-0",style:{background:"linear-gradient(135deg, ".concat(a,"15 0%, ").concat(a,"05 100%)"),borderLeft:"4px solid ".concat(r),borderRadius:"15px"},children:(0,De.jsxs)(ps.Body,{className:"text-center p-4",children:[(0,De.jsx)("div",{className:"mb-3",children:s.createElement(i,{size:40,color:r})}),(0,De.jsx)("h3",{className:"mb-1",style:{fontWeight:"700",color:r,fontSize:"2.5rem",fontFamily:"monospace"},children:n}),(0,De.jsx)("p",{className:"mb-0",style:{fontSize:"0.9rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:t})]})})},P=e=>{let{variant:t,onClick:n,icon:i,children:r,disabled:a=!1,style:o={}}=e;return(0,De.jsxs)(Xs,{variant:t,onClick:n,disabled:a,className:"w-100 mb-3 d-flex align-items-center justify-content-center",style:Pe({height:"70px",fontSize:"1.1rem",fontWeight:"700",borderRadius:"15px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",textTransform:"uppercase",letterSpacing:"1px"},o),children:[i&&s.createElement(i,{size:20,className:"me-3"}),r]})},M=e=>{var t,n,s;let{order:i,onStartDelivery:r,onViewDetails:a,onComplete:o}=e;const l=(null===S||void 0===S?void 0:S.id)===i.id,c="delivered"===i.order_status,d="out_for_delivery"===i.order_status;return(0,De.jsx)(ps,{className:"mb-3 shadow-sm ".concat(l?"border-warning border-2":""),style:{borderRadius:"15px",overflow:"hidden",border:c?"2px solid #10b981":d?"2px solid #fbbf24":"1px solid #e5e7eb"},children:(0,De.jsx)(ps.Body,{className:"p-3",children:(0,De.jsxs)(Cn,{className:"align-items-center",children:[(0,De.jsxs)(Pn,{md:8,children:[(0,De.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,De.jsx)(Rn,{bg:c?"success":d?"warning":"secondary",className:"me-2 px-3 py-2",style:{fontSize:"0.8rem",borderRadius:"10px"},children:c?"DELIVERED":d?"IN TRANSIT":"READY"}),(0,De.jsx)("h6",{className:"mb-0 fw-bold",children:i.order_number})]}),(0,De.jsxs)("div",{className:"mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,De.jsx)(Rr,{className:"text-muted me-2",size:14}),(0,De.jsx)("span",{className:"fw-bold",children:(null===(t=i.customer)||void 0===t?void 0:t.name)||i.customer_name})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,De.jsx)(sr,{className:"text-muted me-2",size:14}),(0,De.jsx)("span",{children:(null===(n=i.customer)||void 0===n?void 0:n.phone)||"No phone"})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)($i,{className:"text-muted me-2",size:14}),(0,De.jsx)("span",{className:"text-muted small",children:(null===(s=i.customer)||void 0===s?void 0:s.address)||"Address not available"})]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Zi,{className:"text-success me-2",size:14}),(0,De.jsxs)("span",{className:"fw-bold text-success",children:["R",i.total_amount]}),(0,De.jsx)("span",{className:"text-muted ms-2 small",children:"fully_paid"===i.payment_status?"(Paid)":"(Balance Due)"})]})]}),(0,De.jsxs)(Pn,{md:4,children:[!c&&!d&&(0,De.jsx)(P,{variant:"warning",onClick:()=>r(i),icon:ir,style:{height:"50px",fontSize:"0.9rem"},children:"Start Route"}),d&&(0,De.jsx)(P,{variant:"success",onClick:()=>o(i),icon:bi,style:{height:"50px",fontSize:"0.9rem"},children:"Mark Delivered"}),c&&(0,De.jsx)(P,{variant:"outline-success",onClick:()=>a(i),icon:Ni,style:{height:"50px",fontSize:"0.9rem"},children:"View POD"}),(0,De.jsxs)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>a(i),className:"w-100 mt-2",style:{borderRadius:"10px"},children:[(0,De.jsx)($i,{className:"me-1"}),"View Route"]})]})]})})})},L=e=>{C(e),v("Started delivery for ".concat(e.order_number)),setTimeout(()=>v(null),3e3)},R=e=>{b(e),_(!0)},O=e=>{b(e),w(!0)},D=e=>{const t="https://www.google.com/maps/dir/?api=1&destination=".concat(encodeURIComponent(e));window.open(t,"_blank")},I=d.filter(e=>"order_ready"===e.order_status&&"out_for_delivery"!==e.order_status),F=d.filter(e=>"out_for_delivery"===e.order_status),z=d.filter(e=>"delivered"===e.order_status);return h?(0,De.jsx)(Xe,{fluid:!0,className:"p-4",children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("div",{className:"spinner-border text-warning",style:{width:"3rem",height:"3rem"},role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,De.jsx)("p",{className:"mt-3 h5",children:"Loading delivery routes..."})]})}):(0,De.jsxs)(Xe,{fluid:!0,className:"delivery-dashboard",style:{backgroundColor:"#f9fafb",minHeight:"100vh",padding:"1rem"},children:[(0,De.jsx)(E,{}),p&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>f(null),children:p}),g&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>v(null),children:g}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(T,{title:"Ready to Deliver",value:I.length,icon:Er,color:"#6b7280",bgColor:"#6b7280"})}),(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(T,{title:"In Transit",value:F.length,icon:lr,color:"#fbbf24",bgColor:"#fbbf24"})}),(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(T,{title:"Delivered Today",value:z.length,icon:bi,color:"#10b981",bgColor:"#10b981"})})]}),S&&(0,De.jsxs)(ps,{className:"mb-4 shadow-lg border-warning border-2",children:[(0,De.jsx)(ps.Header,{className:"bg-warning text-dark",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Ai,{className:"me-2"}),"Active Delivery: ",S.order_number]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{children:[(0,De.jsxs)(Pn,{md:8,children:[(0,De.jsxs)("h6",{children:["Customer: ",null===(t=S.customer)||void 0===t?void 0:t.name]}),(0,De.jsxs)("p",{children:["Address: ",null===(n=S.customer)||void 0===n?void 0:n.address]}),(0,De.jsxs)("p",{children:["Phone: ",null===(i=S.customer)||void 0===i?void 0:i.phone]})]}),(0,De.jsxs)(Pn,{md:4,children:[(0,De.jsx)(P,{variant:"primary",onClick:()=>{var e;return D(null===(e=S.customer)||void 0===e?void 0:e.address)},icon:$i,children:"Open in Maps"}),(0,De.jsx)(P,{variant:"success",onClick:()=>R(S),icon:Ui,children:"Mark as Delivered"})]})]})})]}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-primary text-white",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Er,{className:"me-2"}),"Delivery Queue (",d.length," orders)"]})}),(0,De.jsx)(ps.Body,{style:{maxHeight:"600px",overflowY:"auto"},children:d.length>0?d.map(e=>(0,De.jsx)(M,{order:e,onStartDelivery:L,onViewDetails:O,onComplete:R},e.id)):(0,De.jsxs)("div",{className:"text-center text-muted py-5",children:[(0,De.jsx)(Er,{size:50,className:"mb-3 opacity-50"}),(0,De.jsx)("p",{children:"No deliveries available"})]})})]})})}),(0,De.jsxs)(Bo,{show:y,onHide:()=>w(!1),size:"lg",centered:!0,children:[(0,De.jsx)(Bo.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)($i,{className:"me-2"}),"Delivery Details: ",null===x||void 0===x?void 0:x.order_number]})}),(0,De.jsx)(Bo.Body,{children:x&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)(Cn,{className:"mb-3",children:[(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsx)("h6",{children:"Customer Information"}),(0,De.jsxs)(Xl,{variant:"flush",children:[(0,De.jsxs)(Xl.Item,{children:[(0,De.jsx)("strong",{children:"Name:"})," ",null===(r=x.customer)||void 0===r?void 0:r.name]}),(0,De.jsxs)(Xl.Item,{children:[(0,De.jsx)("strong",{children:"Phone:"})," ",null===(a=x.customer)||void 0===a?void 0:a.phone]}),(0,De.jsxs)(Xl.Item,{children:[(0,De.jsx)("strong",{children:"Address:"})," ",null===(o=x.customer)||void 0===o?void 0:o.address]})]})]}),(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsx)("h6",{children:"Order Information"}),(0,De.jsxs)(Xl,{variant:"flush",children:[(0,De.jsxs)(Xl.Item,{children:[(0,De.jsx)("strong",{children:"Order #:"})," ",x.order_number]}),(0,De.jsxs)(Xl.Item,{children:[(0,De.jsx)("strong",{children:"Amount:"})," R",x.total_amount]}),(0,De.jsxs)(Xl.Item,{children:[(0,De.jsx)("strong",{children:"Payment:"})," ",x.payment_status]})]})]})]}),(0,De.jsx)("div",{className:"text-center",children:(0,De.jsx)(P,{variant:"primary",onClick:()=>{var e;return D(null===(e=x.customer)||void 0===e?void 0:e.address)},icon:Ai,children:"Open Navigation"})})]})})]}),(0,De.jsxs)(Bo,{show:j,onHide:()=>_(!1),size:"lg",centered:!0,children:[(0,De.jsx)(Bo.Header,{closeButton:!0,className:"bg-success text-white",children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(fi,{className:"me-2"}),"Proof of Delivery: ",null===x||void 0===x?void 0:x.order_number]})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)(Wl,{children:[(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Upload Photo"}),(0,De.jsx)(Wl.Control,{type:"file",accept:"image/*",capture:"environment"}),(0,De.jsx)(Wl.Text,{className:"text-muted",children:"Take a photo of the delivered items or signed receipt"})]}),(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Delivery Notes"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,placeholder:"Any special notes about the delivery..."})]}),(0,De.jsx)(Wl.Group,{className:"mb-3",children:(0,De.jsx)(Wl.Check,{type:"checkbox",label:"Customer received all items and is satisfied"})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>{_(!1),C(null),v("Delivery completed successfully!"),setTimeout(()=>v(null),3e3),A()},children:[(0,De.jsx)(bi,{className:"me-2"}),"Complete Delivery"]})]})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        .delivery-dashboard {\n          font-family: 'Inter', sans-serif;\n        }\n        .delivery-header {\n          animation: slideInDown 0.8s ease-out;\n        }\n        @keyframes slideInDown {\n          from {\n            opacity: 0;\n            transform: translateY(-30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        .card {\n          transition: transform 0.2s ease, box-shadow 0.2s ease;\n        }\n        .card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;\n        }\n        .btn {\n          transition: all 0.2s ease;\n        }\n        .btn:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.2);\n        }\n        @media (max-width: 768px) {\n          .delivery-header {\n            padding: 1.5rem !important;\n          }\n          .delivery-header h1 {\n            font-size: 1.8rem !important;\n          }\n        }\n      "})]})},Qc="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,$c="undefined"!==typeof document||Qc?s.useLayoutEffect:s.useEffect,Jc=new WeakMap,Zc=(e,t)=>{if(!e||!t)return;const n=Jc.get(t)||new Map;Jc.set(t,n);let s=n.get(e);return s||(s=t.matchMedia(e),s.refCount=0,n.set(s.media,s)),s};function ed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=Zc(e,t),[i,r]=(0,s.useState)(()=>!!n&&n.matches);return $c(()=>{let n=Zc(e,t);if(!n)return r(!1);let s=Jc.get(t);const i=()=>{r(n.matches)};return n.refCount++,n.addListener(i),i(),()=>{n.removeListener(i),n.refCount--,n.refCount<=0&&(null==s||s.delete(n.media)),n=void 0}},[e]),i}const td=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(n){const s=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[s];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(t,r,a){let o;return"object"===typeof t?(o=t,a=r,r=!0):(r=r||!0,o={[t]:r}),ed((0,s.useMemo)(()=>Object.entries(o).reduce((t,s)=>{let[r,a]=s;return"up"!==a&&!0!==a||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(r))),"down"!==a&&!0!==a||(t=n(t,i(r))),t},""),[JSON.stringify(o)]),a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),nd=["className","bsPrefix","as"],sd=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,nd);return s=He(s,"offcanvas-body"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});sd.displayName="OffcanvasBody";const id=sd,rd=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],ad={[Mt]:"show",[Lt]:"show"},od=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,children:r,in:a=!1,mountOnEnter:o=!1,unmountOnExit:l=!1,appear:c=!1}=e,d=Le(e,rd);return n=He(n,"offcanvas"),(0,De.jsx)(un,Pe(Pe({ref:t,addEndListener:sn,in:a,mountOnEnter:o,unmountOnExit:l,appear:c},d),{},{childRef:zt(r),children:(e,t)=>s.cloneElement(r,Pe(Pe({},t),{},{className:Oe()(i,r.props.className,(e===Mt||e===Rt)&&"".concat(n,"-toggling"),ad[e])}))}))});od.displayName="OffcanvasToggling";const ld=od,cd=["bsPrefix","className","closeLabel","closeButton"],dd=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,closeLabel:i="Close",closeButton:r=!1}=e,a=Le(e,cd);return n=He(n,"offcanvas-header"),(0,De.jsx)(Ao,Pe(Pe({ref:t},a),{},{className:Oe()(s,n),closeLabel:i,closeButton:r}))});dd.displayName="OffcanvasHeader";const ud=dd,hd=["className","bsPrefix","as"],md=rt("h5"),pd=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i=md}=e,r=Le(e,hd);return s=He(s,"offcanvas-title"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});pd.displayName="OffcanvasTitle";const fd=pd,gd=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function vd(e){return(0,De.jsx)(ld,Pe({},e))}function xd(e){return(0,De.jsx)(fn,Pe({},e))}const bd=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,children:r,"aria-labelledby":a,placement:o="start",responsive:l,show:c=!1,backdrop:d=!0,keyboard:u=!0,scroll:h=!1,onEscapeKeyDown:m,onShow:p,onHide:f,container:g,autoFocus:v=!0,enforceFocus:x=!0,restoreFocus:b=!0,restoreFocusOptions:y,onEntered:w,onExit:j,onExiting:_,onEnter:N,onEntering:k,onExited:S,backdropClassName:C,manager:A,renderStaticNode:E=!1}=e,T=Le(e,gd);const P=(0,s.useRef)();n=He(n,"offcanvas");const[M,L]=(0,s.useState)(!1),R=it(f),O=td(l||"xs","up");(0,s.useEffect)(()=>{L(l?c&&!O:c)},[c,l,O]);const D=(0,s.useMemo)(()=>({onHide:R}),[R]);const I=(0,s.useCallback)(e=>(0,De.jsx)("div",Pe(Pe({},e),{},{className:Oe()("".concat(n,"-backdrop"),C)})),[C,n]),F=e=>(0,De.jsx)("div",Pe(Pe(Pe({},e),T),{},{className:Oe()(i,l?"".concat(n,"-").concat(l):n,"".concat(n,"-").concat(o)),"aria-labelledby":a,children:r}));return(0,De.jsxs)(De.Fragment,{children:[!M&&(l||E)&&F({}),(0,De.jsx)(bo.Provider,{value:D,children:(0,De.jsx)(ro,{show:M,ref:t,backdrop:d,container:g,keyboard:u,autoFocus:v,enforceFocus:x&&!h,restoreFocus:b,restoreFocusOptions:y,onEscapeKeyDown:m,onShow:p,onHide:R,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];null==N||N(e,...n)},onEntering:k,onEntered:w,onExit:j,onExiting:_,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];null==S||S(...n)},manager:A||(h?(P.current||(P.current=new fo({handleContainerOverflow:!1})),P.current):po()),transition:vd,backdropTransition:xd,renderBackdrop:I,renderDialog:F})})]})});bd.displayName="Offcanvas";const yd=Object.assign(bd,{Body:id,Header:ud,Title:fd}),wd=e=>{var t,n,s,i;let{navigationItems:r,user:a,userRole:o,onLogout:l,onNavigate:c,isActiveRoute:d,getRoleColor:u,getRoleIcon:h,isMobile:m,isCollapsed:p,darkTheme:f}=e;return(0,De.jsxs)("div",{className:"h-100 d-flex flex-column",children:[(0,De.jsxs)("div",{className:"p-4 border-bottom",style:{borderColor:f.border,backgroundColor:"rgba(255,255,255,0.05)",paddingTop:p&&!m?"70px":"1.5rem"},children:[!p||m?(0,De.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,De.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"50px",height:"50px",backgroundColor:u(),color:"white",fontSize:"18px",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:((null===a||void 0===a||null===(t=a.first_name)||void 0===t?void 0:t[0])||(null===a||void 0===a||null===(n=a.username)||void 0===n?void 0:n[0])||"U").toUpperCase()}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{color:"white",fontWeight:"600",fontSize:"1rem"},children:(null===a||void 0===a?void 0:a.first_name)||(null===a||void 0===a?void 0:a.username)||"User"}),(0,De.jsxs)("div",{className:"d-flex align-items-center",style:{color:"rgba(255,255,255,0.8)",fontSize:"0.85rem"},children:[h(),(0,De.jsx)("span",{className:"ms-1",children:(null===o||void 0===o?void 0:o.charAt(0).toUpperCase())+(null===o||void 0===o?void 0:o.slice(1))||"User"})]})]})]}):(0,De.jsx)("div",{className:"d-flex justify-content-center mb-3",children:(0,De.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:u(),color:"white",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:((null===a||void 0===a||null===(s=a.first_name)||void 0===s?void 0:s[0])||(null===a||void 0===a||null===(i=a.username)||void 0===i?void 0:i[0])||"U").toUpperCase()})}),(!p||m)&&!m&&(0,De.jsx)("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:null===a||void 0===a?void 0:a.email})]}),(0,De.jsx)(Gs,{className:"flex-column flex-grow-1 p-3",children:r.map(e=>{const t=e.icon,n=d(e.path);return(0,De.jsxs)(Gs.Link,{onClick:()=>c(e.path),className:"d-flex align-items-center mb-2",style:{backgroundColor:n?u():"transparent",color:"white",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",fontWeight:n?"600":"500",border:n?"1px solid ".concat(u()):"1px solid transparent",padding:p&&!m?"12px":"12px 16px",justifyContent:p&&!m?"center":"flex-start",position:"relative"},onMouseEnter:e=>{n||(e.target.style.backgroundColor=f.accent)},onMouseLeave:e=>{n||(e.target.style.backgroundColor="transparent")},title:p&&!m?e.label:"",children:[(0,De.jsx)(t,{size:20,style:{minWidth:"20px",marginRight:p&&!m?"0":"12px"}}),(!p||m)&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("span",{className:"flex-grow-1",children:e.label}),e.badge&&(0,De.jsx)(Rn,{bg:"New"===e.badge?"success":"warning",className:"ms-2",style:{fontSize:"0.7rem"},children:e.badge})]}),p&&!m&&e.badge&&(0,De.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"New"===e.badge?"#10b981":"#f59e0b",borderRadius:"50%",border:"2px solid white"}})]},e.key)})}),(0,De.jsx)("div",{className:"p-3 border-top",style:{borderColor:f.border},children:(0,De.jsxs)(Gs.Link,{onClick:l,className:"d-flex align-items-center",style:{color:"white",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"500",padding:p&&!m?"12px":"12px 16px",justifyContent:p&&!m?"center":"flex-start"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(220, 38, 38, 0.2)"},onMouseLeave:e=>{e.target.style.backgroundColor="transparent"},title:p&&!m?"Logout":"",children:[(0,De.jsx)(fr,{size:20,style:{minWidth:"20px",marginRight:p&&!m?"0":"12px"}}),(!p||m)&&(0,De.jsx)("span",{children:"Logout"})]})})]})},jd=e=>{let{user:t,userRole:n,onLogout:i}=e;const[r,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),c=Z(),d=$(),u=()=>a(!1),h=[{key:"dashboard",label:"Dashboard",icon:qi,path:"/".concat(n),roles:["owner","admin","warehouse","delivery"]},...{owner:[{key:"orders",label:"Orders Management",icon:ki,path:"/owner/orders",badge:"New"},{key:"transactions",label:"Transactions",icon:Zi,path:"/owner/transactions"},{key:"customers",label:"Customers",icon:Or,path:"/owner/customers"},{key:"users",label:"Team Management",icon:Pr,path:"/owner/users"},{key:"payments",label:"Payments",icon:Zi,path:"/owner/payments"},{key:"deliveries",label:"Deliveries",icon:Er,path:"/owner/deliveries"},{key:"analytics",label:"Analytics",icon:vi,path:"/owner/analytics",badge:"Pro"}],admin:[{key:"orders",label:"Orders Management",icon:ki,path:"/admin/orders"},{key:"transactions",label:"Transactions",icon:Zi,path:"/admin/transactions"},{key:"customers",label:"Customers",icon:Or,path:"/owner/customers"},{key:"payments",label:"Payments",icon:Zi,path:"/owner/payments"},{key:"deliveries",label:"Deliveries",icon:Er,path:"/owner/deliveries"},{key:"analytics",label:"Analytics",icon:vi,path:"/owner/analytics"}],warehouse:[{key:"orders",label:"Production Queue",icon:ki,path:"/warehouse/orders"},{key:"queue",label:"Queue Management",icon:Ir,path:"/warehouse/queue"}],delivery:[{key:"orders",label:"Delivery Orders",icon:ki,path:"/delivery/orders"},{key:"routes",label:"Route Planning",icon:lr,path:"/delivery/routes"}]}[n]||[]],m=e=>{c(e),u()},p=e=>d.pathname===e,f=()=>({owner:"#f59e0b",admin:"#3b82f6",warehouse:"#10b981",delivery:"#06b6d4"}[n]||"#6b7280"),g=()=>{const e={owner:Lr,admin:Ci,warehouse:Ir,delivery:Er}[n]||Lr;return(0,De.jsx)(e,{})},v={primary:"#1e293b",secondary:"#334155",accent:"#475569",border:"rgba(255,255,255,0.1)"},x=o?"80px":"280px";return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Xs,{variant:"light",onClick:()=>a(!0),className:"d-lg-none position-fixed",style:{top:"20px",left:"20px",zIndex:1030,width:"56px",height:"56px",borderRadius:"50%",border:"3px solid ".concat(f()),backgroundColor:"white",boxShadow:"0 6px 20px rgba(0,0,0,0.25), 0 0 0 4px rgba(".concat(f().replace("#",""),", 0.1)"),display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.target.style.transform="scale(1.1)",e.target.style.backgroundColor=f(),e.target.querySelector("svg").style.color="white"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.backgroundColor="white",e.target.querySelector("svg").style.color=f()},children:(0,De.jsx)(ai,{style:{color:f(),fontSize:"18px",transition:"color 0.3s ease"}})}),(0,De.jsxs)("div",{className:"d-none d-lg-block position-fixed",style:{top:0,left:0,width:x,height:"100vh",background:"linear-gradient(180deg, ".concat(v.primary," 0%, ").concat(v.secondary," 100%)"),boxShadow:"4px 0 20px rgba(0,0,0,0.2)",zIndex:1020,overflowY:"auto",overflowX:"hidden",transition:"width 0.3s ease-in-out",borderRight:"1px solid ".concat(v.border)},children:[(0,De.jsx)(Xs,{onClick:()=>l(!o),className:"position-absolute",style:{top:"20px",right:"-18px",width:"36px",height:"36px",borderRadius:"50%",border:"3px solid ".concat(f()),backgroundColor:"white",color:f(),boxShadow:"0 4px 16px rgba(0,0,0,0.25), 0 0 0 3px rgba(".concat(f().replace("#",""),", 0.1)"),zIndex:1021,padding:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.target.style.backgroundColor=f(),e.target.style.color="white",e.target.style.transform="scale(1.1)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.35), 0 0 0 4px rgba(".concat(f().replace("#",""),", 0.2)")},onMouseLeave:e=>{e.target.style.backgroundColor="white",e.target.style.color=f(),e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 16px rgba(0,0,0,0.25), 0 0 0 3px rgba(".concat(f().replace("#",""),", 0.1)")},children:o?(0,De.jsx)(_i,{}):(0,De.jsx)(ji,{})}),(0,De.jsx)(wd,{navigationItems:h,user:t,userRole:n,onLogout:i,onNavigate:m,isActiveRoute:p,getRoleColor:f,getRoleIcon:g,isMobile:!1,isCollapsed:o,darkTheme:v})]}),(0,De.jsxs)(yd,{show:r,onHide:u,placement:"start",style:{width:"320px"},children:[(0,De.jsxs)(yd.Header,{style:{background:v.primary,color:"white",borderBottom:"1px solid ".concat(v.border),position:"relative",padding:"1rem"},children:[(0,De.jsxs)(yd.Title,{className:"d-flex align-items-center",children:[(0,De.jsx)(Ei,{className:"me-2",style:{color:f()}}),"OOX Furniture"]}),(0,De.jsx)(Xs,{onClick:u,style:{position:"absolute",top:"15px",right:"15px",width:"40px",height:"40px",borderRadius:"50%",border:"2px solid ".concat(f()),backgroundColor:"white",color:f(),boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.3s ease",cursor:"pointer",padding:0},onMouseEnter:e=>{e.target.style.backgroundColor=f(),e.target.style.color="white",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.backgroundColor="white",e.target.style.color=f(),e.target.style.transform="scale(1)"},children:"\xd7"})]}),(0,De.jsx)(yd.Body,{style:{background:"linear-gradient(180deg, ".concat(v.primary," 0%, ").concat(v.secondary," 100%)"),padding:0},children:(0,De.jsx)(wd,{navigationItems:h,user:t,userRole:n,onLogout:i,onNavigate:m,isActiveRoute:p,getRoleColor:f,getRoleIcon:g,isMobile:!0,isCollapsed:!1,darkTheme:v})})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        @media (min-width: 992px) {\n          .main-content {\n            margin-left: ".concat(x,";\n            transition: margin-left 0.3s ease-in-out;\n          }\n        }\n      ")})]})},_d=e=>{let{user:t,onLogout:n}=e;const i=Z(),[r,a]=(0,s.useState)("overview"),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)(1),[f]=(0,s.useState)(10),[g,v]=(0,s.useState)(0),[x,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)({}),[j,_]=(0,s.useState)(!0),[N,k]=(0,s.useState)(null),[S,C]=(0,s.useState)(null),[A,E]=(0,s.useState)(new Date),[T,P]=(0,s.useState)(!1),[M,L]=(0,s.useState)(null),[R,O]=(0,s.useState)({username:"",email:"",first_name:"",last_name:"",phone:"",role:"delivery",password:"",password_confirm:"",is_active:!0});(0,s.useEffect)(()=>{E(new Date)},[]),(0,s.useEffect)(()=>{D()},[]);const D=async()=>{try{_(!0),k(null);const[e,t]=await Promise.all([ca(),Qr()]);l(e.results||e),d(t.results||t),I(1,f,y)}catch(e){console.error("Error fetching dashboard data:",e),k("Failed to load dashboard data")}finally{_(!1)}},I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(!0);try{const s=await aa(Pe({page:e,page_size:t},n)),i=Array.isArray(null===s||void 0===s?void 0:s.results)?s.results:Array.isArray(s)?s:[];h(i);const r=void 0!==(null===s||void 0===s?void 0:s.count)?s.count:Array.isArray(s)?s.length:0;v(r),p(e)}catch(OP){}finally{b(!1)}},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(L(e),O({username:e.username||"",email:e.email||"",first_name:e.first_name||"",last_name:e.last_name||"",phone:e.phone||"",role:e.role||"delivery",password:"",password_confirm:"",is_active:void 0===e.is_active||e.is_active})):(L(null),O({username:"",email:"",first_name:"",last_name:"",phone:"",role:"delivery",password:"",password_confirm:"",is_active:!0})),P(!0)},z=e=>{const{name:t,value:n,type:s,checked:i}=e.target;O(e=>Pe(Pe({},e),{},{[t]:"checkbox"===s?i:n}))},B=async e=>{e.preventDefault();try{if(!M){if(!R.username||""===R.username.trim())return void k("Username is required");if(!R.password)return void k("Password is required");if(R.password!==R.password_confirm)return void k("Passwords do not match");const e=["owner","admin","warehouse","delivery"];if(R.role&&!e.includes(R.role))return void k("Invalid role: ".concat(R.role,". Valid roles: ").concat(e.join(", ")))}if(M)await ha(M.id,R),C("User updated successfully!");else{const e=await ua(R);e.success&&e.user?C(e.message||'User "'.concat(e.user.username,'" created successfully')):C("User created successfully!")}P(!1),D()}catch(t){k("Failed to save user")}},W=c.reduce((e,t)=>e+parseFloat(t.total_amount||0),0),H=c.filter(e=>new Date(e.created_at).toDateString()===(new Date).toDateString()).length,U=()=>{return(0,De.jsxs)("div",{className:"oox-mobile-header oox-animate-fadeInUp",children:[(0,De.jsxs)("div",{className:"oox-brand",children:[(0,De.jsx)("div",{className:"oox-logo",children:(0,De.jsx)(Ei,{size:25,style:{color:"white"}})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"oox-title",children:"OOX Executive Portal"}),(0,De.jsxs)("p",{className:"oox-subtitle",children:[(null===t||void 0===t?void 0:t.first_name)||(null===t||void 0===t?void 0:t.username)||"Owner"," \u2022 ",A.toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-stats",children:[(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:(e=W,"R".concat(Number(e).toLocaleString()))}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Revenue"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:c.length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Orders"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:o.length}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Team"})]}),(0,De.jsxs)("div",{className:"oox-mobile-stat",children:[(0,De.jsx)("div",{className:"oox-mobile-stat-value",children:H}),(0,De.jsx)("div",{className:"oox-mobile-stat-label",children:"Today"})]})]})]});var e},V=()=>(0,De.jsx)("div",{className:"oox-mobile-nav oox-animate-slideInLeft",children:[{key:"overview",label:"Dashboard",icon:gi,action:()=>a("overview")},{key:"orders",label:"Orders",icon:ki,action:()=>i("/owner/orders")},{key:"users",label:"Team",icon:Pr,action:()=>a("users")},{key:"customers",label:"Customers",icon:Or,action:()=>i("/owner/customers")},{key:"payments",label:"Payments",icon:Zi,action:()=>i("/owner/payments")},{key:"analytics",label:"Analytics",icon:vi,action:()=>i("/owner/analytics")}].map(e=>(0,De.jsxs)("button",{onClick:e.action,className:"oox-mobile-nav-item ".concat(r===e.key?"active":""),children:[(0,De.jsx)(e.icon,{className:"oox-mobile-nav-icon"}),(0,De.jsx)("div",{className:"oox-mobile-nav-label",children:e.label})]},e.key))}),G=e=>{let{title:t,value:n,change:s,icon:i,color:r,prefix:a="",suffix:o="",onClick:l}=e;return(0,De.jsxs)("div",{className:"oox-mobile-card",onClick:l,style:Pe({cursor:l?"pointer":"default",transition:"all 0.3s ease"},l&&{":hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.1)"}}),children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-between oox-mobile-mb-2",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),(0,De.jsxs)("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:r,marginTop:"0.25rem"},children:[a,"number"===typeof n?n.toLocaleString():n,o]})]}),(0,De.jsx)("div",{style:{width:"60px",height:"60px",borderRadius:"12px",background:"".concat(r,"15"),display:"flex",alignItems:"center",justifyContent:"center",color:r},children:(0,De.jsx)(i,{size:24})})]}),s&&(0,De.jsxs)("div",{className:"oox-mobile-flex",style:{alignItems:"center",gap:"0.5rem"},children:[s>0?(0,De.jsx)(ii,{style:{color:"#10b981",fontSize:"0.875rem"}}):(0,De.jsx)(ni,{style:{color:"#ef4444",fontSize:"0.875rem"}}),(0,De.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:s>0?"#10b981":"#ef4444"},children:[Math.abs(s),"%"]}),(0,De.jsx)("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"vs last month"})]})]})},q=()=>(0,De.jsxs)("div",{className:"oox-mobile-card",children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-between oox-mobile-mb-3",children:[(0,De.jsxs)("h3",{style:{margin:0,color:"#1e293b",fontWeight:"700"},children:[(0,De.jsx)(Pr,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"OOX Team Management"]}),(0,De.jsxs)("button",{onClick:()=>F(),className:"oox-mobile-btn",style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:[(0,De.jsx)(rr,{style:{marginRight:"0.25rem"}}),"Add User"]})]}),(0,De.jsx)("div",{className:"oox-mobile-table",children:o.map(e=>{var t;return(0,De.jsxs)("div",{className:"oox-mobile-table-item",children:[(0,De.jsxs)("div",{className:"oox-mobile-table-header",children:[(0,De.jsxs)("div",{className:"oox-mobile-table-title",children:[e.first_name," ",e.last_name]}),(0,De.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,De.jsx)("button",{onClick:()=>F(e),style:{background:"none",border:"none",color:"#f59e0b",cursor:"pointer",padding:"0.25rem"},children:(0,De.jsx)(Li,{})}),(0,De.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ma(e),C("User deleted successfully!"),D()}catch(t){k("Failed to delete user")}})(e.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:(0,De.jsx)(Ar,{})})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-table-meta",children:[(0,De.jsxs)("div",{style:{marginBottom:"0.5rem"},children:[(0,De.jsxs)("strong",{children:["@",e.username]})," \u2022 ",e.email]}),(0,De.jsxs)("div",{className:"oox-mobile-flex",style:{gap:"0.5rem",alignItems:"center"},children:[(0,De.jsx)("span",{className:"oox-mobile-badge ".concat("owner"===e.role?"warning":"admin"===e.role?"success":"warehouse"===e.role?"warning":"success"),children:null===(t=e.role)||void 0===t?void 0:t.toUpperCase()}),(0,De.jsx)("span",{className:"oox-mobile-badge ".concat(e.is_active?"success":"danger"),children:e.is_active?"Active":"Inactive"})]})]})]},e.id)})})]}),K=()=>(0,De.jsxs)(Bo,{show:T,onHide:()=>P(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white"},children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(Pr,{style:{marginRight:"0.5rem"}}),M?"Edit OOX Team Member":"Add New OOX Team Member"]})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)(Wl,{onSubmit:B,noValidate:!0,children:[(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"First Name"}),(0,De.jsx)("input",{name:"first_name",value:R.first_name,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter first name"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Last Name"}),(0,De.jsx)("input",{name:"last_name",value:R.last_name,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter last name"})]})})]}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Phone Number"}),(0,De.jsx)("input",{name:"phone",value:R.phone,onChange:z,className:"oox-mobile-form-input",placeholder:"+1234567890",type:"tel"})]})})}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Username"}),(0,De.jsx)("input",{name:"username",value:R.username,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter username"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Email"}),(0,De.jsx)("input",{name:"email",type:"email",value:R.email,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter email"})]})})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Role"}),(0,De.jsxs)("select",{name:"role",value:R.role,onChange:z,className:"oox-mobile-form-input",children:[(0,De.jsx)("option",{value:"admin",children:"Admin"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery"}),(0,De.jsx)("option",{value:"owner",children:"Owner"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:["Password ",M&&"(leave blank to keep current)"]}),(0,De.jsx)("input",{name:"password",type:"password",value:R.password,onChange:z,className:"oox-mobile-form-input",placeholder:"Enter password"})]})})]}),!M&&(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsx)("label",{className:"oox-mobile-form-label",children:"Confirm Password *"}),(0,De.jsx)("input",{name:"password_confirm",type:"password",value:R.password_confirm,onChange:z,className:"oox-mobile-form-input",placeholder:"Confirm password"})]})})}),(0,De.jsx)("div",{className:"oox-mobile-form-group",children:(0,De.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,De.jsx)("input",{name:"is_active",type:"checkbox",checked:R.is_active,onChange:z}),(0,De.jsx)("span",{className:"oox-mobile-form-label",style:{margin:0},children:"Active User"})]})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsxs)(Xs,{variant:"secondary",onClick:()=>P(!1),children:[(0,De.jsx)(Cr,{style:{marginRight:"0.25rem"}}),"Cancel"]}),(0,De.jsxs)(Xs,{variant:"primary",onClick:B,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none"},children:[(0,De.jsx)(Pr,{style:{marginRight:"0.25rem"}}),M?"Update User":"Create User"]})]})]});return j?(0,De.jsxs)("div",{className:"oox-mobile-container",style:{minHeight:"100vh"},children:[(0,De.jsx)("div",{className:"oox-mobile-loading",children:(0,De.jsx)("div",{className:"oox-mobile-spinner"})}),(0,De.jsx)("div",{className:"oox-mobile-text-center",style:{marginTop:"1rem"},children:(0,De.jsx)("h3",{style:{color:"#f59e0b"},children:"Loading OOX Executive Portal..."})})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:t,userRole:"owner",onLogout:n}),(0,De.jsx)("div",{className:"main-content",children:(0,De.jsxs)("div",{className:"oox-mobile-container",style:{background:"#f8fafc",minHeight:"100vh"},children:[N&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>k(null),className:"oox-animate-fadeInUp",children:N}),S&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>C(null),className:"oox-animate-fadeInUp",children:S}),(0,De.jsx)(U,{}),(0,De.jsx)(V,{}),"overview"===r&&(0,De.jsxs)("div",{className:"oox-animate-fadeInUp",children:[(0,De.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,De.jsx)(G,{title:"Total Revenue",value:W,change:12,icon:Zi,color:"#f59e0b",prefix:"R",onClick:()=>i("/owner/payments")}),(0,De.jsx)(G,{title:"Total Orders",value:c.length,change:8,icon:ki,color:"#3b82f6",onClick:()=>i("/owner/orders")}),(0,De.jsx)(G,{title:"Team Members",value:o.length,change:5,icon:Or,color:"#10b981",onClick:()=>i("/owner/users")}),(0,De.jsx)(G,{title:"Today's Orders",value:H,change:-2,icon:pi,color:"#8b5cf6",onClick:()=>i("/owner/orders")})]}),(0,De.jsxs)("div",{className:"oox-mobile-card",children:[(0,De.jsxs)("h3",{style:{marginBottom:"1rem",color:"#1e293b",fontWeight:"700"},children:[(0,De.jsx)(li,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"OOX Quick Actions"]}),(0,De.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,De.jsxs)("button",{onClick:()=>i("/owner/orders"),className:"oox-mobile-btn",children:[(0,De.jsx)(ki,{}),"Manage Orders"]}),(0,De.jsxs)("button",{onClick:()=>a("users"),className:"oox-mobile-btn",children:[(0,De.jsx)(Pr,{}),"Team Management"]}),(0,De.jsxs)("button",{onClick:()=>i("/owner/customers"),className:"oox-mobile-btn",children:[(0,De.jsx)(Or,{}),"View Customers"]}),(0,De.jsxs)("button",{onClick:()=>i("/owner/payments"),className:"oox-mobile-btn",children:[(0,De.jsx)(Zi,{}),"Payments"]}),(0,De.jsxs)("button",{onClick:()=>i("/owner/transactions"),className:"oox-mobile-btn",children:[(0,De.jsx)(Zi,{}),"Transactions"]}),(0,De.jsxs)("button",{onClick:()=>i("/owner/analytics"),className:"oox-mobile-btn",children:[(0,De.jsx)(vi,{}),"Analytics"]})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-card",children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-between oox-mobile-mb-2",children:[(0,De.jsxs)("h3",{style:{margin:0,color:"#1e293b",fontWeight:"700"},children:[(0,De.jsx)(Zi,{style:{marginRight:"0.5rem",color:"#10b981"}}),"Payment Transactions"]}),(0,De.jsx)("button",{onClick:()=>i("/owner/transactions"),className:"oox-mobile-btn",children:"Open Transactions Page"})]}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"View the full transactions table on the dedicated Transactions page."})]})]}),"users"===r&&(0,De.jsx)("div",{className:"oox-animate-fadeInUp",children:(0,De.jsx)(q,{})}),"orders"===r&&(0,De.jsx)("div",{className:"oox-mobile-card oox-animate-fadeInUp",children:(0,De.jsxs)("div",{className:"oox-mobile-text-center",style:{padding:"2rem"},children:[(0,De.jsx)(ki,{size:48,style:{color:"#f59e0b",marginBottom:"1rem"}}),(0,De.jsx)("h3",{style:{color:"#1e293b",marginBottom:"1rem"},children:"OOX Orders Management"}),(0,De.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Comprehensive order management system coming soon"}),(0,De.jsx)("button",{onClick:()=>i("/owner/orders"),className:"oox-mobile-btn",children:"Go to Orders Page"})]})}),("customers"===r||"payments"===r||"analytics"===r)&&(0,De.jsx)("div",{className:"oox-mobile-card oox-animate-fadeInUp",children:(0,De.jsxs)("div",{className:"oox-mobile-text-center",style:{padding:"2rem"},children:[(0,De.jsx)(Vi,{size:48,style:{color:"#f59e0b",marginBottom:"1rem"}}),(0,De.jsxs)("h3",{style:{color:"#1e293b",marginBottom:"1rem"},children:["OOX ",r.charAt(0).toUpperCase()+r.slice(1)]}),(0,De.jsxs)("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:["Advanced ",r," management features are being enhanced for the executive experience"]}),(0,De.jsxs)("button",{onClick:()=>i("/owner/".concat(r)),className:"oox-mobile-btn",children:["Go to ",r.charAt(0).toUpperCase()+r.slice(1)," Page"]})]})}),(0,De.jsx)(K,{})]})})]})},Nd=["bsPrefix","size","vertical","className","role","as"],kd=s.forwardRef((e,t)=>{let{bsPrefix:n,size:s,vertical:i=!1,className:r,role:a="group",as:o="div"}=e,l=Le(e,Nd);const c=He(n,"btn-group");let d=c;return i&&(d="".concat(c,"-vertical")),(0,De.jsx)(o,Pe(Pe({},l),{},{ref:t,role:a,className:Oe()(r,d,s&&"".concat(c,"-").concat(s))}))});kd.displayName="ButtonGroup";const Sd=kd;const Cd=2**31-1;function Ad(e,t,n){const s=n-Date.now();e.current=s<=Cd?setTimeout(t,s):setTimeout(()=>Ad(e,t,n),Cd)}function Ed(){const e=function(){const e=(0,s.useRef)(!0),t=(0,s.useRef)(()=>e.current);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}(),t=(0,s.useRef)();return Fa(()=>clearTimeout(t.current)),(0,s.useMemo)(()=>{const n=()=>clearTimeout(t.current);return{set:function(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),i<=Cd?t.current=setTimeout(s,i):Ad(t,s,Date.now()+i))},clear:n,handleRef:t}},[])}var Td=Object.prototype.hasOwnProperty;function Pd(e,t,n){for(n of e.keys())if(Md(n,t))return n}function Md(e,t){var n,s,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&Md(e[s],t[s]););return-1===s}if(n===Set){if(e.size!==t.size)return!1;for(s of e){if((i=s)&&"object"===typeof i&&!(i=Pd(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(s of e){if((i=s[0])&&"object"===typeof i&&!(i=Pd(t,i)))return!1;if(!Md(s[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return-1===s}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return-1===s}if(!n||"object"===typeof e){for(n in s=0,e){if(Td.call(e,n)&&++s&&!Td.call(t,n))return!1;if(!(n in t)||!Md(e[n],t[n]))return!1}return Object.keys(t).length===s}}return e!==e&&t!==t}const Ld=function(e){const t=mt();return[e[0],(0,s.useCallback)(n=>{if(t())return e[1](n)},[t,e[1]])]};function Rd(e){return e.split("-")[0]}function Od(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Dd(e){return e instanceof Od(e).Element||e instanceof Element}function Id(e){return e instanceof Od(e).HTMLElement||e instanceof HTMLElement}function Fd(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Od(e).ShadowRoot||e instanceof ShadowRoot)}var zd=Math.max,Bd=Math.min,Wd=Math.round;function Hd(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ud(){return!/^((?!chrome|android).)*safari/i.test(Hd())}function Vd(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),i=1,r=1;t&&Id(e)&&(i=e.offsetWidth>0&&Wd(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&Wd(s.height)/e.offsetHeight||1);var a=(Dd(e)?Od(e):window).visualViewport,o=!Ud()&&n,l=(s.left+(o&&a?a.offsetLeft:0))/i,c=(s.top+(o&&a?a.offsetTop:0))/r,d=s.width/i,u=s.height/r;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Gd(e){var t=Vd(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function qd(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Fd(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Kd(e){return e?(e.nodeName||"").toLowerCase():null}function Xd(e){return Od(e).getComputedStyle(e)}function Yd(e){return["table","td","th"].indexOf(Kd(e))>=0}function Qd(e){return((Dd(e)?e.ownerDocument:e.document)||window.document).documentElement}function $d(e){return"html"===Kd(e)?e:e.assignedSlot||e.parentNode||(Fd(e)?e.host:null)||Qd(e)}function Jd(e){return Id(e)&&"fixed"!==Xd(e).position?e.offsetParent:null}function Zd(e){for(var t=Od(e),n=Jd(e);n&&Yd(n)&&"static"===Xd(n).position;)n=Jd(n);return n&&("html"===Kd(n)||"body"===Kd(n)&&"static"===Xd(n).position)?t:n||function(e){var t=/firefox/i.test(Hd());if(/Trident/i.test(Hd())&&Id(e)&&"fixed"===Xd(e).position)return null;var n=$d(e);for(Fd(n)&&(n=n.host);Id(n)&&["html","body"].indexOf(Kd(n))<0;){var s=Xd(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(e)||t}function eu(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function tu(e,t,n){return zd(e,Bd(t,n))}function nu(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function su(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}var iu="top",ru="bottom",au="right",ou="left",lu="auto",cu=[iu,ru,au,ou],du="start",uu="end",hu="viewport",mu="popper",pu=cu.reduce(function(e,t){return e.concat([t+"-"+du,t+"-"+uu])},[]),fu=[].concat(cu,[lu]).reduce(function(e,t){return e.concat([t,t+"-"+du,t+"-"+uu])},[]),gu=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const vu={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,s=e.name,i=e.options,r=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Rd(n.placement),l=eu(o),c=[ou,au].indexOf(o)>=0?"height":"width";if(r&&a){var d=function(e,t){return nu("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:su(e,cu))}(i.padding,n),u=Gd(r),h="y"===l?iu:ou,m="y"===l?ru:au,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],f=a[l]-n.rects.reference[l],g=Zd(r),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=p/2-f/2,b=d[h],y=v-u[c]-d[m],w=v/2-u[c]/2+x,j=tu(b,w,y),_=l;n.modifiersData[s]=((t={})[_]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"!==typeof s||(s=t.elements.popper.querySelector(s)))&&qd(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function xu(e){return e.split("-")[1]}var bu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yu(e){var t,n=e.popper,s=e.popperRect,i=e.placement,r=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=a.x,m=void 0===h?0:h,p=a.y,f=void 0===p?0:p,g="function"===typeof d?d({x:m,y:f}):{x:m,y:f};m=g.x,f=g.y;var v=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),b=ou,y=iu,w=window;if(c){var j=Zd(n),_="clientHeight",N="clientWidth";if(j===Od(n)&&"static"!==Xd(j=Qd(n)).position&&"absolute"===o&&(_="scrollHeight",N="scrollWidth"),i===iu||(i===ou||i===au)&&r===uu)y=ru,f-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[_])-s.height,f*=l?1:-1;if(i===ou||(i===iu||i===ru)&&r===uu)b=au,m-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[N])-s.width,m*=l?1:-1}var k,S=Object.assign({position:o},c&&bu),C=!0===d?function(e,t){var n=e.x,s=e.y,i=t.devicePixelRatio||1;return{x:Wd(n*i)/i||0,y:Wd(s*i)/i||0}}({x:m,y:f},Od(n)):{x:m,y:f};return m=C.x,f=C.y,l?Object.assign({},S,((k={})[y]=x?"0":"",k[b]=v?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+f+"px)":"translate3d("+m+"px, "+f+"px, 0)",k)):Object.assign({},S,((t={})[y]=x?f+"px":"",t[b]=v?m+"px":"",t.transform="",t))}const wu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,s=n.gpuAcceleration,i=void 0===s||s,r=n.adaptive,a=void 0===r||r,o=n.roundOffsets,l=void 0===o||o,c={placement:Rd(t.placement),variation:xu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,yu(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,yu(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ju={passive:!0};const _u={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,r=void 0===i||i,a=s.resize,o=void 0===a||a,l=Od(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(e){e.addEventListener("scroll",n.update,ju)}),o&&l.addEventListener("resize",n.update,ju),function(){r&&c.forEach(function(e){e.removeEventListener("scroll",n.update,ju)}),o&&l.removeEventListener("resize",n.update,ju)}},data:{}};var Nu={left:"right",right:"left",bottom:"top",top:"bottom"};function ku(e){return e.replace(/left|right|bottom|top/g,function(e){return Nu[e]})}var Su={start:"end",end:"start"};function Cu(e){return e.replace(/start|end/g,function(e){return Su[e]})}function Au(e){var t=Od(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Eu(e){return Vd(Qd(e)).left+Au(e).scrollLeft}function Tu(e){var t=Xd(e),n=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function Pu(e){return["html","body","#document"].indexOf(Kd(e))>=0?e.ownerDocument.body:Id(e)&&Tu(e)?e:Pu($d(e))}function Mu(e,t){var n;void 0===t&&(t=[]);var s=Pu(e),i=s===(null==(n=e.ownerDocument)?void 0:n.body),r=Od(s),a=i?[r].concat(r.visualViewport||[],Tu(s)?s:[]):s,o=t.concat(a);return i?o:o.concat(Mu($d(a)))}function Lu(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ru(e,t,n){return t===hu?Lu(function(e,t){var n=Od(e),s=Qd(e),i=n.visualViewport,r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(i){r=i.width,a=i.height;var c=Ud();(c||!c&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:r,height:a,x:o+Eu(e),y:l}}(e,n)):Dd(t)?function(e,t){var n=Vd(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Lu(function(e){var t,n=Qd(e),s=Au(e),i=null==(t=e.ownerDocument)?void 0:t.body,r=zd(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=zd(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-s.scrollLeft+Eu(e),l=-s.scrollTop;return"rtl"===Xd(i||n).direction&&(o+=zd(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:a,x:o,y:l}}(Qd(e)))}function Ou(e,t,n,s){var i="clippingParents"===t?function(e){var t=Mu($d(e)),n=["absolute","fixed"].indexOf(Xd(e).position)>=0&&Id(e)?Zd(e):e;return Dd(n)?t.filter(function(e){return Dd(e)&&qd(e,n)&&"body"!==Kd(e)}):[]}(e):[].concat(t),r=[].concat(i,[n]),a=r[0],o=r.reduce(function(t,n){var i=Ru(e,n,s);return t.top=zd(i.top,t.top),t.right=Bd(i.right,t.right),t.bottom=Bd(i.bottom,t.bottom),t.left=zd(i.left,t.left),t},Ru(e,a,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Du(e){var t,n=e.reference,s=e.element,i=e.placement,r=i?Rd(i):null,a=i?xu(i):null,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2;switch(r){case iu:t={x:o,y:n.y-s.height};break;case ru:t={x:o,y:n.y+n.height};break;case au:t={x:n.x+n.width,y:l};break;case ou:t={x:n.x-s.width,y:l};break;default:t={x:n.x,y:n.y}}var c=r?eu(r):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case du:t[c]=t[c]-(n[d]/2-s[d]/2);break;case uu:t[c]=t[c]+(n[d]/2-s[d]/2)}}return t}function Iu(e,t){void 0===t&&(t={});var n=t,s=n.placement,i=void 0===s?e.placement:s,r=n.strategy,a=void 0===r?e.strategy:r,o=n.boundary,l=void 0===o?"clippingParents":o,c=n.rootBoundary,d=void 0===c?hu:c,u=n.elementContext,h=void 0===u?mu:u,m=n.altBoundary,p=void 0!==m&&m,f=n.padding,g=void 0===f?0:f,v=nu("number"!==typeof g?g:su(g,cu)),x=h===mu?"reference":mu,b=e.rects.popper,y=e.elements[p?x:h],w=Ou(Dd(y)?y:y.contextElement||Qd(e.elements.popper),l,d,a),j=Vd(e.elements.reference),_=Du({reference:j,element:b,strategy:"absolute",placement:i}),N=Lu(Object.assign({},b,_)),k=h===mu?N:j,S={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},C=e.modifiersData.offset;if(h===mu&&C){var A=C[i];Object.keys(S).forEach(function(e){var t=[au,ru].indexOf(e)>=0?1:-1,n=[iu,ru].indexOf(e)>=0?"y":"x";S[e]+=A[n]*t})}return S}const Fu={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var i=n.mainAxis,r=void 0===i||i,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,p=void 0===m||m,f=n.allowedAutoPlacements,g=t.options.placement,v=Rd(g),x=l||(v===g||!p?[ku(g)]:function(e){if(Rd(e)===lu)return[];var t=ku(e);return[Cu(e),t,Cu(t)]}(g)),b=[g].concat(x).reduce(function(e,n){return e.concat(Rd(n)===lu?function(e,t){void 0===t&&(t={});var n=t,s=n.placement,i=n.boundary,r=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?fu:l,d=xu(s),u=d?o?pu:pu.filter(function(e){return xu(e)===d}):cu,h=u.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=u);var m=h.reduce(function(t,n){return t[n]=Iu(e,{placement:n,boundary:i,rootBoundary:r,padding:a})[Rd(n)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:f}):n)},[]),y=t.rects.reference,w=t.rects.popper,j=new Map,_=!0,N=b[0],k=0;k<b.length;k++){var S=b[k],C=Rd(S),A=xu(S)===du,E=[iu,ru].indexOf(C)>=0,T=E?"width":"height",P=Iu(t,{placement:S,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),M=E?A?au:ou:A?ru:iu;y[T]>w[T]&&(M=ku(M));var L=ku(M),R=[];if(r&&R.push(P[C]<=0),o&&R.push(P[M]<=0,P[L]<=0),R.every(function(e){return e})){N=S,_=!1;break}j.set(S,R)}if(_)for(var O=function(e){var t=b.find(function(t){var n=j.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return N=t,"break"},D=p?3:1;D>0;D--){if("break"===O(D))break}t.placement!==N&&(t.modifiersData[s]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function zu(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Bu(e){return[iu,au,ru,ou].some(function(t){return e[t]>=0})}const Wu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,s=e.name,i=n.offset,r=void 0===i?[0,0]:i,a=fu.reduce(function(e,n){return e[n]=function(e,t,n){var s=Rd(e),i=[ou,iu].indexOf(s)>=0?-1:1,r="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=r[0],o=r[1];return a=a||0,o=(o||0)*i,[ou,au].indexOf(s)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,r),e},{}),o=a[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=a}};const Hu={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,s=e.name,i=n.mainAxis,r=void 0===i||i,a=n.altAxis,o=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,m=void 0===h||h,p=n.tetherOffset,f=void 0===p?0:p,g=Iu(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=Rd(t.placement),x=xu(t.placement),b=!x,y=eu(v),w="x"===y?"y":"x",j=t.modifiersData.popperOffsets,_=t.rects.reference,N=t.rects.popper,k="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,S="number"===typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(j){if(r){var E,T="y"===y?iu:ou,P="y"===y?ru:au,M="y"===y?"height":"width",L=j[y],R=L+g[T],O=L-g[P],D=m?-N[M]/2:0,I=x===du?_[M]:N[M],F=x===du?-N[M]:-_[M],z=t.elements.arrow,B=m&&z?Gd(z):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=W[T],U=W[P],V=tu(0,_[M],B[M]),G=b?_[M]/2-D-V-H-S.mainAxis:I-V-H-S.mainAxis,q=b?-_[M]/2+D+V+U+S.mainAxis:F+V+U+S.mainAxis,K=t.elements.arrow&&Zd(t.elements.arrow),X=K?"y"===y?K.clientTop||0:K.clientLeft||0:0,Y=null!=(E=null==C?void 0:C[y])?E:0,Q=L+q-Y,$=tu(m?Bd(R,L+G-Y-X):R,L,m?zd(O,Q):O);j[y]=$,A[y]=$-L}if(o){var J,Z="x"===y?iu:ou,ee="x"===y?ru:au,te=j[w],ne="y"===w?"height":"width",se=te+g[Z],ie=te-g[ee],re=-1!==[iu,ou].indexOf(v),ae=null!=(J=null==C?void 0:C[w])?J:0,oe=re?se:te-_[ne]-N[ne]-ae+S.altAxis,le=re?te+_[ne]+N[ne]-ae-S.altAxis:ie,ce=m&&re?function(e,t,n){var s=tu(e,t,n);return s>n?n:s}(oe,te,le):tu(m?oe:se,te,m?le:ie);j[w]=ce,A[w]=ce-te}t.modifiersData[s]=A}},requiresIfExists:["offset"]};function Uu(e,t,n){void 0===n&&(n=!1);var s=Id(t),i=Id(t)&&function(e){var t=e.getBoundingClientRect(),n=Wd(t.width)/e.offsetWidth||1,s=Wd(t.height)/e.offsetHeight||1;return 1!==n||1!==s}(t),r=Qd(t),a=Vd(e,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&(("body"!==Kd(t)||Tu(r))&&(o=function(e){return e!==Od(e)&&Id(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Au(e);var t}(t)),Id(t)?((l=Vd(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Eu(r))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Vu(e){var t=new Map,n=new Set,s=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var s=t.get(e);s&&i(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),s}function Gu(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var qu={placement:"bottom",modifiers:[],strategy:"absolute"};function Ku(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"===typeof e.getBoundingClientRect)})}function Xu(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,s=void 0===n?[]:n,i=t.defaultOptions,r=void 0===i?qu:i;return function(e,t,n){void 0===n&&(n=r);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},qu,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],o=!1,l={state:i,setOptions:function(n){var o="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},r,i.options,o),i.scrollParents={reference:Dd(e)?Mu(e):e.contextElement?Mu(e.contextElement):[],popper:Mu(t)};var d=function(e){var t=Vu(e);return gu.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(s,i.options.modifiers)));return i.orderedModifiers=d.filter(function(e){return e.enabled}),i.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,s=void 0===n?{}:n,r=e.effect;if("function"===typeof r){var o=r({state:i,name:t,instance:l,options:s}),c=function(){};a.push(o||c)}}),l.update()},forceUpdate:function(){if(!o){var e=i.elements,t=e.reference,n=e.popper;if(Ku(t,n)){i.rects={reference:Uu(t,Zd(n),"fixed"===i.options.strategy),popper:Gd(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<i.orderedModifiers.length;s++)if(!0!==i.reset){var r=i.orderedModifiers[s],a=r.fn,c=r.options,d=void 0===c?{}:c,u=r.name;"function"===typeof a&&(i=a({state:i,options:d,name:u,instance:l})||i)}else i.reset=!1,s=-1}}},update:Gu(function(){return new Promise(function(e){l.forceUpdate(),e(i)})}),destroy:function(){c(),o=!0}};if(!Ku(e,t))return l;function c(){a.forEach(function(e){return e()}),a=[]}return l.setOptions(n).then(function(e){!o&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}}const Yu=Xu({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,s=t.rects.reference,i=t.rects.popper,r=t.modifiersData.preventOverflow,a=Iu(t,{elementContext:"reference"}),o=Iu(t,{altBoundary:!0}),l=zu(a,s),c=zu(o,i,r),d=Bu(l),u=Bu(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Du({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},wu,_u,Wu,Fu,Hu,vu]}),Qu=["enabled","placement","strategy","modifiers"];const $u={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Ju={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter(e=>e.trim()!==n.id);t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:s,reference:i}=t.elements,r=null==(n=s.getAttribute("role"))?void 0:n.toLowerCase();if(s.id&&"tooltip"===r&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(s.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(s.id):s.id)}}},Zu=[];const eh=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:r="bottom",strategy:a="absolute",modifiers:o=Zu}=n,l=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(n,Qu);const c=(0,s.useRef)(o),d=(0,s.useRef)(),u=(0,s.useCallback)(()=>{var e;null==(e=d.current)||e.update()},[]),h=(0,s.useCallback)(()=>{var e;null==(e=d.current)||e.forceUpdate()},[]),[m,p]=Ld((0,s.useState)({placement:r,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),f=(0,s.useMemo)(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},s={};Object.keys(t.elements).forEach(e=>{n[e]=t.styles[e],s[e]=t.attributes[e]}),p({state:t,styles:n,attributes:s,update:u,forceUpdate:h,placement:t.placement})}}),[u,h,p]),g=(0,s.useMemo)(()=>(Md(c.current,o)||(c.current=o),c.current),[o]);return(0,s.useEffect)(()=>{d.current&&i&&d.current.setOptions({placement:r,strategy:a,modifiers:[...g,f,$u]})},[a,r,f,i,g]),(0,s.useEffect)(()=>{if(i&&null!=e&&null!=t)return d.current=Yu(e,t,Object.assign({},l,{placement:r,strategy:a,modifiers:[...g,Ju,f]})),()=>{null!=d.current&&(d.current.destroy(),d.current=void 0,p(e=>Object.assign({},e,{attributes:{},styles:{popper:{}}})))}},[i,e,t]),m},th=()=>{};const nh=e=>e&&("current"in e?e.current:e),sh={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const ih=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:th,{disabled:n,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(0,s.useRef)(!1),a=(0,s.useRef)(!1),o=(0,s.useCallback)(t=>{const n=nh(e);var s;ul()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!n||!!((s=t).metaKey||s.altKey||s.ctrlKey||s.shiftKey)||!function(e){return 0===e.button}(t)||!!Ba(n,t.target)||a.current,a.current=!1},[e]),l=ht(t=>{const n=nh(e);n&&Ba(n,t.target)?a.current=!0:a.current=!1}),c=ht(e=>{r.current||t(e)});(0,s.useEffect)(()=>{var t,s;if(n||null==e)return;const r=Bt(nh(e)),a=r.defaultView||window;let d=null!=(t=a.event)?t:null==(s=a.parent)?void 0:s.event,u=null;sh[i]&&(u=Zt(r,sh[i],l,!0));const h=Zt(r,i,o,!0),m=Zt(r,i,e=>{e!==d?c(e):d=void 0});let p=[];return"ontouchstart"in r.documentElement&&(p=[].slice.call(r.body.children).map(e=>Zt(e,"mousemove",th))),()=>{null==u||u(),h(),m(),p.forEach(e=>e())}},[e,n,i,o,l,c])},rh=()=>{};const ah=function(e,t){let{disabled:n,clickTrigger:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t||rh;ih(e,r,{disabled:n,clickTrigger:i});const a=ht(e=>{Ft(e)&&r(e)});(0,s.useEffect)(()=>{if(n||null==e)return;const t=Bt(nh(e));let s=(t.defaultView||window).event;const i=Zt(t,"keyup",e=>{e!==s?a(e):s=void 0});return()=>{i()}},[e,n,a])};function oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function lh(e){let{enabled:t,enableEvents:n,placement:s,flip:i,offset:r,fixed:a,containerPadding:o,arrowElement:l,popperConfig:c={}}=e;var d,u,h,m,p;const f=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach(e=>{t[e.name]=e}),t):e||t}(c.modifiers);return Object.assign({},c,{placement:s,enabled:t,strategy:a?"fixed":c.strategy,modifiers:oh(Object.assign({},f,{eventListeners:{enabled:n,options:null==(d=f.eventListeners)?void 0:d.options},preventOverflow:Object.assign({},f.preventOverflow,{options:o?Object.assign({padding:o},null==(u=f.preventOverflow)?void 0:u.options):null==(h=f.preventOverflow)?void 0:h.options}),offset:{options:Object.assign({offset:r},null==(m=f.offset)?void 0:m.options)},arrow:Object.assign({},f.arrow,{enabled:!!l,options:Object.assign({},null==(p=f.arrow)?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!i},f.flip)}))})}const ch=s.forwardRef((e,t)=>{const{flip:n,offset:i,placement:r,containerPadding:a,popperConfig:o={},transition:l,runTransition:c}=e,[d,u]=dt(),[h,m]=dt(),p=bs(u,t),f=Ka(e.container),g=Ka(e.target),[v,x]=(0,s.useState)(!e.show),b=eh(g,d,lh({placement:r,enableEvents:!!e.show,containerPadding:a||5,flip:n,offset:i,arrowElement:h,popperConfig:o}));e.show&&v&&x(!1);const y=e.show||!v;if(ah(d,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!y)return null;const{onExit:w,onExiting:j,onEnter:_,onEntering:N,onEntered:k}=e;let S=e.children(Object.assign({},b.attributes.popper,{style:b.styles.popper,ref:p}),{popper:b,placement:r,show:!!e.show,arrowProps:Object.assign({},b.attributes.arrow,{style:b.styles.arrow,ref:m})});return S=eo(l,c,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:S,onExit:w,onExiting:j,onExited:function(){x(!0),e.onExited&&e.onExited(...arguments)},onEnter:_,onEntering:N,onEntered:k}),f?we.createPortal(S,f):null});ch.displayName="Overlay";const dh=ch,uh=["className","bsPrefix","as"],hh=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,uh);return s=He(s,"popover-header"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});hh.displayName="PopoverHeader";const mh=hh,ph=["className","bsPrefix","as"],fh=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div"}=e,r=Le(e,ph);return s=He(s,"popover-body"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});fh.displayName="PopoverBody";const gh=fh;s.Component;function vh(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}function xh(){return{position:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"absolute",top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const bh=["bsPrefix","placement","className","style","children","body","arrowProps","hasDoneInitialMeasure","popper","show"],yh=s.forwardRef((e,t)=>{let{bsPrefix:n,placement:s="right",className:i,style:r,children:a,body:o,arrowProps:l,hasDoneInitialMeasure:c,popper:d,show:u}=e,h=Le(e,bh);const m=He(n,"popover"),p=Ge(),[f]=(null==s?void 0:s.split("-"))||[],g=vh(f,p);let v=r;return u&&!c&&(v=Pe(Pe({},r),xh(null==d?void 0:d.strategy))),(0,De.jsxs)("div",Pe(Pe({ref:t,role:"tooltip",style:v,"x-placement":f,className:Oe()(i,m,f&&"bs-popover-".concat(g))},h),{},{children:[(0,De.jsx)("div",Pe({className:"popover-arrow"},l)),o?(0,De.jsx)(gh,{children:a}):a]}))});yh.displayName="Popover";const wh=Object.assign(yh,{Header:mh,Body:gh,POPPER_OFFSET:[0,8]}),jh=["bsPrefix","placement","className","style","children","arrowProps","hasDoneInitialMeasure","popper","show"],_h=s.forwardRef((e,t)=>{let{bsPrefix:n,placement:s="right",className:i,style:r,children:a,arrowProps:o,hasDoneInitialMeasure:l,popper:c,show:d}=e,u=Le(e,jh);n=He(n,"tooltip");const h=Ge(),[m]=(null==s?void 0:s.split("-"))||[],p=vh(m,h);let f=r;return d&&!l&&(f=Pe(Pe({},r),xh(null==c?void 0:c.strategy))),(0,De.jsxs)("div",Pe(Pe({ref:t,style:f,role:"tooltip","x-placement":m,className:Oe()(i,n,"bs-tooltip-".concat(p))},u),{},{children:[(0,De.jsx)("div",Pe({className:"tooltip-arrow"},o)),(0,De.jsx)("div",{className:"".concat(n,"-inner"),children:a})]}))});_h.displayName="Tooltip";const Nh=Object.assign(_h,{TOOLTIP_OFFSET:[0,6]});const kh=["children","transition","popperConfig","rootClose","placement","show"];const Sh=s.forwardRef((e,t)=>{let{children:n,transition:i=fn,popperConfig:r={},rootClose:a=!1,placement:o="top",show:l=!1}=e,c=Le(e,kh);const d=(0,s.useRef)({}),[u,h]=(0,s.useState)(null),[m,p]=function(e){const t=(0,s.useRef)(null),n=He(void 0,"popover"),i=He(void 0,"tooltip"),r=(0,s.useMemo)(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(ao(t.current,n))return wh.POPPER_OFFSET;if(ao(t.current,i))return Nh.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,i]);return[t,[r]]}(c.offset),f=on(t,m),g=!0===i?fn:i||void 0,v=it(e=>{h(e),null==r||null==r.onFirstUpdate||r.onFirstUpdate(e)});return $c(()=>{u&&c.target&&(null==d.current.scheduleUpdate||d.current.scheduleUpdate())},[u,c.target]),(0,s.useEffect)(()=>{l||h(null)},[l]),(0,De.jsx)(dh,Pe(Pe({},c),{},{ref:f,popperConfig:Pe(Pe({},r),{},{modifiers:p.concat(r.modifiers||[]),onFirstUpdate:v}),transition:g,rootClose:a,placement:o,show:l,children:(e,t)=>{let{arrowProps:a,popper:o,show:l}=t;var c;!function(e,t){const{ref:n}=e,{ref:s}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n(ln(e))),t.ref=s.__wrapped||(s.__wrapped=e=>s(ln(e)))}(e,a);const h=null==o?void 0:o.placement,m=Object.assign(d.current,{state:null==o?void 0:o.state,scheduleUpdate:null==o?void 0:o.update,placement:h,outOfBoundaries:(null==o||null==(c=o.state)||null==(c=c.modifiersData.hide)?void 0:c.isReferenceHidden)||!1,strategy:r.strategy}),p=!!u;return"function"===typeof n?n(Pe(Pe(Pe({},e),{},{placement:h,show:l},!i&&l&&{className:"show"}),{},{popper:m,arrowProps:a,hasDoneInitialMeasure:p})):s.cloneElement(n,Pe(Pe({},e),{},{placement:h,arrowProps:a,popper:m,hasDoneInitialMeasure:p,className:Oe()(n.props.className,!i&&l&&"show"),style:Pe(Pe({},n.props.style),e.style)}))}}))});Sh.displayName="Overlay";const Ch=Sh,Ah=["trigger","overlay","children","popperConfig","show","defaultShow","onToggle","delay","placement","flip"];function Eh(e,t,n){const[s]=t,i=s.currentTarget,r=s.relatedTarget||s.nativeEvent[n];r&&r===i||Ba(i,r)||e(...t)}vn().oneOf(["click","hover","focus"]);const Th=e=>{let{trigger:t=["hover","focus"],overlay:n,children:i,popperConfig:r={},show:a,defaultShow:o=!1,onToggle:l,delay:c,placement:d,flip:u=d&&-1!==d.indexOf("auto")}=e,h=Le(e,Ah);const m=(0,s.useRef)(null),p=on(m,zt(i)),f=Ed(),g=(0,s.useRef)(""),[v,x]=Je(a,o,l),b=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(c),{onFocus:y,onBlur:w,onClick:j}="function"!==typeof i?s.Children.only(i).props:{},_=(0,s.useCallback)(()=>{f.clear(),g.current="show",b.show?f.set(()=>{"show"===g.current&&x(!0)},b.show):x(!0)},[b.show,x,f]),N=(0,s.useCallback)(()=>{f.clear(),g.current="hide",b.hide?f.set(()=>{"hide"===g.current&&x(!1)},b.hide):x(!1)},[b.hide,x,f]),k=(0,s.useCallback)(function(){_(),null==y||y(...arguments)},[_,y]),S=(0,s.useCallback)(function(){N(),null==w||w(...arguments)},[N,w]),C=(0,s.useCallback)(function(){x(!v),null==j||j(...arguments)},[j,x,v]),A=(0,s.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Eh(_,t,"fromElement")},[_]),E=(0,s.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Eh(N,t,"toElement")},[N]),T=null==t?[]:[].concat(t),P={ref:e=>{p(ln(e))}};return-1!==T.indexOf("click")&&(P.onClick=C),-1!==T.indexOf("focus")&&(P.onFocus=k,P.onBlur=S),-1!==T.indexOf("hover")&&(P.onMouseOver=A,P.onMouseOut=E),(0,De.jsxs)(De.Fragment,{children:["function"===typeof i?i(P):(0,s.cloneElement)(i,P),(0,De.jsx)(Ch,Pe(Pe({},h),{},{show:v,onHide:N,flip:u,placement:d,popperConfig:r,target:m.current,children:n}))]})},Ph=e=>{var t,n;let{onClose:i,onSubmit:r,loading:a=!1,initialData:o=null,initialItems:l=null,isEdit:c=!1}=e;const[d,u]=(0,s.useState)({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",expectedDeliveryDate:"",adminNotes:"",depositAmount:"",paymentStatus:"deposit_only",orderStatus:"pending"}),[h,m]=(0,s.useState)(null),[p,f]=(0,s.useState)({productId:"",productName:"",productDescription:"",quantity:1,unitPrice:"",color:"",fabric:""}),[g,v]=(0,s.useState)([]),[x,b]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[j,_]=(0,s.useState)([]),[N,k]=(0,s.useState)({}),[S,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{pa().then(e=>b(e.results||e)).catch(()=>b([])),fa().then(e=>w(e.results||e)).catch(()=>w([])),ga().then(e=>_(e.results||e)).catch(()=>_([]))},[]),(0,s.useEffect)(()=>{o&&u({customerName:o.customerName||"",customerPhone:o.customerPhone||"",customerEmail:o.customerEmail||"",customerAddress:o.customerAddress||"",expectedDeliveryDate:o.expectedDeliveryDate||"",adminNotes:o.adminNotes||"",depositAmount:o.depositAmount||"",paymentStatus:o.paymentStatus||"deposit_only",orderStatus:o.orderStatus||"pending"}),l&&v(l)},[o,l]);const A=e=>{const{name:t,value:n}=e.target;u(e=>Pe(Pe({},e),{},{[t]:n})),N[t]&&k(e=>Pe(Pe({},e),{},{[t]:""}))},E=e=>{const{name:t,value:n}=e.target;let s={[t]:n};if("productId"===t){const e=x.find(e=>String(e.id)===String(n));s.productName=e?e.name:"",s.productDescription=e?e.description:"",s.unitPrice=e?e.base_price:"",s.color="",s.fabric=""}f(e=>Pe(Pe({},e),s)),N[t]&&k(e=>Pe(Pe({},e),{},{[t]:""}))},T=()=>g.reduce((e,t)=>e+(parseFloat(t.unitPrice)||0)*(parseInt(t.quantity)||0),0).toFixed(2),P=x.find(e=>String(e.id)===String(p.productId)),M=P?P.product_type:null,L={Couch:{color:!0,fabric:!0},TVStand:{color:!0,fabric:!1},Accessory:{color:!1,fabric:!1}},R=M&&(null===(t=L[M])||void 0===t?void 0:t.color),O=M&&(null===(n=L[M])||void 0===n?void 0:n.fabric);return(0,De.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,De.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return d.customerName.trim()||(e.customerName="Customer name is required"),d.customerPhone.trim()||(e.customerPhone="Customer phone is required"),d.customerAddress.trim()||(e.customerAddress="Customer address is required"),d.expectedDeliveryDate||(e.expectedDeliveryDate="Expected delivery date is required"),!d.depositAmount||parseFloat(d.depositAmount)<0?e.depositAmount="Valid deposit amount is required":parseFloat(d.depositAmount)>parseFloat(T())&&(e.depositAmount="Deposit amount cannot exceed total amount"),0===g.length&&(e.orderItems='Please add at least one product to the order using the "Add Product" button above'),c||h||(e.popFile="Proof of payment is required"),k(e),0===Object.keys(e).length})()){C(!0);try{const e=await na(),t=(e.results||e).find(e=>e.name.trim().toLowerCase()===d.customerName.trim().toLowerCase()&&e.phone.replace(/\D/g,"")===d.customerPhone.replace(/\D/g,""));let n;if(t)n=t.id;else{n=(await sa({name:d.customerName,phone:d.customerPhone,email:d.customerEmail,address:d.customerAddress})).id}const s=T(),i=parseFloat(d.depositAmount),a=(parseFloat(s)-i).toFixed(2),o={customer_id:n,expected_delivery_date:d.expectedDeliveryDate,admin_notes:d.adminNotes,deposit_amount:i.toFixed(2),payment_status:d.paymentStatus,order_status:d.orderStatus,total_amount:s,balance_amount:a,items:g.map(e=>({product:e.productId,quantity:parseInt(e.quantity),unit_price:parseFloat(e.unitPrice),color:e.color||null,fabric:e.fabric||null,product_description:e.productDescription||""})),popFile:h||null,popNotes:d.adminNotes||""};r(o)}catch(t){k(e=>Pe(Pe({},e),{},{customer:"Failed to create or find customer: "+(t.message||"Unknown error")}))}finally{C(!1)}}},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,De.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:(0,De.jsxs)("div",{className:"flex items-center justify-between",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:c?"Edit Order":"Add New Order"}),(0,De.jsx)("p",{className:"text-gray-600",children:c?"Edit the order details below":"Create a new order for customer"})]}),(0,De.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",type:"button",children:(0,De.jsx)(Cr,{className:"text-gray-500"})})]})}),(0,De.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,De.jsx)(Rr,{className:"mr-2"})," Customer Information"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),(0,De.jsx)("input",{type:"text",name:"customerName",value:d.customerName,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(N.customerName?"border-red-500":"border-gray-300"),placeholder:"Enter customer name"}),N.customerName&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.customerName})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(sr,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"tel",name:"customerPhone",value:d.customerPhone,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(N.customerPhone?"border-red-500":"border-gray-300"),placeholder:"Enter phone number"})]}),N.customerPhone&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.customerPhone})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Ri,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"email",name:"customerEmail",value:d.customerEmail,onChange:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)($i,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"text",name:"customerAddress",value:d.customerAddress,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(N.customerAddress?"border-red-500":"border-gray-300"),placeholder:"Enter address"})]}),N.customerAddress&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.customerAddress})]})]})]}),(0,De.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg mt-4",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[(0,De.jsx)(di,{className:"mr-2"})," Products in Order"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,De.jsxs)("div",{className:"md:col-span-2",children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),(0,De.jsxs)("select",{name:"productId",value:p.productId,onChange:E,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.productId?"border-red-500":"border-gray-300"),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select a product"}),x.filter(e=>e.available_for_order).map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.name," (",e.model_code,")"]},e.id))]}),N.productId&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.productId})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),(0,De.jsx)("textarea",{name:"productDescription",value:p.productDescription,onChange:E,rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter product description, specifications, or special requirements"})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),(0,De.jsx)("input",{type:"number",name:"quantity",value:p.quantity,onChange:E,min:"1",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.quantity?"border-red-500":"border-gray-300"),placeholder:"1"}),N.quantity&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.quantity})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price (R) *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Pi,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"number",name:"unitPrice",value:p.unitPrice,onChange:E,step:"0.01",min:"0",className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(N.unitPrice?"border-red-500":"border-gray-300"),placeholder:"0.00"})]}),N.unitPrice&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.unitPrice})]}),R&&(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),(0,De.jsxs)("select",{name:"color",value:p.color,onChange:E,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,De.jsx)("option",{value:"",children:"Select color"}),y.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),O&&(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fabric"}),(0,De.jsxs)("select",{name:"fabric",value:p.fabric,onChange:E,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,De.jsx)("option",{value:"",children:"Select fabric"}),j.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,De.jsx)("div",{className:"flex justify-end mb-2",children:(0,De.jsx)("button",{type:"button",onClick:()=>{const e={};p.productId||(e.productId="Product is required"),(!p.unitPrice||parseFloat(p.unitPrice)<=0)&&(e.unitPrice="Valid unit price is required"),(!p.quantity||parseInt(p.quantity)<=0)&&(e.quantity="Valid quantity is required"),Object.keys(e).length>0?k(e):(v(e=>[...e,Pe({},p)]),f({productId:"",productName:"",productDescription:"",quantity:1,unitPrice:"",color:"",fabric:""}))},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:"Add Product"})}),(0,De.jsxs)("div",{className:"overflow-x-auto",children:[(0,De.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Product"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Description"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Qty"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Unit Price"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Color"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Fabric"}),(0,De.jsx)("th",{className:"px-3 py-2 text-left",children:"Total"}),(0,De.jsx)("th",{className:"px-3 py-2"})]})}),(0,De.jsx)("tbody",{children:0===g.length?(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:"8",className:"text-center text-gray-400 py-4",children:"No products added yet"})}):g.map((e,t)=>{const n=x.find(t=>String(t.id)===String(e.productId)),s=y.find(t=>String(t.id)===String(e.color)),i=j.find(t=>String(t.id)===String(e.fabric));return(0,De.jsxs)("tr",{className:"border-b",children:[(0,De.jsx)("td",{className:"px-3 py-2",children:n?n.name:e.productName}),(0,De.jsx)("td",{className:"px-3 py-2",children:e.productDescription}),(0,De.jsx)("td",{className:"px-3 py-2",children:e.quantity}),(0,De.jsxs)("td",{className:"px-3 py-2",children:["R",e.unitPrice]}),(0,De.jsx)("td",{className:"px-3 py-2",children:s?s.name:""}),(0,De.jsx)("td",{className:"px-3 py-2",children:i?i.name:""}),(0,De.jsxs)("td",{className:"px-3 py-2",children:["R",(parseFloat(e.unitPrice)*parseInt(e.quantity)).toFixed(2)]}),(0,De.jsx)("td",{className:"px-3 py-2",children:(0,De.jsx)("button",{type:"button",onClick:()=>(e=>{v(t=>t.filter((t,n)=>n!==e))})(t),className:"text-red-600 hover:underline",children:"Remove"})})]},t)})})]}),N.orderItems&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.orderItems})]})]}),(0,De.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mt-4",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[(0,De.jsx)(Pi,{className:"mr-2"})," Financial Information"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount"}),(0,De.jsx)("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:(0,De.jsxs)("span",{className:"text-lg font-semibold",children:["R",T()]})})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount (R) *"}),(0,De.jsxs)("div",{className:"relative",children:[(0,De.jsx)(Pi,{className:"absolute left-3 top-3 text-gray-400"}),(0,De.jsx)("input",{type:"number",name:"depositAmount",value:d.depositAmount,onChange:A,step:"0.01",min:"0",max:T(),className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 ".concat(N.depositAmount?"border-red-500":"border-gray-300"),placeholder:"0.00"})]}),N.depositAmount&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.depositAmount})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance Amount"}),(0,De.jsx)("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:(0,De.jsxs)("span",{className:"text-lg font-semibold",children:["R",(parseFloat(T())-(parseFloat(d.depositAmount)||0)).toFixed(2)]})})]})]}),!c&&(0,De.jsxs)("div",{className:"mt-4",children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proof of Payment (PDF/Image) *"}),(0,De.jsx)("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>{var t;return m((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full px-3 py-2 border rounded-lg ".concat(N.popFile?"border-red-500":"border-gray-300")}),N.popFile&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.popFile})]})]}),(0,De.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg mt-4",children:[(0,De.jsxs)("h3",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[(0,De.jsx)(mi,{className:"mr-2"})," Delivery Information"]}),(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),(0,De.jsx)("input",{type:"date",name:"expectedDeliveryDate",value:d.expectedDeliveryDate,onChange:A,min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 ".concat(N.expectedDeliveryDate?"border-red-500":"border-gray-300")}),N.expectedDeliveryDate&&(0,De.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.expectedDeliveryDate})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),(0,De.jsxs)("select",{name:"orderStatus",value:d.orderStatus||"pending",onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,De.jsx)("option",{value:"pending",children:"Pending"}),(0,De.jsx)("option",{value:"confirmed",children:"Confirmed (Deposit Paid)"}),(0,De.jsx)("option",{value:"in_production",children:"In Production"})]})]})]})]}),(0,De.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-4",children:[(0,De.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Notes"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),(0,De.jsx)("textarea",{name:"adminNotes",value:d.adminNotes,onChange:A,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter any additional notes, special instructions, or order source (phone call, WhatsApp, etc.)"})]})]}),(0,De.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 mt-4",children:[(0,De.jsx)("button",{type:"button",onClick:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),(0,De.jsx)("button",{type:"submit",disabled:a||S,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:a?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(yr,{className:"animate-spin mr-2"}),c?"Saving...":"Creating Order..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(dr,{className:"mr-2"}),c?"Save Changes":"Create Order"]})})]})]})})},Mh=["bsPrefix","className","as"],Lh=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,as:i}=e,r=Le(e,Mh);n=He(n,"navbar-brand");const a=i||(r.href?"a":"span");return(0,De.jsx)(a,Pe(Pe({},r),{},{ref:t,className:Oe()(s,n)}))});Lh.displayName="NavbarBrand";const Rh=Lh;const Oh=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>null!=e).reduce((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];e.apply(this,s),t.apply(this,s)}},null)},Dh=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"],Ih={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Fh(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],s=Ih[e];return n+parseInt(qt(t,s[0]),10)+parseInt(qt(t,s[1]),10)}const zh={[Pt]:"collapse",[Rt]:"collapsing",[Mt]:"collapsing",[Lt]:"collapse show"},Bh=s.forwardRef((e,t)=>{let{onEnter:n,onEntering:i,onEntered:r,onExit:a,onExiting:o,className:l,children:c,dimension:d="height",in:u=!1,timeout:h=300,mountOnEnter:m=!1,unmountOnExit:p=!1,appear:f=!1,getDimensionValue:g=Fh}=e,v=Le(e,Dh);const x="function"===typeof d?d():d,b=(0,s.useMemo)(()=>Oh(e=>{e.style[x]="0"},n),[x,n]),y=(0,s.useMemo)(()=>Oh(e=>{const t="scroll".concat(x[0].toUpperCase()).concat(x.slice(1));e.style[x]="".concat(e[t],"px")},i),[x,i]),w=(0,s.useMemo)(()=>Oh(e=>{e.style[x]=null},r),[x,r]),j=(0,s.useMemo)(()=>Oh(e=>{e.style[x]="".concat(g(x,e),"px"),rn(e)},a),[a,g,x]),_=(0,s.useMemo)(()=>Oh(e=>{e.style[x]=null},o),[x,o]);return(0,De.jsx)(un,Pe(Pe({ref:t,addEndListener:sn},v),{},{"aria-expanded":v.role?u:null,onEnter:b,onEntering:y,onEntered:w,onExit:j,onExiting:_,childRef:zt(c),in:u,timeout:h,mountOnEnter:m,unmountOnExit:p,appear:f,children:(e,t)=>s.cloneElement(c,Pe(Pe({},t),{},{className:Oe()(l,c.props.className,zh[e],"width"===x&&"collapse-horizontal")}))}))});Bh.displayName="Collapse";const Wh=Bh,Hh=["children","bsPrefix"],Uh=s.forwardRef((e,t)=>{let{children:n,bsPrefix:i}=e,r=Le(e,Hh);i=He(i,"navbar-collapse");const a=(0,s.useContext)(Ds);return(0,De.jsx)(Wh,Pe(Pe({in:!(!a||!a.expanded)},r),{},{children:(0,De.jsx)("div",{ref:t,className:i,children:n})}))});Uh.displayName="NavbarCollapse";const Vh=Uh,Gh=["bsPrefix","className","children","label","as","onClick"],qh=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,children:r,label:a="Toggle navigation",as:o="button",onClick:l}=e,c=Le(e,Gh);n=He(n,"navbar-toggler");const{onToggle:d,expanded:u}=(0,s.useContext)(Ds)||{},h=it(e=>{l&&l(e),d&&d()});return"button"===o&&(c.type="button"),(0,De.jsx)(o,Pe(Pe({},c),{},{ref:t,onClick:h,"aria-label":a,className:Oe()(i,n,!u&&"collapsed"),children:r||(0,De.jsx)("span",{className:"".concat(n,"-icon")})}))});qh.displayName="NavbarToggle";const Kh=qh,Xh=["onHide"],Yh=s.forwardRef((e,t)=>{let{onHide:n}=e,i=Le(e,Xh);const r=(0,s.useContext)(Ds),a=it(()=>{null==r||null==r.onToggle||r.onToggle(),null==n||n()});return(0,De.jsx)(yd,Pe(Pe({ref:t,show:!(null==r||!r.expanded)},i),{},{renderStaticNode:!0,onHide:a}))});Yh.displayName="NavbarOffcanvas";const Qh=Yh,$h=["className","bsPrefix","as"],Jh=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="span"}=e,r=Le(e,$h);return s=He(s,"navbar-text"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Jh.displayName="NavbarText";const Zh=Jh,em=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],tm=s.forwardRef((e,t)=>{const n=Ze(e,{expanded:"onToggle"}),{bsPrefix:i,expand:r=!0,variant:a="light",bg:o,fixed:l,sticky:c,className:d,as:u="nav",expanded:h,onToggle:m,onSelect:p,collapseOnSelect:f=!1}=n,g=Le(n,em),v=He(i,"navbar"),x=(0,s.useCallback)(function(){null==p||p(...arguments),f&&h&&(null==m||m(!1))},[p,f,h,m]);void 0===g.role&&"nav"!==u&&(g.role="navigation");let b="".concat(v,"-expand");"string"===typeof r&&(b="".concat(b,"-").concat(r));const y=(0,s.useMemo)(()=>({onToggle:()=>null==m?void 0:m(!h),bsPrefix:v,expanded:!!h,expand:r}),[v,h,r,m]);return(0,De.jsx)(Ds.Provider,{value:y,children:(0,De.jsx)(_s.Provider,{value:x,children:(0,De.jsx)(u,Pe(Pe({ref:t},g),{},{className:Oe()(d,v,r&&b,a&&"".concat(v,"-").concat(a),o&&"bg-".concat(o),c&&"sticky-".concat(c),l&&"fixed-".concat(l))}))})})});tm.displayName="Navbar";const nm=Object.assign(tm,{Brand:Rh,Collapse:Vh,Offcanvas:Qh,Text:Zh,Toggle:Kh}),sm=s.createContext(null),im=["children","usePopper"];const rm=()=>{};function am(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,s.useContext)(sm),[n,i]=dt(),r=(0,s.useRef)(!1),{flip:a,offset:o,rootCloseEvent:l,fixed:c=!1,placement:d,popperConfig:u={},enableEventListeners:h=!0,usePopper:m=!!t}=e,p=null==(null==t?void 0:t.show)?!!e.show:t.show;p&&!r.current&&(r.current=!0);const{placement:f,setMenu:g,menuElement:v,toggleElement:x}=t||{},b=eh(x,v,lh({placement:d||f||"bottom-start",enabled:m,enableEvents:null==h?p:h,offset:o,flip:a,fixed:c,arrowElement:n,popperConfig:u})),y=Object.assign({ref:g||rm,"aria-labelledby":null==x?void 0:x.id},b.attributes.popper,{style:b.styles.popper}),w={show:p,placement:f,hasShown:r.current,toggle:null==t?void 0:t.toggle,popper:m?b:null,arrowProps:m?Object.assign({ref:i},b.attributes.arrow,{style:b.styles.arrow}):{}};return ih(v,e=>{null==t||t.toggle(!1,e)},{clickTrigger:l,disabled:!p}),[y,w]}function om(e){let{children:t,usePopper:n=!0}=e,s=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,im);const[i,r]=am(Object.assign({},s,{usePopper:n}));return(0,De.jsx)(De.Fragment,{children:t(i,r)})}om.displayName="DropdownMenu";const lm=om,cm=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},dm=()=>{};function um(){const e=dc(),{show:t=!1,toggle:n=dm,setToggle:i,menuElement:r}=(0,s.useContext)(sm)||{},a=(0,s.useCallback)(e=>{n(!t,e)},[t,n]),o={id:e,ref:i||dm,onClick:a,"aria-expanded":!!t};return r&&cm(r)&&(o["aria-haspopup"]=!0),[o,{show:t,toggle:n}]}function hm(e){let{children:t}=e;const[n,s]=um();return(0,De.jsx)(De.Fragment,{children:t(n,s)})}hm.displayName="DropdownToggle";const mm=hm,pm=["eventKey","disabled","onClick","active","as"];function fm(e){let{key:t,href:n,active:i,disabled:r,onClick:a}=e;const o=(0,s.useContext)(_s),l=(0,s.useContext)(ws),{activeKey:c}=l||{},d=js(t,n),u=null==i&&null!=t?js(c)===d:i;return[{onClick:ht(e=>{r||(null==a||a(e),o&&!e.isPropagationStopped()&&o(d,e))}),"aria-disabled":r||void 0,"aria-selected":u,[ks("dropdown-item")]:""},{isActive:u}]}const gm=s.forwardRef((e,t)=>{let{eventKey:n,disabled:s,onClick:i,active:r,as:a=yt}=e,o=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,pm);const[l]=fm({key:n,href:o.href,disabled:s,onClick:i,active:r});return(0,De.jsx)(a,Object.assign({},o,{ref:t},l))});gm.displayName="DropdownItem";const vm=gm;function xm(){const e=vs(),t=(0,s.useRef)(null),n=(0,s.useCallback)(n=>{t.current=n,e()},[e]);return[t,n]}function bm(e){let{defaultShow:t,show:n,onSelect:i,onToggle:r,itemSelector:a="* [".concat(ks("dropdown-item"),"]"),focusFirstItemOnShow:o,placement:l="bottom-start",children:c}=e;const d=Ga(),[u,h]=ic(n,t,r),[m,p]=xm(),f=m.current,[g,v]=xm(),x=g.current,b=pt(u),y=(0,s.useRef)(null),w=(0,s.useRef)(!1),j=(0,s.useContext)(_s),_=(0,s.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;h(e,{originalEvent:t,source:n})},[h]),N=ht((e,t)=>{null==i||i(e,t),_(!1,t,"select"),t.isPropagationStopped()||null==j||j(e,t)}),k=(0,s.useMemo)(()=>({toggle:_,placement:l,show:u,menuElement:f,toggleElement:x,setMenu:p,setToggle:v}),[_,l,u,f,x,p,v]);f&&b&&!u&&(w.current=f.contains(f.ownerDocument.activeElement));const S=ht(()=>{x&&x.focus&&x.focus()}),C=ht(()=>{const e=y.current;let t=o;if(null==t&&(t=!(!m.current||!cm(m.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=gs(m.current,a)[0];n&&n.focus&&n.focus()});(0,s.useEffect)(()=>{u?C():w.current&&(w.current=!1,S())},[u,w,S,C]),(0,s.useEffect)(()=>{y.current=null});const A=(e,t)=>{if(!m.current)return null;const n=gs(m.current,a);let s=n.indexOf(e)+t;return s=Math.max(0,Math.min(s,n.length)),n[s]};return function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=ht(n);(0,s.useEffect)(()=>{const n="function"===typeof e?e():e;return n.addEventListener(t,r,i),()=>n.removeEventListener(t,r,i)},[e])}((0,s.useCallback)(()=>d.document,[d]),"keydown",e=>{var t,n;const{key:s}=e,i=e.target,r=null==(t=m.current)?void 0:t.contains(i),a=null==(n=g.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===s||"Escape"!==s&&r||"Escape"===s&&"search"===i.type))return;if(!r&&!a)return;if("Tab"===s&&(!m.current||!u))return;y.current=e.type;const o={originalEvent:e,source:e.type};switch(s){case"ArrowUp":{const t=A(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),u){const e=A(i,1);e&&e.focus&&e.focus()}else h(!0,o);return;case"Tab":$t(i.ownerDocument,"keyup",e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=m.current)&&t.contains(e.target)||h(!1,o)},{once:!0});break;case"Escape":"Escape"===s&&(e.preventDefault(),e.stopPropagation()),h(!1,o)}}),(0,De.jsx)(_s.Provider,{value:N,children:(0,De.jsx)(sm.Provider,{value:k,children:c})})}bm.displayName="Dropdown",bm.Menu=lm,bm.Toggle=mm,bm.Item=vm;const ym=bm,wm=s.createContext({});wm.displayName="DropdownContext";const jm=wm,_m=["className","bsPrefix","as","role"],Nm=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="hr",role:r="separator"}=e,a=Le(e,_m);return s=He(s,"dropdown-divider"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s),role:r},a))});Nm.displayName="DropdownDivider";const km=Nm,Sm=["className","bsPrefix","as","role"],Cm=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="div",role:r="heading"}=e,a=Le(e,Sm);return s=He(s,"dropdown-header"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s),role:r},a))});Cm.displayName="DropdownHeader";const Am=Cm,Em=["bsPrefix","className","eventKey","disabled","onClick","active","as"],Tm=s.forwardRef((e,t)=>{let{bsPrefix:n,className:s,eventKey:i,disabled:r=!1,onClick:a,active:o,as:l=_t}=e,c=Le(e,Em);const d=He(n,"dropdown-item"),[u,h]=fm({key:i,href:c.href,disabled:r,onClick:a,active:o});return(0,De.jsx)(l,Pe(Pe(Pe({},c),u),{},{ref:t,className:Oe()(s,d,h.isActive&&"active",r&&"disabled")}))});Tm.displayName="DropdownItem";const Pm=Tm,Mm=["className","bsPrefix","as"],Lm=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:i="span"}=e,r=Le(e,Mm);return s=He(s,"dropdown-item-text"),(0,De.jsx)(i,Pe({ref:t,className:Oe()(n,s)},r))});Lm.displayName="DropdownItemText";const Rm=Lm;function Om(e,t){return e}const Dm=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function Im(e,t,n){let s=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?s=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?s=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?s=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?s="bottom":"up-centered"===t&&(s="top"),s}const Fm=s.forwardRef((e,t)=>{let{bsPrefix:n,className:i,align:r,rootCloseEvent:a,flip:o=!0,show:l,renderOnMount:c,as:d="div",popperConfig:u,variant:h}=e,m=Le(e,Dm),p=!1;const f=(0,s.useContext)(Ds),g=He(n,"dropdown-menu"),{align:v,drop:x,isRTL:b}=(0,s.useContext)(jm);r=r||v;const y=(0,s.useContext)($l),w=[];if(r)if("object"===typeof r){const e=Object.keys(r);if(e.length){const t=e[0],n=r[t];p="start"===n,w.push("".concat(g,"-").concat(t,"-").concat(n))}}else"end"===r&&(p=!0);const j=Im(p,x,b),[_,{hasShown:N,popper:k,show:S,toggle:C}]=am({flip:o,rootCloseEvent:a,show:l,usePopper:!f&&0===w.length,offset:[0,2],popperConfig:u,placement:j});if(_.ref=on(Om(t),_.ref),$c(()=>{S&&(null==k||k.update())},[S]),!N&&!c&&!y)return null;"string"!==typeof d&&(_.show=S,_.close=()=>null==C?void 0:C(!1),_.align=r);let A=m.style;return null!=k&&k.placement&&(A=Pe(Pe({},m.style),_.style),m["x-placement"]=k.placement),(0,De.jsx)(d,Pe(Pe(Pe(Pe({},m),_),{},{style:A},(w.length||f)&&{"data-bs-popper":"static"}),{},{className:Oe()(i,g,S&&"show",p&&"".concat(g,"-end"),h&&"".concat(g,"-").concat(h),...w)}))});Fm.displayName="DropdownMenu";const zm=Fm,Bm=["bsPrefix","split","className","childBsPrefix","as"],Wm=s.forwardRef((e,t)=>{let{bsPrefix:n,split:i,className:r,childBsPrefix:a,as:o=Xs}=e,l=Le(e,Bm);const c=He(n,"dropdown-toggle"),d=(0,s.useContext)(sm);void 0!==a&&(l.bsPrefix=a);const[u]=um();return u.ref=on(u.ref,Om(t)),(0,De.jsx)(o,Pe(Pe({className:Oe()(r,c,i&&"".concat(c,"-split"),(null==d?void 0:d.show)&&"show")},u),l))});Wm.displayName="DropdownToggle";const Hm=Wm,Um=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],Vm=s.forwardRef((e,t)=>{const n=Ze(e,{show:"onToggle"}),{bsPrefix:i,drop:r="down",show:a,className:o,align:l="start",onSelect:c,onToggle:d,focusFirstItemOnShow:u,as:h="div",navbar:m,autoClose:p=!0}=n,f=Le(n,Um),g=(0,s.useContext)($l),v=He(i,"dropdown"),x=Ge(),b=it((e,t)=>{var n;var s;(null==(n=t.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),s=t.source,(!1===p?"click"===s:"inside"===p?"rootClose"!==s:"outside"!==p||"select"!==s)&&(null==d||d(e,t)))}),y=Im("end"===l,r,x),w=(0,s.useMemo)(()=>({align:l,drop:r,isRTL:x}),[l,r,x]),j={down:v,"down-centered":"".concat(v,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,De.jsx)(jm.Provider,{value:w,children:(0,De.jsx)(ym,{placement:y,show:a,onSelect:c,onToggle:b,focusFirstItemOnShow:u,itemSelector:".".concat(v,"-item:not(.disabled):not(:disabled)"),children:g?f.children:(0,De.jsx)(h,Pe(Pe({},f),{},{ref:t,className:Oe()(o,a&&"show",j[r])}))})})});Vm.displayName="Dropdown";const Gm=Object.assign(Vm,{Toggle:Hm,Menu:zm,Item:Pm,ItemText:Rm,Divider:km,Header:Am}),qm=["id","title","children","bsPrefix","className","rootCloseEvent","menuRole","disabled","active","renderMenuOnMount","menuVariant"],Km=s.forwardRef((e,t)=>{let{id:n,title:s,children:i,bsPrefix:r,className:a,rootCloseEvent:o,menuRole:l,disabled:c,active:d,renderMenuOnMount:u,menuVariant:h}=e,m=Le(e,qm);const p=He(void 0,"nav-item");return(0,De.jsxs)(Gm,Pe(Pe({ref:t},m),{},{className:Oe()(a,p),children:[(0,De.jsx)(Gm.Toggle,{id:n,eventKey:null,active:d,disabled:c,childBsPrefix:r,as:Hs,children:s}),(0,De.jsx)(Gm.Menu,{role:l,renderOnMount:u,rootCloseEvent:o,variant:h,children:i})]}))});Km.displayName="NavDropdown";const Xm=Object.assign(Km,{Item:Gm.Item,ItemText:Gm.ItemText,Divider:Gm.Divider,Header:Gm.Header}),Ym=e=>{var t,n,i,r,a;let{user:o,onLogout:l,dashboardType:c="default"}=e;const[d,u]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{const e=setInterval(()=>u(new Date),1e3);return()=>clearInterval(e)},[]);const h=(()=>{switch(c){case"owner":return{title:"OOX Furniture - Executive Portal",bgColor:"#1e293b",textColor:"white",accentColor:"#f59e0b"};case"admin":return{title:"OOX Furniture - Operations Control",bgColor:"#64748b",textColor:"white",accentColor:"#3b82f6"};case"warehouse":return{title:"OOX Furniture - Production Floor",bgColor:"#1f2937",textColor:"white",accentColor:"#10b981"};case"delivery":return{title:"OOX Furniture - Delivery Hub",bgColor:"#ffffff",textColor:"#1f2937",accentColor:"#fbbf24"};default:return{title:"OOX Furniture System",bgColor:"#6b7280",textColor:"white",accentColor:"#3b82f6"}}})();return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("style",{children:"\n        .user-dropdown .dropdown-toggle {\n          border: none !important;\n          background: none !important;\n          box-shadow: none !important;\n          padding: 0.5rem 0.75rem !important;\n          border-radius: 25px !important;\n          transition: all 0.3s ease !important;\n        }\n        .user-dropdown .dropdown-toggle:hover {\n          background: rgba(255,255,255,0.1) !important;\n          transform: translateY(-1px);\n        }\n        .user-dropdown .dropdown-toggle:focus {\n          box-shadow: 0 0 0 2px ".concat(h.accentColor,"40 !important;\n        }\n        .navbar-toggler {\n          border: 1px solid ").concat(h.accentColor," !important;\n          padding: 0.5rem !important;\n        }\n        .navbar-toggler:focus {\n          box-shadow: 0 0 0 2px ").concat(h.accentColor,"40 !important;\n        }\n        .navbar-toggler-icon {\n          background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='").concat(h.accentColor.replace("#","%23"),"' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\") !important;\n        }\n        @media (max-width: 991px) {\n          .navbar-brand {\n            font-size: 1.2rem !important;\n          }\n        }\n        @media (max-width: 576px) {\n          .navbar-brand {\n            font-size: 1rem !important;\n          }\n        }\n      ")}),(0,De.jsxs)(nm,{expand:"lg",className:"mb-4 shadow-lg",style:{background:"linear-gradient(135deg, ".concat(h.bgColor," 0%, ").concat(h.bgColor,"dd 100%)"),borderBottom:"4px solid ".concat(h.accentColor),borderRadius:"0 0 20px 20px",padding:"1rem 0"},children:[(0,De.jsxs)(Xe,{fluid:!0,className:"px-4",children:[(0,De.jsxs)(nm.Brand,{className:"d-flex align-items-center",style:{color:h.textColor,fontWeight:"800",fontSize:"1.5rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="scale(1.02)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:[(0,De.jsx)("div",{className:"d-flex align-items-center justify-content-center me-3",style:{width:"45px",height:"45px",backgroundColor:h.accentColor,borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:(0,De.jsx)(Ei,{size:20})}),(0,De.jsx)("div",{className:"d-none d-sm-block",children:h.title}),(0,De.jsx)("div",{className:"d-block d-sm-none",children:"OOX"})]}),(0,De.jsx)(nm.Toggle,{"aria-controls":"basic-navbar-nav",style:{borderColor:h.accentColor}}),(0,De.jsxs)(nm.Collapse,{id:"basic-navbar-nav",children:[(0,De.jsx)("div",{className:"d-flex justify-content-center flex-grow-1",children:(0,De.jsxs)("div",{className:"d-none d-lg-flex align-items-center px-4 py-2",style:{backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"25px",border:"1px solid ".concat(h.accentColor,"40"),backdropFilter:"blur(10px)"},children:[(0,De.jsx)(Si,{className:"me-2",style:{color:h.accentColor}}),(0,De.jsx)("span",{style:{color:h.textColor,fontWeight:"600",fontSize:"1.1rem",fontFamily:"monospace"},children:d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})}),(0,De.jsx)("div",{className:"d-flex align-items-center",children:(0,De.jsxs)(Xm,{title:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-2",style:{width:"40px",height:"40px",backgroundColor:h.accentColor,color:"white",fontSize:"16px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",border:"2px solid rgba(255,255,255,0.2)"},children:((null===o||void 0===o||null===(t=o.first_name)||void 0===t?void 0:t[0])||(null===o||void 0===o||null===(n=o.username)||void 0===n?void 0:n[0])||"U").toUpperCase()}),(0,De.jsxs)("div",{className:"d-none d-md-block",children:[(0,De.jsx)("div",{style:{color:h.textColor,fontWeight:"600",fontSize:"0.95rem"},children:(null===o||void 0===o?void 0:o.first_name)||(null===o||void 0===o?void 0:o.username)||"User"}),(0,De.jsx)("div",{style:{color:"".concat(h.textColor,"cc"),fontSize:"0.8rem"},children:(null===o||void 0===o||null===(i=o.role)||void 0===i?void 0:i.charAt(0).toUpperCase())+(null===o||void 0===o||null===(r=o.role)||void 0===r?void 0:r.slice(1))||"User"})]}),(0,De.jsx)(wi,{className:"ms-2",size:10,style:{color:h.accentColor}})]}),id:"user-dropdown",align:"end",menuVariant:"delivery"===c?"light":"dark",className:"user-dropdown",children:[(0,De.jsx)(Xm.Header,{children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsx)("div",{className:"rounded-circle mx-auto d-flex align-items-center justify-content-center",style:{width:"50px",height:"50px",backgroundColor:h.accentColor,color:"white"},children:(0,De.jsx)(Rr,{size:20})})}),(0,De.jsxs)("div",{className:"fw-bold",children:[null===o||void 0===o?void 0:o.first_name," ",null===o||void 0===o?void 0:o.last_name]}),(0,De.jsx)(Rn,{style:{backgroundColor:h.accentColor,color:"white"},className:"mb-2",children:(null===o||void 0===o||null===(a=o.role)||void 0===a?void 0:a.toUpperCase())||"USER"}),(0,De.jsxs)("div",{className:"small text-muted",children:["@",null===o||void 0===o?void 0:o.username]}),(0,De.jsx)("div",{className:"small text-muted",children:null===o||void 0===o?void 0:o.email})]})}),(0,De.jsx)(Xm.Divider,{}),(0,De.jsxs)(Xm.Item,{children:[(0,De.jsx)(Si,{className:"me-2"}),"Last Login: ",(new Date).toLocaleDateString()]}),(0,De.jsxs)(Xm.Item,{children:[(0,De.jsx)(oi,{className:"me-2"}),"Notifications",(0,De.jsx)(Rn,{bg:"danger",className:"ms-2",children:"3"})]}),(0,De.jsx)(Xm.Divider,{}),(0,De.jsxs)(Xm.Item,{href:"#settings",children:[(0,De.jsx)(Ci,{className:"me-2"}),"Settings"]}),(0,De.jsx)(Xm.Divider,{}),(0,De.jsxs)(Xm.Item,{onClick:l,className:"text-danger",children:[(0,De.jsx)(fr,{className:"me-2"}),"Logout"]})]})})]})]}),(0,De.jsx)("div",{className:"d-md-none position-absolute",style:{top:"10px",right:"60px",color:h.textColor,fontSize:"0.8rem",fontWeight:"600"},children:d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,De.jsx)("style",{jsx:!0,children:"\n        .navbar-nav .nav-link.disabled {\n          opacity: 1 !important;\n        }\n        .dropdown-menu {\n          border-radius: 15px;\n          box-shadow: 0 10px 25px rgba(0,0,0,0.15);\n          border: none;\n          min-width: 280px;\n        }\n        .dropdown-header {\n          padding: 1rem;\n          background: linear-gradient(135deg, ".concat(h.accentColor,"15 0%, ").concat(h.accentColor,"05 100%);\n          border-radius: 10px 10px 0 0;\n          margin: -0.5rem -0.5rem 0.5rem -0.5rem;\n        }\n        .dropdown-item {\n          padding: 0.75rem 1rem;\n          border-radius: 8px;\n          margin: 0 0.5rem;\n          transition: all 0.2s ease;\n        }\n        .dropdown-item:hover {\n          background-color: ").concat(h.accentColor,"20;\n          transform: translateX(5px);\n        }\n        @media (max-width: 768px) {\n          .navbar-brand {\n            font-size: 1.1rem !important;\n          }\n        }\n      ")})]})]})},Qm=["popFile","popNotes"],$m=e=>{var t,n,i,r,a;let{user:o,userRole:l,onLogout:c}=e;const d="warehouse_manager"===l?"warehouse":l,[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[_,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),[C,A]=(0,s.useState)(null),[E,T]=(0,s.useState)(null),[P,M]=(0,s.useState)(!1),[L,R]=(0,s.useState)({order_status:"",production_status:""}),[O,D]=(0,s.useState)({order_statuses:[],production_statuses:[]}),[I,F]=(0,s.useState)(""),[z,B]=(0,s.useState)("all"),[W,H]=(0,s.useState)("all"),[U,V]=(0,s.useState)("created_at"),[G,q]=(0,s.useState)("desc"),[K,X]=(0,s.useState)("all"),[Y,Q]=(0,s.useState)(1),[$]=(0,s.useState)(10);(0,s.useEffect)(()=>{J(),(async()=>{try{let s,i;try{const e=await Yr("/orders/status_options/");s=null===e||void 0===e?void 0:e.order_statuses,i=null===e||void 0===e?void 0:e.production_statuses}catch(n){}if(!Array.isArray(s)||0===s.length||!Array.isArray(i)||0===i.length){var e,t;const n=await Jr().catch(()=>null);s=s&&s.length?s:null===n||void 0===n||null===(e=n.status_options)||void 0===e?void 0:e.order_statuses,i=i&&i.length?i:null===n||void 0===n||null===(t=n.status_options)||void 0===t?void 0:t.production_statuses}const r=[{value:"deposit_pending",label:"Deposit Pending"},{value:"deposit_paid",label:"Deposit Paid"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"out_for_delivery",label:"Out for Delivery"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],a=[{value:"not_started",label:"Not Started"},{value:"in_production",label:"In Production"},{value:"completed",label:"Completed"}];D({order_statuses:Array.isArray(s)&&s.length>0?s:r,production_statuses:Array.isArray(i)&&i.length>0?i:a})}catch(s){D({order_statuses:[{value:"deposit_pending",label:"Deposit Pending"},{value:"deposit_paid",label:"Deposit Paid"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"out_for_delivery",label:"Out for Delivery"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],production_statuses:[{value:"not_started",label:"Not Started"},{value:"in_production",label:"In Production"},{value:"completed",label:"Completed"}]})}})()},[]);const J=async()=>{try{x(!0);const[e,t,n]=await Promise.all([Qr(),na(),pa()]);h(e.results||e),p(t.results||t),g(n.results||n),y("")}catch(e){y("Failed to load data: "+e.message)}finally{x(!1)}},Z="owner"===d||"admin"===d,ee=["owner","admin","warehouse"].includes(d),te="owner"===d,ne="warehouse"===d,se=u.filter(e=>{var t,n,s,i;const r=(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(I.toLowerCase()))||(null===(n=e.customer)||void 0===n||null===(s=n.name)||void 0===s?void 0:s.toLowerCase().includes(I.toLowerCase()))||(null===(i=e.customer_name)||void 0===i?void 0:i.toLowerCase().includes(I.toLowerCase())),a="all"===z||e.order_status===z,o="all"===W||e.production_status===W;if("all"===K)return r&&a&&o;if("pending"===K)return"pending"===e.order_status&&r;if("production"===K)return"in_production"===e.production_status&&r;if("ready"===K)return"ready_for_delivery"===e.production_status&&r;if("overdue"===K){return new Date(e.delivery_deadline)<new Date&&!["delivered","cancelled"].includes(e.order_status)&&r}return r&&a&&o}).sort((e,t)=>{let n=e[U],s=t[U];var i,r;"customer_name"===U&&(n=(null===(i=e.customer)||void 0===i?void 0:i.name)||e.customer_name||"",s=(null===(r=t.customer)||void 0===r?void 0:r.name)||t.customer_name||"");return"string"===typeof n?"asc"===G?n.localeCompare(s):s.localeCompare(n):"asc"===G?n-s:s-n}),ie=Y*$,re=ie-$,ae=se.slice(re,ie),oe=Math.ceil(se.length/$),le=e=>{U===e?q("asc"===G?"desc":"asc"):(V(e),q("asc"))},ce=e=>{ee&&(A(e),R({order_status:e.order_status||"",production_status:e.production_status||""}),M(!0))},de=async e=>{var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e);try{const{order_status:e,production_status:t}=L||{};t&&t!==(null===C||void 0===C?void 0:C.production_status)&&await((e,t)=>Yr("/orders/".concat(e,"/update_production_status/"),{method:"POST",data:t}))(C.id,{production_status:t}),e&&e!==(null===C||void 0===C?void 0:C.order_status)&&await ea(C.id,{order_status:e}),M(!1),j("Status updated"),J();try{window.dispatchEvent(new CustomEvent("oox:refresh"))}catch(n){}}catch(e){y((null===e||void 0===e?void 0:e.message)||"Failed to update status")}},ue=function(e){const t="ready_for_delivery"===e?"order_ready":e,n={order:{pending:{bg:"warning",text:"Pending"},confirmed:{bg:"info",text:"Confirmed"},in_production:{bg:"primary",text:"In Production"},order_ready:{bg:"success",text:"Ready"},out_for_delivery:{bg:"info",text:"Out for Delivery"},delivered:{bg:"success",text:"Delivered"},cancelled:{bg:"danger",text:"Cancelled"}},production:{not_started:{bg:"secondary",text:"\ud83d\udfe1 Not Started"},in_production:{bg:"warning",text:"\ud83d\udfe0 In Production"},completed:{bg:"success",text:"\ud83d\udfe2 Completed"}}}[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"order"][t]||{bg:"secondary",text:t};return(0,De.jsx)(Rn,{bg:n.bg,children:n.text})},he=e=>U!==e?null:"asc"===G?(0,De.jsx)(br,{}):(0,De.jsx)(xr,{});u.length,u.filter(e=>"pending"===e.order_status).length,u.filter(e=>"in_production"===e.production_status).length,u.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,u.filter(e=>(e=>new Date(e.delivery_deadline)<new Date&&!["delivered","cancelled"].includes(e.order_status))(e)).length;if(v&&0===u.length)return(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading orders..."})]});const me=(0,De.jsxs)(Xe,{fluid:!0,className:"py-3",children:[(0,De.jsx)(ps,{className:"mb-3",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-2 align-items-center",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{placeholder:"Search by order number or customer",value:I,onChange:e=>F(e.target.value)})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{value:z,onChange:e=>B(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Statuses"}),(0,De.jsx)("option",{value:"pending",children:"Pending"}),(0,De.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,De.jsx)("option",{value:"delivered",children:"Delivered"}),(0,De.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{value:W,onChange:e=>H(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Production"}),(0,De.jsx)("option",{value:"not_started",children:"Not Started"}),(0,De.jsx)("option",{value:"in_production",children:"In Production"}),(0,De.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,De.jsx)(Pn,{className:"text-end",children:Z&&(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>{Z&&(T(null),N(!0))},children:[(0,De.jsx)(rr,{className:"me-2"})," Add New Order"]})})]})})}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Orders"}),(0,De.jsx)("div",{children:(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:J,children:"Refresh"})})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{onClick:()=>le("order_number"),style:{cursor:"pointer"},children:["Order # ",he("order_number")]}),(0,De.jsxs)("th",{onClick:()=>le("customer_name"),style:{cursor:"pointer"},children:["Customer ",he("customer_name")]}),(0,De.jsx)("th",{children:"Order Status"}),(0,De.jsx)("th",{children:"Production"}),(0,De.jsx)("th",{children:"Amount"}),(0,De.jsx)("th",{children:"Created"}),(0,De.jsx)("th",{className:"text-end",children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[ae.map(e=>{var t,n,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.order_number}),(0,De.jsx)("td",{children:(null===(t=e.customer)||void 0===t?void 0:t.name)||e.customer_name}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{role:"button",onClick:()=>ce(e),children:ue(e.order_status,"order")})}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{role:"button",onClick:()=>ce(e),children:ue(e.production_status,"production")})}),(0,De.jsx)("td",{children:(s=e.total_amount,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(s||0))}),(0,De.jsx)("td",{children:(n=e.created_at,new Date(n).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}))}),(0,De.jsx)("td",{className:"text-end",children:(0,De.jsxs)(Sd,{size:"sm",children:[(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"View"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",children:(0,De.jsx)(zi,{})})}),ee&&(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"Edit"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{T(e),N(!0)})(e),children:(0,De.jsx)(Li,{})})}),("owner"===l||"admin"===l)&&(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"Advance Workflow"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:async()=>{try{await Zr(e.id),J()}catch(OP){y((null===OP||void 0===OP?void 0:OP.message)||"Advance failed")}},children:"Next"})}),te&&(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"Delete"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>(e=>{A(e),S(!0)})(e),children:(0,De.jsx)(Ar,{})})}),ne&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"Mark Ready"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>(async e=>{try{await ea(e.id,{order_status:"order_ready"}),j("Order ".concat(e.order_number," marked as ready")),J()}catch(OP){y((null===OP||void 0===OP?void 0:OP.message)||"Failed to update")}})(e),children:(0,De.jsx)(yi,{})})}),(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"Delay Order"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>(async e=>{try{await $r(e.id,{order_status:e.order_status,production_status:"in_production",delayed:!0}),j("Order ".concat(e.order_number," flagged as delayed")),J()}catch(OP){y((null===OP||void 0===OP?void 0:OP.message)||"Failed to delay")}})(e),children:(0,De.jsx)(Ki,{})})})]})]})})]},e.id)}),0===ae.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:7,className:"text-center text-muted py-4",children:"No orders found"})})]})]})})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Page ",Y," of ",oe]}),(0,De.jsxs)("div",{children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===Y,onClick:()=>Q(e=>Math.max(1,e-1)),children:"Previous"}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",className:"ms-2",disabled:Y===oe,onClick:()=>Q(e=>Math.min(oe,e+1)),children:"Next"})]})]}),Z&&(0,De.jsxs)(Bo,{show:_,onHide:()=>N(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:E?"Edit Order":"Add New Order"})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsx)(Ph,{onClose:()=>N(!1),onSubmit:async e=>{try{if(E)await $r(E.id,e),j("Order updated successfully");else{const{popFile:t,popNotes:n}=e,s=Le(e,Qm),i=await(e=>Yr("/orders/",{method:"POST",data:e}))(s),r=null===i||void 0===i?void 0:i.id;if(!r)throw new Error("Order creation failed");if(!t)throw new Error("Payment proof required for EFT payments");const a=new FormData;a.append("order",r),null!==s&&void 0!==s&&s.deposit_amount&&a.append("amount",s.deposit_amount),a.append("payment_type","deposit"),a.append("proof_image",t),n&&a.append("notes",n);const o=await ia(a,!0);if(null===o||void 0===o||!o.id)throw new Error("Failed to upload payment proof");await ta(r,{payment_method:"EFT",payment_status:"deposit_paid",deposit_amount:Number(null===s||void 0===s?void 0:s.deposit_amount)||0,proof_id:o.id}),j("Order created and deposit recorded")}N(!1),J()}catch(t){y("Failed to save order: "+t.message)}},loading:v,isEdit:!!E,initialData:E?{customerName:(null===(t=E.customer)||void 0===t?void 0:t.name)||E.customer_name||"",customerPhone:(null===(n=E.customer)||void 0===n?void 0:n.phone)||"",customerEmail:(null===(i=E.customer)||void 0===i?void 0:i.email)||"",customerAddress:(null===(r=E.customer)||void 0===r?void 0:r.address)||"",expectedDeliveryDate:E.expected_delivery_date||E.delivery_deadline||"",adminNotes:E.admin_notes||"",depositAmount:null!==(a=E.deposit_amount)&&void 0!==a?a:"",paymentStatus:E.payment_status||"deposit_only",orderStatus:E.order_status||"pending"}:null,initialItems:(null===E||void 0===E?void 0:E.items)||[]})})]}),te&&(0,De.jsxs)(Bo,{show:k,onHide:()=>S(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Confirm Delete"})}),(0,De.jsxs)(Bo.Body,{children:["Are you sure you want to delete order ",null===C||void 0===C?void 0:C.order_number,"?"]}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"danger",onClick:async()=>{try{await(e=C.id,Yr("/orders/".concat(e,"/"),{method:"DELETE"})),j("Order deleted successfully"),S(!1),J()}catch(t){y("Failed to delete order: "+t.message)}var e},children:"Delete"})]})]}),ee&&(0,De.jsxs)(Bo,{show:P,onHide:()=>M(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Change Order Status"})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)(Wl,{onSubmit:de,children:[(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Order Status"}),(0,De.jsxs)(Wl.Select,{value:L.order_status,onChange:e=>R(Pe(Pe({},L),{},{order_status:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"-- Select --"}),O.order_statuses.filter(e=>{const t="string"===typeof e?e:e.value;if("owner"===d||"admin"===d)return!0;const n=null===C||void 0===C?void 0:C.order_status;return"warehouse"===d||"warehouse_worker"===d?"deposit_paid"===n&&["order_ready"].includes(t):"delivery"===d&&("order_ready"===n?["out_for_delivery"].includes(t):"out_for_delivery"===n&&["delivered"].includes(t))}).map(e=>{const t="string"===typeof e?e:e.value,n="string"===typeof e?e:e.label||e.value;return(0,De.jsx)("option",{value:t,children:n},t)})]})]}),(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Production Status"}),(0,De.jsxs)(Wl.Select,{value:L.production_status,onChange:e=>R(Pe(Pe({},L),{},{production_status:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"-- Select --"}),O.production_statuses.filter(e=>{const t="string"===typeof e?e:e.value;if("owner"===d||"admin"===d)return!0;const n=(null===C||void 0===C?void 0:C.production_status)||"not_started",s=["not_started","cutting","sewing","finishing","quality_check","in_production","completed"],i=s.indexOf(n),r=s.indexOf(t);return r>=i&&r<=i+1}).map(e=>{const t="string"===typeof e?e:e.value,n="string"===typeof e?e:e.label||e.value;return(0,De.jsx)("option",{value:t,children:n},t)})]})]})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",onClick:de,children:"Update"})]})]})]});return"owner"===l||"admin"===l?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:o,userRole:l,onLogout:c}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:o,onLogout:c,dashboardType:l}),me]})]}):me},Jm=e=>{let{title:t,subtitle:n,icon:i,onRefresh:r,children:a,accentColor:o="#f59e0b",bgGradient:l="linear-gradient(135deg, #1e293b 0%, #334155 100%)"}=e;const[c,d]=(0,s.useState)(new Date);return(0,s.useEffect)(()=>{const e=setInterval(()=>d(new Date),1e3);return()=>clearInterval(e)},[]),(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("style",{children:"\n        .enhanced-page-header {\n          background: ".concat(l,";\n          border-radius: 20px;\n          border: 4px solid ").concat(o,";\n          box-shadow: 0 8px 32px rgba(0,0,0,0.12);\n          overflow: hidden;\n          position: relative;\n        }\n        .enhanced-page-header::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 4px;\n          background: linear-gradient(90deg, ").concat(o,", ").concat(o,"80, ").concat(o,");\n          animation: shimmer 3s ease-in-out infinite;\n        }\n        @keyframes shimmer {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n        .page-title-section {\n          padding: 2rem;\n        }\n        .page-icon-container {\n          width: 60px;\n          height: 60px;\n          background: ").concat(o,";\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          box-shadow: 0 4px 16px rgba(0,0,0,0.15);\n          margin-right: 1.5rem;\n          transition: all 0.3s ease;\n        }\n        .page-icon-container:hover {\n          transform: scale(1.05) rotate(5deg);\n          box-shadow: 0 6px 20px rgba(0,0,0,0.2);\n        }\n        .page-title {\n          color: white;\n          font-weight: 800;\n          font-size: 1.75rem;\n          margin-bottom: 0.5rem;\n          text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n        .page-subtitle {\n          color: rgba(255,255,255,0.85);\n          font-size: 1rem;\n          margin-bottom: 0;\n          font-weight: 500;\n        }\n        .page-time-display {\n          background: rgba(255,255,255,0.1);\n          border-radius: 25px;\n          padding: 0.75rem 1.5rem;\n          border: 1px solid ").concat(o,"40;\n          backdrop-filter: blur(10px);\n          color: white;\n          font-family: monospace;\n          font-weight: 600;\n          font-size: 1.1rem;\n        }\n        .page-refresh-btn {\n          background: ").concat(o,";\n          border: none;\n          border-radius: 12px;\n          padding: 0.75rem 1rem;\n          color: white;\n          transition: all 0.3s ease;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        .page-refresh-btn:hover {\n          background: ").concat(o,"dd;\n          transform: translateY(-2px);\n          box-shadow: 0 6px 16px rgba(0,0,0,0.2);\n        }\n        .page-actions-section {\n          padding: 0 2rem 1.5rem 2rem;\n        }\n        @media (max-width: 768px) {\n          .page-title-section {\n            padding: 1.5rem;\n          }\n          .page-title {\n            font-size: 1.4rem;\n          }\n          .page-icon-container {\n            width: 50px;\n            height: 50px;\n            margin-right: 1rem;\n          }\n          .page-actions-section {\n            padding: 0 1.5rem 1.5rem 1.5rem;\n          }\n        }\n      ")}),(0,De.jsxs)(Xe,{fluid:!0,className:"mb-4",children:[(0,De.jsxs)(ps,{className:"enhanced-page-header border-0",children:[(0,De.jsx)("div",{className:"page-title-section",children:(0,De.jsxs)(Cn,{className:"align-items-center",children:[(0,De.jsx)(Pn,{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[i&&(0,De.jsx)("div",{className:"page-icon-container",children:(0,De.jsx)(i,{size:28})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h1",{className:"page-title mb-1",children:t}),(0,De.jsx)("p",{className:"page-subtitle",children:n})]})]})}),(0,De.jsx)(Pn,{xs:"auto",className:"d-none d-lg-block",children:(0,De.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,De.jsxs)("div",{className:"page-time-display d-flex align-items-center",children:[(0,De.jsx)(Si,{className:"me-2",style:{color:o}}),c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),r&&(0,De.jsxs)(Xs,{className:"page-refresh-btn d-flex align-items-center",onClick:r,children:[(0,De.jsx)(_r,{className:"me-2"}),"Refresh"]})]})})]})}),a&&(0,De.jsx)("div",{className:"page-actions-section",children:a})]}),(0,De.jsx)("div",{className:"d-lg-none mt-3",children:(0,De.jsx)(ps,{className:"bg-light border-0",children:(0,De.jsx)(ps.Body,{className:"py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Si,{className:"me-2",style:{color:o}}),(0,De.jsx)("span",{style:{fontFamily:"monospace",fontWeight:"600"},children:c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),r&&(0,De.jsx)(Xs,{size:"sm",style:{background:o,border:"none"},onClick:r,children:(0,De.jsx)(_r,{})})]})})})})]})]})},Zm=e=>{let{user:t,userRole:n,onLogout:i}=e;Z();const[r,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[v,x]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)(null),[k,S]=(0,s.useState)({name:"",phone:"",email:"",address:""}),[C,A]=(0,s.useState)(""),[E,T]=(0,s.useState)("created_at"),[P,M]=(0,s.useState)("desc"),[L,R]=(0,s.useState)(1),[O]=(0,s.useState)(10);(0,s.useEffect)(()=>{D()},[]);const D=async()=>{try{d(!0);const[e,t]=await Promise.all([na(),Qr()]);a(e.results||e),l(t.results||t),h("")}catch(e){h("Failed to load data: "+e.message)}finally{d(!1)}},I=r.filter(e=>{var t,n,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(C.toLowerCase()))||(null===(n=e.phone)||void 0===n?void 0:n.includes(C))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(C.toLowerCase()))}).sort((e,t)=>{let n=e[E],s=t[E];return"string"===typeof n?"asc"===P?n.localeCompare(s):s.localeCompare(n):"asc"===P?n-s:s-n}),F=L*O,z=F-O,B=I.slice(z,F),W=Math.ceil(I.length/O),H=e=>{E===e?M("asc"===P?"desc":"asc"):(T(e),M("asc"))},U=()=>{N(null),S({name:"",phone:"",email:"",address:""}),g(!0)},V=e=>{N(e),S({name:e.name||"",phone:e.phone||"",email:e.email||"",address:e.address||""}),g(!0)},G=e=>E!==e?null:"asc"===P?(0,De.jsx)(br,{}):(0,De.jsx)(xr,{}),q=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),K=e=>o.filter(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e}).length,X=e=>{const t=o.filter(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e}),n=t.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(n)};return c&&0===r.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading customers..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:t,userRole:n,onLogout:i}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:t,onLogout:i,dashboardType:n}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(Jm,{title:"OOX Furniture - Customer Management",subtitle:"OOX Furniture customer information, contact details, and order history management",icon:Or,onRefresh:D,accentColor:"#3b82f6",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:(0,De.jsxs)(Xs,{variant:"primary",onClick:U,className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(rr,{className:"me-2"}),"Add Customer"]})})}),u&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>h(""),children:[(0,De.jsx)(Ii,{className:"me-2"}),u]}),m&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>p(""),children:[(0,De.jsx)(yi,{className:"me-2"}),m]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Or,{size:40,className:"text-primary mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:r.length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Customers"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(hi,{size:40,className:"text-success mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:r.filter(e=>e.email).length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"With Email"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(mi,{size:40,className:"text-warning mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:r.filter(e=>{const t=new Date(e.created_at),n=new Date;return n.setDate(n.getDate()-30),t>n}).length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"New (30 days)"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Mi,{size:40,className:"text-info mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:r.filter(e=>K(e.id)>0).length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"With Orders"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"Search customers by name, phone, or email...",value:C,onChange:e=>A(e.target.value)})]})}),(0,De.jsxs)(Pn,{md:6,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Mi,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Mi,{className:"me-1"}),"Export PDF"]})]})]})})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Vr,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>H("name"),children:["Customer Name ",G("name")]}),(0,De.jsx)("th",{children:"Contact Information"}),(0,De.jsx)("th",{children:"Address"}),(0,De.jsx)("th",{children:"Orders"}),(0,De.jsx)("th",{children:"Total Value"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>H("created_at"),children:["Created ",G("created_at")]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:B.map(e=>{var t,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px",fontSize:"1.2rem",fontWeight:"bold"},children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:e.name}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,De.jsx)(sr,{className:"me-2 text-muted",size:12}),(0,De.jsx)("span",{children:e.phone})]}),e.email&&(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Ri,{className:"me-2 text-muted",size:12}),(0,De.jsx)("span",{className:"text-muted",children:e.email})]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-start",children:[(0,De.jsx)($i,{className:"me-2 text-muted mt-1",size:12}),(0,De.jsx)("small",{className:"text-muted",style:{maxWidth:"200px"},children:e.address||"No address provided"})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Rn,{bg:"info",className:"fs-6",children:[K(e.id)," orders"]})}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{className:"fw-medium text-success",children:X(e.id)})}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:q(e.created_at)})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Sd,{size:"sm",children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{j(e),y(!0)})(e),children:(0,De.jsx)(zi,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Edit Customer"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>V(e),children:(0,De.jsx)(Li,{})})}),"owner"===n&&(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Delete Customer"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>(e=>{j(e),x(!0)})(e),children:(0,De.jsx)(Ar,{})})})]})})]},e.id)})})]}),0===I.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Or,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No customers found"}),(0,De.jsx)("p",{className:"text-muted",children:C?"Try adjusting your search criteria":"No customers have been added yet"}),(0,De.jsxs)(Xs,{variant:"primary",onClick:U,children:[(0,De.jsx)(rr,{className:"me-1"}),"Add First Customer"]})]})]}),W>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",z+1," to ",Math.min(F,I.length)," of ",I.length," customers"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===L,onClick:()=>R(L-1),children:"Previous"}),[...Array(W)].map((e,t)=>(0,De.jsx)(Xs,{variant:L===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>R(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:L===W,onClick:()=>R(L+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Bo,{show:f,onHide:()=>g(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:_?"Edit Customer":"Add New Customer"})}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault();try{_?(await((e,t)=>Yr("/customers/".concat(e,"/"),{method:"PUT",data:t}))(_.id,k),p("Customer updated successfully")):(await sa(k),p("Customer created successfully")),g(!1),D()}catch(t){h("Failed to save customer: "+t.message)}},children:[(0,De.jsxs)(Bo.Body,{children:[(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Customer Name *"}),(0,De.jsx)(Wl.Control,{type:"text",value:k.name,onChange:e=>S(Pe(Pe({},k),{},{name:e.target.value})),required:!0,placeholder:"Enter customer name"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Phone Number *"}),(0,De.jsx)(Wl.Control,{type:"tel",value:k.phone,onChange:e=>S(Pe(Pe({},k),{},{phone:e.target.value})),required:!0,placeholder:"e.g., +27 11 123 4567"})]})})]}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Email Address"}),(0,De.jsx)(Wl.Control,{type:"email",value:k.email,onChange:e=>S(Pe(Pe({},k),{},{email:e.target.value})),placeholder:"customer@example.com"})]})})}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Address"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,value:k.address,onChange:e=>S(Pe(Pe({},k),{},{address:e.target.value})),placeholder:"Enter full delivery address..."})]})})})]}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",type:"submit",children:_?"Update Customer":"Create Customer"})]})]})]}),(0,De.jsxs)(Bo,{show:b,onHide:()=>y(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Customer Details"})}),(0,De.jsx)(Bo.Body,{children:w&&(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Contact Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Name:"}),(0,De.jsx)("br",{}),w.name]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Phone:"}),(0,De.jsx)("br",{}),(0,De.jsx)(sr,{className:"me-2"}),w.phone]}),w.email&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Email:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Ri,{className:"me-2"}),w.email]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Address:"}),(0,De.jsx)("br",{}),(0,De.jsx)($i,{className:"me-2"}),w.address||"No address provided"]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Order Summary"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Total Orders:"}),(0,De.jsx)("br",{}),(0,De.jsxs)(Rn,{bg:"info",className:"fs-6",children:[K(w.id)," orders"]})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Total Value:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-success fs-5 fw-bold",children:X(w.id)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Customer Since:"}),(0,De.jsx)("br",{}),q(w.created_at)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Last Updated:"}),(0,De.jsx)("br",{}),q(w.updated_at)]})]})]})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>y(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>{y(!1),V(w)},children:"Edit Customer"})]})]}),(0,De.jsxs)(Bo,{show:v,onHide:()=>x(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Confirm Delete"})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Ar,{size:48,className:"text-danger mb-3"}),(0,De.jsx)("h5",{children:"Delete Customer?"}),(0,De.jsxs)("p",{className:"text-muted",children:["Are you sure you want to delete ",(0,De.jsx)("strong",{children:null===w||void 0===w?void 0:w.name}),"? This action cannot be undone."]}),K(null===w||void 0===w?void 0:w.id)>0&&(0,De.jsxs)(Nn,{variant:"warning",children:[(0,De.jsx)(Ii,{className:"me-2"}),"This customer has ",K(null===w||void 0===w?void 0:w.id)," order(s). Deleting will affect order history."]})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"danger",onClick:async()=>{try{await(e=w.id,Yr("/customers/".concat(e,"/"),{method:"DELETE"})),p("Customer deleted successfully"),x(!1),D()}catch(t){h("Failed to delete customer: "+t.message)}var e},children:"Delete Customer"})]})]})]})]})]})},ep=e=>{var t;let{user:n,userRole:i,onLogout:r}=e;const[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null),[j,_]=(0,s.useState)(null),[N,k]=(0,s.useState)({username:"",email:"",first_name:"",last_name:"",phone:"",role:"",password:"",password_confirm:"",is_active:!0}),[S,C]=(0,s.useState)(""),[A,E]=(0,s.useState)("all"),[T,P]=(0,s.useState)("date_joined"),[M,L]=(0,s.useState)("desc"),[R,O]=(0,s.useState)(1),[D]=(0,s.useState)(10);(0,s.useEffect)(()=>{I()},[]);const I=async()=>{try{c(!0);const e=await ca();o(e.results||e),u("")}catch(e){u("Failed to load users: "+e.message)}finally{c(!1)}},F={owner:{label:"Owner",color:"warning",icon:Ti,description:"Full system access and management"},admin:{label:"Admin",color:"primary",icon:Ci,description:"Administrative functions and user management"},warehouse:{label:"Warehouse",color:"success",icon:Fr,description:"Production tracking and inventory management"},delivery:{label:"Delivery",color:"info",icon:Er,description:"Order delivery and logistics management"}},z=a.filter(e=>{var t,n,s,i;const r=(null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(S.toLowerCase()))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(S.toLowerCase()))||(null===(s=e.first_name)||void 0===s?void 0:s.toLowerCase().includes(S.toLowerCase()))||(null===(i=e.last_name)||void 0===i?void 0:i.toLowerCase().includes(S.toLowerCase())),a="all"===A||e.role===A;return r&&a}).sort((e,t)=>{let n=e[T],s=t[T];return"full_name"===T&&(n="".concat(e.first_name," ").concat(e.last_name),s="".concat(t.first_name," ").concat(t.last_name)),"string"===typeof n?"asc"===M?n.localeCompare(s):s.localeCompare(n):"asc"===M?n-s:s-n}),B=R*D,W=B-D,H=z.slice(W,B),U=Math.ceil(z.length/D),V=e=>{T===e?L("asc"===M?"desc":"asc"):(P(e),L("asc"))},G=()=>{"owner"===(null===n||void 0===n?void 0:n.role)?(u(null),m(null),_(null),k({username:"",email:"",first_name:"",last_name:"",phone:"",role:"delivery",password:"",password_confirm:"",is_active:!0}),f(!0)):u("Only users with Owner role can create new users")},q=e=>{u(null),m(null),_(e),k({username:e.username||"",email:e.email||"",first_name:e.first_name||"",last_name:e.last_name||"",phone:e.phone||"",role:e.role||"",password:"",password_confirm:"",is_active:void 0===e.is_active||e.is_active}),f(!0)},K=e=>T!==e?null:"asc"===M?(0,De.jsx)(br,{}):(0,De.jsx)(xr,{}),X=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),Y=e=>{const t=F[e]||{label:e,color:"secondary",icon:Lr},n=t.icon;return(0,De.jsxs)(Rn,{bg:t.color,className:"d-flex align-items-center gap-1",children:[(0,De.jsx)(n,{size:12}),t.label]})},Q=e=>(0,De.jsx)(Rn,{bg:e?"success":"danger",children:e?"Active":"Inactive"}),$={owner:a.filter(e=>"owner"===e.role).length,admin:a.filter(e=>"admin"===e.role).length,warehouse:a.filter(e=>"warehouse"===e.role).length,delivery:a.filter(e=>"delivery"===e.role).length,active:a.filter(e=>e.is_active).length,inactive:a.filter(e=>!e.is_active).length};return l&&0===a.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Or,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"Loading users..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("style",{children:"\n          /* Disable all form validation feedback to prevent vibrations */\n          input:invalid,\n          input:valid,\n          select:invalid,\n          select:valid,\n          textarea:invalid,\n          textarea:valid {\n            box-shadow: none !important;\n            border-color: #dee2e6 !important;\n          }\n          \n          /* Disable focus outline vibrations */\n          input:focus,\n          select:focus,\n          textarea:focus {\n            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;\n          }\n          \n          /* Disable any browser validation tooltips */\n          input::-webkit-validation-bubble-message,\n          input::-webkit-validation-bubble-arrow,\n          input::-webkit-validation-bubble-top-outer-arrow,\n          input::-webkit-validation-bubble-top-inner-arrow {\n            display: none !important;\n          }\n        "}),(0,De.jsx)(jd,{user:n,userRole:i,onLogout:r}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:n,onLogout:r,dashboardType:i}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(Jm,{title:"OOX Furniture - Team Management",subtitle:"OOX Furniture user accounts, roles, and system access permissions management",icon:Or,onRefresh:I,accentColor:"#8b5cf6",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:"owner"===(null===n||void 0===n?void 0:n.role)&&(0,De.jsxs)(Xs,{variant:"primary",onClick:G,className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(rr,{className:"me-2"}),"Add User"]})})}),d&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>u(""),children:[(0,De.jsx)(Ii,{className:"me-2"}),d]}),h&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>m(""),children:[(0,De.jsx)(yi,{className:"me-2"}),h]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Or,{size:30,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:a.length}),(0,De.jsx)("small",{className:"text-muted",children:"Total Users"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ti,{size:30,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.owner}),(0,De.jsx)("small",{className:"text-muted",children:"Owners"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ci,{size:30,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.admin}),(0,De.jsx)("small",{className:"text-muted",children:"Admins"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Fr,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.warehouse}),(0,De.jsx)("small",{className:"text-muted",children:"Warehouse"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Er,{size:30,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.delivery}),(0,De.jsx)("small",{className:"text-muted",children:"Delivery"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Tr,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:$.active}),(0,De.jsx)("small",{className:"text-muted",children:"Active"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(Wl.Control,{type:"text",placeholder:"Search users by name, username, or email...",value:S,onChange:e=>C(e.target.value)})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Select,{value:A,onChange:e=>E(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Roles"}),(0,De.jsx)("option",{value:"owner",children:"Owner"}),(0,De.jsx)("option",{value:"admin",children:"Admin"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery"})]})}),(0,De.jsxs)(Pn,{md:5,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Mi,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Xi,{className:"me-1"}),"Reset Passwords"]})]})]})})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Vr,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("full_name"),children:["User ",K("full_name")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("username"),children:["Username ",K("username")]}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("role"),children:["Role ",K("role")]}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Last Login"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>V("date_joined"),children:["Joined ",K("date_joined")]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:H.map(e=>{var t,s,i,r;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px",fontSize:"1.2rem",fontWeight:"bold"},children:(null===(t=e.first_name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||(null===(i=e.username)||void 0===i||null===(r=i.charAt(0))||void 0===r?void 0:r.toUpperCase())||"U"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:e.first_name||e.last_name?"".concat(e.first_name," ").concat(e.last_name).trim():e.username}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("code",{className:"bg-light px-2 py-1 rounded",children:e.username})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)(Ri,{className:"me-2 text-muted",size:12}),(0,De.jsx)("span",{children:e.email})]})}),(0,De.jsx)("td",{children:Y(e.role)}),(0,De.jsx)("td",{children:Q(e.is_active)}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:e.last_login?X(e.last_login):"Never"})}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:X(e.date_joined)})}),(0,De.jsx)("td",{children:(0,De.jsxs)(ButtonGroup,{size:"sm",children:[(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{w(e),b(!0)})(e),children:(0,De.jsx)(zi,{})}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>q(e),children:(0,De.jsx)(Li,{})}),e.id!==(null===n||void 0===n?void 0:n.id)&&(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>(e=>{w(e),v(!0)})(e),children:(0,De.jsx)(Ar,{})})]})})]},e.id)})})]}),0===z.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Or,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No users found"}),(0,De.jsx)("p",{className:"text-muted",children:S?"Try adjusting your search criteria":"No users have been added yet"}),"owner"===(null===n||void 0===n?void 0:n.role)&&(0,De.jsxs)(Xs,{variant:"primary",onClick:G,children:[(0,De.jsx)(rr,{className:"me-1"}),"Add First User"]})]})]}),U>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",W+1," to ",Math.min(B,z.length)," of ",z.length," users"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===R,onClick:()=>O(R-1),children:"Previous"}),[...Array(U)].map((e,t)=>(0,De.jsx)(Xs,{variant:R===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>O(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:R===U,onClick:()=>O(R+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Bo,{show:p,onHide:()=>{f(!1),u(null),m(null),_(null)},size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:j?"Edit User":"Add New User"})}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault(),u(null);try{const e=Pe({},N);if(j&&!e.password&&(delete e.password,delete e.password_confirm),!j){if(!e.username||""===e.username.trim())return void u("Username is required");if(!e.password)return void u("Password is required");if(e.password!==e.password_confirm)return void u("Passwords do not match");const t=["owner","admin","warehouse","delivery"];if(e.role&&!t.includes(e.role))return void u("Invalid role: ".concat(e.role,". Valid roles: ").concat(t.join(", ")))}if(j)await ha(j.id,e),m("User updated successfully");else{const t=await ua(e);t.success&&t.user?m(t.message||'User "'.concat(t.user.username,'" created successfully')):m("User created successfully")}f(!1),_(null),u(null),I()}catch(t){u("Failed to save user: "+t.message)}},noValidate:!0,children:[(0,De.jsxs)(Bo.Body,{children:[(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Username *"}),(0,De.jsx)(Wl.Control,{type:"text",value:N.username,onChange:e=>k(Pe(Pe({},N),{},{username:e.target.value})),placeholder:"Enter username"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Email Address *"}),(0,De.jsx)(Wl.Control,{type:"email",value:N.email,onChange:e=>k(Pe(Pe({},N),{},{email:e.target.value})),placeholder:"user@example.com"})]})})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"First Name"}),(0,De.jsx)(Wl.Control,{type:"text",value:N.first_name,onChange:e=>k(Pe(Pe({},N),{},{first_name:e.target.value})),placeholder:"First name"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Last Name"}),(0,De.jsx)(Wl.Control,{type:"text",value:N.last_name,onChange:e=>k(Pe(Pe({},N),{},{last_name:e.target.value})),placeholder:"Last name"})]})})]}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Phone Number"}),(0,De.jsx)(Wl.Control,{type:"tel",value:N.phone,onChange:e=>k(Pe(Pe({},N),{},{phone:e.target.value})),placeholder:"+1234567890"})]})})}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Role *"}),(0,De.jsxs)(Wl.Select,{value:N.role,onChange:e=>k(Pe(Pe({},N),{},{role:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Select role..."}),Object.entries(F).map(e=>{let[t,n]=e;return(0,De.jsxs)("option",{value:t,children:[n.label," - ",n.description]},t)})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsxs)(Wl.Label,{children:["Password ",j?"(leave blank to keep current)":"*"]}),(0,De.jsx)(Wl.Control,{type:"password",value:N.password,onChange:e=>k(Pe(Pe({},N),{},{password:e.target.value})),placeholder:j?"Leave blank to keep current password":"Enter password"})]})})]}),!j&&(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Confirm Password *"}),(0,De.jsx)(Wl.Control,{type:"password",value:N.password_confirm,onChange:e=>k(Pe(Pe({},N),{},{password_confirm:e.target.value})),placeholder:"Confirm password"})]})})}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsx)(Wl.Group,{className:"mb-3",children:(0,De.jsx)(Wl.Check,{type:"checkbox",id:"is_active",label:"Active User (can login to the system)",checked:N.is_active,onChange:e=>k(Pe(Pe({},N),{},{is_active:e.target.checked}))})})})})]}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>{f(!1),u(null),m(null),_(null)},children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",type:"submit",children:j?"Update User":"Create User"})]})]})]}),(0,De.jsxs)(Bo,{show:x,onHide:()=>b(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"User Details"})}),(0,De.jsx)(Bo.Body,{children:y&&(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"User Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Name:"}),(0,De.jsx)("br",{}),y.first_name||y.last_name?"".concat(y.first_name," ").concat(y.last_name).trim():"Not provided"]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Username:"}),(0,De.jsx)("br",{}),(0,De.jsx)("code",{className:"bg-light px-2 py-1 rounded",children:y.username})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Email:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Ri,{className:"me-2"}),y.email]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Role:"}),(0,De.jsx)("br",{}),Y(y.role),(0,De.jsx)("br",{}),(0,De.jsx)("small",{className:"text-muted",children:(null===(t=F[y.role])||void 0===t?void 0:t.description)||"No description available"})]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Account Status"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Status:"}),(0,De.jsx)("br",{}),Q(y.is_active)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Last Login:"}),(0,De.jsx)("br",{}),y.last_login?X(y.last_login):"Never logged in"]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Account Created:"}),(0,De.jsx)("br",{}),X(y.date_joined)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"User ID:"}),(0,De.jsx)("br",{}),(0,De.jsx)("code",{className:"bg-light px-2 py-1 rounded",children:y.id})]})]})]})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>b(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>{b(!1),q(y)},children:"Edit User"})]})]}),(0,De.jsxs)(Bo,{show:g,onHide:()=>v(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Confirm Delete"})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)(Ar,{size:48,className:"text-danger mb-3"}),(0,De.jsx)("h5",{children:"Delete User?"}),(0,De.jsxs)("p",{className:"text-muted",children:["Are you sure you want to delete user ",(0,De.jsx)("strong",{children:null===y||void 0===y?void 0:y.username}),"? This action cannot be undone."]}),(0,De.jsxs)(Nn,{variant:"warning",children:[(0,De.jsx)(Ii,{className:"me-2"}),"Deleting this user will revoke their system access immediately."]})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"danger",onClick:async()=>{try{await ma(y.id),m("User deleted successfully"),v(!1),I()}catch(e){u("Failed to delete user: "+e.message)}},children:"Delete User"})]})]})]})]})]})};function tp(e,t,n){t||(t=[]);var s=t.length++;return Object.defineProperty({},"_",{set:function(i){t[s]=i,e.apply(n,t)}})}function np(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sp(e,t){np(e,t),t.add(e)}function ip(e,t,n){np(e,t),t.set(e,n)}function rp(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function ap(e,t,n){return n(rp(e,t))}function op(e,t){return e.get(rp(e,t))}function lp(e,t,n){return e.set(rp(e,t),n),n}function cp(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return cp=function(e){this.s=e,this.n=e.next},cp.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new cp(e)}var dp,up,hp,mp,pp,fp,gp,vp,xp,bp,yp,wp,jp,_p,Np;const kp="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Sp=[.001,0,0,.001,0,0],Cp=1.35,Ap=1,Ep=2,Tp=4,Pp=16,Mp=32,Lp=64,Rp=128,Op=256,Dp={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ip={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Fp={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},zp=0,Bp=1,Wp=2,Hp=3,Up=3,Vp=4,Gp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qp={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Kp=1,Xp=2,Yp=3,Qp=4,$p=5,Jp={ERRORS:0,WARNINGS:1,INFOS:5},Zp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ef=0,tf=1,nf=2,sf=3;let rf=Jp.WARNINGS;function af(e){Number.isInteger(e)&&(rf=e)}function of(){return rf}function lf(e){rf>=Jp.INFOS&&console.log("Info: ".concat(e))}function cf(e){rf>=Jp.WARNINGS&&console.log("Warning: ".concat(e))}function df(e){throw new Error(e)}function uf(e,t){e||df(t)}function hf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(i){}}const s=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(s)?s:null}function mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=URL.parse(e);return s?(s.hash=t,s.href):n&&hf(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function pf(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const ff=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class gf extends ff{constructor(e,t){super(e,"PasswordException"),this.code=t}}class vf extends ff{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class xf extends ff{constructor(e){super(e,"InvalidPDFException")}}class bf extends ff{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class yf extends ff{constructor(e){super(e,"FormatError")}}class wf extends ff{constructor(e){super(e,"AbortException")}}function jf(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||df("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const s=[];for(let i=0;i<t;i+=n){const r=Math.min(i+n,t),a=e.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function _f(e){"string"!==typeof e&&df("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=255&e.charCodeAt(s);return n}class Nf{static get isLittleEndian(){return pf(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return pf(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return pf(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return pf(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return pf(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return pf(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const kf=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class Sf{static makeHexColor(e,t,n){return"#".concat(kf[e]).concat(kf[t]).concat(kf[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=e[n],i=e[n+1];e[n]=s*t[0]+i*t[2]+t[4],e[n+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=t[0],i=t[1],r=t[2],a=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*s+d*r+o,e[n+c+1]=t*i+d*a+l}}static applyInverseTransform(e,t){const n=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const s=t[0],i=t[1],r=t[2],a=t[3],o=t[4],l=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let m=s*c+o,p=m,f=s*u+o,g=f,v=a*d+l,x=v,b=a*h+l,y=b;if(0!==i||0!==r){const e=i*c,t=i*u,n=r*d,s=r*h;m+=n,g+=n,f+=s,p+=s,v+=e,y+=e,b+=t,x+=t}n[0]=Math.min(n[0],m,f,p,g),n[1]=Math.min(n[1],v,b,x,y),n[2]=Math.max(n[2],m,f,p,g),n[3]=Math.max(n[3],v,b,x,y)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],i=e[2],r=e[3],a=n**2+s**2,o=n*i+s*r,l=i**2+r**2,c=(a+l)/2,d=Math.sqrt(c**2-(a*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>r?null:[n,i,s,r]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,n,s,i,r,a,o,l){l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o),rp(Sf,this,Af).call(this,e,n,i,a,t,s,r,o,3*(3*(n-i)-e+a),6*(e-2*n+i),3*(n-e),l),rp(Sf,this,Af).call(this,e,n,i,a,t,s,r,o,3*(3*(s-r)-t+o),6*(t-2*s+r),3*(s-t),l)}}function Cf(e,t,n,s,i,r,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,m=d*(d*(d*e+3*l*t)+3*u*n)+h*s,p=d*(d*(d*i+3*l*r)+3*u*a)+h*o;c[0]=Math.min(c[0],m),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],m),c[3]=Math.max(c[3],p)}function Af(e,t,n,s,i,r,a,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&rp(dp,this,Cf).call(this,e,t,n,s,i,r,a,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const m=Math.sqrt(h),p=2*l;rp(dp,this,Cf).call(this,e,t,n,s,i,r,a,o,(-c+m)/p,u),rp(dp,this,Cf).call(this,e,t,n,s,i,r,a,o,(-c-m)/p,u)}dp=Sf;let Ef=null,Tf=null;function Pf(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),jf(e)}const Mf="pdfjs_internal_id_";function Lf(e,t,n){return Math.min(Math.max(e,t),n)}function Rf(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(jf(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});const Of="http://www.w3.org/2000/svg";class Df{}async function If(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Uf(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE)if(200!==i.status&&0!==i.status)s(new Error(i.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(i.response)}n(i.responseText)}},i.send(null)})}up=Df,Ee(Df,"CSS",96),Ee(Df,"PDF",72),Ee(Df,"PDF_TO_CSS_UNITS",up.CSS/up.PDF);class Ff{constructor(e){let{viewBox:t,userUnit:n,scale:s,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=a,s*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,u,h,m,p,f,g,v;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,u=0,h=0,m=1;break;case 90:d=0,u=1,h=1,m=0;break;case 270:d=0,u=-1,h=-1,m=0;break;case 0:d=1,u=0,h=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,m=-m),0===d?(p=Math.abs(c-t[1])*s+r,f=Math.abs(l-t[0])*s+a,g=(t[3]-t[1])*s,v=(t[2]-t[0])*s):(p=Math.abs(l-t[0])*s+r,f=Math.abs(c-t[1])*s+a,g=(t[2]-t[0])*s,v=(t[3]-t[1])*s),this.transform=[d*s,u*s,h*s,m*s,p-d*s*l-h*s*c,f-u*s*l-m*s*c],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return pf(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ff({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return Sf.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Sf.applyTransform(t,this.transform);const n=[e[2],e[3]];return Sf.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Sf.applyInverseTransform(n,this.transform),n}}class zf extends ff{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Bf(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function Wf(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class Hf{constructor(){Ee(this,"started",Object.create(null)),Ee(this,"times",[])}time(e){e in this.started&&cf("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||cf("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:i}of this.times)e.push("".concat(n.padEnd(t)," ").concat(i-s,"ms\n"));return e.join("")}}function Uf(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Vf(e){e.preventDefault()}function Gf(e){e.preventDefault(),e.stopPropagation()}class qf{static toDateObject(e){if(!e||"string"!==typeof e)return null;rp(qf,this,Kf)._||(Kf._=rp(qf,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=rp(qf,this,Kf)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(r+=c,a+=d):"+"===l&&(r-=c,a-=d),new Date(Date.UTC(n,s,i,r,a,o))}}var Kf={_:void 0};function Xf(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(cf('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Yf(e){const{a:t,b:n,c:s,d:i,e:r,f:a}=e.getTransform();return[t,n,s,i,r,a]}function Qf(e){const{a:t,b:n,c:s,d:i,e:r,f:a}=e.getTransform().invertSelf();return[t,n,s,i,r,a]}function $f(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Ff){const{pageWidth:s,pageHeight:i}=t.rawDims,{style:r}=e,a=Nf.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(s,"px"),l="var(--total-scale-factor) * ".concat(i,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),d=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(r.width=d,r.height=c):(r.width=c,r.height=d)}s&&e.setAttribute("data-main-rotation",t.rotation)}class Jf{constructor(){const{pixelRatio:e}=Jf;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=1/0,a=1/0,o=1/0;(n=Jf.capPixels(n,i))>0&&(r=Math.sqrt(n/(e*t))),-1!==s&&(a=s/e,o=s/t);const l=Math.min(r,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Zf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var eg=new WeakMap,tg=new WeakMap,ng=new WeakMap,sg=new WeakMap,ig=new WeakMap,rg=new WeakMap,ag=new WeakSet;class og{constructor(e){sp(this,ag),ip(this,eg,null),ip(this,tg,null),ip(this,ng,void 0),ip(this,sg,null),ip(this,ig,null),ip(this,rg,null),lp(ng,this,e),pg._||(pg._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=lp(eg,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=op(ng,this)._uiManager._signal;e.addEventListener("contextmenu",Vf,{signal:t}),e.addEventListener("pointerdown",lg,{signal:t});const n=lp(sg,this,document.createElement("div"));n.className="buttons",e.append(n);const s=op(ng,this).toolbarPosition;if(s){const{style:t}=e,n="ltr"===op(ng,this)._uiManager.direction?1-s[0]:s[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*s[1],"% + var(--editor-toolbar-vert-offset))")}return rp(ag,this,hg).call(this),e}get div(){return op(eg,this)}hide(){var e;op(eg,this).classList.add("hidden"),null===(e=op(tg,this))||void 0===e||e.hideDropdown()}show(){var e;op(eg,this).classList.remove("hidden"),null===(e=op(ig,this))||void 0===e||e.shown()}async addAltText(e){const t=await e.render();rp(ag,this,ug).call(this,t),op(sg,this).prepend(t,ap(ag,this,mg)),lp(ig,this,e)}addColorPicker(e){lp(tg,this,e);const t=e.renderButton();rp(ag,this,ug).call(this,t),op(sg,this).prepend(t,ap(ag,this,mg))}async addEditSignatureButton(e){const t=lp(rg,this,await e.renderEditButton(op(ng,this)));rp(ag,this,ug).call(this,t),op(sg,this).prepend(t,ap(ag,this,mg))}updateEditSignatureButton(e){op(rg,this)&&(op(rg,this).title=e)}remove(){var e;op(eg,this).remove(),null===(e=op(tg,this))||void 0===e||e.destroy(),lp(tg,this,null)}}function lg(e){e.stopPropagation()}function cg(e){op(ng,this)._focusEventsAllowed=!1,Gf(e)}function dg(e){op(ng,this)._focusEventsAllowed=!0,Gf(e)}function ug(e){const t=op(ng,this)._uiManager._signal;e.addEventListener("focusin",rp(ag,this,cg).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",rp(ag,this,dg).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Vf,{signal:t})}function hg(){const{editorType:e,_uiManager:t}=op(ng,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",pg._[e]),rp(ag,this,ug).call(this,n),n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),op(sg,this).append(n)}function mg(e){const t=document.createElement("div");return t.className="divider",t}var pg={_:null},fg=new WeakMap,gg=new WeakMap,vg=new WeakMap,xg=new WeakSet;class bg{constructor(e){sp(this,xg),ip(this,fg,null),ip(this,gg,null),ip(this,vg,void 0),lp(vg,this,e)}show(e,t,n){const[s,i]=rp(xg,this,wg).call(this,t,n),{style:r}=op(gg,this)||lp(gg,this,rp(xg,this,yg).call(this));e.append(op(gg,this)),r.insetInlineEnd="".concat(100*s,"%"),r.top="calc(".concat(100*i,"% + var(--editor-toolbar-vert-offset))")}hide(){op(gg,this).remove()}}function yg(){const e=lp(gg,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Vf,{signal:op(vg,this)._signal});const t=lp(fg,this,document.createElement("div"));return t.className="buttons",e.append(t),rp(xg,this,jg).call(this),e}function wg(e,t){let n=0,s=0;for(const i of e){const e=i.y+i.height;if(e<n)continue;const r=i.x+(t?i.width:0);e>n?(s=r,n=e):t?r>s&&(s=r):r<s&&(s=r)}return[t?1-s:s,n]}function jg(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=op(vg,this)._signal;e.addEventListener("contextmenu",Vf,{signal:n}),e.addEventListener("click",()=>{op(vg,this).highlightSelection("floating_button")},{signal:n}),op(fg,this).append(e)}function _g(e,t,n){for(const s of n)t.addEventListener(s,e[s].bind(e))}var Ng=new WeakMap;class kg{constructor(){ip(this,Ng,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((lp(Ng,this,(e=op(Ng,this),t=e++,e)),t))}}var Sg=new WeakMap,Cg=new WeakMap,Ag=new WeakMap,Eg=new WeakSet;class Tg{constructor(){sp(this,Eg),ip(this,Sg,Pf()),ip(this,Cg,0),ip(this,Ag,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return pf(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:s,type:i}=e;return rp(Eg,this,Pg).call(this,"".concat(t,"_").concat(n,"_").concat(s,"_").concat(i),e)}async getFromUrl(e){return rp(Eg,this,Pg).call(this,e,e)}async getFromBlob(e,t){const n=await t;return rp(Eg,this,Pg).call(this,e,n)}async getFromId(e){op(Ag,this)||lp(Ag,this,new Map);const t=op(Ag,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,s,i;op(Ag,this)||lp(Ag,this,new Map);let r=op(Ag,this).get(e);if(null!==(i=r)&&void 0!==i&&i.bitmap)return r.refCounter+=1,r;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),r={bitmap:a.transferToImageBitmap(),id:"image_".concat(op(Sg,this),"_").concat((lp(Cg,this,(n=op(Cg,this),s=n++,n)),s)),refCounter:1,isSvg:!1},op(Ag,this).set(e,r),op(Ag,this).set(r.id,r),r}getSvgUrl(e){const t=op(Ag,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;op(Ag,this)||lp(Ag,this,new Map);const n=op(Ag,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:s}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(s.width,s.height);e.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=e.convertToBlob()}null===(t=s.close)||void 0===t||t.call(s),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(op(Sg,this),"_"))}}async function Pg(e,t){var n;op(Ag,this)||lp(Ag,this,new Map);let s=op(Ag,this).get(e);if(null===s)return null;if(null!==(n=s)&&void 0!==n&&n.bitmap)return s.refCounter+=1,s;try{var i,r;let e;if(s||(s={bitmap:null,id:"image_".concat(op(Sg,this),"_").concat((lp(Cg,this,(i=op(Cg,this),r=i++,i)),r)),refCounter:0,isSvg:!1}),"string"===typeof t?(s.url=t,e=await If(t,"blob")):t instanceof File?e=s.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=hp._isSVGFittingCanvas,n=new FileReader,i=new Image,r=new Promise((e,r)=>{i.onload=()=>{s.bitmap=i,s.isSvg=!0,e()},n.onload=async()=>{const e=s.svgUrl=n.result;i.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},i.onerror=n.onerror=r});n.readAsDataURL(e),await r}else s.bitmap=await createImageBitmap(e);s.refCounter=1}catch(OP){cf(OP),s=null}return op(Ag,this).set(e,s),s&&op(Ag,this).set(s.id,s),s}hp=Tg;var Mg=new WeakMap,Lg=new WeakMap,Rg=new WeakMap,Og=new WeakMap;class Dg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;ip(this,Mg,[]),ip(this,Lg,!1),ip(this,Rg,void 0),ip(this,Og,-1),lp(Rg,this,e)}add(e){let{cmd:t,undo:n,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(i&&t(),op(Lg,this))return;const l={cmd:t,undo:n,post:s,type:r};if(-1===op(Og,this))return op(Mg,this).length>0&&(op(Mg,this).length=0),lp(Og,this,0),void op(Mg,this).push(l);if(a&&op(Mg,this)[op(Og,this)].type===r)return o&&(l.undo=op(Mg,this)[op(Og,this)].undo),void(op(Mg,this)[op(Og,this)]=l);const c=op(Og,this)+1;c===op(Rg,this)?op(Mg,this).splice(0,1):(lp(Og,this,c),c<op(Mg,this).length&&op(Mg,this).splice(c)),op(Mg,this).push(l)}undo(){if(-1===op(Og,this))return;lp(Lg,this,!0);const{undo:e,post:t}=op(Mg,this)[op(Og,this)];e(),null===t||void 0===t||t(),lp(Lg,this,!1),lp(Og,this,op(Og,this)-1)}redo(){if(op(Og,this)<op(Mg,this).length-1){lp(Og,this,op(Og,this)+1),lp(Lg,this,!0);const{cmd:e,post:t}=op(Mg,this)[op(Og,this)];e(),null===t||void 0===t||t(),lp(Lg,this,!1)}}hasSomethingToUndo(){return-1!==op(Og,this)}hasSomethingToRedo(){return op(Og,this)<op(Mg,this).length-1}cleanType(e){if(-1!==op(Og,this)){for(let t=op(Og,this);t>=0;t--)if(op(Mg,this)[t].type!==e)return op(Mg,this).splice(t+1,op(Og,this)-t),void lp(Og,this,t);op(Mg,this).length=0,lp(Og,this,-1)}}destroy(){lp(Mg,this,null)}}var Ig=new WeakSet;class Fg{constructor(e){sp(this,Ig),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Nf.platform;for(const[n,s,i={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:s,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:s,options:i}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(rp(Ig,this,zg).call(this,t));if(!n)return;const{callback:s,options:{bubbles:i=!1,args:r=[],checker:a=null}}=n;a&&!a(e,t)||(s.bind(e,...r,t)(),i||Gf(t))}}function zg(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class Bg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;e.set(n,Xf(s))}t.remove()}(e),pf(this,"_colors",e)}convert(e){const t=Xf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((e,n)=>e===t[n]))return Bg._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Sf.makeHexColor(...t):e}}Ee(Bg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Wg=new WeakMap,Hg=new WeakMap,Ug=new WeakMap,Vg=new WeakMap,Gg=new WeakMap,qg=new WeakMap,Kg=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,Qg=new WeakMap,$g=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,ev=new WeakMap,tv=new WeakMap,nv=new WeakMap,sv=new WeakMap,iv=new WeakMap,rv=new WeakMap,av=new WeakMap,ov=new WeakMap,lv=new WeakMap,cv=new WeakMap,dv=new WeakMap,uv=new WeakMap,hv=new WeakMap,mv=new WeakMap,pv=new WeakMap,fv=new WeakMap,gv=new WeakMap,vv=new WeakMap,xv=new WeakMap,bv=new WeakMap,yv=new WeakMap,wv=new WeakMap,jv=new WeakMap,_v=new WeakMap,Nv=new WeakMap,kv=new WeakMap,Sv=new WeakMap,Cv=new WeakMap,Av=new WeakMap,Ev=new WeakMap,Tv=new WeakMap,Pv=new WeakSet;class Mv{static get _keyboardManager(){const e=Mv.prototype,t=e=>op(Av,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return pf(this,"_keyboardManager",new Fg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&op(Av,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&op(Av,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,n,s,i,r,a,o,l,c,d,u,h,m){sp(this,Pv),ip(this,Wg,new AbortController),ip(this,Hg,null),ip(this,Ug,new Map),ip(this,Vg,new Map),ip(this,Gg,null),ip(this,qg,null),ip(this,Kg,null),ip(this,Xg,new Dg),ip(this,Yg,null),ip(this,Qg,null),ip(this,$g,0),ip(this,Jg,new Set),ip(this,Zg,null),ip(this,ev,null),ip(this,tv,new Set),Ee(this,"_editorUndoBar",null),ip(this,nv,!1),ip(this,sv,!1),ip(this,iv,!1),ip(this,rv,null),ip(this,av,null),ip(this,ov,null),ip(this,lv,null),ip(this,cv,!1),ip(this,dv,null),ip(this,uv,new kg),ip(this,hv,!1),ip(this,mv,!1),ip(this,pv,null),ip(this,fv,null),ip(this,gv,null),ip(this,vv,null),ip(this,xv,null),ip(this,bv,Ip.NONE),ip(this,yv,new Set),ip(this,wv,null),ip(this,jv,null),ip(this,_v,null),ip(this,Nv,null),ip(this,kv,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),ip(this,Sv,[0,0]),ip(this,Cv,null),ip(this,Av,null),ip(this,Ev,null),ip(this,Tv,null);const p=this._signal=op(Wg,this).signal;lp(Av,this,e),lp(Ev,this,t),lp(Gg,this,n),lp(jv,this,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:p}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),i._on("setpreference",this.onSetPreference.bind(this),{signal:p}),i._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:p}),rp(Pv,this,Fv).call(this),rp(Pv,this,Gv).call(this),rp(Pv,this,Wv).call(this),lp(qg,this,r.annotationStorage),lp(rv,this,r.filterFactory),lp(_v,this,a),lp(lv,this,o||null),lp(nv,this,l),lp(sv,this,c),lp(iv,this,d),lp(xv,this,u||null),this.viewParameters={realScale:Df.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=h||null,this._supportsPinchToZoom=!1!==m}destroy(){var e,t,n,s,i,r,a,o;null===(e=op(Tv,this))||void 0===e||e.resolve(),lp(Tv,this,null),null===(t=op(Wg,this))||void 0===t||t.abort(),lp(Wg,this,null),this._signal=null;for(const l of op(Vg,this).values())l.destroy();op(Vg,this).clear(),op(Ug,this).clear(),op(tv,this).clear(),null===(n=op(vv,this))||void 0===n||n.clear(),lp(Hg,this,null),op(yv,this).clear(),op(Xg,this).destroy(),null===(s=op(Gg,this))||void 0===s||s.destroy(),null===(i=op(jv,this))||void 0===i||i.destroy(),null===(r=op(dv,this))||void 0===r||r.hide(),lp(dv,this,null),null===(a=op(gv,this))||void 0===a||a.destroy(),lp(gv,this,null),op(av,this)&&(clearTimeout(op(av,this)),lp(av,this,null)),op(Cv,this)&&(clearTimeout(op(Cv,this)),lp(Cv,this,null)),null===(o=this._editorUndoBar)||void 0===o||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return op(xv,this)}get useNewAltTextFlow(){return op(sv,this)}get useNewAltTextWhenAddingImage(){return op(iv,this)}get hcmFilter(){return pf(this,"hcmFilter",op(_v,this)?op(rv,this).addHCMFilter(op(_v,this).foreground,op(_v,this).background):"none")}get direction(){return pf(this,"direction",getComputedStyle(op(Av,this)).direction)}get highlightColors(){return pf(this,"highlightColors",op(lv,this)?new Map(op(lv,this).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return pf(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),lp(Qg,this,e)}setMainHighlightColorPicker(e){lp(gv,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=op(Gg,this))||void 0===t||t.editAltText(this,e,n)}getSignature(e){var t;null===(t=op(jv,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return op(jv,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)lp(iv,this,n)}onPageChanging(e){let{pageNumber:t}=e;lp($g,this,t-1)}focusMainContainer(){op(Av,this).focus()}findParent(e,t){for(const n of op(Vg,this).values()){const{x:s,y:i,width:r,height:a}=n.div.getBoundingClientRect();if(e>=s&&e<=s+r&&t>=i&&t<=i+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];op(Ev,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){op(tv,this).add(e)}removeShouldRescale(e){op(tv,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*Df.PDF_TO_CSS_UNITS;for(const s of op(tv,this))s.onScaleChanging();null===(t=op(Qg,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:r}=t,a=t.toString(),o=rp(Pv,this,Lv).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;t.empty();const c=rp(Pv,this,Rv).call(this,o),d=op(bv,this)===Ip.NONE,u=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:r,text:a}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(Ip.HIGHLIGHT,u):u()}addToAnnotationStorage(e){e.isEmpty()||!op(qg,this)||op(qg,this).has(e.id)||op(qg,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,op(cv,this)&&(lp(cv,this,!1),rp(Pv,this,Iv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of op(yv,this))if(t.div.contains(e)){lp(fv,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!op(fv,this))return;const[e,t]=op(fv,this);lp(fv,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){rp(Pv,this,Wv).call(this),rp(Pv,this,Uv).call(this)}removeEditListeners(){rp(Pv,this,Hv).call(this),rp(Pv,this,Vv).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of op(ev,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of op(ev,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=op(Hg,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of op(yv,this)){const e=s.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const e of op(ev,this))if(e.isHandlingMimeForPasting(r.type))return void e.paste(r,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){return void cf('paste: "'.concat(i.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const e=[];for(const r of n){const t=await s.deserialize(r);if(!t)return;e.push(t)}const t=()=>{for(const t of e)rp(Pv,this,Qv).call(this,t);rp(Pv,this,Zv).call(this,e)},i=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:i,mustExec:!0})}catch(i){cf('paste: "'.concat(i.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),op(bv,this)===Ip.NONE||this.isEditorHandlingKeyboard||Mv._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,op(cv,this)&&(lp(cv,this,!1),rp(Pv,this,Iv).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(rp(Pv,this,zv).call(this),rp(Pv,this,Uv).call(this),rp(Pv,this,qv).call(this,{isEditing:op(bv,this)!==Ip.NONE,isEmpty:rp(Pv,this,Jv).call(this),hasSomethingToUndo:op(Xg,this).hasSomethingToUndo(),hasSomethingToRedo:op(Xg,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(rp(Pv,this,Bv).call(this),rp(Pv,this,Vv).call(this),rp(Pv,this,qv).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!op(ev,this)){lp(ev,this,e);for(const e of op(ev,this))rp(Pv,this,Kv).call(this,e.defaultPropertiesToUpdate)}}getId(){return op(uv,this).id}get currentLayer(){return op(Vg,this).get(op($g,this))}getLayer(e){return op(Vg,this).get(e)}get currentPageIndex(){return op($g,this)}addLayer(e){op(Vg,this).set(e.pageIndex,e),op(hv,this)?e.enable():e.disable()}removeLayer(e){op(Vg,this).delete(e.pageIndex)}async updateMode(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(op(bv,this)!==e&&(!op(Tv,this)||(await op(Tv,this).promise,op(Tv,this)))){var i,r;if(lp(Tv,this,Promise.withResolvers()),null===(t=op(Qg,this))||void 0===t||t.commitOrRemove(),lp(bv,this,e),e===Ip.NONE)return this.setEditingState(!1),rp(Pv,this,Yv).call(this),null===(i=this._editorUndoBar)||void 0===i||i.hide(),void op(Tv,this).resolve();if(e===Ip.SIGNATURE)await(null===(r=op(jv,this))||void 0===r?void 0:r.loadSignatures());this.setEditingState(!0),await rp(Pv,this,Xv).call(this),this.unselectAll();for(const t of op(Vg,this).values())t.updateMode(e);if(!n)return s&&this.addNewEditorFromKeyboard(),void op(Tv,this).resolve();for(const e of op(Ug,this).values())e.annotationElementId===n||e.id===n?(this.setSelected(e),e.enterInEditMode()):e.unselect();op(Tv,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==op(bv,this)&&this._eventBus.dispatch("switchannotationeditormode",Pe({source:this},e))}updateParams(e,t){var n;if(op(ev,this)){switch(e){case Fp.CREATE:return void this.currentLayer.addNewEditor(t);case Fp.HIGHLIGHT_DEFAULT_COLOR:null===(n=op(gv,this))||void 0===n||n.updateColor(t);break;case Fp.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(op(Nv,this)||lp(Nv,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of op(yv,this))n.updateParams(e,t);for(const n of op(ev,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,s;for(const i of op(Ug,this).values())i.editorType===e&&i.show(t);(null===(n=null===(s=op(Nv,this))||void 0===s?void 0:s.get(Fp.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&rp(Pv,this,Kv).call(this,[[Fp.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(op(mv,this)!==e){lp(mv,this,e);for(const t of op(Vg,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of op(Ug,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return op(Ug,this).get(e)}addEditor(e){op(Ug,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(op(av,this)&&clearTimeout(op(av,this)),lp(av,this,setTimeout(()=>{this.focusMainContainer(),lp(av,this,null)},0))),op(Ug,this).delete(e.id),e.annotationElementId)&&(null===(t=op(vv,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&op(Jg,this).has(e.annotationElementId))||(null===(n=op(qg,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){op(Jg,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return op(Jg,this).has(e)}removeDeletedAnnotationElement(e){op(Jg,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){op(Hg,this)!==e&&(lp(Hg,this,e),e&&rp(Pv,this,Kv).call(this,e.propertiesToUpdate))}updateUI(e){ap(Pv,this,$v)===e&&rp(Pv,this,Kv).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){rp(Pv,this,Kv).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(op(yv,this).has(e))return op(yv,this).delete(e),e.unselect(),void rp(Pv,this,qv).call(this,{hasSelectedEditor:this.hasSelection});op(yv,this).add(e),e.select(),rp(Pv,this,Kv).call(this,e.propertiesToUpdate),rp(Pv,this,qv).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;null===(t=op(Qg,this))||void 0===t||t.commitOrRemove();for(const n of op(yv,this))n!==e&&n.unselect();op(yv,this).clear(),op(yv,this).add(e),e.select(),rp(Pv,this,Kv).call(this,e.propertiesToUpdate),rp(Pv,this,qv).call(this,{hasSelectedEditor:!0})}isSelected(e){return op(yv,this).has(e)}get firstSelectedEditor(){return op(yv,this).values().next().value}unselect(e){e.unselect(),op(yv,this).delete(e),rp(Pv,this,qv).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==op(yv,this).size}get isEnterHandled(){return 1===op(yv,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;op(Xg,this).undo(),rp(Pv,this,qv).call(this,{hasSomethingToUndo:op(Xg,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:rp(Pv,this,Jv).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){op(Xg,this).redo(),rp(Pv,this,qv).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:op(Xg,this).hasSomethingToRedo(),isEmpty:rp(Pv,this,Jv).call(this)})}addCommands(e){op(Xg,this).add(e),rp(Pv,this,qv).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:rp(Pv,this,Jv).call(this)})}cleanUndoStack(e){op(Xg,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...op(yv,this)],s=()=>{for(const e of n)rp(Pv,this,Qv).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(s,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:s,mustExec:!0})}commitOrRemove(){var e;null===(e=op(Hg,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return op(Hg,this)||this.hasSelection}selectAll(){for(const e of op(yv,this))e.commit();rp(Pv,this,Zv).call(this,op(Ug,this).values())}unselectAll(){var e;if((!op(Hg,this)||(op(Hg,this).commitOrRemove(),op(bv,this)===Ip.NONE))&&(null===(e=op(Qg,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of op(yv,this))e.unselect();op(yv,this).clear(),rp(Pv,this,qv).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;op(Sv,this)[0]+=e,op(Sv,this)[1]+=t;const[n,s]=op(Sv,this),i=[...op(yv,this)];op(Cv,this)&&clearTimeout(op(Cv,this)),lp(Cv,this,setTimeout(()=>{lp(Cv,this,null),op(Sv,this)[0]=op(Sv,this)[1]=0,this.addCommands({cmd:()=>{for(const e of i)op(Ug,this).has(e.id)&&(e.translateInPage(n,s),e.translationDone())},undo:()=>{for(const e of i)op(Ug,this).has(e.id)&&(e.translateInPage(-n,-s),e.translationDone())},mustExec:!1})},1e3));for(const r of i)r.translateInPage(e,t),r.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),lp(Zg,this,new Map);for(const e of op(yv,this))op(Zg,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!op(Zg,this))return!1;this.disableUserSelect(!1);const e=op(Zg,this);lp(Zg,this,null);let t=!1;for(const[{x:s,y:i,pageIndex:r},a]of e)a.newX=s,a.newY=i,a.newPageIndex=r,t||(t=s!==a.savedX||i!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,s)=>{if(op(Ug,this).has(e.id)){const i=op(Vg,this).get(s);i?e._setParentAndPosition(i,t,n):(e.pageIndex=s,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:s,newY:i,newPageIndex:r}]of e)n(t,s,i,r)},undo:()=>{for(const[t,{savedX:s,savedY:i,savedPageIndex:r}]of e)n(t,s,i,r)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(op(Zg,this))for(const n of op(Zg,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===op(yv,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return op(Hg,this)===e}getActive(){return op(Hg,this)}getMode(){return op(bv,this)}get imageManager(){return pf(this,"imageManager",new Tg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:s,width:i,height:r}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-s)/r,y:1-(e+a-n)/i,width:o/r,height:a/i});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/i,y:1-(t+o-s)/r,width:a/i,height:o/r});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-s)/r,y:(e-n)/i,width:o/r,height:a/i});break;default:a=(e,t,a,o)=>({x:(e-n)/i,y:(t-s)/r,width:a/i,height:o/r})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:s,height:i}of e.getClientRects())0!==s&&0!==i&&o.push(a(t,n,s,i))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(op(Kg,this)||lp(Kg,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=op(Kg,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=op(Kg,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const s=op(qg,this).getRawValue(n);s&&(op(bv,this)!==Ip.NONE||s.hasBeenModified)&&s.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var s;const i=null===(s=op(vv,this))||void 0===s?void 0:s.get(e);i&&(i.setCanvas(t,n),op(vv,this).delete(e))}addMissingCanvas(e,t){(op(vv,this)||lp(vv,this,new Map)).set(e,t)}}function Lv(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function Rv(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of op(Vg,this).values())if(n.hasTextLayer(e))return n;return null}function Ov(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=rp(Pv,this,Lv).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(op(dv,this)||lp(dv,this,new bg(this)),op(dv,this).show(t,n,"ltr"===this.direction))}function Dv(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(op(wv,this))null===(n=op(dv,this))||void 0===n||n.hide(),lp(wv,this,null),rp(Pv,this,qv).call(this,{hasSelectedText:!1});return}const{anchorNode:s}=t;if(s===op(wv,this))return;const i=rp(Pv,this,Lv).call(this,t).closest(".textLayer");var r;if(i){if(null===(e=op(dv,this))||void 0===e||e.hide(),lp(wv,this,s),rp(Pv,this,qv).call(this,{hasSelectedText:!0}),(op(bv,this)===Ip.HIGHLIGHT||op(bv,this)===Ip.NONE)&&(op(bv,this)===Ip.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),lp(cv,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=op(bv,this)===Ip.HIGHLIGHT?rp(Pv,this,Rv).call(this,i):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),s=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&rp(Pv,this,Iv).call(this,"main_toolbar"))};window.addEventListener("pointerup",s,{signal:n}),window.addEventListener("blur",s,{signal:n})}}else op(wv,this)&&(null===(r=op(dv,this))||void 0===r||r.hide(),lp(wv,this,null),rp(Pv,this,qv).call(this,{hasSelectedText:!1}))}function Iv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";op(bv,this)===Ip.HIGHLIGHT?this.highlightSelection(e):op(nv,this)&&rp(Pv,this,Ov).call(this)}function Fv(){document.addEventListener("selectionchange",rp(Pv,this,Dv).bind(this),{signal:this._signal})}function zv(){if(op(ov,this))return;lp(ov,this,new AbortController);const e=this.combinedSignal(op(ov,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Bv(){var e;null===(e=op(ov,this))||void 0===e||e.abort(),lp(ov,this,null)}function Wv(){if(op(pv,this))return;lp(pv,this,new AbortController);const e=this.combinedSignal(op(pv,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function Hv(){var e;null===(e=op(pv,this))||void 0===e||e.abort(),lp(pv,this,null)}function Uv(){if(op(Yg,this))return;lp(Yg,this,new AbortController);const e=this.combinedSignal(op(Yg,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Vv(){var e;null===(e=op(Yg,this))||void 0===e||e.abort(),lp(Yg,this,null)}function Gv(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function qv(e){Object.entries(e).some(e=>{let[t,n]=e;return op(kv,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(op(kv,this),e)}),op(bv,this)===Ip.HIGHLIGHT&&!1===e.hasSelectedEditor&&rp(Pv,this,Kv).call(this,[[Fp.HIGHLIGHT_FREE,!0]]))}function Kv(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function Xv(){if(!op(hv,this)){lp(hv,this,!0);const e=[];for(const t of op(Vg,this).values())e.push(t.enable());await Promise.all(e);for(const t of op(Ug,this).values())t.enable()}}function Yv(){if(this.unselectAll(),op(hv,this)){lp(hv,this,!1);for(const e of op(Vg,this).values())e.disable();for(const e of op(Ug,this).values())e.disable()}}function Qv(e){const t=op(Vg,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function $v(e){let t=null;for(t of op(yv,e));return t}function Jv(){if(0===op(Ug,this).size)return!0;if(1===op(Ug,this).size)for(const e of op(Ug,this).values())return e.isEmpty();return!1}function Zv(e){for(const t of op(yv,this))t.unselect();op(yv,this).clear();for(const t of e)t.isEmpty()||(op(yv,this).add(t),t.select());rp(Pv,this,qv).call(this,{hasSelectedEditor:this.hasSelection})}Ee(Mv,"TRANSLATE_SMALL",1),Ee(Mv,"TRANSLATE_BIG",10);var ex=new WeakMap,tx=new WeakMap,nx=new WeakMap,sx=new WeakMap,ix=new WeakMap,rx=new WeakMap,ax=new WeakMap,ox=new WeakMap,lx=new WeakMap,cx=new WeakMap,dx=new WeakMap,ux=new WeakMap,hx=new WeakSet;class mx{constructor(e){sp(this,hx),ip(this,ex,null),ip(this,tx,!1),ip(this,nx,null),ip(this,sx,null),ip(this,ix,null),ip(this,rx,null),ip(this,ax,!1),ip(this,ox,null),ip(this,lx,null),ip(this,cx,null),ip(this,dx,null),ip(this,ux,!1),lp(lx,this,e),lp(ux,this,e._uiManager.useNewAltTextFlow),gx._||(gx._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=mx._l10n)&&void 0!==t||(mx._l10n=e)}async render(){const e=lp(nx,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=lp(sx,this,document.createElement("span"));e.append(t),op(ux,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",gx._.missing),t.setAttribute("data-l10n-id",gx._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=op(lx,this)._uiManager._signal;e.addEventListener("contextmenu",Vf,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const s=e=>{e.preventDefault(),op(lx,this)._uiManager.editAltText(op(lx,this)),op(ux,this)&&op(lx,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:ap(hx,this,px)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(lp(ax,this,!0),s(t))},{signal:n}),await rp(hx,this,fx).call(this),e}finish(){op(nx,this)&&(op(nx,this).focus({focusVisible:op(ax,this)}),lp(ax,this,!1))}isEmpty(){return op(ux,this)?null===op(ex,this):!op(ex,this)&&!op(tx,this)}hasData(){return op(ux,this)?null!==op(ex,this)||!!op(cx,this):this.isEmpty()}get guessedText(){return op(cx,this)}async setGuessedText(e){null===op(ex,this)&&(lp(cx,this,e),lp(dx,this,await mx._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),rp(hx,this,fx).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!op(ux,this)||op(ex,this))return null===(t=op(ox,this))||void 0===t||t.remove(),void lp(ox,this,null);if(!op(ox,this)){const e=lp(ox,this,document.createElement("div"));e.className="noAltTextBadge",op(lx,this).div.append(e)}op(ox,this).classList.toggle("hidden",!e)}serialize(e){let t=op(ex,this);return e||op(cx,this)!==t||(t=op(dx,this)),{altText:t,decorative:op(tx,this),guessedText:op(cx,this),textWithDisclaimer:op(dx,this)}}get data(){return{altText:op(ex,this),decorative:op(tx,this)}}set data(e){let{altText:t,decorative:n,guessedText:s,textWithDisclaimer:i,cancel:r=!1}=e;s&&(lp(cx,this,s),lp(dx,this,i)),op(ex,this)===t&&op(tx,this)===n||(r||(lp(ex,this,t),lp(tx,this,n)),rp(hx,this,fx).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];op(nx,this)&&(!e&&op(rx,this)&&(clearTimeout(op(rx,this)),lp(rx,this,null)),op(nx,this).disabled=!e)}shown(){op(lx,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:ap(hx,this,px)}})}destroy(){var e,t;null===(e=op(nx,this))||void 0===e||e.remove(),lp(nx,this,null),lp(sx,this,null),lp(ix,this,null),null===(t=op(ox,this))||void 0===t||t.remove(),lp(ox,this,null)}}function px(e){return(op(ex,e)?"added":null===op(ex,e)&&e.guessedText&&"review")||"missing"}async function fx(){const e=op(nx,this);if(!e)return;if(op(ux,this)){var t,n;if(e.classList.toggle("done",!!op(ex,this)),e.setAttribute("data-l10n-id",gx._[ap(hx,this,px)]),null===(t=op(sx,this))||void 0===t||t.setAttribute("data-l10n-id",gx._["".concat(ap(hx,this,px),"-label")]),!op(ex,this))return void(null===(n=op(ix,this))||void 0===n||n.remove())}else{var s;if(!op(ex,this)&&!op(tx,this))return e.classList.remove("done"),void(null===(s=op(ix,this))||void 0===s||s.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=op(ix,this);if(!i){lp(ix,this,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),i.id="alt-text-tooltip-".concat(op(lx,this).id);const t=100,n=op(lx,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(op(rx,this)),lp(rx,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{lp(rx,this,setTimeout(()=>{lp(rx,this,null),op(ix,this).classList.add("show"),op(lx,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;op(rx,this)&&(clearTimeout(op(rx,this)),lp(rx,this,null)),null===(e=op(ix,this))||void 0===e||e.classList.remove("show")},{signal:n})}op(tx,this)?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=op(ex,this)),i.parentNode||e.append(i);const r=op(lx,this).getElementForAltText();null===r||void 0===r||r.setAttribute("aria-describedby",i.id)}var gx={_:null};Ee(mx,"_l10n",null);var vx=new WeakMap,xx=new WeakMap,bx=new WeakMap,yx=new WeakMap,wx=new WeakMap,jx=new WeakMap,_x=new WeakMap,Nx=new WeakMap,kx=new WeakMap,Sx=new WeakMap,Cx=new WeakMap,Ax=new WeakMap,Ex=new WeakSet;class Tx{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:o}=e;sp(this,Ex),ip(this,vx,void 0),ip(this,xx,!1),ip(this,bx,null),ip(this,yx,void 0),ip(this,wx,void 0),ip(this,jx,void 0),ip(this,_x,void 0),ip(this,Nx,null),ip(this,kx,void 0),ip(this,Sx,null),ip(this,Cx,void 0),ip(this,Ax,null),lp(vx,this,t),lp(bx,this,s),lp(yx,this,n),lp(wx,this,i),lp(jx,this,r),lp(_x,this,a),lp(Cx,this,new AbortController),lp(kx,this,AbortSignal.any([o,op(Cx,this).signal])),t.addEventListener("touchstart",rp(Ex,this,Px).bind(this),{passive:!1,signal:op(kx,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Jf.pixelRatio}destroy(){var e,t;null===(e=op(Cx,this))||void 0===e||e.abort(),lp(Cx,this,null),null===(t=op(Nx,this))||void 0===t||t.abort(),lp(Nx,this,null)}}function Px(e){var t,n;if(null!==(t=op(yx,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(op(Nx,this))return;const e=lp(Nx,this,new AbortController),t=AbortSignal.any([op(kx,this),e.signal]),n=op(vx,this),s={capture:!0,signal:t,passive:!1},i=e=>{var t;"touch"===e.pointerType&&(null===(t=op(Nx,this))||void 0===t||t.abort(),lp(Nx,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(Gf(e),i(e))},s),n.addEventListener("pointerup",i,s),void n.addEventListener("pointercancel",i,s)}if(!op(Ax,this)){var s;lp(Ax,this,new AbortController);const e=AbortSignal.any([op(kx,this),op(Ax,this).signal]),t=op(vx,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",rp(Ex,this,Mx).bind(this),n);const i=rp(Ex,this,Lx).bind(this);t.addEventListener("touchend",i,n),t.addEventListener("touchcancel",i,n),n.capture=!0,t.addEventListener("pointerdown",Gf,n),t.addEventListener("pointermove",Gf,n),t.addEventListener("pointercancel",Gf,n),t.addEventListener("pointerup",Gf,n),null===(s=op(wx,this))||void 0===s||s.call(this)}if(Gf(e),2!==e.touches.length||null!==(n=op(bx,this))&&void 0!==n&&n.call(this))return void lp(Sx,this,null);let[i,r]=e.touches;i.identifier>r.identifier&&([i,r]=[r,i]),lp(Sx,this,{touch0X:i.screenX,touch0Y:i.screenY,touch1X:r.screenX,touch1Y:r.screenY})}function Mx(e){var t;if(!op(Sx,this)||2!==e.touches.length)return;Gf(e);let[n,s]=e.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:i,screenY:r}=n,{screenX:a,screenY:o}=s,l=op(Sx,this),{touch0X:c,touch0Y:d,touch1X:u,touch1Y:h}=l,m=u-c,p=h-d,f=a-i,g=o-r,v=Math.hypot(f,g)||1,x=Math.hypot(m,p)||1;if(!op(xx,this)&&Math.abs(x-v)<=mp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=a,l.touch1Y=o,!op(xx,this))return void lp(xx,this,!0);const b=[(i+a)/2,(r+o)/2];null===(t=op(jx,this))||void 0===t||t.call(this,b,x,v)}function Lx(e){if(!(e.touches.length>=2)){var t;if(op(Ax,this))op(Ax,this).abort(),lp(Ax,this,null),null===(t=op(_x,this))||void 0===t||t.call(this);op(Sx,this)&&(Gf(e),lp(Sx,this,null),lp(xx,this,!1))}}mp=Tx;var Rx=new WeakMap,Ox=new WeakMap,Dx=new WeakMap,Ix=new WeakMap,Fx=new WeakMap,zx=new WeakMap,Bx=new WeakMap,Wx=new WeakMap,Hx=new WeakMap,Ux=new WeakMap,Vx=new WeakMap,Gx=new WeakMap,qx=new WeakMap,Kx=new WeakMap,Xx=new WeakMap,Yx=new WeakMap,Qx=new WeakMap,$x=new WeakMap,Jx=new WeakMap,Zx=new WeakMap,eb=new WeakMap,tb=new WeakMap,nb=new WeakMap,sb=new WeakMap,ib=new WeakSet;class rb{static get _resizerKeyboardManager(){const e=rb.prototype._resizeWithKeyboard,t=Mv.TRANSLATE_SMALL,n=Mv.TRANSLATE_BIG;return pf(this,"_resizerKeyboardManager",new Fg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],rb.prototype._stopResizingWithKeyboard]]))}constructor(e){sp(this,ib),ip(this,Rx,null),ip(this,Ox,null),ip(this,Dx,null),ip(this,Ix,!1),ip(this,Fx,null),ip(this,zx,""),ip(this,Bx,!1),ip(this,Wx,null),ip(this,Hx,null),ip(this,Ux,null),ip(this,Vx,null),ip(this,Gx,""),ip(this,qx,!1),ip(this,Kx,null),ip(this,Xx,!1),ip(this,Yx,!1),ip(this,Qx,!1),ip(this,$x,null),ip(this,Jx,0),ip(this,Zx,0),ip(this,eb,null),ip(this,tb,null),Ee(this,"isSelected",!1),Ee(this,"_isCopy",!1),Ee(this,"_editToolbar",null),Ee(this,"_initialOptions",Object.create(null)),Ee(this,"_initialData",null),Ee(this,"_isVisible",!0),Ee(this,"_uiManager",null),Ee(this,"_focusEventsAllowed",!0),ip(this,nb,!1),ip(this,sb,rb._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:r}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[i,r];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return pf(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new kb({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=rb._l10n)&&void 0!==n||(rb._l10n=e),rb._l10nResizer||(rb._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==rb._borderLineWidth)return;const s=getComputedStyle(document.documentElement);rb._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){df("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return op(nb,this)}set _isDraggable(e){var t;lp(nb,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=op(sb,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):rp(ib,this,Nb).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(op(qx,this)?lp(qx,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[i,r]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/i,this.y=(t+s)/r,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}translate(e,t){rp(ib,this,ab).call(this,this.parentDimensions,e,t)}translateInPage(e,t){op(Kx,this)||lp(Kx,this,[this.x,this.y,this.width,this.height]),rp(ib,this,ab).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){op(Kx,this)||lp(Kx,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l;const{style:c}=n;c.left="".concat((100*r).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(r,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!op(Kx,this)&&(op(Kx,this)[0]!==this.x||op(Kx,this)[1]!==this.y)}get _hasBeenResized(){return!!op(Kx,this)&&(op(Kx,this)[2]!==this.width||op(Kx,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=rb,s=n/e,i=n/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,s]}=this;let{x:i,y:r,width:a,height:o}=this;if(a*=n,o*=s,i*=n,r*=s,this._mustFixPosition)switch(e){case 0:i=Lf(i,0,n-a),r=Lf(r,0,s-o);break;case 90:i=Lf(i,0,n-o),r=Lf(r,a,s);break;case 180:i=Lf(i,a,n),r=Lf(r,o,s);break;case 270:i=Lf(i,o,n),r=Lf(r,0,s-a)}this.x=i/=n,this.y=r/=s;const[l,c]=this.getBaseTranslation();i+=l,r+=c,t.left="".concat((100*i).toFixed(2),"%"),t.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return ob.call(rb,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ob.call(rb,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,s]=this.parentDimensions,{style:i}=this.div;i.width="".concat((100*e/n).toFixed(2),"%"),op(Bx,this)||(i.height="".concat((100*t/s).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),i=!op(Bx,this)&&t.endsWith("%");if(s&&i)return;const[r,a]=this.parentDimensions;s||(e.width="".concat((100*parseFloat(n)/r).toFixed(2),"%")),op(Bx,this)||i||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=op(Dx,this))||void 0===e||e.finish()}async addEditToolbar(){return this._editToolbar||op(Yx,this)||(this._editToolbar=new og(this),this.div.append(this._editToolbar.render()),op(Dx,this)&&await this._editToolbar.addAltText(op(Dx,this))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=op(Dx,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){op(Dx,this)||(mx.initialize(rb._l10n),lp(Dx,this,new mx(this)),op(Rx,this)&&(op(Dx,this).data=op(Rx,this),lp(Rx,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=op(Dx,this))||void 0===e?void 0:e.data}set altTextData(e){op(Dx,this)&&(op(Dx,this).data=e)}get guessedAltText(){var e;return null===(e=op(Dx,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=op(Dx,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=op(Dx,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!op(Dx,this)&&!op(Dx,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=op(Dx,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=op(Ix,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),rp(ib,this,bb).call(this);const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*s/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/s).toFixed(2),"%"));const[i,r]=this.getInitialTranslation();return this.translate(i,r),_g(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(op(tb,this)||lp(tb,this,new Tx({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:rp(ib,this,pb).bind(this),onPinching:rp(ib,this,fb).bind(this),onPinchEnd:rp(ib,this,gb).bind(this),signal:this._uiManager._signal}))),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=Nf.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(lp(qx,this,!0),this._isDraggable?rp(ib,this,xb).call(this,e):rp(ib,this,vb).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){op($x,this)&&clearTimeout(op($x,this)),lp($x,this,setTimeout(()=>{var e;lp($x,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const s=this.parentScale,[i,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/s,c=t/s,d=this.x*i,u=this.y*r,h=this.width*i,m=this.height*r;switch(n){case 0:return[d+l+a,r-u-c-m+o,d+l+h+a,r-u-c+o];case 90:return[d+c+a,r-u+l+o,d+c+m+a,r-u+l+h+o];case 180:return[d-l-h+a,r-u+c+o,d-l+a,r-u+c+m+o];case 270:return[d-c-m+a,r-u-l-h+o,d-c+a,r-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,i,r]=e,a=i-n,o=r-s;switch(this.rotation){case 0:return[n,t-r,a,o];case 90:return[n,t-s,o,a];case 180:return[i,t-s,a,o];case 270:return[i,t-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),lp(Yx,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),lp(Yx,this,!1),!0)}isInEditMode(){return op(Yx,this)}shouldGetKeyboardEvents(){return op(Qx,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:r}=window;return t<r&&s>0&&e<i&&n>0}rebuild(){rp(ib,this,bb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){df("An editor must be serializable")}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,lp(Rx,s,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,r]=s.pageDimensions,[a,o,l,c]=s.getRectInCurrentCoords(e.rect,r);return s.x=a/i,s.y=o/r,s.width=l/i,s.height=c/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=op(Vx,this))||void 0===e||e.abort(),lp(Vx,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),op($x,this)&&(clearTimeout(op($x,this)),lp($x,this,null)),rp(ib,this,Nb).call(this),this.removeEditToolbar(),op(eb,this)){for(const e of op(eb,this).values())clearTimeout(e);lp(eb,this,null)}this.parent=null,null===(t=op(tb,this))||void 0===t||t.destroy(),lp(tb,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(rp(ib,this,cb).call(this),op(Wx,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),lp(Ux,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=op(Wx,this).children;if(!op(Ox,this)){lp(Ox,this,Array.from(t));const e=rp(ib,this,yb).bind(this),n=rp(ib,this,wb).bind(this),s=this._uiManager._signal;for(const t of op(Ox,this)){const i=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:s}),t.addEventListener("blur",n,{signal:s}),t.addEventListener("focus",rp(ib,this,jb).bind(this,i),{signal:s}),t.setAttribute("data-l10n-id",rb._l10nResizer[i])}}const n=op(Ox,this)[0];let s=0;for(const r of t){if(r===n)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(op(Ox,this).length/4);if(i!==s){if(i<s)for(let t=0;t<s-i;t++)op(Wx,this).append(op(Wx,this).firstChild);else if(i>s)for(let t=0;t<i-s;t++)op(Wx,this).firstChild.before(op(Wx,this).lastChild);let e=0;for(const n of t){const t=op(Ox,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",rb._l10nResizer[t])}}rp(ib,this,_b).call(this,0),lp(Qx,this,!0),op(Wx,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){op(Qx,this)&&rp(ib,this,mb).call(this,op(Gx,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){rp(ib,this,Nb).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=op(Dx,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}unselect(){var e,t,n,s,i;this.isSelected&&(this.isSelected=!1,null===(e=op(Wx,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(s=this._editToolbar)||void 0===s||s.hide(),null===(i=op(Dx,this))||void 0===i||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return op(Xx,this)}set isEditing(e){lp(Xx,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){lp(Bx,this,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){op(eb,this)||lp(eb,this,new Map);const{action:t}=e;let n=op(eb,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),op(eb,this).delete(t),0===op(eb,this).size&&lp(eb,this,null)},rb._telemetryTimeout),void op(eb,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),lp(Ix,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),lp(Ix,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function ab(e,t,n){let[s,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/s,this.y+=n/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function ob(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function lb(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function cb(){if(op(Wx,this))return;lp(Wx,this,document.createElement("div")),op(Wx,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");op(Wx,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",rp(ib,this,db).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Vf,{signal:t}),e.tabIndex=-1}this.div.prepend(op(Wx,this))}function db(e,t){var n;t.preventDefault();const{isMac:s}=Nf.platform;if(0!==t.button||t.ctrlKey&&s)return;null===(n=op(Dx,this))||void 0===n||n.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,lp(Hx,this,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",rp(ib,this,mb).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Gf,{passive:!1,signal:a}),window.addEventListener("contextmenu",Vf,{signal:a}),lp(Ux,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;r.abort(),this.parent.togglePointerEvents(!0),null===(e=op(Dx,this))||void 0===e||e.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,rp(ib,this,hb).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function ub(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t;const[i,r]=this.parentDimensions;this.setDims(i*n,r*s),this.fixAndSetPosition(),this._onResized()}function hb(){if(!op(Ux,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=op(Ux,this);lp(Ux,this,null);const i=this.x,r=this.y,a=this.width,o=this.height;i===e&&r===t&&a===n&&o===s||this.addCommands({cmd:rp(ib,this,ub).bind(this,i,r,a,o),undo:rp(ib,this,ub).bind(this,e,t,n,s),mustExec:!0})}function mb(e,t){const[n,s]=this.parentDimensions,i=this.x,r=this.y,a=this.width,o=this.height,l=pp.MIN_SIZE/n,c=pp.MIN_SIZE/s,d=rp(ib,this,lb).call(this,this.rotation),u=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],h=rp(ib,this,lb).call(this,360-this.rotation);let m,p,f=!1,g=!1;switch(e){case"topLeft":f=!0,m=(e,t)=>[0,0],p=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],p=(e,t)=>[e/2,t];break;case"topRight":f=!0,m=(e,t)=>[e,0],p=(e,t)=>[0,t];break;case"middleRight":g=!0,m=(e,t)=>[e,t/2],p=(e,t)=>[0,t/2];break;case"bottomRight":f=!0,m=(e,t)=>[e,t],p=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],p=(e,t)=>[e/2,0];break;case"bottomLeft":f=!0,m=(e,t)=>[0,t],p=(e,t)=>[e,0];break;case"middleLeft":g=!0,m=(e,t)=>[0,t/2],p=(e,t)=>[e,t/2]}const v=m(a,o),x=p(a,o);let b=u(...x);const y=pp._round(i+b[0]),w=pp._round(r+b[1]);let j,_,N=1,k=1;if(t.fromKeyboard)({deltaX:j,deltaY:_}=t);else{const{screenX:e,screenY:n}=t,[s,i]=op(Hx,this);[j,_]=this.screenToPageTranslation(e-s,n-i),op(Hx,this)[0]=e,op(Hx,this)[1]=n}var S,C;if([j,_]=(S=j/n,C=_/s,[h[0]*S+h[2]*C,h[1]*S+h[3]*C]),f){const e=Math.hypot(a,o);N=k=Math.max(Math.min(Math.hypot(x[0]-v[0]-j,x[1]-v[1]-_)/e,1/a,1/o),l/a,c/o)}else g?N=Lf(Math.abs(x[0]-v[0]-j),l,1)/a:k=Lf(Math.abs(x[1]-v[1]-_),c,1)/o;const A=pp._round(a*N),E=pp._round(o*k);b=u(...p(A,E));const T=y-b[0],P=w-b[1];op(Kx,this)||lp(Kx,this,[this.x,this.y,this.width,this.height]),this.width=A,this.height=E,this.x=T,this.y=P,this.setDims(n*A,s*E),this.fixAndSetPosition(),this._onResizing()}function pb(){var e;lp(Ux,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=op(Dx,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function fb(e,t,n){let s=n/t*.7+1-.7;if(1===s)return;const i=rp(ib,this,lb).call(this,this.rotation),r=(e,t)=>[i[0]*e+i[2]*t,i[1]*e+i[3]*t],[a,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,u=this.height,h=pp.MIN_SIZE/a,m=pp.MIN_SIZE/o;s=Math.max(Math.min(s,1/d,1/u),h/d,m/u);const p=pp._round(d*s),f=pp._round(u*s);if(p===d&&f===u)return;op(Kx,this)||lp(Kx,this,[l,c,d,u]);const g=r(d/2,u/2),v=pp._round(l+g[0]),x=pp._round(c+g[1]),b=r(p/2,f/2);this.x=v-b[0],this.y=x-b[1],this.width=p,this.height=f,this.setDims(a*p,o*f),this.fixAndSetPosition(),this._onResizing()}function gb(){var e;null===(e=op(Dx,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),rp(ib,this,hb).call(this)}function vb(e){const{isMac:t}=Nf.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function xb(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),r={capture:!0,passive:!1,signal:i},a=e=>{s.abort(),lp(Fx,this,null),lp(qx,this,!1),this._uiManager.endDragSession()||rp(ib,this,vb).call(this,e),n&&this._onStopDragging()};t&&(lp(Jx,this,e.clientX),lp(Zx,this,e.clientY),lp(Fx,this,e.pointerId),lp(zx,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._onStartDragging());const{clientX:t,clientY:s,pointerId:i}=e;if(i!==op(Fx,this))return void Gf(e);const[r,a]=this.screenToPageTranslation(t-op(Jx,this),s-op(Zx,this));lp(Jx,this,t),lp(Zx,this,s),this._uiManager.dragSelectedEditors(r,a)},r),window.addEventListener("touchmove",Gf,r),window.addEventListener("pointerdown",e=>{e.pointerType===op(zx,this)&&(op(tb,this)||e.isPrimary)&&a(e),Gf(e)},r));const o=e=>{op(Fx,this)&&op(Fx,this)!==e.pointerId?Gf(e):a(e)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})}function bb(){if(op(Vx,this)||!this.div)return;lp(Vx,this,new AbortController);const e=this._uiManager.combinedSignal(op(Vx,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function yb(e){pp._resizerKeyboardManager.exec(this,e)}function wb(e){var t;op(Qx,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==op(Wx,this)&&rp(ib,this,Nb).call(this)}function jb(e){lp(Gx,this,op(Qx,this)?e:"")}function _b(e){if(op(Ox,this))for(const t of op(Ox,this))t.tabIndex=e}function Nb(){lp(Qx,this,!1),rp(ib,this,_b).call(this,-1),rp(ib,this,hb).call(this)}pp=rb,Ee(rb,"_l10n",null),Ee(rb,"_l10nResizer",null),Ee(rb,"_borderLineWidth",-1),Ee(rb,"_colorManager",new Bg),Ee(rb,"_zIndex",1),Ee(rb,"_telemetryTimeout",1e3);class kb extends rb{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sb=3285377520,Cb=4294901760,Ab=65535;class Eb{constructor(e){this.h1=e?4294967295&e:Sb,this.h2=e?4294967295&e:Sb}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let s=0,i=e.length;s<i;s++){const i=e.charCodeAt(s);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const s=n>>2,i=n-4*s,r=new Uint32Array(t.buffer,0,s);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,m=13715;for(let p=0;p<s;p++)1&p?(a=r[p],a=a*d&Cb|a*h&Ab,a=a<<15|a>>>17,a=a*u&Cb|a*m&Ab,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[p],o=o*d&Cb|o*h&Ab,o=o<<15|o>>>17,o=o*u&Cb|o*m&Ab,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,i){case 3:a^=t[4*s+2]<<16;case 2:a^=t[4*s+1]<<8;case 1:a^=t[4*s],a=a*d&Cb|a*h&Ab,a=a<<15|a>>>17,a=a*u&Cb|a*m&Ab,1&s?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Cb|36045*e&Ab,t=4283543511*t&Cb|(2950163797*(t<<16|e>>>16)&Cb)>>>16,e^=t>>>1,e=444984403*e&Cb|60499*e&Ab,t=3301882366*t&Cb|(3120437893*(t<<16|e>>>16)&Cb)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Tb=Object.freeze({map:null,hash:"",transfer:void 0});var Pb=new WeakMap,Mb=new WeakMap,Lb=new WeakMap,Rb=new WeakSet;class Ob{constructor(){sp(this,Rb),ip(this,Pb,!1),ip(this,Mb,null),ip(this,Lb,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=op(Lb,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return op(Lb,this).get(e)}remove(e){if(op(Lb,this).delete(e),0===op(Lb,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of op(Lb,this).values())if(e instanceof rb)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=op(Lb,this).get(e);let s=!1;if(void 0!==n)for(const[i,r]of Object.entries(t))n[i]!==r&&(s=!0,n[i]=r);else s=!0,op(Lb,this).set(e,t);s&&rp(Rb,this,Db).call(this),t instanceof rb&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return op(Lb,this).has(e)}get size(){return op(Lb,this).size}resetModified(){op(Pb,this)&&(lp(Pb,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Fb(this)}get serializable(){if(0===op(Lb,this).size)return Tb;const e=new Map,t=new Eb,n=[],s=Object.create(null);let i=!1;for(const[r,a]of op(Lb,this)){const n=a instanceof rb?a.serialize(!1,s):a;n&&(e.set(r,n),t.update("".concat(r,":").concat(JSON.stringify(n))),i||(i=!!n.bitmap))}if(i)for(const r of e.values())r.bitmap&&n.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Tb}get editorStats(){let e=null;const t=new Map;for(const i of op(Lb,this).values()){var n;if(!(i instanceof rb))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=(n=e)[a]||(n[a]=new Map);for(const[e,t]of Object.entries(r)){var s;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const i=null!==(s=n.get(t))&&void 0!==s?s:0;n.set(t,i+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){lp(Mb,this,null)}get modifiedIds(){if(op(Mb,this))return op(Mb,this);const e=[];for(const t of op(Lb,this).values())t instanceof rb&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return lp(Mb,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return op(Lb,this).entries()}}function Db(){op(Pb,this)||(lp(Pb,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Ib=new WeakMap;class Fb extends Ob{constructor(e){super(),ip(this,Ib,void 0);const{map:t,hash:n,transfer:s}=e.serializable,i=structuredClone(t,s?{transfer:s}:null);lp(Ib,this,{map:i,hash:n,transfer:s})}get print(){df("Should not call PrintAnnotationStorage.print")}get serializable(){return op(Ib,this)}get modifiedIds(){return pf(this,"modifiedIds",{ids:new Set,hash:""})}}var zb=new WeakMap;class Bb{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;ip(this,zb,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),op(zb,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:s}=e;if(t&&!op(zb,this).has(t.loadedName)){if(uf(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:r}=t,a=new FontFace(e,n,r);this.addNativeFontFace(a);try{await a.load(),op(zb,this).add(e),null===s||void 0===s||s(t)}catch(i){cf("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}df("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw cf("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return pf(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return pf(this,"isSyncFontLoadingSupported",kp||Nf.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(uf(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return pf(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function s(e,t,n,s){return e.substring(0,t)+s+e.substring(t+n)}let i,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=s(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(i=0,r=c.length-3;i<r;i+=4)h=h-u+n(c,i)|0;var m;i<c.length&&(h=h-u+n(c+"XXX",i)|0),d=s(d,16,4,(m=h,String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,255&m)));const p="url(data:font/opentype;base64,".concat(btoa(d),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,g.append(e)}this._document.body.append(g),function e(t,n){if(++l>30)return cf("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{g.remove(),t.complete()})}}class Wb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(Rf(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(r){cf('getPathGenerator - ignoring character: "'.concat(r,'".'))}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}}function Hb(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Ub=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Vb=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,i,...r]=n;if(!e(s)&&!Number.isInteger(s))return!1;if(!t(i))return!1;const a=r.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of r)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Ub,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var Gb=new WeakMap,qb=new WeakMap;class Kb{constructor(){ip(this,Gb,new Map),ip(this,qb,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};op(qb,this).then(()=>{for(const[e]of op(Gb,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted)return void cf("LoopbackPort - cannot use an `aborted` signal.");const r=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",r),i.addEventListener("abort",r)}op(Gb,this).set(t,s)}removeEventListener(e,t){const n=op(Gb,this).get(t);null===n||void 0===n||n(),op(Gb,this).delete(t)}terminate(){for(const[,e]of op(Gb,this))null===e||void 0===e||e();op(Gb,this).clear()}}const Xb=1,Yb=2,Qb=1,$b=2,Jb=3,Zb=4,ey=5,ty=6,ny=7,sy=8;function iy(){}function ry(e){if(e instanceof wf||e instanceof xf||e instanceof gf||e instanceof bf||e instanceof vf)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||df('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new wf(e.message);case"InvalidPDFException":return new xf(e.message);case"PasswordException":return new gf(e.message,e.code);case"ResponseException":return new bf(e.message,e.status,e.missing);case"UnknownErrorException":return new vf(e.message,e.details)}return new vf(e.message,e.toString())}var ay=new WeakMap,oy=new WeakSet;class ly{constructor(e,t,n){sp(this,oy),ip(this,ay,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",rp(oy,this,cy).bind(this),{signal:op(ay,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(r){i.reject(r)}return i.promise}sendWithStream(e,t,n,s){const i=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[i]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:e,streamId:i,data:t,desiredSize:n.desiredSize},s),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[i].pullCall=t,o.postMessage({sourceName:r,targetName:a,stream:ty,streamId:i,desiredSize:e.desiredSize}),t.promise},cancel:e=>{uf(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[i].cancelCall=t,this.streamControllers[i].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:Qb,streamId:i,reason:ry(e)}),t.promise}},n)}destroy(){var e;null===(e=op(ay,this))||void 0===e||e.abort(),lp(ay,this,null)}}function cy(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void rp(oy,this,uy).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Xb)n.resolve(t.data);else{if(t.callback!==Yb)throw new Error("Unexpected callback case");n.reject(ry(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,s=t.sourceName,i=this.comObj;return void Promise.try(n,t.data).then(function(n){i.postMessage({sourceName:e,targetName:s,callback:Xb,callbackId:t.callbackId,data:n})},function(n){i.postMessage({sourceName:e,targetName:s,callback:Yb,callbackId:t.callbackId,reason:ry(n)})})}t.streamId?rp(oy,this,dy).call(this,t):n(t.data)}function dy(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,r=this,a=this.actionHandler[e.action],o={enqueue(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:s,stream:Zb,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Jb,streamId:t}),delete r.streamSinks[t])},error(e){uf(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:ey,streamId:t,reason:ry(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){i.postMessage({sourceName:n,targetName:s,stream:sy,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:s,stream:sy,streamId:t,reason:ry(e)})})}function uy(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,r=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case sy:e.success?r.startCall.resolve():r.startCall.reject(ry(e.reason));break;case ny:e.success?r.pullCall.resolve():r.pullCall.reject(ry(e.reason));break;case ty:if(!a){i.postMessage({sourceName:n,targetName:s,stream:ny,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||iy).then(function(){i.postMessage({sourceName:n,targetName:s,stream:ny,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:s,stream:ny,streamId:t,reason:ry(e)})});break;case Zb:if(uf(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case Jb:if(uf(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),rp(oy,this,hy).call(this,r,t);break;case ey:uf(r,"error should have stream controller"),r.controller.error(ry(e.reason)),rp(oy,this,hy).call(this,r,t);break;case $b:e.success?r.cancelCall.resolve():r.cancelCall.reject(ry(e.reason)),rp(oy,this,hy).call(this,r,t);break;case Qb:if(!a)break;const o=ry(e.reason);Promise.try(a.onCancel||iy,o).then(function(){i.postMessage({sourceName:n,targetName:s,stream:$b,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:s,stream:$b,streamId:t,reason:ry(e)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function hy(e,t){var n,s,i;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(s=e.pullCall)||void 0===s?void 0:s.promise,null===(i=e.cancelCall)||void 0===i?void 0:i.promise]),delete this.streamControllers[t]}var my=new WeakMap;class py{constructor(e){let{enableHWA:t=!1}=e;ip(this,my,!1),lp(my,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!op(my,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){df("Abstract method `_createCanvas` called.")}}class fy extends py{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class gy{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){df("Abstract method `_fetch` called.")}}class vy extends gy{async _fetch(e){const t=await If(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):_f(t)}}class xy{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,i){return"none"}destroy(){}}var by=new WeakMap,yy=new WeakMap,wy=new WeakMap,jy=new WeakMap,_y=new WeakMap,Ny=new WeakMap,ky=new WeakMap,Sy=new WeakSet;class Cy extends xy{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),sp(this,Sy),ip(this,by,void 0),ip(this,yy,void 0),ip(this,wy,void 0),ip(this,jy,void 0),ip(this,_y,void 0),ip(this,Ny,void 0),ip(this,ky,0),lp(jy,this,t),lp(_y,this,n)}addFilter(e){var t,n;if(!e)return"none";let s=ap(Sy,this,Ay).get(e);if(s)return s;const[i,r,a]=rp(Sy,this,Py).call(this,e),o=1===e.length?i:"".concat(i).concat(r).concat(a);if(s=ap(Sy,this,Ay).get(o),s)return ap(Sy,this,Ay).set(e,s),s;const l="g_".concat(op(jy,this),"_transfer_map_").concat((lp(ky,this,(t=op(ky,this),n=t++,t)),n)),c=rp(Sy,this,My).call(this,l);ap(Sy,this,Ay).set(e,c),ap(Sy,this,Ay).set(o,c);const d=rp(Sy,this,Oy).call(this,l);return rp(Sy,this,Iy).call(this,i,r,a,d),c}addHCMFilter(e,t){var n;const s="".concat(e,"-").concat(t),i="base";let r=ap(Sy,this,Ey).get(i);if((null===(n=r)||void 0===n?void 0:n.key)===s)return r.url;var a;r?(null===(a=r.filter)||void 0===a||a.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},ap(Sy,this,Ey).set(i,r));if(!e||!t)return r.url;const o=rp(Sy,this,zy).call(this,e);e=Sf.makeHexColor(...o);const l=rp(Sy,this,zy).call(this,t);if(t=Sf.makeHexColor(...l),ap(Sy,this,Ty).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;const c=new Array(256);for(let p=0;p<=255;p++){const e=p/255;c[p]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(op(jy,this),"_hcm_filter"),h=r.filter=rp(Sy,this,Oy).call(this,u);rp(Sy,this,Iy).call(this,d,d,d,h),rp(Sy,this,Ry).call(this,h);const m=(e,t)=>{const n=o[e]/255,s=l[e]/255,i=new Array(t+1);for(let r=0;r<=t;r++)i[r]=n+r/t*(s-n);return i.join(",")};return rp(Sy,this,Iy).call(this,m(0,5),m(1,5),m(2,5),h),r.url=rp(Sy,this,My).call(this,u),r.url}addAlphaFilter(e){var t,n;let s=ap(Sy,this,Ay).get(e);if(s)return s;const[i]=rp(Sy,this,Py).call(this,[e]),r="alpha_".concat(i);if(s=ap(Sy,this,Ay).get(r),s)return ap(Sy,this,Ay).set(e,s),s;const a="g_".concat(op(jy,this),"_alpha_map_").concat((lp(ky,this,(t=op(ky,this),n=t++,t)),n)),o=rp(Sy,this,My).call(this,a);ap(Sy,this,Ay).set(e,o),ap(Sy,this,Ay).set(r,o);const l=rp(Sy,this,Oy).call(this,a);return rp(Sy,this,Fy).call(this,i,l),o}addLuminosityFilter(e){var t,n;let s,i,r=ap(Sy,this,Ay).get(e||"luminosity");if(r)return r;if(e?([s]=rp(Sy,this,Py).call(this,[e]),i="luminosity_".concat(s)):i="luminosity",r=ap(Sy,this,Ay).get(i),r)return ap(Sy,this,Ay).set(e,r),r;const a="g_".concat(op(jy,this),"_luminosity_map_").concat((lp(ky,this,(t=op(ky,this),n=t++,t)),n)),o=rp(Sy,this,My).call(this,a);ap(Sy,this,Ay).set(e,o),ap(Sy,this,Ay).set(i,o);const l=rp(Sy,this,Oy).call(this,a);return rp(Sy,this,Ly).call(this,l),e&&rp(Sy,this,Fy).call(this,s,l),o}addHighlightHCMFilter(e,t,n,s,i){var r;const a="".concat(t,"-").concat(n,"-").concat(s,"-").concat(i);let o=ap(Sy,this,Ey).get(e);if((null===(r=o)||void 0===r?void 0:r.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},ap(Sy,this,Ey).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(rp(Sy,this,zy).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,p]=[s,i].map(rp(Sy,this,zy).bind(this));h<u&&([u,h,m,p]=[h,u,p,m]),ap(Sy,this,Ty).style.color="";const f=(e,t,n)=>{const s=new Array(256),i=(h-u)/n,r=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*i),t=r+l*a;for(let n=o;n<=e;n++)s[n]=t;o=e+1}for(let l=o;l<256;l++)s[l]=s[o-1];return s.join(",")},g="g_".concat(op(jy,this),"_hcm_").concat(e,"_filter"),v=o.filter=rp(Sy,this,Oy).call(this,g);return rp(Sy,this,Ry).call(this,v),rp(Sy,this,Iy).call(this,f(m[0],p[0],5),f(m[1],p[1],5),f(m[2],p[2],5),v),o.url=rp(Sy,this,My).call(this,g),o.url}destroy(){var e,t,n,s;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=op(Ny,this))&&void 0!==e&&e.size||(null===(t=op(wy,this))||void 0===t||t.parentNode.parentNode.remove(),lp(wy,this,null),null===(n=op(yy,this))||void 0===n||n.clear(),lp(yy,this,null),null===(s=op(Ny,this))||void 0===s||s.clear(),lp(Ny,this,null),lp(ky,this,0))}}function Ay(e){return op(yy,e)||lp(yy,e,new Map)}function Ey(e){return op(Ny,e)||lp(Ny,e,new Map)}function Ty(e){if(!op(wy,e)){const t=op(_y,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=op(_y,e).createElementNS(Of,"svg");s.setAttribute("width",0),s.setAttribute("height",0),lp(wy,e,op(_y,e).createElementNS(Of,"defs")),t.append(s),s.append(op(wy,e)),op(_y,e).body.append(t)}return op(wy,e)}function Py(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const s=n.join(",");return[s,s,s]}const[t,n,s]=e,i=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)i[o]=t[o]/255,r[o]=n[o]/255,a[o]=s[o]/255;return[i.join(","),r.join(","),a.join(",")]}function My(e){if(void 0===op(by,this)){lp(by,this,"");const e=op(_y,this).URL;e!==op(_y,this).baseURI&&(Bf(e)?cf('#createUrl: ignore "data:"-URL for performance reasons.'):lp(by,this,mf(e,"")))}return"url(".concat(op(by,this),"#").concat(e,")")}function Ly(e){const t=op(_y,this).createElementNS(Of,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function Ry(e){const t=op(_y,this).createElementNS(Of,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function Oy(e){const t=op(_y,this).createElementNS(Of,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),ap(Sy,this,Ty).append(t),t}function Dy(e,t,n){const s=op(_y,this).createElementNS(Of,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)}function Iy(e,t,n,s){const i=op(_y,this).createElementNS(Of,"feComponentTransfer");s.append(i),rp(Sy,this,Dy).call(this,i,"feFuncR",e),rp(Sy,this,Dy).call(this,i,"feFuncG",t),rp(Sy,this,Dy).call(this,i,"feFuncB",n)}function Fy(e,t){const n=op(_y,this).createElementNS(Of,"feComponentTransfer");t.append(n),rp(Sy,this,Dy).call(this,n,"feFuncA",e)}function zy(e){return ap(Sy,this,Ty).style.color=e,Xf(getComputedStyle(ap(Sy,this,Ty)).getPropertyValue("color"))}class By{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){df("Abstract method `_fetch` called.")}}class Wy extends By{async _fetch(e){const t=await If(e,"arraybuffer");return new Uint8Array(t)}}class Hy{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){df("Abstract method `_fetch` called.")}}class Uy extends Hy{async _fetch(e){const t=await If(e,"arraybuffer");return new Uint8Array(t)}}async function Vy(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}kp&&cf("Please use the `legacy` build in Node.js environments.");class Gy extends xy{}class qy extends py{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///workspace/node_modules/react-pdf/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class Ky extends gy{async _fetch(e){return Vy(e)}}class Xy extends By{async _fetch(e){return Vy(e)}}class Yy extends Hy{async _fetch(e){return Vy(e)}}const Qy="Fill",$y="Stroke",Jy="Shading";function Zy(e,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,s),e.clip(i)}class ew{isModifyingCurrentTransform(){return!1}getPattern(){df("Abstract method `getPattern` called.")}}class tw extends ew{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let i;if(s===$y||s===Qy){const r=t.current.getClippedPathBoundingBox(s,Yf(e))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-r[0],-r[1]),n=Sf.transform(n,[1,0,0,1,r[0],r[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Zy(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),i=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);i.setTransform(d)}else Zy(e,this._bbox),i=this._createGradient(e);return i}}function nw(e,t,n,s,i,r,a,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[s+1]&&(h=n,n=s,s=h,h=r,r=a,a=h),l[s+1]>l[i+1]&&(h=s,s=i,i=h,h=a,a=o,o=h),l[n+1]>l[s+1]&&(h=n,n=s,s=h,h=r,r=a,a=h);const m=(l[n]+t.offsetX)*t.scaleX,p=(l[n+1]+t.offsetY)*t.scaleY,f=(l[s]+t.offsetX)*t.scaleX,g=(l[s+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,x=(l[i+1]+t.offsetY)*t.scaleY;if(p>=x)return;const b=c[r],y=c[r+1],w=c[r+2],j=c[a],_=c[a+1],N=c[a+2],k=c[o],S=c[o+1],C=c[o+2],A=Math.round(p),E=Math.round(x);let T,P,M,L,R,O,D,I;for(let F=A;F<=E;F++){if(F<g){const e=F<p?0:(p-F)/(p-g);T=m-(m-f)*e,P=b-(b-j)*e,M=y-(y-_)*e,L=w-(w-N)*e}else{let e;e=F>x?1:g===x?0:(g-F)/(g-x),T=f-(f-v)*e,P=j-(j-k)*e,M=_-(_-S)*e,L=N-(N-C)*e}let e;e=F<p?0:F>x?1:(p-F)/(p-x),R=m-(m-v)*e,O=b-(b-k)*e,D=y-(y-S)*e,I=w-(w-C)*e;const t=Math.round(Math.min(T,R)),n=Math.round(Math.max(T,R));let s=u*F+4*t;for(let i=t;i<=n;i++)e=(T-i)/(T-R),e<0?e=0:e>1&&(e=1),d[s++]=P-(P-O)*e|0,d[s++]=M-(M-D)*e|0,d[s++]=L-(L-I)*e|0,d[s++]=255}}function sw(e,t,n){const s=t.coords,i=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(s.length/o)-1,c=o-1;for(r=0;r<l;r++){let t=r*o;for(let r=0;r<c;r++,t++)nw(e,n,s[t],s[t+1],s[t+o],i[t],i[t+1],i[t+o]),nw(e,n,s[t+o+1],s[t+1],s[t+o],i[t+o+1],i[t+1],i[t+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)nw(e,n,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class iw extends ew{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const s=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-s,a=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(r*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=r/o,d=a/l,u={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-i,scaleX:1/c,scaleY:1/d},h=o+4,m=l+4,p=n.getCanvas("mesh",h,m),f=p.context,g=f.createImageData(o,l);if(t){const e=g.data;for(let n=0,s=e.length;n<s;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)sw(g,v,u);f.putImageData(g,2,2);return{canvas:p.canvas,offsetX:s-2*c,offsetY:i-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){Zy(e,this._bbox);const i=new Float32Array(2);if(s===Jy)Sf.singularValueDecompose2dScale(Yf(e),i);else if(this.matrix){Sf.singularValueDecompose2dScale(this.matrix,i);const[e,n]=i;Sf.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=e,i[1]*=n}else Sf.singularValueDecompose2dScale(t.baseTransform,i);const r=this._createMeshCanvas(i,s===Jy?null:this._background,t.cachedCanvases);return s!==Jy&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}}class rw extends ew{getPattern(){return"hotpink"}}const aw=1,ow=2;class lw{constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:s,tilingType:i,color:r,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),lf("TilingType: "+i);const c=t[0],d=t[1],u=t[2],h=t[3],m=u-c,p=h-d,f=new Float32Array(2);Sf.singularValueDecompose2dScale(this.matrix,f);const[g,v]=f;Sf.singularValueDecompose2dScale(this.baseTransform,f);const x=g*f[0],b=v*f[1];let y=m,w=p,j=!1,_=!1;const N=Math.ceil(o*x),k=Math.ceil(l*b);N>=Math.ceil(m*x)?y=o:j=!0,k>=Math.ceil(p*b)?w=l:_=!0;const S=this.getSizeAndScale(y,this.ctx.canvas.width,x),C=this.getSizeAndScale(w,this.ctx.canvas.height,b),A=e.cachedCanvases.getCanvas("pattern",S.size,C.size),E=A.context,T=a.createCanvasGraphics(E);if(T.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(T,s,r),E.translate(-S.scale*c,-C.scale*d),T.transform(S.scale,0,0,C.scale,0,0),E.save(),this.clipBbox(T,c,d,u,h),T.baseTransform=Yf(T.ctx),T.executeOperatorList(n),T.endDrawing(),E.restore(),j||_){const t=A.canvas;j&&(y=o),_&&(w=l);const n=this.getSizeAndScale(y,this.ctx.canvas.width,x),s=this.getSizeAndScale(w,this.ctx.canvas.height,b),i=n.size,r=s.size,a=e.cachedCanvases.getCanvas("pattern-workaround",i,r),u=a.context,h=j?Math.floor(m/o):0,f=_?Math.floor(p/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=f;n++)u.drawImage(t,i*e,r*n,i,r,0,0,i,r);return{canvas:a.canvas,scaleX:n.scale,scaleY:s.scale,offsetX:c,offsetY:d}}return{canvas:A.canvas,scaleX:S.scale,scaleY:C.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,n){const s=Math.max(lw.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=s?i=s:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,s,i){const r=s-t,a=i-n;e.ctx.rect(t,n,r,a),Sf.axialAlignedBoundingBox([t,n,s,i],Yf(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,i=e.current;switch(t){case aw:const{fillStyle:e,strokeStyle:r}=this.ctx;s.fillStyle=i.fillColor=e,s.strokeStyle=i.strokeColor=r;break;case ow:s.fillStyle=s.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new yf("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s){let i=n;s!==Jy&&(i=Sf.transform(i,t.baseTransform),this.matrix&&(i=Sf.transform(i,this.matrix)));const r=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=e.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function cw(e){let{src:t,srcPos:n=0,dest:s,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=Nf.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=i>>3,h=7&i,m=t.length;s=new Uint32Array(s.buffer);let p=0;for(let f=0;f<r;f++){for(const i=n+u;n<i;n++){const e=n<m?t[n]:255;s[p++]=128&e?d:c,s[p++]=64&e?d:c,s[p++]=32&e?d:c,s[p++]=16&e?d:c,s[p++]=8&e?d:c,s[p++]=4&e?d:c,s[p++]=2&e?d:c,s[p++]=1&e?d:c}if(0===h)continue;const e=n<m?t[n++]:255;for(let t=0;t<h;t++)s[p++]=e&1<<7-t?d:c}return{srcPos:n,destPos:p}}Ee(lw,"MAX_PATTERN_SIZE",3e3);const dw=16,uw=new DOMMatrix,hw=new Float32Array(2),mw=new Float32Array([1/0,1/0,-1/0,-1/0]);class pw{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return void 0!==this.cache[e]?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function fw(e,t,n,s,i,r,a,o,l,c){const[d,u,h,m,p,f]=Yf(e);if(0===u&&0===h){const g=a*d+p,v=Math.round(g),x=o*m+f,b=Math.round(x),y=(a+l)*d+p,w=Math.abs(Math.round(y)-v)||1,j=(o+c)*m+f,_=Math.abs(Math.round(j)-b)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(m),v,b),e.drawImage(t,n,s,i,r,0,0,w,_),e.setTransform(d,u,h,m,p,f),[w,_]}if(0===d&&0===m){const g=o*h+p,v=Math.round(g),x=a*u+f,b=Math.round(x),y=(o+c)*h+p,w=Math.abs(Math.round(y)-v)||1,j=(a+l)*u+f,_=Math.abs(Math.round(j)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,b),e.drawImage(t,n,s,i,r,0,0,_,w),e.setTransform(d,u,h,m,p,f),[_,w]}e.drawImage(t,n,s,i,r,a,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,m)*c]}class gw{constructor(e,t){Ee(this,"alphaIsShape",!1),Ee(this,"fontSize",0),Ee(this,"fontSizeScale",1),Ee(this,"textMatrix",null),Ee(this,"textMatrixScale",1),Ee(this,"fontMatrix",Sp),Ee(this,"leading",0),Ee(this,"x",0),Ee(this,"y",0),Ee(this,"lineX",0),Ee(this,"lineY",0),Ee(this,"charSpacing",0),Ee(this,"wordSpacing",0),Ee(this,"textHScale",1),Ee(this,"textRenderingMode",zp),Ee(this,"textRise",0),Ee(this,"fillColor","#000000"),Ee(this,"strokeColor","#000000"),Ee(this,"patternFill",!1),Ee(this,"patternStroke",!1),Ee(this,"fillAlpha",1),Ee(this,"strokeAlpha",1),Ee(this,"lineWidth",1),Ee(this,"activeSMask",null),Ee(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=mw.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qy,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===$y){t||df("Stroke bounding box must include transform."),Sf.singularValueDecompose2dScale(t,hw);const e=hw[0]*this.lineWidth/2,s=hw[1]*this.lineWidth/2;n[0]-=e,n[1]-=s,n[2]+=e,n[3]+=s}return n}updateClipFromPath(){const e=Sf.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(mw,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qy,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Sf.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function vw(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,s=t.width,i=n%dw,r=(n-i)/dw,a=0===i?r:r+1,o=e.createImageData(s,dw);let l,c=0;const d=t.data,u=o.data;let h,m,p,f;if(t.kind===Gp.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),f=n.length,g=s+7>>3,v=4294967295,x=Nf.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(p=h<r?dw:i,l=0,m=0;m<p;m++){const e=t-c;let i=0;const r=e>g?s:8*e-7,a=-8&r;let o=0,u=0;for(;i<a;i+=8)u=d[c++],n[l++]=128&u?v:x,n[l++]=64&u?v:x,n[l++]=32&u?v:x,n[l++]=16&u?v:x,n[l++]=8&u?v:x,n[l++]=4&u?v:x,n[l++]=2&u?v:x,n[l++]=1&u?v:x;for(;i<r;i++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:x,o>>=1}for(;l<f;)n[l++]=0;e.putImageData(o,0,h*dw)}}else if(t.kind===Gp.RGBA_32BPP){for(m=0,f=s*dw*4,h=0;h<r;h++)u.set(d.subarray(c,c+f)),c+=f,e.putImageData(o,0,m),m+=dw;h<a&&(f=s*i*4,u.set(d.subarray(c,c+f)),e.putImageData(o,0,m))}else{if(t.kind!==Gp.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(p=dw,f=s*p,h=0;h<a;h++){for(h>=r&&(p=i,f=s*p),l=0,m=f;m--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*dw)}}}function xw(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,s=t.width,i=n%dw,r=(n-i)/dw,a=0===i?r:r+1,o=e.createImageData(s,dw);let l=0;const c=t.data,d=o.data;for(let u=0;u<a;u++){const t=u<r?dw:i;({srcPos:l}=cw({src:c,srcPos:l,dest:d,width:s,height:t,nonBlackColor:0})),e.putImageData(o,0,u*dw)}}function bw(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)void 0!==e[s]&&(t[s]=e[s]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function yw(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function ww(e,t){if(t)return!0;Sf.singularValueDecompose2dScale(e,hw);const n=Math.fround(Jf.pixelRatio*Df.PDF_TO_CSS_UNITS);return hw[0]<=n&&hw[1]<=n}const jw=["butt","round","square"],_w=["miter","round","bevel"],Nw={},kw={};var Sw=new WeakSet;class Cw{constructor(e,t,n,s,i,r,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=r;sp(this,Sw),this.ctx=e,this.current=new gw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new pw(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:s=!1,background:i=null}=e;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const e=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Yf(this.compositeCtx))}this.ctx.save(),yw(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Yf(this.ctx)}executeOperatorList(e,t,n,s){const i=e.argsArray,r=e.fnArray;let a=t||0;const o=i.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let d=0;const u=this.commonObjs,h=this.objs;let m;for(;;){if(void 0!==s&&a===s.nextBreakPoint)return s.breakIt(a,n),a;if(m=r[a],m!==Zp.dependency)this[m].apply(this,i[a]);else for(const e of i[a]){const t=e.startsWith("g_")?u:h;if(!t.has(e))return t.get(e,n),a}if(a++,a===o)return a;if(l&&++d>10){if(Date.now()>c)return n(),a;d=0}}}endDrawing(){rp(Sw,this,Aw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),rp(Sw,this,Ew).call(this)}_scaleImage(e,t){var n,s;const i=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,r=null!==(s=e.height)&&void 0!==s?s:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=i,u=r,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),a=this.cachedCanvases.getCanvas(h,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=a.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,i=this.current.fillColor,r=this.current.patternFill,a=Yf(t);let o,l,c,d;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),i]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!r){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(d=this.cachedCanvases.getCanvas("maskCanvas",n,s),xw(d.context,e));let u=Sf.transform(a,[1/n,0,0,-1/s,0,0]);u=Sf.transform(u,[1,0,0,1,0,-s]);const h=mw.slice();Sf.axialAlignedBoundingBox([0,0,n,s],u,h);const[m,p,f,g]=h,v=Math.round(f-m)||1,x=Math.round(g-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",v,x),y=b.context,w=m,j=p;y.translate(-w,-j),y.transform(...u),c||(c=this._scaleImage(d.canvas,Qf(y)),c=c.img,o&&r&&o.set(l,c)),y.imageSmoothingEnabled=ww(Yf(y),e.interpolate),fw(y,c,0,0,c.width,c.height,0,0,n,s),y.globalCompositeOperation="source-in";const _=Sf.transform(Qf(y),[1,0,0,1,-w,-j]);return y.fillStyle=r?i.getPattern(t,this,_,Qy):i,y.fillRect(0,0,n,s),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(w),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=jw[e]}setLineJoin(e){this.ctx.lineJoin=_w[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=s.context;i.setTransform(this.suspendedCtx.getTransform()),bw(this.suspendedCtx,i),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,s,i,r,a){t.transform(e,n,s,i,r,a),this.__originalTransform(e,n,s,i,r,a)},e.setTransform=function(e,n,s,i,r,a){t.setTransform(e,n,s,i,r,a),this.__originalSetTransform(e,n,s,i,r,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,s,i,r,a){t.bezierCurveTo(e,n,s,i,r,a),this.__originalBezierCurveTo(e,n,s,i,r,a)},e.rect=function(e,n,s,i){t.rect(e,n,s,i),this.__originalRect(e,n,s,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bw(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const i=s[0],r=s[1],a=s[2]-i,o=s[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,i,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,i,r,a,o,l,c,d){let u=e.canvas,h=o-c,m=l-d;if(r)if(h<0||m<0||h+n>u.width||m+s>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,s),t=e.context;t.drawImage(u,-h,-m),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(0,0,n,s),t.globalCompositeOperation="source-over",u=e.canvas,h=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,m,n,s),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=r,e.fillRect(h,m,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===i&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===i&&(t.filter=this.filterFactory.addLuminosityFilter(a));const p=new Path2D;p.rect(o,l,n,s),t.clip(p),t.globalCompositeOperation="destination-in",t.drawImage(u,h,m,n,s,o,l,n,s),t.restore()}save(){this.inSMaskMode&&bw(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bw(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,s,i,r){this.ctx.transform(e,t,n,s,i,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[s]=t;if(!n)return s||(s=t[0]=new Path2D),void this[e](s);if(!(s instanceof Path2D)){const e=t[0]=new Path2D;for(let t=0,n=s.length;t<n;)switch(s[t++]){case ef:e.moveTo(s[t++],s[t++]);break;case tf:e.lineTo(s[t++],s[t++]);break;case nf:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case sf:e.closePath();break;default:cf("Unrecognized drawing path operator: ".concat(s[t-1]))}s=e}Sf.axialAlignedBoundingBox(n,Yf(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const t=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,Qf(n),$y),t){const s=new Path2D;s.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=s}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox($y,Yf(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,s=this.current.fillColor;let i=!1;if(this.current.patternFill){const t=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=s.getPattern(n,this,Qf(n),Qy),t){const s=new Path2D;s.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=s}i=!0}const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),i&&n.restore(),t&&this.consumePath(e,r)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Nw}eoClip(){this.pendingClip=kw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return;const n=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:r,y:a,fontSize:o,path:l}of e)n.addPath(l,new DOMMatrix(i).preMultiplySelf(s).translate(r,a).scale(o,-o));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error("Can't find font for ".concat(e));if(i.fontMatrix=s.fontMatrix||Sp,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||cf("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=(null===(n=s.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(s.fallbackName);let o="normal";s.black?o="900":s.bold&&(o="bold");const l=s.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(a)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s,i){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=l&Up,u=!!(l&Vp),h=a.patternFill&&!o.missingFile,m=a.patternStroke&&!o.missingFile;let p;if((o.disableFontFace||u||h||m)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||h||m){let e;if(r.save(),r.translate(t,n),r.scale(c,-c),d!==zp&&d!==Wp||(s?(e=r.getTransform(),r.setTransform(...s),r.fill(rp(Sw,this,Tw).call(this,p,e,s))):r.fill(p)),d===Bp||d===Wp)if(i){e||(e=r.getTransform()),r.setTransform(...i);const{a:t,b:n,c:s,d:a}=e,o=Sf.inverseTransform(i),l=Sf.transform([t,n,s,a,0,0],o);Sf.singularValueDecompose2dScale(l,hw),r.lineWidth*=Math.max(hw[0],hw[1])/c,r.stroke(rp(Sw,this,Tw).call(this,p,e,i))}else r.lineWidth/=c,r.stroke(p);r.restore()}else d!==zp&&d!==Wp||r.fillText(e,t,n),d!==Bp&&d!==Wp||r.strokeText(e,t,n);if(u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Yf(r),x:t,y:n,fontSize:c,path:p})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return pf(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(0===s)return;const i=this.ctx,r=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,d=e.length,u=n.vertical,h=u?1:-1,m=n.defaultVMetrics,p=s*t.fontMatrix[0],f=t.textRenderingMode===zp&&!n.disableFontFace&&!t.patternFill;let g,v;if(i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),l>0?i.scale(c,-1):i.scale(c,1),t.patternFill){i.save();const e=t.fillColor.getPattern(i,this,Qf(i),Qy);g=Yf(i),i.restore(),i.fillStyle=e}if(t.patternStroke){i.save();const e=t.strokeColor.getPattern(i,this,Qf(i),$y);v=Yf(i),i.restore(),i.strokeStyle=e}let x=t.lineWidth;const b=t.textMatrixScale;if(0===b||0===x){const e=t.textRenderingMode&Up;e!==Bp&&e!==Wp||(x=this.getSinglePixelWidth())}else x/=b;if(1!==r&&(i.scale(r,r),x/=r),i.lineWidth=x,n.isInvalidPDFjsFont){const n=[];let s=0;for(const t of e)n.push(t.unicode),s+=t.width;return i.fillText(n.join(""),0,0),t.x+=s*p*c,i.restore(),void this.compose()}let y,w=0;for(y=0;y<d;++y){const t=e[y];if("number"===typeof t){w+=h*t*s/1e3;continue}let c=!1;const d=(t.isSpace?o:0)+a,x=t.fontChar,b=t.accent;let j,_,N=t.width;if(u){const e=t.vmetric||m,n=-(t.vmetric?e[1]:.5*N)*p,s=e[2]*p;N=e?-e[0]:N,j=n/r,_=(w+s)/r}else j=w/r,_=0;if(n.remeasure&&N>0){const e=1e3*i.measureText(x).width/s*r;if(N<e&&this.isFontSubpixelAAEnabled){const t=N/e;c=!0,i.save(),i.scale(t,1),j/=t}else N!==e&&(j+=(N-e)/2e3*s/r)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(f&&!b)i.fillText(x,j,_);else if(this.paintChar(x,j,_,g,v),b){const e=j+s*b.offset.x/r,t=_-s*b.offset.y/r;this.paintChar(b.fontChar,e,t,g,v)}w+=u?N*p-d*l:N*p+d*l,c&&i.restore()}u?t.y-=w:t.x+=w*c,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,i=n.fontSize,r=n.fontDirection,a=s.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*r,d=n.fontMatrix||Sp,u=e.length;let h,m,p,f;if(!(n.textRenderingMode===Hp)&&0!==i){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(c,r),h=0;h<u;++h){if(m=e[h],"number"===typeof m){f=a*m*i/1e3,this.ctx.translate(f,0),n.x+=f*c;continue}const r=(m.isSpace?l:0)+o,u=s.charProcOperatorList[m.operatorListId];u?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...d),this.executeOperatorList(u),this.restore()):cf('Type3 character "'.concat(m.operatorListId,'" is not available.'));const g=[m.width,0];Sf.applyTransform(g,d),p=g[0]*i+r,t.translate(p,0),n.x+=p*c}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,i,r){const a=new Path2D;a.rect(n,s,i-n,r-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=this.baseTransform||Yf(this.ctx),s={createCanvasGraphics:e=>new Cw(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new lw(e,this.ctx,s,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new tw(e);case"Mesh":return new iw(e);case"Dummy":return new rw}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Qf(t),Jy);const s=Qf(t);if(s){const{width:e,height:n}=t.canvas,i=mw.slice();Sf.axialAlignedBoundingBox([0,0,e,n],s,i);const[r,a,o,l]=i;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){df("Should not call beginInlineImage")}beginImageData(){df("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Yf(this.ctx),t)){Sf.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[e,n,s,i]=t,r=new Path2D;r.rect(e,n,s-e,i-n),this.ctx.clip(r),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||lf("TODO: Support non-isolated groups."),e.knockout&&cf("Knockout groups not supported.");const n=Yf(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=mw.slice();Sf.axialAlignedBoundingBox(e.bbox,Yf(t),s);const i=[0,0,t.canvas.width,t.canvas.height];s=Sf.intersect(s,i)||[0,0,0,0];const r=Math.floor(s[0]),a=Math.floor(s[1]),o=Math.max(Math.ceil(s[2])-r,1),l=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,l),u=d.context;u.translate(-r,-a),u.transform(...n);let h=new Path2D;const[m,p,f,g]=e.bbox;if(h.rect(m,p,f-m,g-p),e.matrix){const t=new Path2D;t.addPath(h,new DOMMatrix(e.matrix)),h=t}u.clip(h),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:r,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,a),t.save()),bw(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Yf(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=mw.slice();Sf.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e,n),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,s,i){if(rp(Sw,this,Aw).call(this),yw(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const s=t[2]-t[0],r=t[3]-t[1];if(i&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=s,t[3]=r,Sf.singularValueDecompose2dScale(Yf(this.ctx),hw);const{viewportScale:i}=this,a=Math.ceil(s*this.outputScaleX*i),o=Math.ceil(r*this.outputScaleY*i);this.annotationCanvas=this.canvasFactory.create(a,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(hw[0],0,0,-hw[1],0,r*hw[1]),yw(this.ctx)}else{yw(this.ctx),this.endPath();const e=new Path2D;e.rect(t[0],t[1],s,r),this.ctx.clip(e)}}this.current=new gw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),rp(Sw,this,Ew).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,s=this._createMaskCanvas(e),i=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(i,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=Yf(a);a.transform(t,n,s,i,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,d=r.length;c<d;c+=2){const e=Sf.transform(o,[t,n,s,i,r[c],r[c+1]]);a.drawImage(l.canvas,e[4],e[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:e,width:r,height:a,transform:o}=i,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),c=l.context;c.save();xw(c,this.getObject(e,i)),c.globalCompositeOperation="source-in",c.fillStyle=s?n.getPattern(c,this,Qf(t),Qy):n,c.fillRect(0,0,r,a),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),fw(t,l.canvas,0,0,r,a,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):cf("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i)return void cf("Dependent image isn't ready yet");const r=i.width,a=i.height,o=[];for(let l=0,c=s.length;l<c;l+=2)o.push({transform:[t,0,0,n,s[l],s[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(i,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,s),r=i.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;this.save();const{filter:i}=s;let r;if("none"!==i&&""!==i&&(s.filter="none"),s.scale(1/t,-1/n),e.bitmap)r=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)r=e;else{const s=this.cachedCanvases.getCanvas("inlineImage",t,n).context;vw(s,e),r=this.applyTransferMapsToCanvas(s)}const a=this._scaleImage(r,Qf(s));s.imageSmoothingEnabled=ww(Yf(s),e.interpolate),fw(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;vw(i,e),s=this.applyTransferMapsToCanvas(i)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),fw(n,s,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===kw?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Yf(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:i}=this.ctx.getTransform();let r,a;if(0===n&&0===s){const n=Math.abs(t),s=Math.abs(i);if(n===s)if(0===e)r=a=1/n;else{const t=n*e;r=a=t<1?1/t:1}else if(0===e)r=1/n,a=1/s;else{const t=n*e,i=s*e;r=t<1?1/t:1,a=i<1?1/i:1}}else{const o=Math.abs(t*i-n*s),l=Math.hypot(t,n),c=Math.hypot(s,i);if(0===e)r=c/o,a=l/o;else{const t=e*o;r=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[i,r]=this.getScaleForStroking();if(i===r)return n.lineWidth=(s||1)*i,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(i,r),uw.a=1/i,uw.d=1/r;const o=new Path2D;if(o.addPath(e,uw),a.length>0){const e=Math.max(i,r);n.setLineDash(a.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=s||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function Aw(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Ew(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function Tw(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s}for(const n in Zp)void 0!==Cw.prototype[n]&&(Cw.prototype[Zp[n]]=Cw.prototype[n]);class Pw{static get workerPort(){return rp(Pw,this,Mw)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Mw._=rp(Pw,this,e)}static get workerSrc(){return rp(Pw,this,Lw)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");Lw._=rp(Pw,this,e)}}var Mw={_:null},Lw={_:""},Rw=new WeakMap,Ow=new WeakMap;class Dw{constructor(e){let{parsedData:t,rawData:n}=e;ip(this,Rw,void 0),ip(this,Ow,void 0),lp(Rw,this,t),lp(Ow,this,n)}getRaw(){return op(Ow,this)}get(e){var t;return null!==(t=op(Rw,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return op(Rw,this).entries()}}const Iw=Symbol("INTERNAL");var Fw=new WeakMap,zw=new WeakMap,Bw=new WeakMap,Ww=new WeakMap;class Hw{constructor(e,t){let{name:n,intent:s,usage:i,rbGroups:r}=t;ip(this,Fw,!1),ip(this,zw,!1),ip(this,Bw,!1),ip(this,Ww,!0),lp(Fw,this,!!(e&Ep)),lp(zw,this,!!(e&Tp)),this.name=n,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(op(Bw,this))return op(Ww,this);if(!op(Ww,this))return!1;const{print:e,view:t}=this.usage;return op(Fw,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!op(zw,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Iw&&df("Internal method `_setVisible` called."),lp(Bw,this,n),lp(Ww,this,t)}}var Uw=new WeakMap,Vw=new WeakMap,Gw=new WeakMap,qw=new WeakMap,Kw=new WeakSet;class Xw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ep;if(sp(this,Kw),ip(this,Uw,null),ip(this,Vw,new Map),ip(this,Gw,null),ip(this,qw,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,lp(qw,this,e.order);for(const n of e.groups)op(Vw,this).set(n.id,new Hw(t,n));if("OFF"===e.baseState)for(const e of op(Vw,this).values())e._setVisible(Iw,!1);for(const t of e.on)op(Vw,this).get(t)._setVisible(Iw,!0);for(const t of e.off)op(Vw,this).get(t)._setVisible(Iw,!1);lp(Gw,this,this.getHash())}}isVisible(e){if(0===op(Vw,this).size)return!0;if(!e)return lf("Optional content group not defined."),!0;if("OCG"===e.type)return op(Vw,this).has(e.id)?op(Vw,this).get(e.id).visible:(cf("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return rp(Kw,this,Yw).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!op(Vw,this).has(t))return cf("Optional content group not found: ".concat(t)),!0;if(op(Vw,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!op(Vw,this).has(t))return cf("Optional content group not found: ".concat(t)),!0;if(!op(Vw,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!op(Vw,this).has(t))return cf("Optional content group not found: ".concat(t)),!0;if(!op(Vw,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!op(Vw,this).has(t))return cf("Optional content group not found: ".concat(t)),!0;if(op(Vw,this).get(t).visible)return!1}return!0}return cf("Unknown optional content policy ".concat(e.policy,".")),!0}return cf("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=op(Vw,this).get(e);if(s){if(n&&t&&s.rbGroups.length)for(const t of s.rbGroups)for(const n of t){var i;if(n!==e)null===(i=op(Vw,this).get(n))||void 0===i||i._setVisible(Iw,!1,!0)}s._setVisible(Iw,!!t,!0),lp(Uw,this,null)}else cf("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:s}=e;for(const i of n){switch(i){case"ON":case"OFF":case"Toggle":t=i;continue}const e=op(Vw,this).get(i);if(e)switch(t){case"ON":this.setVisibility(i,!0,s);break;case"OFF":this.setVisibility(i,!1,s);break;case"Toggle":this.setVisibility(i,!e.visible,s)}}lp(Uw,this,null)}get hasInitialVisibility(){return null===op(Gw,this)||this.getHash()===op(Gw,this)}getOrder(){return op(Vw,this).size?op(qw,this)?op(qw,this).slice():[...op(Vw,this).keys()]:null}getGroup(e){return op(Vw,this).get(e)||null}getHash(){if(null!==op(Uw,this))return op(Uw,this);const e=new Eb;for(const[t,n]of op(Vw,this))e.update("".concat(t,":").concat(n.visible));return lp(Uw,this,e.hexdigest())}[Symbol.iterator](){return op(Vw,this).entries()}}function Yw(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const t=e[s];let i;if(Array.isArray(t))i=rp(Kw,this,Yw).call(this,t);else{if(!op(Vw,this).has(t))return cf("Optional content group not found: ".concat(t)),!0;i=op(Vw,this).get(t).visible}switch(n){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return"And"===n}class Qw{constructor(e,t){let{disableRange:n=!1,disableStream:s=!1}=t;uf(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{uf(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(s),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,s,i;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(s=this._fullRequestReader)||void 0===s||null===(i=s.onProgress)||void 0===i||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){uf(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new $w(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Jw(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class $w{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=Wf(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Jw{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Zw(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const s in t){const e=t[s];void 0!==e&&n.append(s,e)}return n}function ej(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function tj(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:s,disableRange:i}=e;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*s)return r;if(i||!n)return r;if("bytes"!==t.get("Accept-Ranges"))return r;return"identity"!==(t.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function nj(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=s("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),r(e)}if(n=function(e){const t=[];let n;const i=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=i.exec(e));){let[,e,s,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[s,i]}const r=[];for(let s=0;s<t.length&&s in t;++s){let[e,n]=t[s];n=a(n),e&&(n=unescape(n),0===s&&(n=o(n))),r.push(n)}return r.join("")}(e),n)return r(l(n));if(n=s("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),r(e)}function s(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function i(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const s=new TextDecoder(e,{fatal:!0}),i=_f(n);n=s.decode(i),t=!1}catch(s){}}return n}function r(e){return t&&/[\x80-\xff]/.test(e)&&(e=i("utf-8",e),t&&(e=i("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:i(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,s){if("q"===n||"Q"===n)return i(t,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{s=atob(s)}catch(r){}return i(t,s)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(Wf(e))return e}return null}function sj(e,t){return new bf("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function ij(e){return 200===e||206===e}function rj(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function aj(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(cf("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class oj{constructor(e){Ee(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Zw(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return uf(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new cj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class lj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,rj(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=ej(t.url),!ij(t.status))throw sj(t.status,s);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:i,suggestedLength:r}=tj({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=r||this._contentLength,this._filename=nj(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new wf("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:aj(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class cj{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range","bytes=".concat(t,"-").concat(n-1));const r=s.url;fetch(r,rj(i,this._withCredentials,this._abortController)).then(t=>{const n=ej(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!ij(t.status))throw sj(t.status,r);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:aj(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class dj{constructor(e){let{url:t,httpHeaders:n,withCredentials:s}=e;Ee(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Zw(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,r]of this.headers)t.setRequestHeader(i,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),s.expectedStatus=206):s.expectedStatus=200,t.responseType="arraybuffer",uf(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const s=this.pendingRequests[e];s&&(null===(n=s.onProgress)||void 0===n||n.call(s,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==s.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===s.status&&this.isHttp)return void n.onError(s.status);const i=s.status||200;if(!(200===i&&206===n.expectedStatus)&&i!==n.expectedStatus)return void n.onError(s.status);const r=function(e){const t=e.response;return"string"!==typeof t?t:_f(t).buffer}(s);if(206===i){const e=s.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:r}):(cf('Missing or invalid "Content-Range" header.'),n.onError(0))}else r?n.onDone({begin:0,chunk:r}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class uj{constructor(e){this._source=e,this._manager=new dj(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return uf(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new hj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new mj(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class hj{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ej(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:r}=tj({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=nj(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=sj(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mj{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=ej(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=sj(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const pj=/^[a-z][a-z0-9\-+.]+:/i;class fj{constructor(e){this.source=e,this.url=function(e){if(pj.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),uf("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return uf(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new gj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new vj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class gj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=sj(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new wf("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class vj{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const xj=Symbol("INITIAL_DATA");var bj=new WeakMap,yj=new WeakSet;class wj{constructor(){sp(this,yj),ip(this,bj,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=rp(yj,this,jj).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=op(bj,this)[e];if(!n||n.data===xj)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=op(bj,this)[e];return!!t&&t.data!==xj}delete(e){const t=op(bj,this)[e];return!(!t||t.data===xj)&&(delete op(bj,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=rp(yj,this,jj).call(this,e);n.data=t,n.resolve()}clear(){for(const t in op(bj,this)){var e;const{data:n}=op(bj,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}lp(bj,this,Object.create(null))}*[Symbol.iterator](){for(const e in op(bj,this)){const{data:t}=op(bj,this)[e];t!==xj&&(yield[e,t])}}}function jj(e){var t;return(t=op(bj,this))[e]||(t[e]=Pe(Pe({},Promise.withResolvers()),{},{data:xj}))}var _j=new WeakMap,Nj=new WeakMap,kj=new WeakMap,Sj=new WeakMap,Cj=new WeakMap,Aj=new WeakMap,Ej=new WeakMap,Tj=new WeakMap,Pj=new WeakMap,Mj=new WeakMap,Lj=new WeakMap,Rj=new WeakMap,Oj=new WeakMap,Dj=new WeakMap,Ij=new WeakMap,Fj=new WeakMap,zj=new WeakMap,Bj=new WeakMap,Wj=new WeakSet;class Hj{constructor(e){var t;let{textContentSource:n,container:s,viewport:i}=e;if(sp(this,Wj),ip(this,_j,Promise.withResolvers()),ip(this,Nj,null),ip(this,kj,!1),ip(this,Sj,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),ip(this,Cj,null),ip(this,Aj,null),ip(this,Ej,0),ip(this,Tj,0),ip(this,Pj,null),ip(this,Mj,null),ip(this,Lj,0),ip(this,Rj,0),ip(this,Oj,Object.create(null)),ip(this,Dj,[]),ip(this,Ij,null),ip(this,Fj,[]),ip(this,zj,new WeakMap),ip(this,Bj,null),n instanceof ReadableStream)lp(Ij,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');lp(Ij,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}lp(Nj,this,lp(Mj,this,s)),lp(Rj,this,i.scale*Jf.pixelRatio),lp(Lj,this,i.rotation),lp(Aj,this,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:o,pageY:l}=i.rawDims;lp(Bj,this,[1,0,0,-1,-o,l+a]),lp(Tj,this,r),lp(Ej,this,a),Xj.call(Hj),$f(s,i),op(_j,this).promise.finally(()=>{e_._.delete(this),lp(Aj,this,null),lp(Oj,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Nf.platform;return pf(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{op(Pj,this).read().then(t=>{var n;let{value:s,done:i}=t;i?op(_j,this).resolve():(null!==(n=op(Cj,this))&&void 0!==n||lp(Cj,this,s.lang),Object.assign(op(Oj,this),s.styles),rp(Wj,this,Uj).call(this,s.items),e())},op(_j,this).reject)};return lp(Pj,this,op(Ij,this).getReader()),e_._.add(this),e(),op(_j,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const s=t.scale*Jf.pixelRatio,i=t.rotation;if(i!==op(Lj,this)&&(null===n||void 0===n||n(),lp(Lj,this,i),$f(op(Mj,this),{rotation:i})),s!==op(Rj,this)){null===n||void 0===n||n(),lp(Rj,this,s);const e={div:null,properties:null,ctx:qj.call(Hj,op(Cj,this))};for(const t of op(Fj,this))e.properties=op(zj,this).get(t),e.div=t,rp(Wj,this,Gj).call(this,e)}}cancel(){var e;const t=new wf("TextLayer task cancelled.");null===(e=op(Pj,this))||void 0===e||e.cancel(t).catch(()=>{}),lp(Pj,this,null),op(_j,this).reject(t)}get textDivs(){return op(Fj,this)}get textContentItemsStr(){return op(Dj,this)}static cleanup(){if(!(rp(Hj,this,e_)._.size>0)){rp(Hj,this,Qj)._.clear();for(const{canvas:e}of rp(Hj,this,$j)._.values())e.remove();rp(Hj,this,$j)._.clear()}}}function Uj(e){var t,n;if(op(kj,this))return;null!==(n=(t=op(Aj,this)).ctx)&&void 0!==n||(t.ctx=qj.call(fp,op(Cj,this)));const s=op(Fj,this),i=op(Dj,this);for(const r of e){if(s.length>1e5)return cf("Ignoring additional textDivs for performance reasons."),void lp(kj,this,!0);if(void 0!==r.str)i.push(r.str),rp(Wj,this,Vj).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const e=op(Nj,this);lp(Nj,this,document.createElement("span")),op(Nj,this).classList.add("markedContent"),null!==r.id&&op(Nj,this).setAttribute("id","".concat(r.id)),e.append(op(Nj,this))}else"endMarkedContent"===r.type&&lp(Nj,this,op(Nj,this).parentNode)}}function Vj(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};op(Fj,this).push(t);const s=Sf.transform(op(Bj,this),e.transform);let i=Math.atan2(s[1],s[0]);const r=op(Oj,this)[e.fontName];r.vertical&&(i+=Math.PI/2);let a=op(Sj,this)&&r.fontSubstitution||r.fontFamily;a=fp.fontFamilyMap.get(a)||a;const o=Math.hypot(s[2],s[3]),l=o*Yj.call(fp,a,r,op(Cj,this));let c,d;0===i?(c=s[4],d=s[5]-l):(c=s[4]+l*Math.sin(i),d=s[5]-l*Math.cos(i));const u="calc(var(--total-scale-factor) *",h=t.style;op(Nj,this)===op(Mj,this)?(h.left="".concat((100*c/op(Tj,this)).toFixed(2),"%"),h.top="".concat((100*d/op(Ej,this)).toFixed(2),"%")):(h.left="".concat(u).concat(c.toFixed(2),"px)"),h.top="".concat(u).concat(d.toFixed(2),"px)")),h.fontSize="".concat(u).concat((Zj._*o).toFixed(2),"px)"),h.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,op(Sj,this)&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),0!==i&&(n.angle=i*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(m=!0)}if(m&&(n.canvasWidth=r.vertical?e.height:e.width),op(zj,this).set(t,n),op(Aj,this).div=t,op(Aj,this).properties=n,rp(Wj,this,Gj).call(this,op(Aj,this)),n.hasText&&op(Nj,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),op(Nj,this).append(e)}}function Gj(e){const{div:t,properties:n,ctx:s}=e,{style:i}=t;let r="";if(Zj._>1&&(r="scale(".concat(1/Zj._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=i,{canvasWidth:a,fontSize:o}=n;Kj.call(fp,s,o*op(Rj,this),e);const{width:l}=s.measureText(t.textContent);l>0&&(r="scaleX(".concat(a*op(Rj,this)/l,") ").concat(r))}0!==n.angle&&(r="rotate(".concat(n.angle,"deg) ").concat(r)),r.length>0&&(i.transform=r)}function qj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=rp(fp,this,$j)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),rp(fp,this,$j)._.set(e,t),rp(fp,this,Jj)._.set(t,{size:0,family:""})}return t}function Kj(e,t,n){const s=rp(fp,this,Jj)._.get(e);t===s.size&&n===s.family||(e.font="".concat(t,"px ").concat(n),s.size=t,s.family=n)}function Xj(){if(null!==rp(fp,this,Zj)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Zj._=rp(fp,this,e.getBoundingClientRect().height),e.remove()}function Yj(e,t,n){const s=rp(fp,this,Qj)._.get(e);if(s)return s;const i=rp(fp,this,qj).call(this,n);i.canvas.width=i.canvas.height=30,rp(fp,this,Kj).call(this,i,30,e);const r=i.measureText(""),a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let l=.8;return a?l=a/(a+o):(Nf.platform.isFirefox&&cf("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),rp(fp,this,Qj)._.set(e,l),l}fp=Hj;var Qj={_:new Map},$j={_:new Map},Jj={_:new WeakMap},Zj={_:null},e_={_:new Set};class t_{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var s;if(!n)return;let i=null;const r=n.name;if("#text"===r)i=n.value;else{if(!t_.shouldBuildText(r))return;null!==n&&void 0!==n&&null!==(s=n.attributes)&&void 0!==s&&s.textContent?i=n.attributes.textContent:n.value&&(i=n.value)}if(null!==i&&t.push({str:i}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}function n_(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const s=new s_,{docId:i}=s,r=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(kp)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(kp&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return _f(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,d=n.range instanceof d_?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let h=n.worker instanceof w_?n.worker:null;const m=n.verbosity,p="string"!==typeof n.docBaseUrl||Bf(n.docBaseUrl)?null:n.docBaseUrl,f=Hb(n.cMapUrl),g=!1!==n.cMapPacked,v=n.CMapReaderFactory||(kp?Ky:vy),x=Hb(n.iccUrl),b=Hb(n.standardFontDataUrl),y=n.StandardFontDataFactory||(kp?Xy:Wy),w=Hb(n.wasmUrl),j=n.WasmFactory||(kp?Yy:Uy),_=!0!==n.stopAtErrors,N=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=!1!==n.isEvalSupported,S="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!kp,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!kp&&(Nf.platform.isFirefox||!globalThis.chrome),A=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,E="boolean"===typeof n.disableFontFace?n.disableFontFace:kp,T=!0===n.fontExtraProperties,P=!0===n.enableXfa,M=n.ownerDocument||globalThis.document,L=!0===n.disableRange,R=!0===n.disableStream,O=!0===n.disableAutoFetch,D=!0===n.pdfBug,I=n.CanvasFactory||(kp?qy:fy),F=n.FilterFactory||(kp?Gy:Cy),z=!0===n.enableHWA,B=!1!==n.useWasm,W=d?d.length:null!==(t=n.length)&&void 0!==t?t:NaN,H="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!kp&&!E,U="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===vy&&y===Wy&&j===Uy&&f&&b&&w&&Uf(f,document.baseURI)&&Uf(b,document.baseURI)&&Uf(w,document.baseURI));af(m);const V={canvasFactory:new I({ownerDocument:M,enableHWA:z}),filterFactory:new F({docId:i,ownerDocument:M}),cMapReaderFactory:U?null:new v({baseUrl:f,isCompressed:g}),standardFontDataFactory:U?null:new y({baseUrl:b}),wasmFactory:U?null:new j({baseUrl:w})};h||(h=w_.create({verbosity:m,port:Pw.workerPort}),s._worker=h);const G={docId:i,apiVersion:"5.3.31",data:a,password:c,disableAutoFetch:O,rangeChunkSize:u,length:W,docBaseUrl:p,enableXfa:P,evaluatorOptions:{maxImageSize:N,disableFontFace:E,ignoreErrors:_,isEvalSupported:k,isOffscreenCanvasSupported:S,isImageDecoderSupported:C,canvasMaxAreaInBytes:A,fontExtraProperties:T,useSystemFonts:H,useWasm:B,useWorkerFetch:U,cMapUrl:f,iccUrl:x,standardFontDataUrl:b,wasmUrl:w}},q={ownerDocument:M,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:O,enableXfa:P}};return h.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",G,a?[a.buffer]:null);let t;if(d)t=new Qw(d,{disableRange:L,disableStream:R});else if(!a){if(!r)throw new Error("getDocument - no `url` parameter provided.");const e=Uf(r)?oj:kp?fj:uj;t=new e({url:r,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:L,disableStream:R})}return e.then(e=>{if(s.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new ly(i,e,h.port),r=new D_(n,s,t,q,V);s._transport=r,n.send("Ready",null)})}).catch(s._capability.reject),s}class s_{constructor(){Ee(this,"_capability",Promise.withResolvers()),Ee(this,"_transport",null),Ee(this,"_worker",null),Ee(this,"docId","d".concat((i_._=(gp=i_._,vp=gp++,gp),vp))),Ee(this,"destroyed",!1),Ee(this,"onPassword",null),Ee(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(i){var s;throw null!==(s=this._worker)&&void 0!==s&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var i_={_:0},r_=new WeakMap,a_=new WeakMap,o_=new WeakMap,l_=new WeakMap,c_=new WeakMap;class d_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ip(this,r_,Promise.withResolvers()),ip(this,a_,[]),ip(this,o_,[]),ip(this,l_,[]),ip(this,c_,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){op(c_,this).push(e)}addProgressListener(e){op(l_,this).push(e)}addProgressiveReadListener(e){op(o_,this).push(e)}addProgressiveDoneListener(e){op(a_,this).push(e)}onDataRange(e,t){for(const n of op(c_,this))n(e,t)}onDataProgress(e,t){op(r_,this).promise.then(()=>{for(const n of op(l_,this))n(e,t)})}onDataProgressiveRead(e){op(r_,this).promise.then(()=>{for(const t of op(o_,this))t(e)})}onDataProgressiveDone(){op(r_,this).promise.then(()=>{for(const e of op(a_,this))e()})}transportReady(){op(r_,this).resolve()}requestDataRange(e,t){df("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class u_{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pf(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var h_=new WeakMap,m_=new WeakSet;class p_{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];sp(this,m_),ip(this,h_,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new Hf:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new wj,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ff({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pf(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:s,viewport:i,intent:r="display",annotationMode:a=Dp.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:m=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(r,a,h,m),{renderingIntent:f,cacheKey:g}=p;lp(h_,this,!1),c||(c=this._transport.getOptionalContentConfig(f));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const x=!!(f&Tp);var b;v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(b=this._stats)||void 0===b||b.time("Page Request"),this._pumpOperatorList(p));const y=e=>{var t;(v.renderTasks.delete(w),x&&lp(h_,this,!0),rp(m_,this,f_).call(this),e?(w.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:new Error(e)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new W_({callback:y,params:{canvasContext:s,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:u});((n=v).renderTasks||(n.renderTasks=new Set)).add(w);const j=w.task;return Promise.all([v.displayReadyCapability.promise,c]).then(e=>{var t;let[n,s]=e;if(this.destroyed)y();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(s.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:n,optionalContentConfig:s}),w.operatorListChanged()}}).catch(y),j}getOperatorList(){let{intent:e="display",annotationMode:t=Dp.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this._transport.getRenderingIntent(e,t,n,s,!0);let r,a=this._intentStates.get(i.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(i.cacheKey,a)),a.opListReadCapability)||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(i));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>t_.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const s=t.getReader(),i={items:[],styles:Object.create(null),lang:null};!function t(){s.read().then(function(n){var s;let{value:r,done:a}=n;a?e(i):(null!==(s=i.lang)&&void 0!==s||(i.lang=r.lang),Object.assign(i.styles,r.styles),i.items.push(...r.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),lp(h_,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];lp(h_,this,!0);const t=rp(m_,this,f_).call(this);return e&&t&&this._stats&&(this._stats=new Hf),t}_startRenderPage(e,t){var n,s;const i=this._intentStates.get(t);i&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(s=i.displayReadyCapability)||void 0===s||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&rp(m_,this,f_).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:i}=e;const{map:r,transfer:a}=s,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:r,modifiedIds:i},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();rp(m_,this,f_).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:s=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof zf){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new wf(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function f_(){if(!op(h_,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),lp(h_,this,!1),!0}var g_=new WeakMap,v_=new WeakMap,x_=new WeakMap,b_=new WeakMap,y_=new WeakSet;class w_{constructor(){let{name:e=null,port:t=null,verbosity:n=of()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(sp(this,y_),ip(this,g_,Promise.withResolvers()),ip(this,v_,null),ip(this,x_,null),ip(this,b_,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(E_._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");E_._.set(t,this),rp(y_,this,__).call(this,t)}else rp(y_,this,N_).call(this)}get promise(){return op(g_,this).promise}get port(){return op(x_,this)}get messageHandler(){return op(v_,this)}destroy(){var e,t;this.destroyed=!0,null===(e=op(b_,this))||void 0===e||e.terminate(),lp(b_,this,null),E_._.delete(op(x_,this)),lp(x_,this,null),null===(t=op(v_,this))||void 0===t||t.destroy(),lp(v_,this,null)}static create(e){const t=rp(w_,this,E_)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new w_(e)}static get workerSrc(){if(Pw.workerSrc)return Pw.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pf(this,"_setupFakeWorkerGlobal",(async()=>{if(ap(w_,this,S_))return ap(w_,this,S_);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function j_(){op(g_,this).resolve(),op(v_,this).send("configure",{verbosity:this.verbosity})}function __(e){lp(x_,this,e),lp(v_,this,new ly("main","worker",e)),op(v_,this).on("ready",()=>{}),rp(y_,this,j_).call(this)}function N_(){if(A_._||S_(xp))return void rp(y_,this,k_).call(this);let{workerSrc:e}=xp;try{xp._isSameOrigin(window.location,e)||(e=xp._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ly("main","worker",t),s=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?op(g_,this).reject(new Error("Worker was destroyed")):rp(y_,this,k_).call(this)},i=new AbortController;t.addEventListener("error",()=>{op(b_,this)||s()},{signal:i.signal}),n.on("test",e=>{i.abort(),!this.destroyed&&e?(lp(v_,this,n),lp(x_,this,t),lp(b_,this,t),rp(y_,this,j_).call(this)):s()}),n.on("ready",e=>{if(i.abort(),this.destroyed)s();else try{r()}catch(t){rp(y_,this,k_).call(this)}});const r=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void r()}catch(t){lf("The worker has been disabled.")}rp(y_,this,k_).call(this)}function k_(){A_._||(cf("Setting up fake worker."),A_._=!0),xp._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void op(g_,this).reject(new Error("Worker was destroyed"));const s=new Kb;lp(x_,this,s);const i="fake".concat((C_._=(t=C_._,n=t++,t),n)),r=new ly(i+"_worker",i,s);e.setup(r,s),lp(v_,this,new ly(i,i+"_worker",s)),rp(y_,this,j_).call(this)}).catch(e=>{op(g_,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function S_(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}xp=w_;var C_={_:0},A_={_:!1},E_={_:new WeakMap};kp&&(A_._=rp(xp,xp,!0),Pw.workerSrc||(Pw.workerSrc="./pdf.worker.mjs")),xp._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const s=new URL(t,n);return n.origin===s.origin},xp._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},xp.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return xp.create(e)};var T_=new WeakMap,P_=new WeakMap,M_=new WeakMap,L_=new WeakMap,R_=new WeakMap,O_=new WeakSet;class D_{constructor(e,t,n,s,i){sp(this,O_),ip(this,T_,new Map),ip(this,P_,new Map),ip(this,M_,new Map),ip(this,L_,new Map),ip(this,R_,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new wj,this.fontLoader=new Bb({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return pf(this,"annotationStorage",new Ob)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dp.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=Ep,a=Tb;switch(e){case"any":r=Ap;break;case"display":break;case"print":r=Tp;break;default:cf("getRenderingIntent - invalid intent: ".concat(e))}const o=r&Tp&&n instanceof Fb?n:this.annotationStorage;switch(t){case Dp.DISABLE:r+=Lp;break;case Dp.ENABLE:break;case Dp.ENABLE_FORMS:r+=Pp;break;case Dp.ENABLE_STORAGE:r+=Mp,a=o.serializable;break;default:cf("getRenderingIntent - invalid annotationMode: ".concat(t))}s&&(r+=Rp),i&&(r+=Op);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:r,cacheKey:[r,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=op(R_,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of op(P_,this).values())t.push(s._destroy());op(P_,this).clear(),op(M_,this).clear(),op(L_,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),op(T_,this).clear(),this.filterFactory.destroy(),Hj.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new wf("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{uf(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:s}=e;s?t.close():(uf(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:i}=this._fullReader;if(!n||!s){var r;if(this._lastProgress)null===(r=t.onProgress)||void 0===r||r.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:s,contentLength:i}}),e.on("GetRangeReader",(e,t)=>{uf(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:s}=e;s?t.close():(uf(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new u_(n,this))}),e.on("DocException",e=>{t._capability.reject(ry(e))}),e.on("PasswordRequest",e=>{lp(R_,this,Promise.withResolvers());try{if(!t.onPassword)throw ry(e);const n=e=>{e instanceof Error?op(R_,this).reject(e):op(R_,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){op(R_,this).reject(n)}return op(R_,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;op(P_,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[s,i,r]=t;if(this.destroyed)return null;if(this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const e=r.error;cf("Error during font loading: ".concat(e)),this.commonObjs.resolve(s,e);break}const t=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,a=new Wb(r,t);this.fontLoader.bind(a).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(s,a)});break;case"CopyLocalImage":const{imageRef:o}=r;uf(o,"The imageRef must be defined.");for(const e of op(P_,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===o)return t.dataLen?(this.commonObjs.resolve(s,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error("Got unknown common object type ".concat(i))}return null}),e.on("obj",e=>{let[t,n,s,i]=e;if(this.destroyed)return;const r=op(P_,this).get(n);var a;if(!r.objs.has(t))if(0!==r._intentStates.size)switch(s){case"Image":case"Pattern":r.objs.resolve(t,i);break;default:throw new Error("Got unknown object type ".concat(s))}else null===i||void 0===i||null===(a=i.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&cf("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=op(M_,this).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&op(L_,this).set(n.refStr,e);const s=new p_(t,n,this,this._params.pdfBug);return op(P_,this).set(t,s),s});return op(M_,this).set(t,s),s}getPageIndex(e){return Ub(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return rp(O_,this,I_).call(this,"GetFieldObjects")}hasJSActions(){return rp(O_,this,I_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return rp(O_,this,I_).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return rp(O_,this,I_).call(this,"GetOptionalContentConfig").then(t=>new Xw(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=op(T_,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,s,i;return{info:e[0],metadata:e[1]?new Dw(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(s=null===(i=this._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==s?s:null}});return op(T_,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of op(P_,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),op(T_,this).clear(),this.filterFactory.destroy(!0),Hj.cleanup()}}cachedPageNumber(e){var t;if(!Ub(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=op(L_,this).get(n))&&void 0!==t?t:null}}function I_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=op(T_,this).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return op(T_,this).set(e,s),s}var F_=new WeakMap;class z_{constructor(e){ip(this,F_,null),Ee(this,"onContinue",null),Ee(this,"onError",null),lp(F_,this,e)}get promise(){return op(F_,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;op(F_,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=op(F_,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=op(F_,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var B_=new WeakMap;class W_{constructor(e){let{callback:t,params:n,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}=e;ip(this,B_,null),this.callback=t,this.params=n,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new z_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:s=!1,optionalContentConfig:i}=e;if(this.cancelled)return;if(this._canvas){if(H_._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");H_._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:o,background:l}=this.params;this.gfx=new Cw(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:s,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),op(B_,this)&&(window.cancelAnimationFrame(op(B_,this)),lp(B_,this,null)),H_._.delete(this._canvas),s||(s=new zf("Rendering cancelled, page ".concat(this._pageIndex+1),i)),this.callback(s),null===(t=(n=this.task).onError)||void 0===t||t.call(n,s)}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?lp(B_,this,window.requestAnimationFrame(()=>{lp(B_,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),H_._.delete(this._canvas),this.callback())))}}var H_={_:new WeakSet};const U_="5.3.31";function V_(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function G_(e){return Math.max(0,Math.min(255,255*e))}class q_{static CMYK_G(e){let[t,n,s,i]=e;return["G",1-Math.min(1,.3*t+.59*s+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=G_(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=V_(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,s]=e;return["G",.3*t+.59*n+.11*s]}static RGB_rgb(e){return e.map(G_)}static RGB_HTML(e){return"#".concat(e.map(V_).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,s,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,s,i]=e;return[G_(1-Math.min(1,t+i)),G_(1-Math.min(1,s+i)),G_(1-Math.min(1,n+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,s]=e;const i=1-t,r=1-n,a=1-s;return["CMYK",i,r,a,Math.min(i,r,a)]}}class K_{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width","".concat(e,"px")),s.setAttribute("height","".concat(t,"px"))),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),s}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){df("Abstract method `_createSVG` called.")}}class X_ extends K_{_createSVG(e){return document.createElementNS(Of,e)}}class Y_{static setupStorage(e,t,n,s,i){const r=s.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(e.textContent=r.value),"print"===i)break;e.addEventListener("input",e=>{s.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",e=>{s.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==r.value&&e.setAttribute("value",r.value),"print"===i)break;e.addEventListener("input",e=>{s.setValue(t,{value:e.target.value})})}break;case"select":if(null!==r.value){e.setAttribute("value",r.value);for(const e of n.children)e.attributes.value===r.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;s.setValue(t,{value:i})})}}static setAttributes(e){let{html:t,element:n,storage:s=null,intent:i,linkService:r}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(i));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&r.addLinkAttributes(t,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(t,a.dataId,n,s)}static render(e){const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,i=e.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:i,linkService:n});const a="richText"!==i,o=e.div;if(o.append(r),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===s.children.length){if(s.value){const e=document.createTextNode(s.value);r.append(e),a&&t_.shouldBuildText(s.name)&&l.push(e)}return{textDivs:l}}const c=[[s,-1,r]];for(;c.length>0;){var d,u;const[e,s,r]=c.at(-1);if(s+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),r.append(e);continue}const m=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(r.append(m),o.attributes&&this.setAttributes({html:m,element:o,storage:t,intent:i,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,m]);else if(o.value){const e=document.createTextNode(o.value);a&&t_.shouldBuildText(h)&&l.push(e),m.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const Q_=1e3,$_=new WeakSet;class J_{static create(e){switch(e.data.annotationType){case qp.LINK:return new aN(e);case qp.TEXT:return new dN(e);case qp.WIDGET:switch(e.data.fieldType){case"Tx":return new hN(e);case"Btn":return e.data.radioButton?new fN(e):e.data.checkBox?new pN(e):new gN(e);case"Ch":return new vN(e);case"Sig":return new mN(e)}return new uN(e);case qp.POPUP:return new xN(e);case qp.FREETEXT:return new YN(e);case qp.LINE:return new $N(e);case qp.SQUARE:return new ZN(e);case qp.CIRCLE:return new tk(e);case qp.POLYLINE:return new sk(e);case qp.CARET:return new rk(e);case qp.INK:return new ck(e);case qp.POLYGON:return new ik(e);case qp.HIGHLIGHT:return new uk(e);case qp.UNDERLINE:return new hk(e);case qp.SQUIGGLY:return new mk(e);case qp.STRIKEOUT:return new pk(e);case qp.STAMP:return new fk(e);case qp.FILEATTACHMENT:return new xk(e);default:return new sN(e)}}}var Z_=new WeakMap,eN=new WeakMap,tN=new WeakMap,nN=new WeakSet;class sN{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sp(this,nN),ip(this,Z_,null),ip(this,eN,!1),ip(this,tN,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:s}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==s&&void 0!==s&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sN._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;op(Z_,this)||lp(Z_,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&rp(nN,this,iN).call(this,n),null===(t=op(tN,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;op(Z_,this)&&(rp(nN,this,iN).call(this,op(Z_,this).rect),null===(e=op(tN,this))||void 0===e||e.popup.resetEdited(),lp(Z_,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof uN||(i.tabIndex=Q_);const{style:r}=i;if(r.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof xN){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,i),i}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){r.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");r.borderRadius=t}else if(this instanceof fN){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");r.borderRadius=e}switch(t.borderStyle.style){case Kp:r.borderStyle="solid";break;case Xp:r.borderStyle="dashed";break;case Yp:cf("Unimplemented border style: beveled");break;case Qp:cf("Unimplemented border style: inset");break;case $p:r.borderBottomStyle="solid"}const s=t.borderColor||null;s?(lp(eN,this,!0),r.borderColor=Sf.makeHexColor(0|s[0],0|s[1],0|s[2])):r.borderWidth=0}const l=Sf.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=s.rawDims;r.left="".concat(100*(l[0]-u)/c,"%"),r.top="".concat(100*(l[1]-h)/d,"%");const{rotation:m}=t;return t.hasOwnCanvas||0===m?(r.width="".concat(100*a/c,"%"),r.height="".concat(100*o/d,"%")):this.setRotation(m,i),i}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:r}=this;e%180!==0&&([i,r]=[r,i]),t.style.width="".concat(100*i/n,"%"),t.style.height="".concat(100*r/s,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const s=n.detail[e],i=s[0],r=s.slice(1);n.target.style[t]=q_["".concat(i,"_HTML")](r),this.annotationStorage.setValue(this.data.id,{[t]:q_["".concat(i,"_rgb")](r)})};return pf(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||n[s];null===i||void 0===i||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,i]of Object.entries(t)){const r=n[s];if(r){r({detail:{[s]:i},target:e}),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,i]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[r,a,o,l]=e.subarray(2,6);if(s===r&&i===a&&t===o&&n===l)return}const{style:r}=this.container;let a;if(op(eN,this)){const{borderColor:e,borderWidth:t}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=s-t,l=i-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),m="clippath_".concat(this.data.id);h.setAttribute("id",m),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let f=2,g=e.length;f<g;f+=8){var p;const n=e[f],s=e[f+1],r=e[f+2],d=e[f+3],u=c.createElement("rect"),m=(r-t)/o,g=(i-s)/l,v=(n-r)/o,x=(s-d)/l;u.setAttribute("x",m),u.setAttribute("y",g),u.setAttribute("width",v),u.setAttribute("height",x),h.append(u),null===(p=a)||void 0===p||p.push('<rect vector-effect="non-scaling-stroke" x="'.concat(m,'" y="').concat(g,'" width="').concat(v,'" height="').concat(x,'"/>'))}op(eN,this)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(m,")")}_createPopup(){const{data:e}=this,t=lp(tN,this,new xN({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){df("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:e,id:i,exportValues:r}of s){if(-1===e)continue;if(i===t)continue;const s="string"===typeof r?r:null,a=document.querySelector('[data-element-id="'.concat(i,'"]'));!a||$_.has(a)?n.push({id:i,exportValue:s,domElement:a}):cf("_getElementsByName - element not allowed: ".concat(i))}return n}for(const s of document.getElementsByName(e)){const{exportValue:e}=s,i=s.getAttribute("data-element-id");i!==t&&($_.has(s)&&n.push({id:i,exportValue:e,domElement:s}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function iN(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/i,"%"),t.top="".concat(100*(r-e[3]+o)/r,"%"),0===s?(t.width="".concat(100*(e[2]-e[0])/i,"%"),t.height="".concat(100*(e[3]-e[1])/r,"%")):this.setRotation(s)}var rN=new WeakSet;class aN extends sN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),sp(this,rN),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action),s=!0):e.attachment?(rp(rN,this,lN).call(this,n,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(rp(rN,this,cN).call(this,n,e.setOCGState),s=!0):e.dest?(this._bindLink(n,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&rp(rN,this,oN).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),rp(rN,this,oN).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const i=n.get(s);i&&(e[i]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1})}e.onclick||(e.onclick=()=>!1),rp(rN,this,oN).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),rp(rN,this,oN).call(this),!this._fieldObjects)return cf('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:s,include:i}=t,r=[];if(0!==e.length||0!==s.length){const t=new Set(s);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===i&&r.push(n)}else for(const t of Object.values(this._fieldObjects))r.push(...t);const a=this.annotationStorage,o=[];for(const t of r){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&($_.has(n)?n.dispatchEvent(new Event("resetform")):cf("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function oN(){this.container.setAttribute("data-internal-link","")}function lN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},rp(rN,this,oN).call(this)}function cN(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),rp(rN,this,oN).call(this)}class dN extends sN{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class uN extends sN{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Nf.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,i){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var r;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(e)}}))})}_setEventListeners(e,t,n,s){for(const[o,l]of n){var i,r,a;if("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,s),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Sf.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||9,i=e.style;let r;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Cp*s))||1);r=Math.min(s,a(t/Cp))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(s,a(e/Cp))}i.fontSize="calc(".concat(r,"px * var(--total-scale-factor))"),i.color=Sf.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class hN extends uN{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,s){const i=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),i.setValue(r.id,{[s]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var s;const r=e.getValue(t,{value:this.data.fieldValue});let a=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=r.formattedValue||(null===(s=this.data.textContent)||void 0===s?void 0:s.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),$_.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Q_,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",s=>{e.setValue(t,{value:s.target.value}),this.setPropertyOnSiblings(n,"value",s.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const s=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=s,c.formattedValue=null});let d=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var i;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;c.userValue&&(n.value=c.userValue),c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const s={value(n){var s;c.userValue=null!==(s=n.detail.value)&&void 0!==s?s:"",e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:s}=n.detail;c.formattedValue=s,null!==s&&void 0!==s&&n.target!==document.activeElement&&(n.target.value=s),e.setValue(t,{formattedValue:s})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var s;const{charLimit:i}=n.detail,{target:r}=n;if(0===i)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",i);let a=c.userValue;!a||a.length<=i||(a=a.slice(0,i),r.value=c.userValue=a,e.setValue(t,{value:a}),null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(s,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let s=-1;if("Escape"===e.key?s=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):s=2,-1===s)return;const{value:i}=e.target;c.lastCommittedValue!==i&&(c.lastCommittedValue=i,c.userValue=i,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:s,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const s=d;d=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{value:i}=e.target;var r;(c.userValue=i,c.lastCommittedValue!==i)&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));s(e)}),null!==(i=this.data.actions)&&void 0!==i&&i.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:s,target:i}=e,{value:r,selectionStart:a,selectionEnd:o}=i;let l=a,d=o;switch(e.inputType){case"deleteWordBackward":{const e=r.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=r.substring(a).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,change:s||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class mN extends uN{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class pN extends uN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof s&&(s="Off"!==s,e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return $_.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=Q_,i.addEventListener("change",s=>{const{name:i,checked:r}=s.target;for(const a of this._getElementsByName(i,n)){const n=r&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:r})}),i.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",t=>{const s={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(s,t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fN extends uN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof s&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});const i=document.createElement("input");if($_.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=Q_,i.addEventListener("change",t=>{const{name:s,checked:i}=t.target;for(const r of this._getElementsByName(s,n))e.setValue(r.id,{value:!1});e.setValue(n,{value:i})}),i.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;i.addEventListener("updatefromsandbox",t=>{const i={value:t=>{const i=s===t.detail.value;for(const s of this._getElementsByName(t.target.name)){const t=i&&s.id===n;s.domElement&&(s.domElement.checked=t),e.setValue(s.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class gN extends aN{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class vN extends uN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");$_.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Q_;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of s.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),i=!1),s.append(e)}let r=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),s.prepend(e),r=()=>{e.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=s;return i?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",n=>{const i={value(n){var i;null===(i=r)||void 0===i||i();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of s.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){s.multiple=!0},remove(n){const i=s.options,r=n.detail.remove;if(i[r].selected=!1,s.remove(r),i.length>0){-1===Array.prototype.findIndex.call(i,e=>e.selected)&&(i[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==s.length;)s.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:i,displayValue:r,exportValue:c}=n.detail.insert,d=s.children[i],u=document.createElement("option");u.textContent=r,u.value=c,d?d.before(u):s.append(u),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:i}=n.detail;for(;0!==s.length;)s.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,s.append(i)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const s=new Set(n.detail.indices);for(const e of n.target.options)e.selected=s.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)}),s.addEventListener("input",n=>{var s;const i=a(!0),r=a(!1);e.setValue(t,{value:i}),n.preventDefault(),null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:r,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):s.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class xN extends sN{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:sN._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new zN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(Mf).concat(e)).join(",")),this.container}}var bN=new WeakMap,yN=new WeakMap,wN=new WeakMap,jN=new WeakMap,_N=new WeakMap,NN=new WeakMap,kN=new WeakMap,SN=new WeakMap,CN=new WeakMap,AN=new WeakMap,EN=new WeakMap,TN=new WeakMap,PN=new WeakMap,MN=new WeakMap,LN=new WeakMap,RN=new WeakMap,ON=new WeakMap,DN=new WeakMap,IN=new WeakMap,FN=new WeakSet;class zN{constructor(e){let{container:t,color:n,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:u}=e;sp(this,FN),ip(this,bN,rp(FN,this,VN).bind(this)),ip(this,yN,rp(FN,this,XN).bind(this)),ip(this,wN,rp(FN,this,KN).bind(this)),ip(this,jN,rp(FN,this,qN).bind(this)),ip(this,_N,null),ip(this,NN,null),ip(this,kN,null),ip(this,SN,null),ip(this,CN,null),ip(this,AN,null),ip(this,EN,null),ip(this,TN,!1),ip(this,PN,null),ip(this,MN,null),ip(this,LN,null),ip(this,RN,null),ip(this,ON,null),ip(this,DN,null),ip(this,IN,!1),lp(NN,this,t),lp(ON,this,i),lp(kN,this,a),lp(RN,this,o),lp(AN,this,l),lp(_N,this,n),lp(LN,this,c),lp(EN,this,d),lp(CN,this,s),lp(SN,this,qf.toDateObject(r)),this.trigger=s.flatMap(e=>e.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",op(jN,this)),m.addEventListener("mouseenter",op(wN,this)),m.addEventListener("mouseleave",op(yN,this)),m.classList.add("popupTriggerArea");for(const m of s){var h;null===(h=m.container)||void 0===h||h.addEventListener("keydown",op(bN,this))}op(NN,this).hidden=!0,u&&rp(FN,this,qN).call(this)}render(){if(op(PN,this))return;const e=lp(PN,this,document.createElement("div"));if(e.className="popup",op(_N,this)){const t=e.style.outlineColor=Sf.makeHexColor(...op(_N,this));e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=op(ON,this)),e.append(t),op(SN,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:op(SN,this).valueOf()})),t.append(e)}const s=ap(FN,this,BN);if(s)Y_.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(op(kN,this));e.append(t)}op(NN,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const e=i[r];s.append(document.createTextNode(e)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited(e){var t;let{rect:n,popupContent:s}=e;op(DN,this)||lp(DN,this,{contentsObj:op(kN,this),richText:op(RN,this)}),n&&lp(MN,this,null),s&&(lp(RN,this,rp(FN,this,UN).call(this,s)),lp(kN,this,null)),null===(t=op(PN,this))||void 0===t||t.remove(),lp(PN,this,null)}resetEdited(){var e;op(DN,this)&&(({contentsObj:tp(lp,[kN,this])._,richText:tp(lp,[RN,this])._}=op(DN,this)),lp(DN,this,null),null===(e=op(PN,this))||void 0===e||e.remove(),lp(PN,this,null),lp(MN,this,null))}forceHide(){lp(IN,this,this.isVisible),op(IN,this)&&(op(NN,this).hidden=!0)}maybeShow(){op(IN,this)&&(op(PN,this)||rp(FN,this,KN).call(this),lp(IN,this,!1),op(NN,this).hidden=!1)}get isVisible(){return!1===op(NN,this).hidden}}function BN(e){const t=op(RN,e),n=op(kN,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:op(RN,e).html||null}function WN(e){var t;return(null===(t=ap(FN,e,BN))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function HN(e){var t;return(null===(t=ap(FN,e,BN))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function UN(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:ap(FN,this,HN),fontSize:ap(FN,this,WN)?"calc(".concat(ap(FN,this,WN),"px * var(--total-scale-factor))"):""}};for(const i of e.split("\n"))t.push({name:"span",value:i,attributes:s});return n}function VN(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&op(TN,this))&&rp(FN,this,qN).call(this)}function GN(){if(null!==op(MN,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:i}}}=op(AN,this);let r=!!op(EN,this),a=op(r?EN:LN,this);for(const h of op(CN,this))if(!a||null!==Sf.intersect(h.data.rect,a)){a=h.data.rect,r=!0;break}const o=Sf.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=r?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];lp(MN,this,[100*(c-s)/t,100*(d-i)/n]);const{style:u}=op(NN,this);u.left="".concat(op(MN,this)[0],"%"),u.top="".concat(op(MN,this)[1],"%")}function qN(){lp(TN,this,!op(TN,this)),op(TN,this)?(rp(FN,this,KN).call(this),op(NN,this).addEventListener("click",op(jN,this)),op(NN,this).addEventListener("keydown",op(bN,this))):(rp(FN,this,XN).call(this),op(NN,this).removeEventListener("click",op(jN,this)),op(NN,this).removeEventListener("keydown",op(bN,this)))}function KN(){op(PN,this)||this.render(),this.isVisible?op(TN,this)&&op(NN,this).classList.add("focused"):(rp(FN,this,GN).call(this),op(NN,this).hidden=!1,op(NN,this).style.zIndex=parseInt(op(NN,this).style.zIndex)+1e3)}function XN(){op(NN,this).classList.remove("focused"),!op(TN,this)&&this.isVisible&&(op(NN,this).hidden=!0,op(NN,this).style.zIndex=parseInt(op(NN,this).style.zIndex)-1e3)}class YN extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ip.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var QN=new WeakMap;class $N extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ip(this,QN,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),i=lp(QN,this,this.svgFactory.createElement("svg:line"));return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),s.append(i),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return op(QN,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var JN=new WeakMap;class ZN extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ip(this,JN,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,r=lp(JN,this,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",i/2),r.setAttribute("y",i/2),r.setAttribute("width",t-i),r.setAttribute("height",n-i),r.setAttribute("stroke-width",i||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return op(JN,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ek=new WeakMap;class tk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ip(this,ek,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,r=lp(ek,this,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-i/2),r.setAttribute("ry",n/2-i/2),r.setAttribute("stroke-width",i||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return op(ek,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var nk=new WeakMap;class sk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ip(this,nk,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:s},width:i,height:r}=this;if(!t)return this.container;const a=this.svgFactory.create(i,r,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],s=e[3]-t[c+1];o.push("".concat(n,",").concat(s))}o=o.join(" ");const l=lp(nk,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return op(nk,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class ik extends sk{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ak=new WeakMap,ok=new WeakMap,lk=new WeakSet;class ck extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),sp(this,lk),ip(this,ak,null),ip(this,ok,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Ip.HIGHLIGHT:Ip.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:s,popupRef:i}}=this,{transform:r,width:a,height:o}=rp(lk,this,dk).call(this,t,e),l=this.svgFactory.create(a,o,!0),c=lp(ak,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",s.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",r);for(let d=0,u=n.length;d<u;d++){const e=this.svgFactory.createElement(this.svgElementName);op(ok,this).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:s}=e,i=op(ak,this);if(t>=0&&i.setAttribute("stroke-width",t||1),n)for(let r=0,a=op(ok,this).length;r<a;r++)op(ok,this)[r].setAttribute("points",n[r].join(","));if(s){const{transform:e,width:t,height:n}=rp(lk,this,dk).call(this,this.data.rotation,s);i.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),i.setAttribute("transform",e)}}getElementsToTriggerPopup(){return op(ok,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function dk(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class uk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ip.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class hk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class fk extends sN{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ip.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var gk=new WeakMap,vk=new WeakSet;class xk extends sN{constructor(e){var t;super(e,{isRenderable:!0}),sp(this,vk),ip(this,gk,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",Pe({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",rp(vk,this,bk).bind(this)),lp(gk,this,n);const{isMac:s}=Nf.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(s?e.metaKey:e.ctrlKey)&&rp(vk,this,bk).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return op(gk,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function bk(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var yk=new WeakMap,wk=new WeakMap,jk=new WeakMap,_k=new WeakMap,Nk=new WeakSet;class kk{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o}=e;sp(this,Nk),ip(this,yk,null),ip(this,wk,null),ip(this,jk,new Map),ip(this,_k,null),this.div=t,lp(yk,this,n),lp(wk,this,s),lp(_k,this,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return op(jk,this).size>0}async render(e){const{annotations:t}=e,n=this.div;$f(n,this.viewport);const s=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new X_,annotationStorage:e.annotationStorage||new Ob,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const e=a.annotationType===qp.POPUP;if(e){const e=s.get(a.id);if(!e)continue;i.elements=e}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const t=J_.create(i);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=s.get(a.popupRef);e?e.push(t):s.set(a.popupRef,[t])}const n=t.render();var r;if(a.hidden&&(n.style.visibility="hidden"),await rp(Nk,this,Sk).call(this,n,a.id),t._isEditable)op(jk,this).set(t.data.id,t),null===(r=this._annotationEditorUIManager)||void 0===r||r.renderAnnotationElement(t)}rp(Nk,this,Ck).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new X_,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=kk._defaultBorderStyle),n.data=s;const e=J_.create(n);if(!e.isRenderable)continue;const t=e.render();await rp(Nk,this,Sk).call(this,t,s.id)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,$f(n,{rotation:t.rotation}),rp(Nk,this,Ck).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(op(jk,this).values())}getEditableAnnotation(e){return op(jk,this).get(e)}static get _defaultBorderStyle(){return pf(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Kp,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function Sk(e,t){var n,s;const i=e.firstChild||e,r=i.id="".concat(Mf).concat(t),a=await(null===(n=op(_k,this))||void 0===n?void 0:n.getAriaAttributes(r));if(a)for(const[o,l]of a)i.setAttribute(o,l);this.div.append(e),null===(s=op(yk,this))||void 0===s||s.moveElementInDOM(this.div,e,i,!1)}function Ck(){if(!op(wk,this))return;const e=this.div;for(const[n,s]of op(wk,this)){const i=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?"CANVAS"===r.nodeName?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s);const a=op(jk,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,i.id,s),a._hasNoCanvas=!1;else a.canvas=s}op(wk,this).clear()}const Ak=/\r\n?|\n/g;var Ek=new WeakMap,Tk=new WeakMap,Pk=new WeakMap,Mk=new WeakMap,Lk=new WeakMap,Rk=new WeakSet;class Ok extends rb{static get _keyboardManager(){const e=Ok.prototype,t=e=>e.isEmpty(),n=Mv.TRANSLATE_SMALL,s=Mv.TRANSLATE_BIG;return pf(this,"_keyboardManager",new Fg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}constructor(e){super(Pe(Pe({},e),{},{name:"freeTextEditor"})),sp(this,Rk),ip(this,Ek,void 0),ip(this,Tk,""),ip(this,Pk,"".concat(this.id,"-editor")),ip(this,Mk,null),ip(this,Lk,void 0),lp(Ek,this,e.color||Ok._defaultColor||rb._defaultLineColor),lp(Lk,this,e.fontSize||Ok._defaultFontSize)}static initialize(e,t){rb.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Fp.FREETEXT_SIZE:Ok._defaultFontSize=t;break;case Fp.FREETEXT_COLOR:Ok._defaultColor=t}}updateParams(e,t){switch(e){case Fp.FREETEXT_SIZE:rp(Rk,this,Dk).call(this,t);break;case Fp.FREETEXT_COLOR:rp(Rk,this,Ik).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Fp.FREETEXT_SIZE,Ok._defaultFontSize],[Fp.FREETEXT_COLOR,Ok._defaultColor||rb._defaultLineColor]]}get propertiesToUpdate(){return[[Fp.FREETEXT_SIZE,op(Lk,this)],[Fp.FREETEXT_COLOR,op(Ek,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ok._internalPadding*e,-(Ok._internalPadding+op(Lk,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),lp(Mk,this,new AbortController);const e=this._uiManager.combinedSignal(op(Mk,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",op(Pk,this)),this._isDraggable=!0,null===(e=op(Mk,this))||void 0===e||e.abort(),lp(Mk,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=op(Tk,this),t=lp(Tk,this,rp(Rk,this,Fk).call(this).trimEnd());if(e===t)return;const n=e=>{lp(Tk,this,e),e?(rp(Rk,this,Wk).call(this),this._uiManager.rebuild(this),rp(Rk,this,zk).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),rp(Rk,this,zk).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ok._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",op(Pk,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(op(Lk,this),"px * var(--total-scale-factor))"),n.color=op(Ek,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,s]=this.parentDimensions;if(this.annotationElementId){const{position:i}=this._initialData;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(i[0]-c)/o,h=t+this.height-(i[1]-d)/l;break;case 90:u=e+(i[0]-c)/o,h=t-(i[1]-d)/l,[r,a]=[a,-r];break;case 180:u=e-this.width+(i[0]-c)/o,h=t-(i[1]-d)/l,[r,a]=[-r,-a];break;case 270:u=e+(i[0]-c-this.height*l)/o,h=t+(i[1]-d-this.width*o)/l,[r,a]=[-a,r]}this.setAt(u*n,h*s,r,a)}else this._moveAfterPaste(e,t);rp(Rk,this,Wk).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const s=Uk.call(Ok,t.getData("text")||"").replaceAll(Ak,"\n");if(!s)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const r=i.getRangeAt(0);if(!s.includes("\n"))return r.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),void i.collapseToStart();const{startContainer:a,startOffset:o}=r,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Ak,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(Bk.call(Ok,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(Ak,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Bk.call(Ok,n))}lp(Tk,this,"".concat(l.join("\n")).concat(s).concat(c.join("\n"))),rp(Rk,this,Wk).call(this);const d=new Range;let u=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}i.removeAllRanges(),i.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let s=null;if(e instanceof YN){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:i,rotation:r,id:a,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;s=e={annotationType:Ip.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}const i=await super.deserialize(e,t,n);return lp(Lk,i,e.fontSize),lp(Ek,i,Sf.makeHexColor(...e.color)),lp(Tk,i,Uk.call(Ok,e.value)),i.annotationElementId=e.id||null,i._initialData=s,i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Ok._internalPadding*this.parentScale,n=this.getRect(t,t),s=rb._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:op(Ek,this)),i={annotationType:Ip.FREETEXT,color:s,fontSize:op(Lk,this),value:rp(Rk,this,Hk).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(i.isCopy=!0,i):this.annotationElementId&&!rp(Rk,this,Vk).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(op(Lk,this),"px * var(--total-scale-factor))"),n.color=op(Ek,this),t.replaceChildren();for(const i of op(Tk,this).split("\n")){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),t.append(e)}const s=Ok._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:op(Tk,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function Dk(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-op(Lk,this))*this.parentScale),lp(Lk,this,e),rp(Rk,this,zk).call(this)},n=op(Lk,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fp.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Ik(e){const t=e=>{lp(Ek,this,this.editorDiv.style.color=e)},n=op(Ek,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fp.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Fk(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===s.nodeName||(e.push(Bk.call(bp,s)),t=s)}return e.join("\n")}function zk(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,s=t.style.display,i=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=s,t.classList.toggle("hidden",i)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function Bk(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Ak,"")}function Wk(){if(this.editorDiv.replaceChildren(),op(Tk,this))for(const e of op(Tk,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function Hk(){return op(Tk,this).replaceAll("\xa0"," ")}function Uk(e){return e.replaceAll(" ","\xa0")}function Vk(e){const{value:t,fontSize:n,color:s,pageIndex:i}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==s[t])||e.pageIndex!==i}bp=Ok,Ee(Ok,"_freeTextDefaultContent",""),Ee(Ok,"_internalPadding",0),Ee(Ok,"_defaultColor",null),Ee(Ok,"_defaultFontSize",10),Ee(Ok,"_type","freetext"),Ee(Ok,"_editorType",Ip.FREETEXT);class Gk{toSVGPath(){df("Abstract method `toSVGPath` must be implemented.")}get box(){df("Abstract getter `box` must be implemented.")}serialize(e,t){df("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,i,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a]*s,r[a+1]=n+e[a+1]*i;return r}static _rescaleAndSwap(e,t,n,s,i,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a+1]*s,r[a+1]=n+e[a]*i;return r}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let i=0,r=e.length;i<r;i+=2)s[i]=t+e[i],s[i+1]=n+e[i+1];return s}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,s,i){switch(i){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,i,r){return[(e+5*n)/6,(t+5*s)/6,(5*n+i)/6,(5*s+r)/6,(n+i)/2,(s+r)/2]}}Ee(Gk,"PRECISION",1e-4);var qk=new WeakMap,Kk=new WeakMap,Xk=new WeakMap,Yk=new WeakMap,Qk=new WeakMap,$k=new WeakMap,Jk=new WeakMap,Zk=new WeakMap,eS=new WeakMap,tS=new WeakMap,nS=new WeakMap,sS=new WeakMap,iS=new WeakMap,rS=new WeakSet;class aS{constructor(e,t,n,s,i){let{x:r,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;sp(this,rS),ip(this,qk,void 0),ip(this,Kk,[]),ip(this,Xk,void 0),ip(this,Yk,void 0),ip(this,Qk,[]),ip(this,$k,new Float32Array(18)),ip(this,Jk,void 0),ip(this,Zk,void 0),ip(this,eS,void 0),ip(this,tS,void 0),ip(this,nS,void 0),ip(this,sS,void 0),ip(this,iS,[]),lp(qk,this,t),lp(sS,this,s*n),lp(Yk,this,i),op($k,this).set([NaN,NaN,NaN,NaN,r,a],6),lp(Xk,this,o),lp(tS,this,pS._*n),lp(eS,this,fS._*n),lp(nS,this,n),op(iS,this).push(r,a)}isEmpty(){return isNaN(op($k,this)[8])}add(e){var t;let{x:n,y:s}=e;lp(Jk,this,n),lp(Zk,this,s);const[i,r,a,o]=op(qk,this);let[l,c,d,u]=op($k,this).subarray(8,12);const h=n-d,m=s-u,p=Math.hypot(h,m);if(p<op(eS,this))return!1;const f=p-op(tS,this),g=f/p,v=g*h,x=g*m;let b=l,y=c;l=d,c=u,d+=v,u+=x,null===(t=op(iS,this))||void 0===t||t.push(n,s);const w=v/f,j=-x/f*op(sS,this),_=w*op(sS,this);if(op($k,this).set(op($k,this).subarray(2,8),0),op($k,this).set([d+j,u+_],4),op($k,this).set(op($k,this).subarray(14,18),12),op($k,this).set([d-j,u-_],16),isNaN(op($k,this)[6]))return 0===op(Qk,this).length&&(op($k,this).set([l+j,c+_],2),op(Qk,this).push(NaN,NaN,NaN,NaN,(l+j-i)/a,(c+_-r)/o),op($k,this).set([l-j,c-_],14),op(Kk,this).push(NaN,NaN,NaN,NaN,(l-j-i)/a,(c-_-r)/o)),op($k,this).set([b,y,l,c,d,u],6),!this.isEmpty();op($k,this).set([b,y,l,c,d,u],6);return Math.abs(Math.atan2(y-c,b-l)-Math.atan2(x,v))<Math.PI/2?([l,c,d,u]=op($k,this).subarray(2,6),op(Qk,this).push(NaN,NaN,NaN,NaN,((l+d)/2-i)/a,((c+u)/2-r)/o),[l,c,b,y]=op($k,this).subarray(14,18),op(Kk,this).push(NaN,NaN,NaN,NaN,((b+l)/2-i)/a,((y+c)/2-r)/o),!0):([b,y,l,c,d,u]=op($k,this).subarray(0,6),op(Qk,this).push(((b+5*l)/6-i)/a,((y+5*c)/6-r)/o,((5*l+d)/6-i)/a,((5*c+u)/6-r)/o,((l+d)/2-i)/a,((c+u)/2-r)/o),[d,u,l,c,b,y]=op($k,this).subarray(12,18),op(Kk,this).push(((b+5*l)/6-i)/a,((y+5*c)/6-r)/o,((5*l+d)/6-i)/a,((5*c+u)/6-r)/o,((l+d)/2-i)/a,((c+u)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=op(Qk,this),t=op(Kk,this);if(isNaN(op($k,this)[6])&&!this.isEmpty())return rp(rS,this,lS).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push("L".concat(e[s+4]," ").concat(e[s+5])):n.push("C".concat(e[s]," ").concat(e[s+1]," ").concat(e[s+2]," ").concat(e[s+3]," ").concat(e[s+4]," ").concat(e[s+5]));rp(rS,this,dS).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push("L".concat(t[s+4]," ").concat(t[s+5])):n.push("C".concat(t[s]," ").concat(t[s+1]," ").concat(t[s+2]," ").concat(t[s+3]," ").concat(t[s+4]," ").concat(t[s+5]));return rp(rS,this,cS).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,i,r){return new NS(e,t,n,s,i,r)}getOutlines(){var e,t;const n=op(Qk,this),s=op(Kk,this),i=op($k,this),[r,a,o,l]=op(qk,this),c=new Float32Array((null!==(e=null===(t=op(iS,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,m=c.length-2;h<m;h+=2)c[h]=(op(iS,this)[h]-r)/o,c[h+1]=(op(iS,this)[h+1]-a)/l;if(c[c.length-2]=(op(Jk,this)-r)/o,c[c.length-1]=(op(Zk,this)-a)/l,isNaN(i[6])&&!this.isEmpty())return rp(rS,this,uS).call(this,c);const d=new Float32Array(op(Qk,this).length+24+op(Kk,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=rp(rS,this,mS).call(this,d,u);for(let h=s.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(s[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=s[h+e],d[u+1]=s[h+e+1],u+=2);return rp(rS,this,hS).call(this,d,u),this.newFreeDrawOutline(d,c,op(qk,this),op(nS,this),op(Xk,this),op(Yk,this))}}function oS(){const e=op($k,this).subarray(4,6),t=op($k,this).subarray(16,18),[n,s,i,r]=op(qk,this);return[(op(Jk,this)+(e[0]-t[0])/2-n)/i,(op(Zk,this)+(e[1]-t[1])/2-s)/r,(op(Jk,this)+(t[0]-e[0])/2-n)/i,(op(Zk,this)+(t[1]-e[1])/2-s)/r]}function lS(){const[e,t,n,s]=op(qk,this),[i,r,a,o]=rp(rS,this,oS).call(this);return"M".concat((op($k,this)[2]-e)/n," ").concat((op($k,this)[3]-t)/s," L").concat((op($k,this)[4]-e)/n," ").concat((op($k,this)[5]-t)/s," L").concat(i," ").concat(r," L").concat(a," ").concat(o," L").concat((op($k,this)[16]-e)/n," ").concat((op($k,this)[17]-t)/s," L").concat((op($k,this)[14]-e)/n," ").concat((op($k,this)[15]-t)/s," Z")}function cS(e){const t=op(Kk,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function dS(e){const[t,n,s,i]=op(qk,this),r=op($k,this).subarray(4,6),a=op($k,this).subarray(16,18),[o,l,c,d]=rp(rS,this,oS).call(this);e.push("L".concat((r[0]-t)/s," ").concat((r[1]-n)/i," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((a[0]-t)/s," ").concat((a[1]-n)/i))}function uS(e){const t=op($k,this),[n,s,i,r]=op(qk,this),[a,o,l,c]=rp(rS,this,oS).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-s)/r,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-s)/r,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-s)/r,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-s)/r],0),this.newFreeDrawOutline(d,e,op(qk,this),op(nS,this),op(Xk,this),op(Yk,this))}function hS(e,t){const n=op(Kk,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function mS(e,t){const n=op($k,this).subarray(4,6),s=op($k,this).subarray(16,18),[i,r,a,o]=op(qk,this),[l,c,d,u]=rp(rS,this,oS).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/a,(n[1]-r)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-r)/o],t),t+24}var pS={_:8},fS={_:pS._+2},gS=new WeakMap,vS=new WeakMap,xS=new WeakMap,bS=new WeakMap,yS=new WeakMap,wS=new WeakMap,jS=new WeakMap,_S=new WeakSet;class NS extends Gk{constructor(e,t,n,s,i,r){super(),sp(this,_S),ip(this,gS,void 0),ip(this,vS,new Float32Array(4)),ip(this,xS,void 0),ip(this,bS,void 0),ip(this,yS,void 0),ip(this,wS,void 0),ip(this,jS,void 0),lp(jS,this,e),lp(yS,this,t),lp(gS,this,n),lp(wS,this,s),lp(xS,this,i),lp(bS,this,r),this.lastPoint=[NaN,NaN],rp(_S,this,kS).call(this,r);const[a,o,l,c]=op(vS,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-a)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-a)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(op(jS,this)[4]," ").concat(op(jS,this)[5])];for(let t=6,n=op(jS,this).length;t<n;t+=6)isNaN(op(jS,this)[t])?e.push("L".concat(op(jS,this)[t+4]," ").concat(op(jS,this)[t+5])):e.push("C".concat(op(jS,this)[t]," ").concat(op(jS,this)[t+1]," ").concat(op(jS,this)[t+2]," ").concat(op(jS,this)[t+3]," ").concat(op(jS,this)[t+4]," ").concat(op(jS,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,s,i,r]=e;const a=i-n,o=r-s;let l,c;switch(t){case 0:l=Gk._rescale(op(jS,this),n,r,a,-o),c=Gk._rescale(op(yS,this),n,r,a,-o);break;case 90:l=Gk._rescaleAndSwap(op(jS,this),n,s,a,o),c=Gk._rescaleAndSwap(op(yS,this),n,s,a,o);break;case 180:l=Gk._rescale(op(jS,this),i,s,-a,o),c=Gk._rescale(op(yS,this),i,s,-a,o);break;case 270:l=Gk._rescaleAndSwap(op(jS,this),i,r,-a,-o),c=Gk._rescaleAndSwap(op(yS,this),i,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return op(vS,this)}newOutliner(e,t,n,s,i){return new aS(e,t,n,s,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,s,i,r]=op(vS,this),[a,o,l,c]=op(gS,this),d=i*l,u=r*c,h=n*l+a,m=s*c+o,p=this.newOutliner({x:op(yS,this)[0]*d+h,y:op(yS,this)[1]*u+m},op(gS,this),op(wS,this),e,op(bS,this),null!==t&&void 0!==t?t:op(xS,this));for(let f=2;f<op(yS,this).length;f+=2)p.add({x:op(yS,this)[f]*d+h,y:op(yS,this)[f+1]*u+m});return p.getOutlines()}}function kS(e){const t=op(jS,this);let n=t[4],s=t[5];const i=[n,s,n,s];let r=n,a=s;const o=e?Math.max:Math.min;for(let c=6,d=t.length;c<d;c+=6){const e=t[c+4],l=t[c+5];if(isNaN(t[c]))Sf.pointBoundingBox(e,l,i),a<l?(r=e,a=l):a===l&&(r=o(r,e));else{const e=[1/0,1/0,-1/0,-1/0];Sf.bezierBoundingBox(n,s,...t.slice(c,c+6),e),Sf.rectBoundingBox(...e,i),a<e[3]?(r=e[2],a=e[3]):a===e[3]&&(r=o(r,e[2]))}n=e,s=l}const l=op(vS,this);l[0]=i[0]-op(xS,this),l[1]=i[1]-op(xS,this),l[2]=i[2]-i[0]+2*op(xS,this),l[3]=i[3]-i[1]+2*op(xS,this),this.lastPoint=[r,a]}var SS=new WeakMap,CS=new WeakMap,AS=new WeakMap,ES=new WeakMap,TS=new WeakSet;class PS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];sp(this,TS),ip(this,SS,void 0),ip(this,CS,void 0),ip(this,AS,[]),ip(this,ES,[]);const i=[1/0,1/0,-1/0,-1/0],r=10**-4;for(const{x:h,y:m,width:p,height:f}of e){const e=Math.floor((h-t)/r)*r,n=Math.ceil((h+p+t)/r)*r,s=Math.floor((m-t)/r)*r,a=Math.ceil((m+f+t)/r)*r,o=[e,s,a,!0],l=[n,s,a,!1];op(AS,this).push(o,l),Sf.rectBoundingBox(e,s,n,a,i)}const a=i[2]-i[0]+2*n,o=i[3]-i[1]+2*n,l=i[0]-n,c=i[1]-n,d=op(AS,this).at(s?-1:-2),u=[d[0],d[2]];for(const h of op(AS,this)){const[e,t,n]=h;h[0]=(e-l)/a,h[1]=(t-c)/o,h[2]=(n-c)/o}lp(SS,this,new Float32Array([l,c,a,o])),lp(CS,this,u)}getOutlines(){op(AS,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of op(AS,this))t[3]?(e.push(...rp(TS,this,DS).call(this,t)),rp(TS,this,RS).call(this,t)):(rp(TS,this,OS).call(this,t),e.push(...rp(TS,this,DS).call(this,t)));return rp(TS,this,MS).call(this,e)}}function MS(e){const t=[],n=new Set;for(const r of e){const[e,n,s]=r;t.push([e,n,r],[e,s,r])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let r=0,a=t.length;r<a;r+=2){const e=t[r][2],s=t[r+1][2];e.push(s),s.push(e),n.add(e),n.add(s)}const s=[];let i;for(;n.size>0;){const e=n.values().next().value;let[t,r,a,o,l]=e;n.delete(e);let c=t,d=r;for(i=[t,a],s.push(i);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,r,a,o,l]=e,c!==t&&(i.push(c,d,t,d===r?r:a),c=t),d=d===r?a:r}i.push(c,d)}return new zS(s,op(SS,this),op(CS,this))}function LS(e){const t=op(ES,this);let n=0,s=t.length-1;for(;n<=s;){const i=n+s>>1,r=t[i][0];if(r===e)return i;r<e?n=i+1:s=i-1}return s+1}function RS(e){let[,t,n]=e;const s=rp(TS,this,LS).call(this,t);op(ES,this).splice(s,0,[t,n])}function OS(e){let[,t,n]=e;const s=rp(TS,this,LS).call(this,t);for(let i=s;i<op(ES,this).length;i++){const[e,s]=op(ES,this)[i];if(e!==t)break;if(e===t&&s===n)return void op(ES,this).splice(i,1)}for(let i=s-1;i>=0;i--){const[e,s]=op(ES,this)[i];if(e!==t)break;if(e===t&&s===n)return void op(ES,this).splice(i,1)}}function DS(e){const[t,n,s]=e,i=[[t,n,s]],r=rp(TS,this,LS).call(this,s);for(let a=0;a<r;a++){const[e,n]=op(ES,this)[a];for(let s=0,r=i.length;s<r;s++){const[,a,o]=i[s];if(!(n<=a||o<=e))if(a>=e)if(o>n)i[s][1]=n;else{if(1===r)return[];i.splice(s,1),s--,r--}else i[s][2]=e,o>n&&i.push([t,n,o])}}return i}var IS=new WeakMap,FS=new WeakMap;class zS extends Gk{constructor(e,t,n){super(),ip(this,IS,void 0),ip(this,FS,void 0),lp(FS,this,e),lp(IS,this,t),this.lastPoint=n}toSVGPath(){const e=[];for(const t of op(FS,this)){let[n,s]=t;e.push("M".concat(n," ").concat(s));for(let i=2;i<t.length;i+=2){const r=t[i],a=t[i+1];r===n?(e.push("V".concat(a)),s=a):a===s&&(e.push("H".concat(r)),n=r)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,s,i,r]=e;const a=[],o=i-n,l=r-s;for(const c of op(FS,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=r-c[t+1]*l;a.push(e)}return a}get box(){return op(IS,this)}get classNamesForOutlining(){return["highlightOutline"]}}class BS extends aS{newFreeDrawOutline(e,t,n,s,i,r){return new WS(e,t,n,s,i,r)}}class WS extends NS{newOutliner(e,t,n,s,i){return new BS(e,t,n,s,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var HS=new WeakMap,US=new WeakMap,VS=new WeakMap,GS=new WeakMap,qS=new WeakMap,KS=new WeakMap,XS=new WeakMap,YS=new WeakMap,QS=new WeakMap,$S=new WeakMap,JS=new WeakMap,ZS=new WeakSet;class eC{static get _keyboardManager(){return pf(this,"_keyboardManager",new Fg([[["Escape","mac+Escape"],eC.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],eC.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],eC.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],eC.prototype._moveToPrevious],[["Home","mac+Home"],eC.prototype._moveToBeginning],[["End","mac+End"],eC.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:s=null}=e;sp(this,ZS),ip(this,HS,null),ip(this,US,null),ip(this,VS,void 0),ip(this,GS,null),ip(this,qS,!1),ip(this,KS,!1),ip(this,XS,null),ip(this,YS,void 0),ip(this,QS,null),ip(this,$S,null),ip(this,JS,void 0),n?(lp(KS,this,!1),lp(JS,this,Fp.HIGHLIGHT_COLOR),lp(XS,this,n)):(lp(KS,this,!0),lp(JS,this,Fp.HIGHLIGHT_DEFAULT_COLOR)),lp($S,this,(null===n||void 0===n?void 0:n._uiManager)||s),lp(YS,this,op($S,this)._eventBus),lp(VS,this,(null===n||void 0===n?void 0:n.color)||(null===(t=op($S,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98"),oC._||(oC._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=lp(HS,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=op($S,this)._signal;e.addEventListener("click",rp(ZS,this,iC).bind(this),{signal:t}),e.addEventListener("keydown",rp(ZS,this,sC).bind(this),{signal:t});const n=lp(US,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=op(VS,this),e.append(n),e}renderMainDropdown(){const e=lp(GS,this,rp(ZS,this,tC).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===op(HS,this))return void rp(ZS,this,iC).call(this,e);const t=e.target.getAttribute("data-color");t&&rp(ZS,this,nC).call(this,t,e)}_moveToNext(e){var t,n;ap(ZS,this,aC)?e.target!==op(HS,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=op(GS,this).firstChild)||void 0===n||n.focus():rp(ZS,this,iC).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=op(GS,this))||void 0===t?void 0:t.firstChild)&&e.target!==op(HS,this)?(ap(ZS,this,aC)||rp(ZS,this,iC).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):ap(ZS,this,aC)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;ap(ZS,this,aC)?null===(t=op(GS,this).firstChild)||void 0===t||t.focus():rp(ZS,this,iC).call(this,e)}_moveToEnd(e){var t;ap(ZS,this,aC)?null===(t=op(GS,this).lastChild)||void 0===t||t.focus():rp(ZS,this,iC).call(this,e)}hideDropdown(){var e,t;null===(e=op(GS,this))||void 0===e||e.classList.add("hidden"),null===(t=op(QS,this))||void 0===t||t.abort(),lp(QS,this,null)}_hideDropdownFromKeyboard(){var e;op(KS,this)||(ap(ZS,this,aC)?(this.hideDropdown(),op(HS,this).focus({preventScroll:!0,focusVisible:op(qS,this)})):null===(e=op(XS,this))||void 0===e||e.unselect())}updateColor(e){if(op(US,this)&&(op(US,this).style.backgroundColor=e),!op(GS,this))return;const t=op($S,this).highlightColors.values();for(const n of op(GS,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=op(HS,this))||void 0===e||e.remove(),lp(HS,this,null),lp(US,this,null),null===(t=op(GS,this))||void 0===t||t.remove(),lp(GS,this,null)}}function tC(){const e=document.createElement("div"),t=op($S,this)._signal;e.addEventListener("contextmenu",Vf,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of op($S,this).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=n,i.setAttribute("data-l10n-id",oC._[n]);const r=document.createElement("span");i.append(r),r.className="swatch",r.style.backgroundColor=s,i.setAttribute("aria-selected",s===op(VS,this)),i.addEventListener("click",rp(ZS,this,nC).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",rp(ZS,this,sC).bind(this),{signal:t}),e}function nC(e,t){t.stopPropagation(),op(YS,this).dispatch("switchannotationeditorparams",{source:this,type:op(JS,this),value:e})}function sC(e){yp._keyboardManager.exec(this,e)}function iC(e){if(ap(ZS,this,aC))return void this.hideDropdown();if(lp(qS,this,0===e.detail),op(QS,this)||(lp(QS,this,new AbortController),window.addEventListener("pointerdown",rp(ZS,this,rC).bind(this),{signal:op($S,this).combinedSignal(op(QS,this))})),op(GS,this))return void op(GS,this).classList.remove("hidden");const t=lp(GS,this,rp(ZS,this,tC).call(this));op(HS,this).append(t)}function rC(e){var t;null!==(t=op(GS,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function aC(e){return op(GS,e)&&!op(GS,e).classList.contains("hidden")}yp=eC;var oC={_:null},lC=new WeakMap,cC=new WeakMap,dC=new WeakMap,uC=new WeakMap,hC=new WeakMap,mC=new WeakMap,pC=new WeakMap,fC=new WeakMap,gC=new WeakMap,vC=new WeakMap,xC=new WeakMap,bC=new WeakMap,yC=new WeakMap,wC=new WeakMap,jC=new WeakMap,_C=new WeakMap,NC=new WeakMap,kC=new WeakMap,SC=new WeakSet;class CC extends rb{static get _keyboardManager(){const e=CC.prototype;return pf(this,"_keyboardManager",new Fg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(Pe(Pe({},e),{},{name:"highlightEditor"})),sp(this,SC),ip(this,lC,null),ip(this,cC,0),ip(this,dC,void 0),ip(this,uC,null),ip(this,hC,null),ip(this,mC,null),ip(this,pC,null),ip(this,fC,0),ip(this,gC,null),ip(this,vC,null),ip(this,xC,null),ip(this,bC,!1),ip(this,yC,null),ip(this,wC,void 0),ip(this,jC,null),ip(this,_C,""),ip(this,NC,void 0),ip(this,kC,""),this.color=e.color||CC._defaultColor,lp(NC,this,e.thickness||CC._defaultThickness),lp(wC,this,e.opacity||CC._defaultOpacity),lp(dC,this,e.boxes||null),lp(kC,this,e.methodOfCreation||""),lp(_C,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(lp(bC,this,!0),rp(SC,this,EC).call(this,e),rp(SC,this,RC).call(this)):op(dC,this)&&(lp(lC,this,e.anchorNode),lp(cC,this,e.anchorOffset),lp(pC,this,e.focusNode),lp(fC,this,e.focusOffset),rp(SC,this,AC).call(this),rp(SC,this,RC).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:op(bC,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:op(NC,this),methodOfCreation:op(kC,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;rb.initialize(e,t),CC._defaultColor||(CC._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case Fp.HIGHLIGHT_DEFAULT_COLOR:CC._defaultColor=t;break;case Fp.HIGHLIGHT_THICKNESS:CC._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return op(yC,this)}updateParams(e,t){switch(e){case Fp.HIGHLIGHT_COLOR:rp(SC,this,TC).call(this,t);break;case Fp.HIGHLIGHT_THICKNESS:rp(SC,this,PC).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Fp.HIGHLIGHT_DEFAULT_COLOR,CC._defaultColor],[Fp.HIGHLIGHT_THICKNESS,CC._defaultThickness]]}get propertiesToUpdate(){return[[Fp.HIGHLIGHT_COLOR,this.color||CC._defaultColor],[Fp.HIGHLIGHT_THICKNESS,op(NC,this)||CC._defaultThickness],[Fp.HIGHLIGHT_FREE,op(bC,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(lp(hC,this,new eC({editor:this})),e.addColorPicker(op(hC,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(rp(SC,this,FC).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,rp(SC,this,FC).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){rp(SC,this,LC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(rp(SC,this,RC).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)rp(SC,this,LC).call(this);else if(e){var n;rp(SC,this,RC).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;op(bC,this)?(e=(e-this.rotation+360)%360,n=OC.call(CC,op(vC,this).box,e)):n=OC.call(CC,[this.x,this.y,this.width,this.height],e),t.updateProperties(op(xC,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(op(jC,this),{bbox:OC.call(CC,op(mC,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();op(_C,this)&&(e.setAttribute("aria-label",op(_C,this)),e.setAttribute("role","mark")),op(bC,this)?e.classList.add("free"):this.div.addEventListener("keydown",rp(SC,this,DC).bind(this),{signal:this._uiManager._signal});const t=lp(gC,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=op(uC,this);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),_g(this,op(gC,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(op(jC,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(op(jC,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:rp(SC,this,IC).call(this,!0);break;case 1:case 3:rp(SC,this,IC).call(this,!1)}}select(){var e;super.select(),op(jC,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(op(jC,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),op(jC,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(op(jC,this),{rootClass:{selected:!1}}),op(bC,this)||rp(SC,this,IC).call(this,!1))}get _mustFixPosition(){return!op(bC,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(op(xC,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(op(jC,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:s,x:i,y:r}=n;const{x:a,y:o,width:l,height:c}=s.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),rp(CC,this,HC).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",Gf,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Vf,{signal:u}),s.addEventListener("pointermove",rp(CC,this,WC).bind(this,e),{signal:u}),this._freeHighlight=new BS({x:i,y:r},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let s=null;if(e instanceof uk){const{data:{quadPoints:t,rect:n,rotation:i,id:r,color:a,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=e;s=e={annotationType:Ip.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:i,id:r,deleted:!1,popupRef:l}}else if(e instanceof ck){const{data:{inkLists:t,rect:n,rotation:i,id:r,color:a,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=e;s=e={annotationType:Ip.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:i,id:r,deleted:!1,popupRef:l}}const{color:i,quadPoints:r,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=Sf.makeHexColor(...i),lp(wC,l,o||1),a&&lp(NC,l,e.thickness),l.annotationElementId=e.id||null,l._initialData=s;const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(r){const e=lp(dC,l,[]);for(let t=0;t<r.length;t+=8)e.push({x:(r[t]-u)/c,y:1-(r[t+1]-h)/d,width:(r[t+2]-r[t])/c,height:(r[t+1]-r[t+5])/d});rp(SC,l,AC).call(l),rp(SC,l,RC).call(l),l.rotate(l.rotation)}else if(a){lp(bC,l,!0);const e=a[0],n={x:e[0]-u,y:d-(e[1]-h)},s=new BS(n,[0,0,c,d],1,op(NC,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),s.add(n);const{id:i,clipPathId:r}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:s.toSVGPath()}},!0,!0);rp(SC,l,EC).call(l,{highlightOutlines:s.getOutlines(),highlightId:i,clipPathId:r}),rp(SC,l,RC).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=rb._colorManager.convert(this.color),s={annotationType:Ip.HIGHLIGHT,color:n,opacity:op(wC,this),thickness:op(NC,this),quadPoints:rp(SC,this,zC).call(this),outlines:rp(SC,this,BC).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:rp(SC,this,FC).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!rp(SC,this,UC).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function AC(){const e=new PS(op(dC,this),.001);lp(vC,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=op(vC,this).box;const t=new PS(op(dC,this),.0025,.001,"ltr"===this._uiManager.direction);lp(mC,this,t.getOutlines());const{lastPoint:n}=op(mC,this);lp(yC,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function EC(e){let{highlightOutlines:t,highlightId:n,clipPathId:s}=e;lp(vC,this,t);if(lp(mC,this,t.getNewOutline(op(NC,this)/2+1.5,.0025)),n>=0)lp(xC,this,n),lp(uC,this,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),lp(jC,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:op(mC,this).box,path:{d:op(mC,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(op(xC,this),{bbox:OC.call(wp,op(vC,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(op(jC,this),{bbox:OC.call(wp,op(mC,this).box,e),path:{d:op(mC,this).toSVGPath()}})}const[i,r,a,o]=t.box;switch(this.rotation){case 0:this.x=i,this.y=r,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=r,this.y=1-i,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-i,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-r,this.y=i,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=op(mC,this);lp(yC,this,[(l[0]-i)/a,(l[1]-r)/o])}function TC(e){const t=(e,t)=>{var n,s;this.color=e,lp(wC,this,t),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(op(xC,this),{root:{fill:e,"fill-opacity":t}}),null===(s=op(hC,this))||void 0===s||s.updateColor(e)},n=this.color,s=op(wC,this);this.addCommands({cmd:t.bind(this,e,wp._defaultOpacity),undo:t.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fp.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function PC(e){const t=op(NC,this),n=e=>{lp(NC,this,e),rp(SC,this,MC).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fp.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function MC(e){if(!op(bC,this))return;rp(SC,this,EC).call(this,{highlightOutlines:op(vC,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function LC(){null!==op(xC,this)&&this.parent&&(this.parent.drawLayer.remove(op(xC,this)),lp(xC,this,null),this.parent.drawLayer.remove(op(jC,this)),lp(jC,this,null))}function RC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===op(xC,this)&&(({id:tp(lp,[xC,this])._,clipPathId:tp(lp,[uC,this])._}=e.drawLayer.draw({bbox:op(vC,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":op(wC,this)},rootClass:{highlight:!0,free:op(bC,this)},path:{d:op(vC,this).toSVGPath()}},!1,!0)),lp(jC,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:op(bC,this)},bbox:op(mC,this).box,path:{d:op(mC,this).toSVGPath()}},op(bC,this))),op(gC,this)&&(op(gC,this).style.clipPath=op(uC,this)))}function OC(e,t){let[n,s,i,r]=e;switch(t){case 90:return[1-s-r,n,r,i];case 180:return[1-n-i,1-s-r,i,r];case 270:return[s,1-n-i,r,i]}return[n,s,i,r]}function DC(e){wp._keyboardManager.exec(this,e)}function IC(e){if(!op(lC,this))return;const t=window.getSelection();e?t.setPosition(op(lC,this),op(cC,this)):t.setPosition(op(pC,this),op(fC,this))}function FC(){return op(bC,this)?this.rotation:0}function zC(){if(op(bC,this))return null;const[e,t]=this.pageDimensions,[n,s]=this.pageTranslation,i=op(dC,this),r=new Float32Array(8*i.length);let a=0;for(const{x:o,y:l,width:c,height:d}of i){const i=o*e+n,u=(1-l)*t+s;r[a]=r[a+4]=i,r[a+1]=r[a+3]=u,r[a+2]=r[a+6]=i+c*e,r[a+5]=r[a+7]=u-d*t,a+=8}return r}function BC(e){return op(vC,this).serialize(e,rp(SC,this,FC).call(this))}function WC(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function HC(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function UC(e){const{color:t}=this._initialData;return e.color.some((e,n)=>e!==t[n])}wp=CC,Ee(CC,"_defaultColor",null),Ee(CC,"_defaultOpacity",1),Ee(CC,"_defaultThickness",12),Ee(CC,"_type","highlight"),Ee(CC,"_editorType",Ip.HIGHLIGHT),Ee(CC,"_freeHighlightId",-1),Ee(CC,"_freeHighlight",null),Ee(CC,"_freeHighlightClipId","");var VC=new WeakMap;class GC{constructor(){ip(this,VC,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){op(VC,this)[e]=t}toSVGProperties(){const e=op(VC,this);return lp(VC,this,Object.create(null)),{root:e}}reset(){lp(VC,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){df("Not implemented")}}var qC=new WeakMap,KC=new WeakMap,XC=new WeakSet;class YC extends rb{constructor(e){super(e),sp(this,XC),ip(this,qC,null),ip(this,KC,void 0),Ee(this,"_drawId",null),lp(KC,this,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(rp(XC,this,QC).call(this,e),rp(XC,this,ZC).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[s,i]of Object.entries(t))n.has(s)?Object.assign(e[s],i):e[s]=i;return e}static getDefaultDrawingOptions(e){df("Not implemented")}static get typesMap(){df("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(iA._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)e.push([n,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,s]of this.constructor.typesMap)e.push([n,t[s]]);return e}_updateProperty(e,t,n){const s=this._drawingOptions,i=s[t],r=e=>{var n;s.updateProperty(t,e);const i=op(qC,this).updateProperty(t,e);i&&rp(XC,this,nA).call(this,i),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,YC._mergeSVGProperties(op(qC,this).getPathResizingSVGProperties(rp(XC,this,tA).call(this)),{bbox:rp(XC,this,sA).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,YC._mergeSVGProperties(op(qC,this).getPathResizedSVGProperties(rp(XC,this,tA).call(this)),{bbox:rp(XC,this,sA).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:rp(XC,this,sA).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,YC._mergeSVGProperties(op(qC,this).getPathTranslatedSVGProperties(rp(XC,this,tA).call(this),this.parentDimensions),{bbox:rp(XC,this,sA).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,op(KC,this)&&(lp(KC,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){rp(XC,this,JC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(rp(XC,this,ZC).call(this),rp(XC,this,nA).call(this,op(qC,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),rp(XC,this,JC).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),rp(XC,this,ZC).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,YC._mergeSVGProperties({bbox:rp(XC,this,sA).call(this)},op(qC,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&rp(XC,this,nA).call(this,op(qC,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,s,i){df("Not implemented")}static startDrawing(e,t,n,s){var i,r;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=s;if(lA._&&lA._!==d)return;const{viewport:{rotation:u}}=e,{width:h,height:m}=a.getBoundingClientRect(),p=rA._=new AbortController,f=e.combinedSignal(p);oA._||(oA._=c),null!==(i=lA._)&&void 0!==i||(lA._=d),window.addEventListener("pointerup",e=>{var t;oA._===e.pointerId?this._endDraw(e):null===(t=cA._)||void 0===t||t.delete(e.pointerId)},{signal:f}),window.addEventListener("pointercancel",e=>{var t;oA._===e.pointerId?this._currentParent.endDrawingSession():null===(t=cA._)||void 0===t||t.delete(e.pointerId)},{signal:f}),window.addEventListener("pointerdown",e=>{lA._===e.pointerType&&((cA._||(cA._=new Set)).add(e.pointerId),iA._.isCancellable()&&(iA._.removeLastElement(),iA._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Vf,{signal:f}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),a.addEventListener("touchmove",e=>{e.timeStamp===dA._&&Gf(e)},{signal:f}),e.toggleDrawing(),null===(r=t._editorUndoBar)||void 0===r||r.hide(),iA._?e.drawLayer.updateProperties(this._currentDrawId,iA._.startNew(o,l,h,m,u)):(t.updateUIForDefaultProperties(this),iA._=this.createDrawerInstance(o,l,h,m,u),aA._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(aA._.toSVGProperties(),iA._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(dA._=-1,!iA._)return;const{offsetX:n,offsetY:s,pointerId:i}=e;oA._===i&&((null===(t=cA._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,iA._.add(n,s)),dA._=e.timeStamp,Gf(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,iA._=null,aA._=null,lA._=null,dA._=NaN),rA._&&(rA._.abort(),rA._=null,oA._=NaN,cA._=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,iA._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=iA._,n=this._currentDrawId,s=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(s))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:Fp.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Fp.DRAW_STEP),!iA._.isEmpty()){const{pageDimensions:[n,s],scale:i}=t,r=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:iA._.getOutlines(n*i,s*i,i,this._INNER_MARGIN),drawingOptions:aA._,mustBeCommitted:!e});return this._cleanup(!0),r}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,s,i,r){df("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=t.viewport,o=this.deserializeDraw(r,a,s,i,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),rp(XC,l,QC).call(l,{drawOutlines:o}),rp(XC,l,ZC).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[s,i]=this.pageDimensions;return op(qC,this).serialize([t,n,s,i],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function QC(e){let{drawOutlines:t,drawId:n,drawingOptions:s}=e;lp(qC,this,t),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=rp(XC,this,$C).call(this,t,this.parent),rp(XC,this,nA).call(this,t.box)}function $C(e,t){const{id:n}=t.drawLayer.draw(jp._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function JC(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function ZC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=rp(XC,this,$C).call(this,op(qC,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function eA(e){let[t,n,s,i]=e;const{parentDimensions:[r,a],rotation:o}=this;switch(o){case 90:return[n,1-t,s*(a/r),i*(r/a)];case 180:return[1-t,1-n,s,i];case 270:return[1-n,t,s*(a/r),i*(r/a)];default:return[t,n,s,i]}}function tA(){const{x:e,y:t,width:n,height:s,parentDimensions:[i,r],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(i/r),s*(r/i)];case 180:return[1-e,1-t,n,s];case 270:return[t,1-e,n*(i/r),s*(r/i)];default:return[e,t,n,s]}}function nA(e){if([this.x,this.y,this.width,this.height]=rp(XC,this,eA).call(this,e),this.div){this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function sA(){const{x:e,y:t,width:n,height:s,rotation:i,parentRotation:r,parentDimensions:[a,o]}=this;switch((4*i+r)/90){case 1:return[1-t-s,e,s,n];case 2:return[1-e-n,1-t-s,n,s];case 3:return[t,1-e-n,s,n];case 4:return[e,t-n*(a/o),s*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),s*(o/a)];case 6:return[1-e-s*(o/a),1-t,s*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-s*(o/a),n*(a/o),s*(o/a)];case 8:return[e-n,t-s,n,s];case 9:return[1-t,e-n,s,n];case 10:return[1-e,1-t,n,s];case 11:return[t-s,1-e,s,n];case 12:return[e-s*(o/a),t,s*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-s*(o/a),n*(a/o),s*(o/a)];case 14:return[1-e,1-t-n*(a/o),s*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),s*(o/a)];default:return[e,t,n,s]}}jp=YC,Ee(YC,"_currentDrawId",-1),Ee(YC,"_currentParent",null);var iA={_:null},rA={_:null},aA={_:null},oA={_:NaN},lA={_:null},cA={_:null},dA={_:NaN};Ee(YC,"_INNER_MARGIN",3);var uA=new WeakMap,hA=new WeakMap,mA=new WeakMap,pA=new WeakMap,fA=new WeakMap,gA=new WeakMap,vA=new WeakMap,xA=new WeakMap,bA=new WeakMap,yA=new WeakMap,wA=new WeakMap,jA=new WeakSet;class _A{constructor(e,t,n,s,i,r){sp(this,jA),ip(this,uA,new Float64Array(6)),ip(this,hA,void 0),ip(this,mA,void 0),ip(this,pA,void 0),ip(this,fA,void 0),ip(this,gA,void 0),ip(this,vA,""),ip(this,xA,0),ip(this,bA,new OA),ip(this,yA,void 0),ip(this,wA,void 0),lp(yA,this,n),lp(wA,this,s),lp(pA,this,i),lp(fA,this,r),[e,t]=rp(jA,this,NA).call(this,e,t);const a=lp(hA,this,[NaN,NaN,NaN,NaN,e,t]);lp(gA,this,[e,t]),lp(mA,this,[{line:a,points:op(gA,this)}]),op(uA,this).set(a,0)}updateProperty(e,t){"stroke-width"===e&&lp(fA,this,t)}isEmpty(){return!op(mA,this)||0===op(mA,this).length}isCancellable(){return op(gA,this).length<=10}add(e,t){[e,t]=rp(jA,this,NA).call(this,e,t);const[n,s,i,r]=op(uA,this).subarray(2,6),a=e-i,o=t-r;return Math.hypot(op(yA,this)*a,op(wA,this)*o)<=2?null:(op(gA,this).push(e,t),isNaN(n)?(op(uA,this).set([i,r,e,t],2),op(hA,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(op(uA,this)[0])&&op(hA,this).splice(6,6),op(uA,this).set([n,s,i,r,e,t],0),op(hA,this).push(...Gk.createBezierPoints(n,s,i,r,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===op(gA,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,i){lp(yA,this,n),lp(wA,this,s),lp(pA,this,i),[e,t]=rp(jA,this,NA).call(this,e,t);const r=lp(hA,this,[NaN,NaN,NaN,NaN,e,t]);lp(gA,this,[e,t]);const a=op(mA,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),op(mA,this).push({line:r,points:op(gA,this)}),op(uA,this).set(r,0),lp(xA,this,0),this.toSVGPath(),null}getLastElement(){return op(mA,this).at(-1)}setLastElement(e){return op(mA,this)?(op(mA,this).push(e),lp(hA,this,e.line),lp(gA,this,e.points),lp(xA,this,0),{path:{d:this.toSVGPath()}}):op(bA,this).setLastElement(e)}removeLastElement(){if(!op(mA,this))return op(bA,this).removeLastElement();op(mA,this).pop(),lp(vA,this,"");for(let e=0,t=op(mA,this).length;e<t;e++){const{line:t,points:n}=op(mA,this)[e];lp(hA,this,t),lp(gA,this,n),lp(xA,this,0),this.toSVGPath()}return{path:{d:op(vA,this)}}}toSVGPath(){const e=Gk.svgRound(op(hA,this)[4]),t=Gk.svgRound(op(hA,this)[5]);if(2===op(gA,this).length)return lp(vA,this,"".concat(op(vA,this)," M ").concat(e," ").concat(t," Z")),op(vA,this);if(op(gA,this).length<=6){const n=op(vA,this).lastIndexOf("M");lp(vA,this,"".concat(op(vA,this).slice(0,n)," M ").concat(e," ").concat(t)),lp(xA,this,6)}if(4===op(gA,this).length){const e=Gk.svgRound(op(hA,this)[10]),t=Gk.svgRound(op(hA,this)[11]);return lp(vA,this,"".concat(op(vA,this)," L ").concat(e," ").concat(t)),lp(xA,this,12),op(vA,this)}const n=[];0===op(xA,this)&&(n.push("M ".concat(e," ").concat(t)),lp(xA,this,6));for(let s=op(xA,this),i=op(hA,this).length;s<i;s+=6){const[e,t,i,r,a,o]=op(hA,this).slice(s,s+6).map(Gk.svgRound);n.push("C".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(a," ").concat(o))}return lp(vA,this,op(vA,this)+n.join(" ")),lp(xA,this,op(hA,this).length),op(vA,this)}getOutlines(e,t,n,s){const i=op(mA,this).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),op(bA,this).build(op(mA,this),e,t,n,op(pA,this),op(fA,this),s),lp(uA,this,null),lp(hA,this,null),lp(mA,this,null),lp(vA,this,null),op(bA,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function NA(e,t){return Gk._normalizePoint(e,t,op(yA,this),op(wA,this),op(pA,this))}var kA=new WeakMap,SA=new WeakMap,CA=new WeakMap,AA=new WeakMap,EA=new WeakMap,TA=new WeakMap,PA=new WeakMap,MA=new WeakMap,LA=new WeakMap,RA=new WeakSet;class OA extends Gk{constructor(){super(...arguments),sp(this,RA),ip(this,kA,void 0),ip(this,SA,0),ip(this,CA,void 0),ip(this,AA,void 0),ip(this,EA,void 0),ip(this,TA,void 0),ip(this,PA,void 0),ip(this,MA,void 0),ip(this,LA,void 0)}build(e,t,n,s,i,r,a){lp(EA,this,t),lp(TA,this,n),lp(PA,this,s),lp(MA,this,i),lp(LA,this,r),lp(CA,this,null!==a&&void 0!==a?a:0),lp(AA,this,e),rp(RA,this,FA).call(this)}get thickness(){return op(LA,this)}setLastElement(e){return op(AA,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return op(AA,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of op(AA,this))if(e.push("M".concat(Gk.svgRound(t[4])," ").concat(Gk.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(Gk.svgRound(t[10])," ").concat(Gk.svgRound(t[11])));else for(let n=6,s=t.length;n<s;n+=6){const[s,i,r,a,o,l]=t.subarray(n,n+6).map(Gk.svgRound);e.push("C".concat(s," ").concat(i," ").concat(r," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,s,i,r]=e;const a=[],o=[],[l,c,d,u]=rp(RA,this,IA).call(this);let h,m,p,f,g,v,x,b,y;switch(op(MA,this)){case 0:y=Gk._rescale,h=n,m=s+r,p=i,f=-r,g=n+l*i,v=s+(1-c-u)*r,x=n+(l+d)*i,b=s+(1-c)*r;break;case 90:y=Gk._rescaleAndSwap,h=n,m=s,p=i,f=r,g=n+c*i,v=s+l*r,x=n+(c+u)*i,b=s+(l+d)*r;break;case 180:y=Gk._rescale,h=n+i,m=s,p=-i,f=r,g=n+(1-l-d)*i,v=s+c*r,x=n+(1-l)*i,b=s+(c+u)*r;break;case 270:y=Gk._rescaleAndSwap,h=n+i,m=s+r,p=-i,f=-r,g=n+(1-c-u)*i,v=s+(1-l-d)*r,x=n+(1-c)*i,b=s+(1-l)*r}for(const{line:w,points:j}of op(AA,this))a.push(y(w,h,m,p,f,t?new Array(w.length):null)),o.push(y(j,h,m,p,f,t?new Array(j.length):null));return{lines:a,points:o,rect:[g,v,x,b]}}static deserialize(e,t,n,s,i,r){let{paths:{lines:a,points:o},rotation:l,thickness:c}=r;const d=[];let u,h,m,p,f;switch(l){case 0:f=Gk._rescale,u=-e/n,h=t/s+1,m=1/n,p=-1/s;break;case 90:f=Gk._rescaleAndSwap,u=-t/s,h=-e/n,m=1/s,p=1/n;break;case 180:f=Gk._rescale,u=e/n+1,h=-t/s,m=-1/n,p=1/s;break;case 270:f=Gk._rescaleAndSwap,u=t/s+1,h=e/n+1,m=-1/s,p=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[s,i,r,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,s,i],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(Gk.createBezierPoints(s,i,r,o,t,l),3*(a-2)),[s,i,r,o]=[r,o,t,l]}}}for(let v=0,x=a.length;v<x;v++)d.push({line:f(a[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,m,p),points:f(o[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,m,p)});const g=new this.prototype.constructor;return g.build(d,n,s,1,l,c,i),g}get box(){return op(kA,this)}updateProperty(e,t){return"stroke-width"===e?rp(RA,this,zA).call(this,t):null}updateParentDimensions(e,t){let[n,s]=e;const[i,r]=rp(RA,this,DA).call(this);lp(EA,this,n),lp(TA,this,s),lp(PA,this,t);const[a,o]=rp(RA,this,DA).call(this),l=a-i,c=o-r,d=op(kA,this);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return lp(SA,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return op(kA,this).map(Gk.svgRound).join(" ")}get defaultProperties(){const[e,t]=op(kA,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Gk.svgRound(e)," ").concat(Gk.svgRound(t))}}}get rotationTransform(){const[,,e,t]=op(kA,this);let n=0,s=0,i=0,r=0,a=0,o=0;switch(op(SA,this)){case 90:s=t/e,i=-e/t,a=e;break;case 180:n=-1,r=-1,a=e,o=t;break;case 270:s=-t/e,i=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(s," ").concat(i," ").concat(r," ").concat(Gk.svgRound(a)," ").concat(Gk.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,s,i]=e;const[r,a]=rp(RA,this,DA).call(this),[o,l,c,d]=op(kA,this);if(Math.abs(c-r)<=Gk.PRECISION||Math.abs(d-a)<=Gk.PRECISION){const e=t+s/2-(o+c/2),r=n+i/2-(l+d/2);return{path:{"transform-origin":"".concat(Gk.svgRound(t)," ").concat(Gk.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(r,")")}}}const u=(s-2*r)/(c-2*r),h=(i-2*a)/(d-2*a),m=c/s,p=d/i;return{path:{"transform-origin":"".concat(Gk.svgRound(o)," ").concat(Gk.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(m," ").concat(p,") ")+"translate(".concat(Gk.svgRound(r)," ").concat(Gk.svgRound(a),") scale(").concat(u," ").concat(h,") ")+"translate(".concat(Gk.svgRound(-r)," ").concat(Gk.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,s,i]=e;const[r,a]=rp(RA,this,DA).call(this),o=op(kA,this),[l,c,d,u]=o;if(o[0]=t,o[1]=n,o[2]=s,o[3]=i,Math.abs(d-r)<=Gk.PRECISION||Math.abs(u-a)<=Gk.PRECISION){const e=t+s/2-(l+d/2),r=n+i/2-(c+u/2);for(const{line:t,points:n}of op(AA,this))Gk._translate(t,e,r,t),Gk._translate(n,e,r,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Gk.svgRound(t)," ").concat(Gk.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(s-2*r)/(d-2*r),m=(i-2*a)/(u-2*a),p=-h*(l+r)+t+r,f=-m*(c+a)+n+a;if(1!==h||1!==m||0!==p||0!==f)for(const{line:g,points:v}of op(AA,this))Gk._rescale(g,p,f,h,m,g),Gk._rescale(v,p,f,h,m,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Gk.svgRound(t)," ").concat(Gk.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,s]=e;const[i,r]=t,a=op(kA,this),o=n-a[0],l=s-a[1];if(op(EA,this)===i&&op(TA,this)===r)for(const{line:c,points:d}of op(AA,this))Gk._translate(c,o,l,c),Gk._translate(d,o,l,d);else{const e=op(EA,this)/i,t=op(TA,this)/r;lp(EA,this,i),lp(TA,this,r);for(const{line:n,points:s}of op(AA,this))Gk._rescale(n,o,l,e,t,n),Gk._rescale(s,o,l,e,t,s);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Gk.svgRound(n)," ").concat(Gk.svgRound(s))}}}get defaultSVGProperties(){const e=op(kA,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Gk.svgRound(e[0])," ").concat(Gk.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function DA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:op(LA,this);const t=op(CA,this)+e/2*op(PA,this);return op(MA,this)%180===0?[t/op(EA,this),t/op(TA,this)]:[t/op(TA,this),t/op(EA,this)]}function IA(){const[e,t,n,s]=op(kA,this),[i,r]=rp(RA,this,DA).call(this,0);return[e+i,t+r,n-2*i,s-2*r]}function FA(){const e=lp(kA,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of op(AA,this)){if(s.length<=12){for(let t=4,n=s.length;t<n;t+=6)Sf.pointBoundingBox(s[t],s[t+1],e);continue}let t=s[4],n=s[5];for(let i=6,r=s.length;i<r;i+=6){const[r,a,o,l,c,d]=s.subarray(i,i+6);Sf.bezierBoundingBox(t,n,r,a,o,l,c,d,e),t=c,n=d}}const[t,n]=rp(RA,this,DA).call(this);e[0]=Lf(e[0]-t,0,1),e[1]=Lf(e[1]-n,0,1),e[2]=Lf(e[2]+t,0,1),e[3]=Lf(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function zA(e){const[t,n]=rp(RA,this,DA).call(this);lp(LA,this,e);const[s,i]=rp(RA,this,DA).call(this),[r,a]=[s-t,i-n],o=op(kA,this);return o[0]-=r,o[1]-=a,o[2]+=2*r,o[3]+=2*a,o}class BA extends GC{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:rb._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new BA(this._viewParameters);return e.updateAll(this),e}}var WA=new WeakSet;class HA extends YC{constructor(e){super(Pe(Pe({},e),{},{name:"inkEditor"})),sp(this,WA),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){rb.initialize(e,t),this._defaultDrawingOptions=new BA(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return pf(this,"typesMap",new Map([[Fp.INK_THICKNESS,"stroke-width"],[Fp.INK_COLOR,"stroke"],[Fp.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,s,i){return new _A(e,t,n,s,i,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,s,i,r){return OA.deserialize(e,t,n,s,i,r)}static async deserialize(e,t,n){let s=null;if(e instanceof ck){const{data:{inkLists:t,rect:n,rotation:i,id:r,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c},parent:{page:{pageNumber:d}}}=e;s=e={annotationType:Ip.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:d-1,rect:n.slice(0),rotation:i,id:r,deleted:!1,popupRef:c}}const i=await super.deserialize(e,t,n);return i.annotationElementId=e.id||null,i._initialData=s,i}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:s}=e;this._drawingOptions=HA.getDefaultDrawingOptions({stroke:Sf.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":a}}=this,o={annotationType:Ip.INK,color:rb._colorManager.convert(i),opacity:r,thickness:a,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!rp(WA,this,UA).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}}function UA(e){const{color:t,thickness:n,opacity:s,pageIndex:i}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==s||e.pageIndex!==i}Ee(HA,"_type","ink"),Ee(HA,"_editorType",Ip.INK),Ee(HA,"_defaultDrawingOptions",null);class VA extends OA{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class GA{static extractContoursFromText(e,t,n,s,i,r){let{fontFamily:a,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const u=d.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:h,actualBoundingBoxRight:m,actualBoundingBoxAscent:p,actualBoundingBoxDescent:f,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:x}=d.measureText(e),b=1.5,y=Math.ceil(Math.max(Math.abs(h)+Math.abs(m)||0,x)*b),w=Math.ceil(Math.max(Math.abs(p)+Math.abs(f)||200,Math.abs(g)+Math.abs(v)||200)*b);c=new OffscreenCanvas(y,w),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=u,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,y,w),d.fillStyle="black",d.fillText(e,.5*y/2,1.5*w/2);const j=rp(GA,this,eE).call(this,d.getImageData(0,0,y,w).data),_=rp(GA,this,ZA).call(this,j),N=rp(GA,this,tE).call(this,_),k=rp(GA,this,YA).call(this,j,y,w,N);return this.processDrawnLines({lines:{curves:k,width:y,height:w},pageWidth:n,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,i){const[r,a,o]=rp(GA,this,nE).call(this,e),[l,c]=rp(GA,this,JA).call(this,r,a,o,Math.hypot(a,o)*rp(GA,this,sE)._.sigmaSFactor,rp(GA,this,sE)._.sigmaR,rp(GA,this,sE)._.kernelSize),d=rp(GA,this,tE).call(this,c),u=rp(GA,this,YA).call(this,l,a,o,d);return this.processDrawnLines({lines:{curves:u,width:a,height:o},pageWidth:t,pageHeight:n,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:s,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:o,areContours:l}=e;r%180!==0&&([s,i]=[i,s]);const{curves:c,width:d,height:u}=n,h=null!==(t=n.thickness)&&void 0!==t?t:0,m=[],p=Math.min(s/d,i/u),f=p/s,g=p/i,v=[];for(const{points:b}of c){const e=o?rp(GA,this,$A).call(this,b):b;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),s=new Float32Array(3*(2===t?2:t-2));if(m.push({line:s,points:n}),2===t){n[0]=e[0]*f,n[1]=e[1]*g,s.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[i,r,a,l]=e;i*=f,r*=g,a*=f,l*=g,n.set([i,r,a,l],0),s.set([NaN,NaN,NaN,NaN,i,r],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*f,c=n[o+1]=e[o+1]*g;s.set(Gk.createBezierPoints(i,r,a,l,t,c),3*(o-2)),[i,r,a,l]=[a,l,t,c]}}if(0===m.length)return null;const x=l?new VA:new OA;return x.build(m,s,i,1,r,l?0:h,a),{outline:x,newCurves:v,areContours:l,thickness:h,width:d,height:u}}static async compressSignature(e){let t,{outlines:n,areContours:s,thickness:i,width:r,height:a}=e,o=1/0,l=-1/0,c=0;for(const x of n){c+=x.length;for(let e=2,t=x.length;e<t;e++){const t=x[e]-x[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const d=n.length,u=8+3*d,h=new Uint32Array(u);let m=0;h[m++]=u*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*t.BYTES_PER_ELEMENT,h[m++]=0,h[m++]=r,h[m++]=a,h[m++]=s?0:1,h[m++]=Math.max(0,Math.floor(null!==i&&void 0!==i?i:0)),h[m++]=d,h[m++]=t.BYTES_PER_ELEMENT;for(const x of n)h[m++]=x.length-2,h[m++]=x[0],h[m++]=x[1];const p=new CompressionStream("deflate-raw"),f=p.writable.getWriter();await f.ready,f.write(h);const g=t.prototype.constructor;for(const x of n){const e=new g(x.length-2);for(let t=2,n=x.length;t<n;t++)e[t-2]=x[t]-x[t-2];f.write(e)}f.close();const v=await new Response(p.readable).arrayBuffer();return Rf(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):_f(atob(a))),{readable:c,writable:d}=new DecompressionStream("deflate-raw"),u=d.getWriter();await u.ready,u.write(l).then(async()=>{await u.ready,await u.close()}).catch(()=>{});let h=null,m=0;var t,n=!1,s=!1;try{for(var i,r=function(e){var t,n,s,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,s=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(s&&null!=(t=e[s]))return new cp(t.call(e));n="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(i=await r.next()).done;n=!1){const e=i.value;h||(h=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),h.set(e,m),m+=e.length}}catch(o){s=!0,t=o}finally{try{n&&null!=r.return&&await r.return()}finally{if(s)throw t}}const p=new Uint32Array(h.buffer,0,h.length>>2),f=p[1];if(0!==f)throw new Error("Invalid version: ".concat(f));const g=p[2],v=p[3],x=0===p[4],b=p[5],y=p[6],w=p[7],j=[],_=(8+3*y)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(w){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(h.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(h.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(h.buffer,_)}m=0;for(let e=0;e<y;e++){const t=p[3*e+8],n=new Float32Array(t+2);j.push(n);for(let s=0;s<2;s++)n[s]=p[3*e+8+s+1];for(let e=0;e<t;e++)n[e+2]=n[e]+N[m++]}return{areContours:x,thickness:b,outlines:j,width:g,height:v}}catch(OP){return cf("decompressSignature: ".concat(OP)),null}var a}}function qA(e,t,n,s){return s-=t,0===(n-=e)?s>0?0:4:1===n?s+6:2-s}function KA(e,t,n,s,i,r,a){const o=rp(_p,this,qA).call(this,n,s,i,r);for(let l=0;l<8;l++){const i=(-l+o-a+16)%8;if(0!==e[(n+rp(_p,this,iE)._[2*i])*t+(s+rp(_p,this,iE)._[2*i+1])])return i}return-1}function XA(e,t,n,s,i,r,a){const o=rp(_p,this,qA).call(this,n,s,i,r);for(let l=0;l<8;l++){const i=(l+o+a+16)%8;if(0!==e[(n+rp(_p,this,iE)._[2*i])*t+(s+rp(_p,this,iE)._[2*i+1])])return i}return-1}function YA(e,t,n,s){const i=e.length,r=new Int32Array(i);for(let c=0;c<i;c++)r[c]=e[c]<=s?1:0;for(let c=1;c<n-1;c++)r[c*t]=r[c*t+t-1]=0;for(let c=0;c<t;c++)r[c]=r[t*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,s=r[n];if(0===s)continue;let i=c,d=e;if(1===s&&0===r[n-1])o+=1,d-=1;else{if(!(s>=1&&0===r[n+1])){1!==s&&(a=Math.abs(s));continue}o+=1,d+=1,s>1&&(a=s)}const u=[e,c],h=d===e+1,m={isHole:h,points:u,id:o,parent:0};let p;l.push(m);for(const e of l)if(e.id===a){p=e;break}p?p.isHole?m.parent=h?p.parent:a:m.parent=h?a:p.parent:m.parent=h?a:0;const f=rp(_p,this,KA).call(this,r,t,c,e,i,d,0);if(-1===f){r[n]=-o,1!==r[n]&&(a=Math.abs(r[n]));continue}let g=rp(_p,this,iE)._[2*f],v=rp(_p,this,iE)._[2*f+1];const x=c+g,b=e+v;i=x,d=b;let y=c,w=e;for(;;){const s=rp(_p,this,XA).call(this,r,t,y,w,i,d,1);g=rp(_p,this,iE)._[2*s],v=rp(_p,this,iE)._[2*s+1];const l=y+g,h=w+v;u.push(h,l);const m=y*t+w;if(0===r[m+1]?r[m]=-o:1===r[m]&&(r[m]=o),l===c&&h===e&&y===x&&w===b){1!==r[n]&&(a=Math.abs(r[n]));break}i=y,d=w,y=l,w=h}}}return l}function QA(e,t,n,s){if(n-t<=4){for(let i=t;i<n-2;i+=2)s.push(e[i],e[i+1]);return}const i=e[t],r=e[t+1],a=e[n-4]-i,o=e[n-3]-r,l=Math.hypot(a,o),c=a/l,d=o/l,u=c*r-d*i,h=o/a,m=1/l,p=Math.atan(h),f=Math.cos(p),g=Math.sin(p),v=m*(Math.abs(f)+Math.abs(g)),x=m*(1-v+v**2),b=Math.max(Math.atan(Math.abs(g+f)*x),Math.atan(Math.abs(g-f)*x));let y=0,w=t;for(let j=t+2;j<n-2;j+=2){const t=Math.abs(u-c*e[j+1]+d*e[j]);t>y&&(w=j,y=t)}y>(l*b)**2?(rp(_p,this,QA).call(this,e,t,w+2,s),rp(_p,this,QA).call(this,e,w,n,s)):s.push(i,r)}function $A(e){const t=[],n=e.length;return rp(_p,this,QA).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function JA(e,t,n,s,i,r){const a=new Float32Array(r**2),o=-2*s**2,l=r>>1;for(let p=0;p<r;p++){const e=(p-l)**2;for(let t=0;t<r;t++)a[p*r+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*i**2;for(let p=0;p<256;p++)c[p]=Math.exp(p**2/d);const u=e.length,h=new Uint8Array(u),m=new Uint32Array(256);for(let p=0;p<n;p++)for(let s=0;s<t;s++){const i=p*t+s,o=e[i];let d=0,u=0;for(let h=0;h<r;h++){const i=p+h-l;if(!(i<0||i>=n))for(let n=0;n<r;n++){const m=s+n-l;if(m<0||m>=t)continue;const p=e[i*t+m],f=a[h*r+n]*c[Math.abs(p-o)];d+=p*f,u+=f}}m[h[i]=Math.round(d/u)]++}return[h,m]}function ZA(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function eE(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let a=0,o=n.length;a<o;a++){if(0===e[3+(a<<2)]){s=n[a]=255;continue}const t=n[a]=e[a<<2];t>s&&(s=t),t<i&&(i=t)}const r=255/(s-i);for(let a=0;a<t;a++)n[a]=(n[a]-i)*r;return n}function tE(e){let t,n=-1/0,s=-1/0;const i=e.findIndex(e=>0!==e);let r=i,a=i;for(t=i;t<256;t++){const i=e[t];i>n&&(t-r>s&&(s=t-r,a=t-1),n=i,r=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function nE(e){const t=e,{width:n,height:s}=e,{maxDim:i}=rp(_p,this,sE)._;let r=n,a=s;if(n>i||s>i){let o=n,l=s,c=Math.log2(Math.max(n,s)/i);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){r=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(r,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,r,a),o=r,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(i/r,i/a);r=Math.round(r*u),a=Math.round(a*u)}const o=new OffscreenCanvas(r,a).getContext("2d",{willReadFrequently:!0});o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,r,a);const l=o.getImageData(0,0,r,a).data;return[rp(_p,this,eE).call(this,l),r,a]}_p=GA;var sE={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},iE={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class rE extends GC{constructor(){super(),super.updateProperties({fill:rb._defaultLineColor,"stroke-width":0})}clone(){const e=new rE;return e.updateAll(this),e}}class aE extends BA{constructor(e){super(e),super.updateProperties({stroke:rb._defaultLineColor,"stroke-width":1})}clone(){const e=new aE(this._viewParameters);return e.updateAll(this),e}}var oE=new WeakMap,lE=new WeakMap,cE=new WeakMap,dE=new WeakMap;class uE extends YC{constructor(e){super(Pe(Pe({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),ip(this,oE,!1),ip(this,lE,null),ip(this,cE,null),ip(this,dE,null),this._willKeepAspectRatio=!0,lp(cE,this,e.signatureData||null),lp(lE,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){rb.initialize(e,t),this._defaultDrawingOptions=new rE,this._defaultDrawnSignatureOptions=new aE(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return pf(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!op(lE,this)}}static computeTelemetryFinalData(e){var t,n;const s=e.get("hasDescription");return{hasAltText:null!==(t=s.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=s.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(op(cE,this)){const{lines:e,mustSmooth:t,areContours:n,description:s,uuid:i,heightInPage:r}=op(cE,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=GA.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:uE._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,r,s,i)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){lp(dE,this,e),this.addEditToolbar()}getUuid(){return op(dE,this)}get description(){return op(lE,this)}set description(e){lp(lE,this,e),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:s,height:i}=op(cE,this),r=Math.max(s,i);return{areContours:t,outline:GA.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:s,height:i},pageWidth:r,pageHeight:r,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&null!==op(lE,this)&&(await e.addEditSignatureButton(this._uiManager.signatureManager,op(dE,this),op(lE,this)),e.show()),e):null}addSignature(e,t,n,s){const{x:i,y:r}=this,{outline:a}=lp(cE,this,e);let o;lp(oE,this,a instanceof VA),lp(lE,this,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),op(oE,this)?o=uE.getDefaultDrawingOptions():(o=uE._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[l,c]=this.parentDimensions,[,d]=this.pageDimensions;let u=t/d;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(l*this.width,c*this.height),this.x=i,this.y=r,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return GA.process(e,t,n,s,uE._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:i}=this.parent.viewport;return GA.extractContoursFromText(e,t,n,s,i,uE._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return GA.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:uE._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=uE.getDefaultDrawingOptions():(this._drawingOptions=uE._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n,rect:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,r={annotationType:Ip.SIGNATURE,isSignature:!0,areContours:op(oE,this),color:[0,0,0],thickness:op(oE,this)?0:i,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(r.paths={lines:t,points:n},r.uuid=op(dE,this),r.isCopy=!0):r.lines=t,op(lE,this)&&(r.accessibilityData={type:"Figure",alt:op(lE,this)}),r}static deserializeDraw(e,t,n,s,i,r){return r.areContours?VA.deserialize(e,t,n,s,i,r):OA.deserialize(e,t,n,s,i,r)}static async deserialize(e,t,n){var s;const i=await super.deserialize(e,t,n);return lp(oE,i,e.areContours),lp(lE,i,(null===(s=e.accessibilityData)||void 0===s?void 0:s.alt)||""),lp(dE,i,e.uuid),i}}Ee(uE,"_type","signature"),Ee(uE,"_editorType",Ip.SIGNATURE),Ee(uE,"_defaultDrawingOptions",null);var hE=new WeakMap,mE=new WeakMap,pE=new WeakMap,fE=new WeakMap,gE=new WeakMap,vE=new WeakMap,xE=new WeakMap,bE=new WeakMap,yE=new WeakMap,wE=new WeakMap,jE=new WeakMap,_E=new WeakSet;class NE extends rb{constructor(e){super(Pe(Pe({},e),{},{name:"stampEditor"})),sp(this,_E),ip(this,hE,null),ip(this,mE,null),ip(this,pE,null),ip(this,fE,null),ip(this,gE,null),ip(this,vE,""),ip(this,xE,null),ip(this,bE,!1),ip(this,yE,null),ip(this,wE,!1),ip(this,jE,!1),lp(fE,this,e.bitmapUrl),lp(gE,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){rb.initialize(e,t)}static isHandlingMimeForPasting(e){return Zf.includes(e)}static paste(e,t){t.pasteEditor({mode:Ip.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const s=e.get("hasAltText");return{hasAltText:null!==(t=s.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=s.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:i,height:r}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:s,width:i,height:r,channels:s.length/(i*r)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;op(mE,this)&&(lp(hE,this,null),this._uiManager.imageManager.deleteId(op(mE,this)),null===(e=op(xE,this))||void 0===e||e.remove(),lp(xE,this,null),op(yE,this)&&(clearTimeout(op(yE,this)),lp(yE,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(op(mE,this)&&null===op(xE,this)&&rp(_E,this,CE).call(this),this.isAttachedToDOM||this.parent.add(this))):op(mE,this)&&rp(_E,this,CE).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(op(pE,this)||op(hE,this)||op(fE,this)||op(gE,this)||op(mE,this)||op(bE,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),op(bE,this)||(op(hE,this)?rp(_E,this,AE).call(this):rp(_E,this,CE).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(lp(mE,this,n),s&&lp(hE,this,s),lp(bE,this,!1),rp(_E,this,AE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==op(yE,this)&&clearTimeout(op(yE,this));lp(yE,this,setTimeout(()=>{lp(yE,this,null),rp(_E,this,TE).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:s,height:i}=op(hE,this),r=new Jf;let a=op(hE,this),o=s,l=i,c=null;if(t){var d,u;if(s>t||i>t){const e=Math.min(t/s,t/i);o=Math.floor(s*e),l=Math.floor(i*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*r.sx),n=c.height=Math.ceil(l*r.sy);op(wE,this)||(a=rp(_E,this,EE).call(this,e,n));const h=c.getContext("2d");h.filter=this._uiManager.hcmFilter;let m="white",p="#cfcfd8";"none"!==this._uiManager.hcmFilter?p="black":null!==(d=(u=window).matchMedia)&&void 0!==d&&d.call(u,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",p="#42414d");const f=15,g=f*r.sx,v=f*r.sy,x=new OffscreenCanvas(2*g,2*v),b=x.getContext("2d");b.fillStyle=m,b.fillRect(0,0,2*g,2*v),b.fillStyle=p,b.fillRect(0,0,g,v),b.fillRect(g,v,g,v),h.fillStyle=h.createPattern(x,"repeat"),h.fillRect(0,0,e,n),h.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let h=null;if(n){let t,n;if(r.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=op(hE,this),s>e||i>e){const r=Math.min(e/s,e/i);t=Math.floor(s*r),n=Math.floor(i*r),op(wE,this)||(a=rp(_E,this,EE).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),h={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:h}}static async deserialize(e,t,n){let s=null,i=!1;if(e instanceof fk){var r;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:d},container:u,parent:{page:{pageNumber:h}},canvas:m}=e;let p,f;m?(delete e.canvas,({id:p,bitmap:f}=n.imageManager.getFromCanvas(u.id,m)),m.remove()):(i=!0,e._hasNoCanvas=!0);const g=(null===(r=await t._structTree.getAriaAttributes("".concat(Mf).concat(l)))||void 0===r?void 0:r.get("aria-label"))||"";s=e={annotationType:Ip.STAMP,bitmapId:p,bitmap:f,pageIndex:h-1,rect:a.slice(0),rotation:o,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:g},isSvg:!1,structParent:c,popupRef:d}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=e;i?(n.addMissingCanvas(e.id,a),lp(bE,a,!0)):d&&n.imageManager.isValidId(d)?(lp(mE,a,d),l&&lp(hE,a,l)):lp(fE,a,c),lp(wE,a,u);const[m,p]=a.pageDimensions;return a.width=(o[2]-o[0])/m,a.height=(o[3]-o[1])/p,a.annotationElementId=e.id||null,h&&(a.altTextData=h),a._initialData=s,lp(jE,a,!!s),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Ip.STAMP,bitmapId:op(mE,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:op(wE,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=rp(_E,this,PE).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:i}=this.serializeAltText(!1);if(!s&&i&&(n.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const e=rp(_E,this,ME).call(this,n);if(e.isSame)return null;var r;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(r=this._initialData.structParent)&&void 0!==r?r:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const a=op(wE,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(op(mE,this))){if(op(wE,this)){const e=t.stamps.get(op(mE,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=rp(_E,this,PE).call(this,!1))}}else t.stamps.set(op(mE,this),{area:a,serialized:n}),n.bitmap=rp(_E,this,PE).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function kE(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(lp(hE,this,e.bitmap),t||(lp(mE,this,e.id),lp(wE,this,e.isSvg)),e.file&&lp(vE,this,e.file.name),rp(_E,this,AE).call(this)):this.remove()}function SE(){if(lp(pE,this,null),this._uiManager.enableWaiting(!1),op(xE,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&op(hE,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&op(hE,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function CE(){if(op(mE,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(op(mE,this)).then(e=>rp(_E,this,kE).call(this,e,!0)).finally(()=>rp(_E,this,SE).call(this));if(op(fE,this)){const e=op(fE,this);return lp(fE,this,null),this._uiManager.enableWaiting(!0),void lp(pE,this,this._uiManager.imageManager.getFromUrl(e).then(e=>rp(_E,this,kE).call(this,e)).finally(()=>rp(_E,this,SE).call(this)))}if(op(gE,this)){const e=op(gE,this);return lp(gE,this,null),this._uiManager.enableWaiting(!0),void lp(pE,this,this._uiManager.imageManager.getFromFile(e).then(e=>rp(_E,this,kE).call(this,e)).finally(()=>rp(_E,this,SE).call(this)))}const e=document.createElement("input");e.type="file",e.accept=Zf.join(",");const t=this._uiManager._signal;lp(pE,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),rp(_E,this,kE).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>rp(_E,this,SE).call(this))),e.click()}function AE(){var e;const{div:t}=this;let{width:n,height:s}=op(hE,this);const[i,r]=this.pageDimensions,a=.75;if(this.width)n=this.width*i,s=this.height*r;else if(n>a*i||s>a*r){const e=Math.min(a*i/n,a*r/s);n*=e,s*=e}const[o,l]=this.parentDimensions;this.setDims(n*o/i,s*l/r),this._uiManager.enableWaiting(!1);const c=lp(xE,this,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/i,this.height=s/r,null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),rp(_E,this,TE).call(this),op(jE,this)||(this.parent.addUndoableEditor(this),lp(jE,this,!0)),this._reportTelemetry({action:"inserted_image"}),op(vE,this)&&this.div.setAttribute("aria-description",op(vE,this))}function EE(e,t){const{width:n,height:s}=op(hE,this);let i=n,r=s,a=op(hE,this);for(;i>2*e||r>2*t;){const n=i,s=r;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(i,r);o.getContext("2d").drawImage(a,0,0,n,s,0,0,i,r),a=o.transferToImageBitmap()}return a}function TE(){const[e,t]=this.parentDimensions,{width:n,height:s}=this,i=new Jf,r=Math.ceil(n*e*i.sx),a=Math.ceil(s*t*i.sy),o=op(xE,this);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const l=op(wE,this)?op(hE,this):rp(_E,this,EE).call(this,r,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,r,a)}function PE(e){if(e){if(op(wE,this)){const e=this._uiManager.imageManager.getSvgUrl(op(mE,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=op(hE,this));return e.getContext("2d").drawImage(op(hE,this),0,0),e.toDataURL()}if(op(wE,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Df.PDF_TO_CSS_UNITS),s=Math.round(this.height*t*Df.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,s);return i.getContext("2d").drawImage(op(hE,this),0,0,op(hE,this).width,op(hE,this).height,0,0,n,s),i.transferToImageBitmap()}return structuredClone(op(hE,this))}function ME(e){var t;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===n,r=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}Ee(NE,"_type","stamp"),Ee(NE,"_editorType",Ip.STAMP);var LE=new WeakMap,RE=new WeakMap,OE=new WeakMap,DE=new WeakMap,IE=new WeakMap,FE=new WeakMap,zE=new WeakMap,BE=new WeakMap,WE=new WeakMap,HE=new WeakMap,UE=new WeakMap,VE=new WeakMap,GE=new WeakMap,qE=new WeakMap,KE=new WeakSet;class XE{constructor(e){let{uiManager:t,pageIndex:n,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;sp(this,KE),ip(this,LE,void 0),ip(this,RE,!1),ip(this,OE,null),ip(this,DE,null),ip(this,IE,null),ip(this,FE,new Map),ip(this,zE,!1),ip(this,BE,!1),ip(this,WE,!1),ip(this,HE,null),ip(this,UE,null),ip(this,VE,null),ip(this,GE,null),ip(this,qE,void 0);const u=[...eT._.values()];if(!XE._initialized){XE._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),lp(qE,this,t),this.pageIndex=n,this.div=s,lp(LE,this,r),lp(OE,this,a),this.viewport=c,lp(VE,this,l),this.drawLayer=o,this._structTree=i,op(qE,this).addLayer(this)}get isEmpty(){return 0===op(FE,this).size}get isInvisible(){return this.isEmpty&&op(qE,this).getMode()===Ip.NONE}updateToolbar(e){op(qE,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:op(qE,this).getMode();switch(rp(KE,this,ZE).call(this),e){case Ip.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Ip.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ip.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of eT._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=op(VE,this))||void 0===t?void 0:t.div)}setEditingState(e){op(qE,this).setEditingState(e)}addCommands(e){op(qE,this).addCommands(e)}cleanUndoStack(e){op(qE,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=op(OE,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){lp(WE,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of op(FE,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(op(qE,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!op(OE,this))return void lp(WE,this,!1);const t=op(OE,this).getEditableAnnotations();for(const n of t){if(n.hide(),op(qE,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}lp(WE,this,!1)}disable(){lp(BE,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of op(FE,this).values()){var n;i.disableEditing(),i.annotationElementId&&(null===i.serialize()?(t.set(i.annotationElementId,i),null===(n=this.getEditableAnnotation(i.annotationElementId))||void 0===n||n.show(),i.remove()):e.set(i.annotationElementId,i))}if(op(OE,this)){const n=op(OE,this).getEditableAnnotations();for(const s of n){const{id:n}=s.data;if(op(qE,this).isDeletedAnnotationElement(n))continue;let i=t.get(n);i?(i.resetAnnotationElement(s),i.show(!1),s.show()):(i=e.get(n),i&&(op(qE,this).addChangedExistingAnnotation(i),i.renderAnnotationElement(s)&&i.show(!1)),s.show())}}rp(KE,this,ZE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of eT._.values())s.remove("".concat(i._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),lp(BE,this,!1)}getEditableAnnotation(e){var t;return(null===(t=op(OE,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){op(qE,this).getActive()!==e&&op(qE,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=op(VE,this))&&void 0!==e&&e.div&&!op(GE,this)){lp(GE,this,new AbortController);const e=op(qE,this).combinedSignal(op(GE,this));op(VE,this).div.addEventListener("pointerdown",rp(KE,this,YE).bind(this),{signal:e}),op(VE,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=op(VE,this))&&void 0!==e&&e.div&&op(GE,this)&&(op(GE,this).abort(),lp(GE,this,null),op(VE,this).div.classList.remove("highlighting"))}enableClick(){if(op(DE,this))return;lp(DE,this,new AbortController);const e=op(qE,this).combinedSignal(op(DE,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=op(DE,this))||void 0===e||e.abort(),lp(DE,this,null)}attach(e){op(FE,this).set(e.id,e);const{annotationElementId:t}=e;t&&op(qE,this).isDeletedAnnotationElement(t)&&op(qE,this).removeDeletedAnnotationElement(e)}detach(e){var t;op(FE,this).delete(e.id),null===(t=op(LE,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!op(BE,this)&&e.annotationElementId&&op(qE,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),op(qE,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(op(qE,this).addDeletedAnnotationElement(e.annotationElementId),rb.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),op(qE,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!op(WE,this)),op(qE,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!op(IE,this)&&(e._focusEventsAllowed=!1,lp(IE,this,setTimeout(()=>{lp(IE,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:op(qE,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=op(LE,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return op(qE,this).getId()}combinedSignal(e){return op(qE,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=ap(KE,this,QE))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await op(qE,this).updateMode(e.mode);const{offsetX:n,offsetY:s}=rp(KE,this,JE).call(this),i=this.getNextId(),r=rp(KE,this,$E).call(this,Pe({parent:this,id:i,x:n,y:s,uiManager:op(qE,this),isCentered:!0},t));r&&this.add(r)}async deserialize(e){var t,n;return await(null===(t=eT._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,op(qE,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getNextId(),i=rp(KE,this,$E).call(this,Pe({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:op(qE,this),isCentered:t},n));return i&&this.add(i),i}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(rp(KE,this,JE).call(this),!0,e)}setSelected(e){op(qE,this).setSelected(e)}toggleSelected(e){op(qE,this).toggleSelected(e)}unselect(e){op(qE,this).unselect(e)}pointerup(e){var t;const{isMac:n}=Nf.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!op(zE,this))return;if(lp(zE,this,!1),null!==(t=ap(KE,this,QE))&&void 0!==t&&t.isDrawer&&ap(KE,this,QE).supportMultipleDrawings)return;if(!op(RE,this))return void lp(RE,this,!0);const s=op(qE,this).getMode();s!==Ip.STAMP&&s!==Ip.SIGNATURE?this.createAndAddNewEditor(e,!1):op(qE,this).unselectAll()}pointerdown(e){var t;if(op(qE,this).getMode()===Ip.HIGHLIGHT&&this.enableTextSelection(),op(zE,this))return void lp(zE,this,!1);const{isMac:n}=Nf.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(lp(zE,this,!0),null!==(t=ap(KE,this,QE))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const s=op(qE,this).getActive();lp(RE,this,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),op(HE,this))return void ap(KE,this,QE).startDrawing(this,op(qE,this),!1,e);op(qE,this).setCurrentDrawingSession(this),lp(HE,this,new AbortController);const t=op(qE,this).combinedSignal(op(HE,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(lp(UE,this,null),this.commitOrRemove())},{signal:t}),ap(KE,this,QE).startDrawing(this,op(qE,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&lp(UE,this,e))}op(UE,this)&&setTimeout(()=>{var e;null===(e=op(UE,this))||void 0===e||e.focus(),lp(UE,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return op(HE,this)?(op(qE,this).setCurrentDrawingSession(null),op(HE,this).abort(),lp(HE,this,null),lp(UE,this,null),ap(KE,this,QE).endDrawing(e)):null}findNewParent(e,t,n){const s=op(qE,this).findParent(t,n);return null!==s&&s!==this&&(s.changeParent(e),!0)}commitOrRemove(){return!!op(HE,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){op(HE,this)&&ap(KE,this,QE).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=op(qE,this).getActive())||void 0===e?void 0:e.parent)===this&&(op(qE,this).commitOrRemove(),op(qE,this).setActiveEditor(null)),op(IE,this)&&(clearTimeout(op(IE,this)),lp(IE,this,null));for(const n of op(FE,this).values()){var t;null===(t=op(LE,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,op(FE,this).clear(),op(qE,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,$f(this.div,t);for(const n of op(qE,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;op(qE,this).commitOrRemove(),rp(KE,this,ZE).call(this);const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,$f(this.div,{rotation:s}),n!==s)for(const i of op(FE,this).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return op(qE,this).viewParameters.realScale}}function YE(e){op(qE,this).unselectAll();const{target:t}=e;if(t===op(VE,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&op(VE,this).div.contains(t)){const{isMac:t}=Nf.platform;if(0!==e.button||e.ctrlKey&&t)return;op(qE,this).showAllEditors("highlight",!0,!0),op(VE,this).div.classList.add("free"),this.toggleDrawing(),CC.startHighlighting(this,"ltr"===op(qE,this).direction,{target:op(VE,this).div,x:e.x,y:e.y}),op(VE,this).div.addEventListener("pointerup",()=>{op(VE,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:op(qE,this)._signal}),e.preventDefault()}}function QE(e){return eT._.get(op(qE,e).getMode())}function $E(e){const t=ap(KE,this,QE);return t?new t.prototype.constructor(e):null}function JE(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),r=Math.max(0,t),a=(i+Math.min(window.innerWidth,e+n))/2-e,o=(r+Math.min(window.innerHeight,t+s))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function ZE(){for(const e of op(FE,this).values())e.isEmpty()&&e.remove()}Ee(XE,"_initialized",!1);var eT={_:new Map([Ok,HA,NE,CC,uE].map(e=>[e._editorType,e]))},tT=new WeakMap,nT=new WeakMap,sT=new WeakMap,iT=new WeakSet;class rT{constructor(e){let{pageIndex:t}=e;sp(this,iT),ip(this,tT,null),ip(this,nT,new Map),ip(this,sT,new Map),this.pageIndex=t}setParent(e){if(op(tT,this)){if(op(tT,this)!==e){if(op(nT,this).size>0)for(const t of op(nT,this).values())t.remove(),e.append(t);lp(tT,this,e)}}else lp(tT,this,e)}static get _svgFactory(){return pf(this,"_svgFactory",new X_)}draw(e){var t,n;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(dT._=(t=dT._,n=t++,t),n),a=rp(iT,this,oT).call(this),o=rT._svgFactory.createElement("defs");a.append(o);const l=rT._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(r);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),s&&op(sT,this).set(r,l);const d=i?rp(iT,this,lT).call(this,o,c):null,u=rT._svgFactory.createElement("use");return a.append(u),u.setAttribute("href","#".concat(c)),this.updateProperties(a,e),op(nT,this).set(r,a),{id:r,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){var n,s;const i=(dT._=(n=dT._,s=n++,n),s),r=rp(iT,this,oT).call(this),a=rT._svgFactory.createElement("defs");r.append(a);const o=rT._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(i);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=rT._svgFactory.createElement("mask");a.append(e),c="mask_p".concat(this.pageIndex,"_").concat(i),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=rT._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=rT._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=rT._svgFactory.createElement("use");r.append(d),d.setAttribute("href","#".concat(l)),c&&d.setAttribute("mask","url(#".concat(c,")"));const u=d.cloneNode();return r.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,e),op(nT,this).set(i,r),i}finalizeDraw(e,t){op(sT,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:s,rootClass:i,path:r}=t,a="number"===typeof e?op(nT,this).get(e):e;if(a){if(n&&rp(iT,this,cT).call(this,a,n),s&&aT.call(rT,a,s),i){const{classList:e}=a;for(const[t,n]of Object.entries(i))e.toggle(t,n)}if(r){const e=a.firstChild.firstChild;rp(iT,this,cT).call(this,e,r)}}}updateParent(e,t){if(t===this)return;const n=op(nT,this).get(e);n&&(op(tT,t).append(n),op(nT,this).delete(e),op(nT,t).set(e,n))}remove(e){op(sT,this).delete(e),null!==op(tT,this)&&(op(nT,this).get(e).remove(),op(nT,this).delete(e))}destroy(){lp(tT,this,null);for(const e of op(nT,this).values())e.remove();op(nT,this).clear(),op(sT,this).clear()}}function aT(e,t){let[n,s,i,r]=t;const{style:a}=e;a.top="".concat(100*s,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*i,"%"),a.height="".concat(100*r,"%")}function oT(){const e=Np._svgFactory.create(1,1,!0);return op(tT,this).append(e),e.setAttribute("aria-hidden",!0),e}function lT(e,t){const n=Np._svgFactory.createElement("clipPath");e.append(n);const s="clip_".concat(t);n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Np._svgFactory.createElement("use");return n.append(i),i.setAttribute("href","#".concat(t)),i.classList.add("clip"),s}function cT(e,t){for(const[n,s]of Object.entries(t))null===s?e.removeAttribute(n):e.setAttribute(n,s)}Np=rT;var dT={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:PS},globalThis.pdfjsLib={AbortException:wf,AnnotationEditorLayer:XE,AnnotationEditorParamsType:Fp,AnnotationEditorType:Ip,AnnotationEditorUIManager:Mv,AnnotationLayer:kk,AnnotationMode:Dp,AnnotationType:qp,build:"47ad820d9",ColorPicker:eC,createValidAbsoluteUrl:hf,DOMSVGFactory:X_,DrawLayer:rT,FeatureTest:Nf,fetchData:If,getDocument:n_,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Bf(e))return cf('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let i=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch(r){}return i||t},getUuid:Pf,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:s=0}=t;const{width:i,height:r}=e.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Ff({viewBox:a,userUnit:1,scale:n,rotation:s})},GlobalWorkerOptions:Pw,ImageKind:Gp,InvalidPDFException:xf,isDataScheme:Bf,isPdfFile:Wf,isValidExplicitDest:Vb,MathClamp:Lf,noContextMenu:Vf,normalizeUnicode:function(e){return Ef||(Ef=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Tf=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Ef,(e,t,n)=>t?t.normalize("NFKC"):Tf.get(n))},OPS:Zp,OutputScale:Jf,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:d_,PDFDateString:qf,PDFWorker:w_,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Df,RenderingCancelledException:zf,ResponseException:bf,setLayerDimensions:$f,shadow:pf,SignatureExtractor:GA,stopEvent:Gf,SupportedImageMimeTypes:Zf,TextLayer:Hj,TouchManager:Tx,updateUrlHash:mf,Util:Sf,VerbosityLevel:Jp,version:U_,XfaLayer:Y_};const uT=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];function hT(e,t){const n={};for(const s of uT){const i=e[s];i&&(n[s]=t?e=>i(e,t(s)):i)}return n}function mT(e){let t=!1;return{promise:new Promise((n,s)=>{e.then(e=>!t&&n(e)).catch(e=>!t&&s(e))}),cancel(){t=!0}}}function pT(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=pT(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}const fT=function(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=pT(e))&&(s&&(s+=" "),s+=t);return s};var gT="Invariant failed";function vT(e,t){if(!e)throw new Error(gT)}const xT=(0,s.createContext)(null);function bT(e){let{children:t,type:n}=e;return(0,De.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:t})}class yT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return vT(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){vT(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{vT(this.pdfDocument),vT(e),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(e=>{vT(Array.isArray(e),'"'.concat(e,'" is not a valid destination array.'));const t=e[0];new Promise(e=>{vT(this.pdfDocument),t instanceof Object?this.pdfDocument.getPageIndex(t).then(t=>{e(t)}).catch(()=>{vT(!1,'"'.concat(t,'" is not a valid page reference.'))}):"number"===typeof t?e(t):vT(!1,'"'.concat(t,'" is not a valid destination reference.'))}).then(t=>{const n=t+1;vT(this.pdfViewer),vT(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;vT(this.pdfViewer),vT(e>=1&&e<=this.pagesCount,'"'.concat(e,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const wT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},jT="undefined"!==typeof window,_T=jT&&"file:"===window.location.protocol;function NT(e){return function(e){return"undefined"!==typeof e}(e)&&null!==e}function kT(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function ST(e){vT(kT(e));const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}function CT(){return jT&&window.devicePixelRatio||1}const AT="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ET(){dl(!_T,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(AT))}function TT(e){(null===e||void 0===e?void 0:e.cancel)&&e.cancel()}function PT(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function MT(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function LT(){return(0,s.useReducer)(MT,{value:void 0,error:void 0})}var RT=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const{Tm:OT}=e,DT=(e,t)=>{switch(t){case wT.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case wT.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function IT(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const FT=(0,s.forwardRef)(function(e,t){var{children:n,className:i,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:u="Loading PDF\u2026",noData:h="No PDF file specified.",onItemClick:m,onLoadError:p,onLoadProgress:f,onLoadSuccess:g,onPassword:v=DT,onSourceError:x,onSourceSuccess:b,options:y,renderMode:w,rotate:j,scale:_}=e,N=RT(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[k,S]=LT(),{value:C,error:A}=k,[E,T]=LT(),{value:P,error:M}=E,L=(0,s.useRef)(new yT),R=(0,s.useRef)([]),O=(0,s.useRef)(void 0),D=(0,s.useRef)(void 0);l&&l!==O.current&&IT(l)&&(dl(!Md(l,O.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),O.current=l),y&&y!==D.current&&(dl(!Md(y,D.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),D.current=y);const I=(0,s.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:s=n-1}=e;if(m)return void m({dest:t,pageIndex:s,pageNumber:n});const i=R.current[s];i?i.scrollIntoView():dl(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,s.useImperativeHandle)(t,()=>({linkService:L,pages:R,viewer:I}),[]),(0,s.useEffect)(function(){S({type:"RESET"})},[l,S]);const F=(0,s.useCallback)(async()=>{if(!l)return null;if("string"===typeof l){if(kT(l)){return{data:ST(l)}}return ET(),{url:l}}if(l instanceof OT)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(jT&&function(e){return vT(jT),e instanceof Blob}(l)){const e=await function(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(e)})}(l);return{data:e}}if(vT("object"===typeof l),vT(IT(l)),"url"in l&&"string"===typeof l.url){if(kT(l.url)){const{url:e}=l,t=RT(l,["url"]),n=ST(e);return Object.assign({data:n},t)}ET()}return l},[l]);(0,s.useEffect)(()=>{const e=mT(F());return e.promise.then(e=>{S({type:"RESOLVE",value:e})}).catch(e=>{S({type:"REJECT",error:e})}),()=>{TT(e)}},[F,S]),(0,s.useEffect)(()=>{"undefined"!==typeof C&&(!1!==C?b&&b():A&&(dl(!1,A.toString()),x&&x(A)))},[C]),(0,s.useEffect)(function(){T({type:"RESET"})},[T,C]),(0,s.useEffect)(function(){if(!C)return;const e=n_(y?Object.assign(Object.assign({},C),y):C);f&&(e.onProgress=f),v&&(e.onPassword=v);const t=e,n=t.promise.then(e=>{T({type:"RESOLVE",value:e})}).catch(e=>{t.destroyed||T({type:"REJECT",error:e})});return()=>{n.finally(()=>t.destroy())}},[y,T,C]),(0,s.useEffect)(()=>{"undefined"!==typeof P&&(!1!==P?P&&(g&&g(P),R.current=new Array(P.numPages),L.current.setDocument(P)):M&&(dl(!1,M.toString()),p&&p(M)))},[P]),(0,s.useEffect)(function(){L.current.setViewer(I.current),L.current.setExternalLinkRel(a),L.current.setExternalLinkTarget(o)},[a,o]);const z=(0,s.useCallback)((e,t)=>{R.current[e]=t},[]),B=(0,s.useCallback)(e=>{delete R.current[e]},[]),W=(0,s.useMemo)(()=>({imageResourcesPath:d,linkService:L.current,onItemClick:m,pdf:P,registerPage:z,renderMode:w,rotate:j,scale:_,unregisterPage:B}),[d,m,P,z,w,j,_,B]),H=(0,s.useMemo)(()=>hT(N,()=>P),[N,P]);return(0,De.jsx)("div",Object.assign({className:fT("react-pdf__Document",i),ref:c},H,{children:l?void 0===P||null===P?(0,De.jsx)(bT,{type:"loading",children:"function"===typeof u?u():u}):!1===P?(0,De.jsx)(bT,{type:"error",children:"function"===typeof r?r():r}):(0,De.jsx)(xT.Provider,{value:W,children:n}):(0,De.jsx)(bT,{type:"no-data",children:"function"===typeof h?h():h})}))}),zT=FT;function BT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){for(var t=0,s=n;t<s.length;t++){var i=s[t];"function"===typeof i?i(e):i&&(i.current=e)}}}const WT=(0,s.createContext)(null),HT={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},UT=/^H(\d+)$/;function VT(e){return"children"in e}function GT(e){return!!VT(e)&&(1===e.children.length&&0 in e.children&&"id"in e.children[0])}function qT(e){const t={};if(VT(e)){const{role:n}=e,s=n.match(UT);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(function(e){return e in HT}(n)){const e=HT[n];e&&(t.role=e)}}return t}function KT(e){const t={};if(VT(e)){if(void 0!==e.alt&&(t["aria-label"]=e.alt),void 0!==e.lang&&(t.lang=e.lang),GT(e)){const[n]=e.children;if(n){const e=KT(n);return Object.assign(Object.assign({},t),e)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function XT(e){return e?Object.assign(Object.assign({},qT(e)),KT(e)):null}function YT(e){let{className:t,node:n}=e;const i=(0,s.useMemo)(()=>XT(n),[n]),r=(0,s.useMemo)(()=>VT(n)?GT(n)?null:n.children.map((e,t)=>(0,De.jsx)(YT,{node:e},t)):null,[n]);return(0,De.jsx)("span",Object.assign({className:t},i,{children:r}))}function QT(){return(0,s.useContext)(WT)}function $T(){const e=QT();vT(e);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[i,r]=LT(),{value:a,error:o}=i,{customTextRenderer:l,page:c}=e;return(0,s.useEffect)(function(){r({type:"RESET"})},[r,c]),(0,s.useEffect)(function(){if(l)return;if(!c)return;const e=mT(c.getStructTree()),t=e;return e.promise.then(e=>{r({type:"RESOLVE",value:e})}).catch(e=>{r({type:"REJECT",error:e})}),()=>TT(t)},[l,c,r]),(0,s.useEffect)(()=>{void 0!==a&&(!1!==a?a&&n&&n(a):o&&(dl(!1,o.toString()),t&&t(o)))},[a]),a?(0,De.jsx)(YT,{className:"react-pdf__Page__structTree structTree",node:a}):null}const JT=Dp;function ZT(e){const t=QT();vT(t);const n=Object.assign(Object.assign({},t),e),{_className:i,canvasBackground:r,devicePixelRatio:a=CT(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:d,renderTextLayer:u,rotate:h,scale:m}=n,{canvasRef:p}=e;vT(c);const f=(0,s.useRef)(null);function g(e){(function(e){return"RenderingCancelledException"===e.name})(e)||(dl(!1,e.toString()),o&&o(e))}const v=(0,s.useMemo)(()=>c.getViewport({scale:m*a,rotation:h}),[a,c,h,m]),x=(0,s.useMemo)(()=>c.getViewport({scale:m,rotation:h}),[c,h,m]);(0,s.useEffect)(function(){if(!c)return;c.cleanup();const{current:e}=f;if(!e)return;e.width=v.width,e.height=v.height,e.style.width="".concat(Math.floor(x.width),"px"),e.style.height="".concat(Math.floor(x.height),"px"),e.style.visibility="hidden";const t={annotationMode:d?JT.ENABLE_FORMS:JT.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:v};r&&(t.background=r);const n=c.render(t),s=n;return n.promise.then(()=>{e.style.visibility="",c&&l&&l(PT(c,m))}).catch(g),()=>TT(s)},[r,c,d,v,x]);const b=(0,s.useCallback)(()=>{const{current:e}=f;e&&(e.width=0,e.height=0)},[]);return(0,s.useEffect)(()=>b,[b]),(0,De.jsx)("canvas",{className:"".concat(i,"__canvas"),dir:"ltr",ref:BT(p,f),style:{display:"block",userSelect:"none"},children:u?(0,De.jsx)($T,{}):null})}function eP(){const e=QT();vT(e);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:d,scale:u}=e;vT(o);const[h,m]=LT(),{value:p,error:f}=h,g=(0,s.useRef)(null);dl(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,s.useEffect)(function(){m({type:"RESET"})},[o,m]),(0,s.useEffect)(function(){if(!o)return;const e=mT(o.getTextContent()),t=e;return e.promise.then(e=>{m({type:"RESOLVE",value:e})}).catch(e=>{m({type:"REJECT",error:e})}),()=>TT(t)},[o,m]),(0,s.useEffect)(()=>{void 0!==p&&(!1!==p?p&&i&&i(p):f&&(dl(!1,f.toString()),n&&n(f)))},[p]);const v=(0,s.useCallback)(()=>{a&&a()},[a]),x=(0,s.useCallback)(e=>{dl(!1,e.toString()),r&&r(e)},[r]);const b=(0,s.useMemo)(()=>o.getViewport({scale:u,rotation:d}),[o,d,u]);return(0,s.useLayoutEffect)(function(){if(!o||!p)return;const{current:e}=g;if(!e)return;e.innerHTML="";const n=o.streamTextContent({includeMarkedContent:!0}),s=new Hj({container:e,textContentSource:n,viewport:b}),i=s;return s.render().then(()=>{const n=document.createElement("div");n.className="endOfContent",e.append(n);const s=e.querySelectorAll('[role="presentation"]');if(t){let e=0;p.items.forEach((n,i)=>{if(!function(e){return"str"in e}(n))return;const r=s[e];if(!r)return;const a=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:i},n));r.innerHTML=a,e+=n.str&&n.hasEOL?2:1})}v()}).catch(x),()=>TT(i)},[t,x,v,o,l,c,p,b]),(0,De.jsx)("div",{className:fT("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const e=g.current;e&&e.classList.remove("selecting")},onMouseDown:function(){const e=g.current;e&&e.classList.add("selecting")},ref:g})}function tP(){return(0,s.useContext)(xT)}function nP(){const e=tP(),t=QT();vT(t);const n=Object.assign(Object.assign({},e),t),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:d,pdf:u,renderForms:h,rotate:m,scale:p=1}=n;vT(u),vT(d),vT(r);const[f,g]=LT(),{value:v,error:x}=f,b=(0,s.useRef)(null);dl(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,s.useEffect)(function(){g({type:"RESET"})},[g,d]),(0,s.useEffect)(function(){if(!d)return;const e=mT(d.getAnnotations()),t=e;return e.promise.then(e=>{g({type:"RESOLVE",value:e})}).catch(e=>{g({type:"REJECT",error:e})}),()=>{TT(t)}},[g,d]),(0,s.useEffect)(()=>{void 0!==v&&(!1!==v?v&&o&&o(v):x&&(dl(!1,x.toString()),a&&a(x)))},[v]);const y=(0,s.useMemo)(()=>d.getViewport({scale:p,rotation:m}),[d,m,p]);return(0,s.useEffect)(function(){if(!u||!d||!r||!v)return;const{current:e}=b;if(!e)return;const t=y.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:e,l10n:null,page:d,structTreeLayer:null,viewport:t},s={annotations:v,annotationStorage:u.annotationStorage,div:e,imageResourcesPath:i,linkService:r,page:d,renderForms:h,viewport:t};e.innerHTML="";try{new kk(n).render(s),c&&c()}catch(a){!function(e){dl(!1,"".concat(e)),l&&l(e)}(a)}return()=>{}},[v,i,r,d,u,h,y]),(0,De.jsx)("div",{className:fT("react-pdf__Page__annotations","annotationLayer"),ref:b})}var sP=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};const iP=1;function rP(e){const t=tP(),n=Object.assign(Object.assign({},t),e),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:o,children:l,className:c,customRenderer:d,customTextRenderer:u,devicePixelRatio:h,error:m="Failed to load the page.",height:p,inputRef:f,loading:g="Loading page\u2026",noData:v="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:b,onGetStructTreeError:y,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:_,onLoadError:N,onLoadSuccess:k,onRenderAnnotationLayerError:S,onRenderAnnotationLayerSuccess:C,onRenderError:A,onRenderSuccess:E,onRenderTextLayerError:T,onRenderTextLayerSuccess:P,pageIndex:M,pageNumber:L,pdf:R,registerPage:O,renderAnnotationLayer:D=!0,renderForms:I=!1,renderMode:F="canvas",renderTextLayer:z=!0,rotate:B,scale:W=iP,unregisterPage:H,width:U}=n,V=sP(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,q]=LT(),{value:K,error:X}=G,Y=(0,s.useRef)(null);vT(R);const Q=NT(L)?L-1:null!==M&&void 0!==M?M:null,$=null!==L&&void 0!==L?L:NT(M)?M+1:null,J=null!==B&&void 0!==B?B:K?K.rotate:null,Z=(0,s.useMemo)(()=>{if(!K)return null;let e=1;const t=null!==W&&void 0!==W?W:iP;if(U||p){const t=K.getViewport({scale:1,rotation:J});U?e=U/t.width:p&&(e=p/t.height)}return t*e},[p,K,J,W,U]);(0,s.useEffect)(function(){return()=>{NT(Q)&&r&&H&&H(Q)}},[r,R,Q,H]),(0,s.useEffect)(function(){q({type:"RESET"})},[q,R,Q]),(0,s.useEffect)(function(){if(!R||!$)return;const e=mT(R.getPage($)),t=e;return e.promise.then(e=>{q({type:"RESOLVE",value:e})}).catch(e=>{q({type:"REJECT",error:e})}),()=>TT(t)},[q,R,$]),(0,s.useEffect)(()=>{void 0!==K&&(!1!==K?function(){if(k){if(!K||!Z)return;k(PT(K,Z))}if(r&&O){if(!NT(Q)||!Y.current)return;O(Q,Y.current)}}():X&&(dl(!1,X.toString()),N&&N(X)))},[K,Z]);const ee=(0,s.useMemo)(()=>K&&NT(Q)&&$&&NT(J)&&NT(Z)?{_className:i,canvasBackground:a,customTextRenderer:u,devicePixelRatio:h,onGetAnnotationsError:x,onGetAnnotationsSuccess:b,onGetStructTreeError:y,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:_,onRenderAnnotationLayerError:S,onRenderAnnotationLayerSuccess:C,onRenderError:A,onRenderSuccess:E,onRenderTextLayerError:T,onRenderTextLayerSuccess:P,page:K,pageIndex:Q,pageNumber:$,renderForms:I,renderTextLayer:z,rotate:J,scale:Z}:null,[i,a,u,h,x,b,y,w,j,_,S,C,A,E,T,P,K,Q,$,I,z,J,Z]),te=(0,s.useMemo)(()=>hT(V,()=>K?Z?PT(K,Z):void 0:K),[V,K,Z]),ne="".concat(Q,"@").concat(Z,"/").concat(J);function se(){switch(F){case"custom":return vT(d),(0,De.jsx)(d,{},"".concat(ne,"_custom"));case"none":return null;default:return(0,De.jsx)(ZT,{canvasRef:o},"".concat(ne,"_canvas"))}}return(0,De.jsx)("div",Object.assign({className:fT(i,c),"data-page-number":$,ref:BT(f,Y),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":"".concat(Z),"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te,{children:$?null===R||void 0===K||null===K?(0,De.jsx)(bT,{type:"loading",children:"function"===typeof g?g():g}):!1===R||!1===K?(0,De.jsx)(bT,{type:"error",children:"function"===typeof m?m():m}):(0,De.jsxs)(WT.Provider,{value:ee,children:[se(),z?(0,De.jsx)(eP,{},"".concat(ne,"_text")):null,D?(0,De.jsx)(nP,{},"".concat(ne,"_annotations")):null,l]}):(0,De.jsx)(bT,{type:"no-data",children:"function"===typeof v?v():v})}))}(()=>{try{Pw.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(U_,"/pdf.worker.min.js")}catch(e){try{Pw.workerSrc="https://unpkg.com/pdfjs-dist@".concat(U_,"/build/pdf.worker.min.js")}catch(t){Pw.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@".concat(U_,"/build/pdf.worker.min.js")}}})();const aP=e=>{let{url:t,fileName:n="document.pdf",height:i="70vh"}=e;const[r,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(1),[c,d]=(0,s.useState)(1.1),[u,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)("");(0,s.useEffect)(()=>{l(1),a(null),h(!0),p("")},[t]);return(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,De.jsx)("div",{className:"small text-muted",children:n}),(0,De.jsxs)(Sd,{children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:()=>d(e=>Math.max(.6,e-.2)),children:(0,De.jsx)(ur,{})}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:()=>d(e=>Math.min(2.5,e+.2)),children:(0,De.jsx)(hr,{})}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",onClick:()=>{try{const e=document.createElement("a");e.href=t,e.download=n,e.target="_blank",e.rel="noreferrer",e.click()}catch(e){console.error("Download error:",e)}},children:(0,De.jsx)(Mi,{})})]})]}),(0,De.jsxs)("div",{style:{height:i,overflow:"auto",border:"1px solid #e5e7eb",borderRadius:8,background:"#f9fafb"},children:[u&&!m&&(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:i},children:(0,De.jsx)(Wr,{animation:"border"})}),m&&(0,De.jsxs)("div",{className:"text-center text-danger p-3",children:[(0,De.jsx)("div",{className:"mb-2",children:m}),(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>window.open(t,"_blank"),children:"Open in New Tab"})]}),!m&&(0,De.jsx)(zT,{file:t,onLoadSuccess:e=>{let{numPages:t}=e;a(t),h(!1)},onLoadError:e=>{console.error("PDF load error:",e),p((null===e||void 0===e?void 0:e.message)||"Failed to load PDF. Please try refreshing the page."),h(!1)},loading:" ",error:(0,De.jsx)("div",{className:"text-center text-danger p-3",children:"Failed to load PDF"}),children:(0,De.jsx)("div",{className:"d-flex flex-column align-items-center py-3",children:Array.from(new Array(r||0),(e,t)=>(0,De.jsx)("div",{className:"mb-3",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"white"},children:(0,De.jsx)(rP,{pageNumber:t+1,scale:c,renderTextLayer:!1,renderAnnotationLayer:!1})},"page_".concat(t+1)))})})]})]})},oP=e=>{var t,n,i,r,a,o,l,c,d,u,h,m,p,f,g,v,x,b,y,w,j,_,N,k,S;let{user:C,userRole:A,onLogout:E}=e;const T=Z(),[P,M]=(0,s.useState)([]),[L,R]=(0,s.useState)([]),[O,D]=(0,s.useState)(null),[I,F]=(0,s.useState)(!0),[z,B]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[U,V]=(0,s.useState)(!1),[G,q]=(0,s.useState)(!1),[K,X]=(0,s.useState)(null),[Y,Q]=(0,s.useState)([]),[$,J]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(null),[ne,se]=(0,s.useState)({open:!1,url:"",name:""}),[ie,re]=(0,s.useState)({deposit_amount:"",balance_amount:"",payment_status:"",payment_method:"",payment_notes:"",proof_id:""}),[ae,oe]=(0,s.useState)(""),[le,ce]=(0,s.useState)("all"),[de,ue]=(0,s.useState)("order_date"),[he,me]=(0,s.useState)("desc"),[pe,fe]=(0,s.useState)("all"),[ge,ve]=(0,s.useState)(1),[xe]=(0,s.useState)(10);(0,s.useEffect)(()=>{be()},[]);const be=async()=>{try{F(!0);const[e,t,n]=await Promise.all([Qr(),na(),Yr("/orders/payments_dashboard/").catch(()=>null)]);M(e.results||e),R(t.results||t),n&&D(n),B("")}catch(e){B("Failed to load data: "+e.message)}finally{F(!1)}},ye={pending:{label:"Pending",color:"warning",icon:Si},partial:{label:"Partial",color:"info",icon:Di},paid:{label:"Paid",color:"success",icon:bi},overdue:{label:"Overdue",color:"danger",icon:Ii}},we=(()=>{let e=P;return"all"!==pe&&(e=e.filter(e=>e.payment_status===pe)),ae&&(e=e.filter(e=>{var t,n,s,i;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(ae.toLowerCase()))||(null===(n=e.customer)||void 0===n||null===(s=n.name)||void 0===s?void 0:s.toLowerCase().includes(ae.toLowerCase()))||(null===(i=e.total_amount)||void 0===i?void 0:i.toString().includes(ae))})),"all"!==le&&(e=e.filter(e=>e.payment_status===le)),e.sort((e,t)=>{let n=e[de],s=t[de];var i,r;"customer_name"===de&&(n=(null===(i=e.customer)||void 0===i?void 0:i.name)||"",s=(null===(r=t.customer)||void 0===r?void 0:r.name)||"");return"string"===typeof n?"asc"===he?n.localeCompare(s):s.localeCompare(n):"asc"===he?(parseFloat(n)||0)-(parseFloat(s)||0):(parseFloat(s)||0)-(parseFloat(n)||0)})})(),je=ge*xe,_e=je-xe,Ne=we.slice(_e,je),ke=Math.ceil(we.length/xe),Se=e=>{de===e?me("asc"===he?"desc":"asc"):(ue(e),me("asc"))},Ce=e=>{var t;X(e),re({deposit_amount:e.deposit_amount||"",balance_amount:e.balance_amount||"",payment_status:e.payment_status||"",payment_method:e.payment_method||"",payment_notes:e.payment_notes||"",proof_id:""}),(t=e.id,Yr("/payment-proofs/?order=".concat(t))).then(e=>{const t=Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:Array.isArray(e)?e:[];Q(t.slice(0,5))}).catch(()=>Q([])),V(!0)},Ae=async e=>{try{await(t=e.id,Yr("/orders/".concat(t,"/mark_overdue/"),{method:"POST"})),H("Marked as overdue"),be()}catch(OP){B((null===OP||void 0===OP?void 0:OP.message)||"Failed to mark overdue")}var t},Ee=e=>de!==e?null:"asc"===he?(0,De.jsx)(br,{}):(0,De.jsx)(xr,{}),Te=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e||0),Me=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),Le=e=>{const t=ye[e]||{label:e,color:"secondary",icon:Dr},n=t.icon;return(0,De.jsxs)(Rn,{bg:t.color,className:"d-flex align-items-center gap-1",children:[(0,De.jsx)(n,{size:12}),t.label]})},Re=O?{total:null!==(t=null===(n=O.statistics)||void 0===n?void 0:n.total_orders)&&void 0!==t?t:P.length,pending:null!==(i=null===(r=O.statistics)||void 0===r||null===(a=r.payment_status_counts)||void 0===a?void 0:a.pending)&&void 0!==i?i:P.filter(e=>"pending"===e.payment_status).length,partial:null!==(o=null===(l=O.statistics)||void 0===l||null===(c=l.payment_status_counts)||void 0===c?void 0:c.partial)&&void 0!==o?o:P.filter(e=>"partial"===e.payment_status).length,paid:null!==(d=null===(u=O.statistics)||void 0===u||null===(h=u.payment_status_counts)||void 0===h?void 0:h.paid)&&void 0!==d?d:P.filter(e=>"paid"===e.payment_status).length,overdue:null!==(m=null===(p=O.statistics)||void 0===p||null===(f=p.payment_status_counts)||void 0===f?void 0:f.overdue)&&void 0!==m?m:P.filter(e=>"overdue"===e.payment_status).length,totalRevenue:null!==(g=null===(v=O.statistics)||void 0===v||null===(x=v.financial)||void 0===x?void 0:x.total_revenue)&&void 0!==g?g:P.reduce((e,t)=>e+(+t.total_amount||0),0),totalDeposits:null!==(b=null===(y=O.statistics)||void 0===y||null===(w=y.financial)||void 0===w?void 0:w.total_deposits)&&void 0!==b?b:P.reduce((e,t)=>e+(+t.deposit_amount||0),0),totalBalance:null!==(j=null===(_=O.statistics)||void 0===_||null===(N=_.financial)||void 0===N?void 0:N.total_balance)&&void 0!==j?j:P.reduce((e,t)=>e+(+t.balance_amount||0),0)}:(()=>{const e=P.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0),t=P.reduce((e,t)=>e+(parseFloat(t.deposit_amount)||0),0),n=P.reduce((e,t)=>e+(parseFloat(t.balance_amount)||0),0);return{total:P.length,pending:P.filter(e=>"pending"===e.payment_status).length,partial:P.filter(e=>"partial"===e.payment_status).length,paid:P.filter(e=>"paid"===e.payment_status).length,overdue:P.filter(e=>"overdue"===e.payment_status).length,totalRevenue:e,totalDeposits:t,totalBalance:n}})();return I&&0===P.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading payments..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:C,userRole:A,onLogout:E}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:C,onLogout:E,dashboardType:A}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(Jm,{title:"OOX Furniture - Payment Management",subtitle:"OOX Furniture payments, deposits, balances, and financial transactions tracking",icon:Zi,onRefresh:be,accentColor:"#10b981",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:(0,De.jsxs)(Xs,{variant:"success",onClick:()=>T("/owner/orders"),className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(rr,{className:"me-2"}),"New Order"]})})}),z&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>B(""),children:[(0,De.jsx)(Ii,{className:"me-2"}),z]}),W&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>H(""),children:[(0,De.jsx)(yi,{className:"me-2"}),W]}),(0,De.jsxs)(Cn,{className:"mb-4",children:["owner"===A&&(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(vi,{size:40,className:"text-success mb-2"}),(0,De.jsx)("h3",{className:"mb-1 text-success",children:Te(Re.totalRevenue)}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Revenue"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Dr,{size:40,className:"text-info mb-2"}),(0,De.jsx)("h3",{className:"mb-1 text-info",children:Te(we.reduce((e,t)=>e+(+t.deposit_amount||0),0))}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Deposits (Visible Orders)"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Di,{size:40,className:"text-warning mb-2"}),(0,De.jsx)("h3",{className:"mb-1 text-warning",children:Te(we.reduce((e,t)=>e+(+t.balance_amount||0),0))}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Outstanding (Visible Orders)"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Wi,{size:40,className:"text-primary mb-2"}),(0,De.jsx)("h3",{className:"mb-1",children:we.length}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Orders (Visible)"})]})})})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Si,{size:30,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.pending}),(0,De.jsx)("small",{className:"text-muted",children:"Pending"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Di,{size:30,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.partial}),(0,De.jsx)("small",{className:"text-muted",children:"Partial"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(bi,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.paid}),(0,De.jsx)("small",{className:"text-muted",children:"Paid"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ii,{size:30,className:"text-danger mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:Re.overdue}),(0,De.jsx)("small",{className:"text-muted",children:"Overdue"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Rc,{activeKey:pe,onSelect:e=>fe(e),className:"mb-3",children:[(0,De.jsx)(Bc,{eventKey:"all",title:"All Payments (".concat(Re.total,")")}),(0,De.jsx)(Bc,{eventKey:"pending",title:"Pending (".concat(Re.pending,")")}),(0,De.jsx)(Bc,{eventKey:"partial",title:"Partial (".concat(Re.partial,")")}),(0,De.jsx)(Bc,{eventKey:"paid",title:"Paid (".concat(Re.paid,")")}),(0,De.jsx)(Bc,{eventKey:"overdue",title:"Overdue (".concat(Re.overdue,")")})]}),(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"Search by order number, customer, or amount...",value:ae,onChange:e=>oe(e.target.value)})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Select,{value:le,onChange:e=>ce(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Status"}),(0,De.jsx)("option",{value:"pending",children:"Pending"}),(0,De.jsx)("option",{value:"partial",children:"Partial"}),(0,De.jsx)("option",{value:"paid",children:"Paid"}),(0,De.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,De.jsxs)(Pn,{md:5,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Mi,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(or,{className:"me-1"}),"Print Report"]})]})]})]})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Vr,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Se("order_number"),children:["Order # ",Ee("order_number")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Se("customer_name"),children:["Customer ",Ee("customer_name")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Se("total_amount"),children:["Total Amount ",Ee("total_amount")]}),(0,De.jsx)("th",{children:"Deposit"}),(0,De.jsx)("th",{children:"Balance"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Se("payment_status"),children:["Status ",Ee("payment_status")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Se("order_date"),children:["Order Date ",Ee("order_date")]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:Ne.map(e=>{var t,n,s,i,r;return(0,De.jsxs)("tr",{children:[(0,De.jsxs)("td",{children:[(0,De.jsxs)("div",{className:"fw-medium text-primary",children:["#",e.order_number]}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"35px",height:"35px",fontSize:"1rem",fontWeight:"bold"},children:(null===(t=e.customer)||void 0===t||null===(n=t.name)||void 0===n||null===(s=n.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:(null===(i=e.customer)||void 0===i?void 0:i.name)||"Unknown Customer"}),(0,De.jsx)("small",{className:"text-muted",children:null===(r=e.customer)||void 0===r?void 0:r.phone})]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{className:"fw-bold text-success fs-5",children:Te(e.total_amount)})}),(0,De.jsxs)("td",{children:[(0,De.jsx)("div",{className:"text-info",children:Te(e.deposit_amount)}),e.deposit_amount>0&&(0,De.jsxs)("small",{className:"text-muted",children:[(parseFloat(e.deposit_amount)/parseFloat(e.total_amount)*100).toFixed(0),"%"]})]}),(0,De.jsx)("td",{children:(0,De.jsx)("div",{className:"text-warning",children:Te(e.balance_amount)})}),(0,De.jsx)("td",{children:Le(e.payment_status)}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:Me(e.order_date)})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Sd,{size:"sm",children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{X(e),q(!0)})(e),children:(0,De.jsx)(zi,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Update Payment"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>Ce(e),children:(0,De.jsx)(Li,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Order"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>T("/owner/orders"),children:(0,De.jsx)(Wi,{})})}),("owner"===A||"admin"===A)&&(0,De.jsx)(Th,{placement:"top",overlay:(0,De.jsx)(Nh,{children:"Mark Overdue"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>Ae(e),children:(0,De.jsx)(Ii,{})})})]})})]},e.id)})})]}),0===we.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Zi,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No payments found"}),(0,De.jsx)("p",{className:"text-muted",children:ae?"Try adjusting your search criteria":"No orders with payment information yet"}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>T("/owner/orders"),children:[(0,De.jsx)(rr,{className:"me-1"}),"Create First Order"]})]})]}),ke>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",_e+1," to ",Math.min(je,we.length)," of ",we.length," payments"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===ge,onClick:()=>ve(ge-1),children:"Previous"}),[...Array(ke)].map((e,t)=>(0,De.jsx)(Xs,{variant:ge===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>ve(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:ge===ke,onClick:()=>ve(ge+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Bo,{show:U,onHide:()=>V(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Update Payment Information"})}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault();try{if("eft"===(ie.payment_method||(null===K||void 0===K?void 0:K.payment_method)||"").toLowerCase()&&!ie.proof_id){if(!ee)return void B("Payment proof required for EFT payments");try{J(!0);const e=new FormData;e.append("order",K.id),ie.deposit_amount&&e.append("amount",ie.deposit_amount),e.append("payment_type","deposit_payment"),e.append("proof_image",ee);const t=await ia(e,!0);null!==t&&void 0!==t&&t.id&&(ie.proof_id=t.id)}catch(t){return J(!1),void B((null===t||void 0===t?void 0:t.message)||"Failed to upload payment proof")}finally{J(!1)}}const e=e=>{const t="string"===typeof e&&""===e.trim()?null:Number(e);return null===t||Number.isNaN(t)?void 0:t},n=Pe(Pe(Pe({},void 0!==e(ie.deposit_amount)?{deposit_amount:e(ie.deposit_amount)}:{}),ie.balance_amount&&""!==ie.balance_amount.trim()?{balance_amount:e(ie.balance_amount)}:{}),{},{payment_status:ie.payment_status,payment_method:ie.payment_method,payment_notes:ie.payment_notes});"eft"===(ie.payment_method||(null===K||void 0===K?void 0:K.payment_method)||"").toLowerCase()&&ie.proof_id&&(n.proof_id=ie.proof_id),await ta(K.id,n),H("Payment information updated successfully"),V(!1),be()}catch(n){B("Failed to update payment: "+n.message)}},children:[(0,De.jsx)(Bo.Body,{children:K&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"mb-4 p-3 bg-light rounded",children:[(0,De.jsx)("h6",{children:"Order Details"}),(0,De.jsxs)("div",{className:"row",children:[(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Order #:"})," ",K.order_number,(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Customer:"})," ",null===(k=K.customer)||void 0===k?void 0:k.name]}),(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Total Amount:"})," ",Te(K.total_amount),(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Order Date:"})," ",Me(K.order_date)]})]})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Deposit Amount"}),(0,De.jsx)(Wl.Control,{type:"number",step:"0.01",value:ie.deposit_amount,onChange:e=>re(Pe(Pe({},ie),{},{deposit_amount:e.target.value})),placeholder:"0.00"})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Balance Amount (Being Paid)"}),(0,De.jsx)(Wl.Control,{type:"number",step:"0.01",value:ie.balance_amount,onChange:e=>re(Pe(Pe({},ie),{},{balance_amount:e.target.value})),placeholder:"0.00"}),(0,De.jsx)(Wl.Text,{className:"text-muted",children:"Leave empty to auto-calculate (Total - Deposit)"})]})})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Payment Status *"}),(0,De.jsxs)(Wl.Select,{value:ie.payment_status,onChange:e=>re(Pe(Pe({},ie),{},{payment_status:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select status..."}),(0,De.jsx)("option",{value:"deposit_pending",children:"Deposit Pending"}),(0,De.jsx)("option",{value:"deposit_paid",children:"Deposit Paid"}),(0,De.jsx)("option",{value:"fully_paid",children:"Fully Paid"}),(0,De.jsx)("option",{value:"overdue",children:"Overdue"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Payment Method"}),(0,De.jsxs)(Wl.Select,{value:ie.payment_method,onChange:e=>re(Pe(Pe({},ie),{},{payment_method:e.target.value})),children:[(0,De.jsx)("option",{value:"",children:"Select method..."}),(0,De.jsx)("option",{value:"cash",children:"Cash"}),(0,De.jsx)("option",{value:"card",children:"Card"}),(0,De.jsx)("option",{value:"EFT",children:"EFT"}),(0,De.jsx)("option",{value:"cheque",children:"Cheque"}),(0,De.jsx)("option",{value:"other",children:"Other"})]})]})})]}),"eft"===(ie.payment_method||(null===K||void 0===K?void 0:K.payment_method)||"").toLowerCase()&&(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Payment Proof (required for EFT)"}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(Wl.Control,{placeholder:"Enter proof ID (recent uploaded proof)",value:ie.proof_id,onChange:e=>re(Pe(Pe({},ie),{},{proof_id:e.target.value}))}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>T("/owner/payments"),children:"Refresh"})]}),(0,De.jsx)("div",{className:"form-text",children:"Upload proof via PaymentProofs module if needed, then paste its ID here. Backend validates proof belongs to this order and is recent."}),Y.length>0&&(0,De.jsxs)("div",{className:"mt-2",children:[(0,De.jsx)("div",{className:"small text-muted mb-1",children:"Recent proofs for this order:"}),(0,De.jsx)("div",{className:"d-flex flex-wrap gap-2",children:Y.map(e=>(0,De.jsxs)(Xs,{size:"sm",variant:"outline-primary",onClick:()=>re(Pe(Pe({},ie),{},{proof_id:String(e.id)})),children:["Use ID ",e.id]},e.id))}),(0,De.jsx)("div",{className:"d-flex flex-wrap gap-2 mt-2",children:Y.map(e=>(0,De.jsxs)(Xs,{size:"sm",variant:"outline-secondary",onClick:()=>(async e=>{if(null!==e&&void 0!==e&&e.id)try{let n="";try{const t=await la(e.id,300);n=(null===t||void 0===t?void 0:t.url)||""}catch(t){}n||(n=oa(e.id));const s=(null===e||void 0===e?void 0:e.file_name)||"proof_".concat(e.id,".pdf");se({open:!0,url:n,name:s})}catch(OP){B((null===OP||void 0===OP?void 0:OP.message)||"Unable to open proof")}})(e),children:["Preview #",e.id]},"pv-".concat(e.id)))})]}),(0,De.jsxs)("div",{className:"mt-3",children:[(0,De.jsx)("div",{className:"small text-muted mb-1",children:"Or upload proof image now (auto-attaches to this order):"}),(0,De.jsx)(Wl.Control,{type:"file",accept:"image/*,application/pdf",onChange:e=>{var t;return te((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),$&&(0,De.jsx)("div",{className:"small text-muted mt-1",children:"Uploading proof..."})]})]})})}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Payment Notes"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,value:ie.payment_notes,onChange:e=>re(Pe(Pe({},ie),{},{payment_notes:e.target.value})),placeholder:"Add any payment notes or special instructions..."})]})})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>V(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"success",type:"submit",children:"Update Payment"})]})]})]}),(0,De.jsxs)(Bo,{show:G,onHide:()=>q(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Payment Details"})}),(0,De.jsx)(Bo.Body,{children:K&&(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Order Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Number:"}),(0,De.jsx)("br",{}),"#",K.order_number]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Customer:"}),(0,De.jsx)("br",{}),null===(S=K.customer)||void 0===S?void 0:S.name]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Date:"}),(0,De.jsx)("br",{}),Me(K.order_date)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Status:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Rn,{bg:"primary",children:K.order_status})]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Payment Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Total Amount:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-success fs-5 fw-bold",children:Te(K.total_amount)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Deposit Paid:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-info",children:Te(K.deposit_amount)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Balance Due:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:"text-warning",children:Te(K.balance_amount)})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Payment Status:"}),(0,De.jsx)("br",{}),Le(K.payment_status)]}),K.payment_method&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Payment Method:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Rn,{bg:"secondary",children:K.payment_method})]})]})]})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>q(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>{q(!1),Ce(K)},children:"Update Payment"})]})]})]}),(0,De.jsxs)(Bo,{show:ne.open,onHide:()=>se({open:!1,url:"",name:""}),size:"lg",centered:!0,children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Proof of Payment"})}),(0,De.jsx)(Bo.Body,{children:ne.url?(0,De.jsx)(aP,{url:ne.url,fileName:ne.name,height:"75vh"}):(0,De.jsx)("div",{className:"text-muted",children:"No document"})})]})]})]})},lP=e=>{var t,n,i,r,a;let{user:o,userRole:l,onLogout:c}=e;const d=Z(),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(!0),[v,x]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(!1),[_,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[C,A]=(0,s.useState)({order_status:"",expected_delivery_date:"",actual_delivery_date:"",delivery_notes:"",delivery_address:""}),[E,T]=(0,s.useState)(""),[P,M]=(0,s.useState)("all"),[L,R]=(0,s.useState)("expected_delivery_date"),[O,D]=(0,s.useState)("asc"),[I,F]=(0,s.useState)("ready"),[z,B]=(0,s.useState)(1),[W]=(0,s.useState)(10);(0,s.useEffect)(()=>{H()},[]);const H=async()=>{try{g(!0);const[e,t]=await Promise.all([Qr(),na()]);h(e.results||e),p(t.results||t),x("")}catch(e){x("Failed to load data: "+e.message)}finally{g(!1)}},U={order_ready:{label:"Ready",color:"info",icon:ui},out_for_delivery:{label:"Out for Delivery",color:"warning",icon:Er},delivered:{label:"Delivered",color:"success",icon:bi},failed_delivery:{label:"Failed",color:"danger",icon:Sr},returned:{label:"Returned",color:"secondary",icon:lr}},V=()=>u.filter(e=>"order_ready"===e.order_status||["out_for_delivery","delivered","failed_delivery","returned"].includes(e.order_status)),G=(()=>{let e=V();return"ready"===I?e=e.filter(e=>"order_ready"===e.order_status&&"out_for_delivery"!==e.order_status&&"delivered"!==e.order_status):"transit"===I?e=e.filter(e=>"out_for_delivery"===e.order_status):"delivered"===I?e=e.filter(e=>"delivered"===e.order_status):"issues"===I&&(e=e.filter(e=>["failed_delivery","returned"].includes(e.order_status))),E&&(e=e.filter(e=>{var t,n,s,i,r,a,o;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(E.toLowerCase()))||(null===(n=e.customer)||void 0===n||null===(s=n.name)||void 0===s?void 0:s.toLowerCase().includes(E.toLowerCase()))||(null===(i=e.customer)||void 0===i||null===(r=i.address)||void 0===r?void 0:r.toLowerCase().includes(E.toLowerCase()))||(null===(a=e.customer)||void 0===a||null===(o=a.phone)||void 0===o?void 0:o.includes(E))})),"all"!==P&&(e=e.filter(e=>e.order_status===P)),e.sort((e,t)=>{let n=e[L],s=t[L];var i,r;"customer_name"===L&&(n=(null===(i=e.customer)||void 0===i?void 0:i.name)||"",s=(null===(r=t.customer)||void 0===r?void 0:r.name)||"");return"string"===typeof n?"asc"===O?n.localeCompare(s):s.localeCompare(n):"asc"===O?new Date(n||0)-new Date(s||0):new Date(s||0)-new Date(n||0)})})(),q=z*W,K=q-W,X=G.slice(K,q),Y=Math.ceil(G.length/W),Q=e=>{L===e?D("asc"===O?"desc":"asc"):(R(e),D("asc"))},$=e=>{var t;S(e),A({order_status:e.order_status||"",expected_delivery_date:e.expected_delivery_date||"",actual_delivery_date:e.actual_delivery_date||"",delivery_notes:e.delivery_notes||"",delivery_address:(null===(t=e.customer)||void 0===t?void 0:t.address)||""}),j(!0)},J=e=>L!==e?null:"asc"===O?(0,De.jsx)(br,{}):(0,De.jsx)(xr,{}),ee=e=>e?new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"Not set",te=e=>e?new Date(e).toLocaleString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not set",ne=e=>{let t=e.order_status;"order_ready"!==e.order_status||["out_for_delivery","delivered"].includes(e.order_status)||(t="order_ready");const n=U[t]||{label:t,color:"secondary",icon:ui},s=n.icon;return(0,De.jsxs)(Rn,{bg:n.color,className:"d-flex align-items-center gap-1",children:[(0,De.jsx)(s,{size:12}),n.label]})},se=e=>{if(!e.expected_delivery_date)return!1;return new Date(e.expected_delivery_date)<new Date&&"delivered"!==e.order_status},ie=(()=>{const e=V();return{total:e.length,ready:e.filter(e=>"order_ready"===e.order_status&&!["out_for_delivery","delivered"].includes(e.order_status)).length,transit:e.filter(e=>"out_for_delivery"===e.order_status).length,delivered:e.filter(e=>"delivered"===e.order_status).length,issues:e.filter(e=>["failed_delivery","returned"].includes(e.order_status)).length,overdue:e.filter(e=>se(e)).length}})();return f&&0===u.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading deliveries..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:o,userRole:l,onLogout:c}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:o,onLogout:c,dashboardType:l}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(Jm,{title:"OOX Furniture - Delivery Management",subtitle:"OOX Furniture order deliveries, logistics management, and delivery status monitoring",icon:Er,onRefresh:H,accentColor:"#06b6d4",children:(0,De.jsx)("div",{className:"d-flex gap-2 justify-content-end",children:(0,De.jsxs)(Xs,{variant:"info",onClick:()=>d("/owner/orders"),className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(ui,{className:"me-2"}),"View Orders"]})})}),v&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>x(""),children:[(0,De.jsx)(Ii,{className:"me-2"}),v]}),b&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>y(""),children:[(0,De.jsx)(yi,{className:"me-2"}),b]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ui,{size:30,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ie.ready}),(0,De.jsx)("small",{className:"text-muted",children:"Ready"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Er,{size:30,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ie.transit}),(0,De.jsx)("small",{className:"text-muted",children:"In Transit"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(bi,{size:30,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ie.delivered}),(0,De.jsx)("small",{className:"text-muted",children:"Delivered"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Sr,{size:30,className:"text-danger mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ie.issues}),(0,De.jsx)("small",{className:"text-muted",children:"Issues"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Si,{size:30,className:"text-danger mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ie.overdue}),(0,De.jsx)("small",{className:"text-muted",children:"Overdue"})]})})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(pr,{size:30,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:ie.total}),(0,De.jsx)("small",{className:"text-muted",children:"Total"})]})})})]}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Rc,{activeKey:I,onSelect:e=>F(e),className:"mb-3",children:[(0,De.jsx)(Bc,{eventKey:"ready",title:"Ready (".concat(ie.ready,")")}),(0,De.jsx)(Bc,{eventKey:"transit",title:"In Transit (".concat(ie.transit,")")}),(0,De.jsx)(Bc,{eventKey:"delivered",title:"Delivered (".concat(ie.delivered,")")}),(0,De.jsx)(Bc,{eventKey:"issues",title:"Issues (".concat(ie.issues,")")})]}),(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"Search by order number, customer, or address...",value:E,onChange:e=>T(e.target.value)})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Select,{value:P,onChange:e=>M(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Status"}),(0,De.jsx)("option",{value:"out_for_delivery",children:"Out for Delivery"}),(0,De.jsx)("option",{value:"delivered",children:"Delivered"}),(0,De.jsx)("option",{value:"failed_delivery",children:"Failed Delivery"}),(0,De.jsx)("option",{value:"returned",children:"Returned"})]})}),(0,De.jsxs)(Pn,{md:5,className:"text-end",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",className:"me-2",children:[(0,De.jsx)(Mi,{className:"me-1"}),"Export CSV"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(lr,{className:"me-1"}),"Plan Routes"]})]})]})]})}),(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"p-0",children:[(0,De.jsxs)("div",{className:"table-responsive",children:[(0,De.jsxs)(Vr,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Q("order_number"),children:["Order # ",J("order_number")]}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Q("customer_name"),children:["Customer ",J("customer_name")]}),(0,De.jsx)("th",{children:"Delivery Address"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>Q("expected_delivery_date"),children:["Expected ",J("expected_delivery_date")]}),(0,De.jsx)("th",{children:"Actual Delivery"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Priority"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:X.map(e=>{var t,n,s,i,r,a;return(0,De.jsxs)("tr",{className:se(e)?"table-warning":"",children:[(0,De.jsxs)("td",{children:[(0,De.jsxs)("div",{className:"fw-medium text-primary",children:["#",e.order_number]}),(0,De.jsxs)("small",{className:"text-muted",children:["ID: ",e.id]})]}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"35px",height:"35px",fontSize:"1rem",fontWeight:"bold"},children:(null===(t=e.customer)||void 0===t||null===(n=t.name)||void 0===n||null===(s=n.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:(null===(i=e.customer)||void 0===i?void 0:i.name)||"Unknown Customer"}),(0,De.jsxs)("small",{className:"text-muted",children:[(0,De.jsx)(nr,{className:"me-1",size:10}),null===(r=e.customer)||void 0===r?void 0:r.phone]})]})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-start",children:[(0,De.jsx)($i,{className:"me-2 text-muted mt-1",size:12}),(0,De.jsx)("small",{className:"text-muted",style:{maxWidth:"200px"},children:(null===(a=e.customer)||void 0===a?void 0:a.address)||"No address provided"})]})}),(0,De.jsxs)("td",{children:[(0,De.jsx)("div",{className:se(e)?"text-danger fw-bold":"text-muted",children:ee(e.expected_delivery_date)}),se(e)&&(0,De.jsxs)(Rn,{bg:"danger",className:"mt-1",children:[(0,De.jsx)(Si,{className:"me-1",size:10}),"OVERDUE"]})]}),(0,De.jsx)("td",{children:(0,De.jsx)("small",{className:"text-muted",children:te(e.actual_delivery_date)})}),(0,De.jsx)("td",{children:ne(e)}),(0,De.jsx)("td",{children:se(e)?(0,De.jsx)(Rn,{bg:"danger",children:"High"}):"out_for_delivery"===e.order_status?(0,De.jsx)(Rn,{bg:"warning",children:"Medium"}):(0,De.jsx)(Rn,{bg:"secondary",children:"Normal"})}),(0,De.jsx)("td",{children:(0,De.jsxs)(Sd,{size:"sm",children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>(e=>{S(e),N(!0)})(e),children:(0,De.jsx)(zi,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Update Delivery"}),children:(0,De.jsx)(Xs,{variant:"outline-info",onClick:()=>$(e),children:(0,De.jsx)(Li,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Order"}),children:(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>d("/owner/orders"),children:(0,De.jsx)(Ni,{})})})]})})]},e.id)})})]}),0===G.length&&(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Er,{size:48,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No deliveries found"}),(0,De.jsx)("p",{className:"text-muted",children:E?"Try adjusting your search criteria":"No orders ready for delivery yet"}),(0,De.jsxs)(Xs,{variant:"info",onClick:()=>d("/owner/orders"),children:[(0,De.jsx)(ui,{className:"me-1"}),"View All Orders"]})]})]}),Y>1&&(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[(0,De.jsxs)("div",{className:"text-muted",children:["Showing ",K+1," to ",Math.min(q,G.length)," of ",G.length," deliveries"]}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:1===z,onClick:()=>B(z-1),children:"Previous"}),[...Array(Y)].map((e,t)=>(0,De.jsx)(Xs,{variant:z===t+1?"primary":"outline-secondary",size:"sm",onClick:()=>B(t+1),children:t+1},t+1)),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:z===Y,onClick:()=>B(z+1),children:"Next"})]})]})]})}),(0,De.jsxs)(Bo,{show:w,onHide:()=>j(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Update Delivery Information"})}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault();try{const e={order_status:C.order_status,expected_delivery_date:C.expected_delivery_date||null,actual_delivery_date:C.actual_delivery_date||null,delivery_notes:C.delivery_notes};await $r(k.id,e),y("Delivery information updated successfully"),j(!1),H()}catch(t){x("Failed to update delivery: "+t.message)}},children:[(0,De.jsx)(Bo.Body,{children:k&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"mb-4 p-3 bg-light rounded",children:[(0,De.jsx)("h6",{children:"Order Details"}),(0,De.jsxs)("div",{className:"row",children:[(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Order #:"})," ",k.order_number,(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Customer:"})," ",null===(t=k.customer)||void 0===t?void 0:t.name]}),(0,De.jsxs)("div",{className:"col-md-6",children:[(0,De.jsx)("strong",{children:"Phone:"})," ",null===(n=k.customer)||void 0===n?void 0:n.phone,(0,De.jsx)("br",{}),(0,De.jsx)("strong",{children:"Production Status:"})," ",(0,De.jsx)(Rn,{bg:"info",children:k.production_status})]})]})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Delivery Status *"}),(0,De.jsxs)(Wl.Select,{value:C.order_status,onChange:e=>A(Pe(Pe({},C),{},{order_status:e.target.value})),required:!0,children:[(0,De.jsx)("option",{value:"",children:"Select status..."}),(0,De.jsx)("option",{value:"out_for_delivery",children:"Out for Delivery"}),(0,De.jsx)("option",{value:"delivered",children:"Delivered"}),(0,De.jsx)("option",{value:"failed_delivery",children:"Failed Delivery"}),(0,De.jsx)("option",{value:"returned",children:"Returned"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Expected Delivery Date"}),(0,De.jsx)(Wl.Control,{type:"date",value:C.expected_delivery_date,onChange:e=>A(Pe(Pe({},C),{},{expected_delivery_date:e.target.value}))})]})})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Actual Delivery Date & Time"}),(0,De.jsx)(Wl.Control,{type:"datetime-local",value:C.actual_delivery_date,onChange:e=>A(Pe(Pe({},C),{},{actual_delivery_date:e.target.value}))})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Delivery Address"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:2,value:C.delivery_address,onChange:e=>A(Pe(Pe({},C),{},{delivery_address:e.target.value})),placeholder:"Delivery address...",readOnly:!0})]})})]}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Delivery Notes"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:4,value:C.delivery_notes,onChange:e=>A(Pe(Pe({},C),{},{delivery_notes:e.target.value})),placeholder:"Add delivery notes, instructions, or issues encountered..."})]})})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"info",type:"submit",children:"Update Delivery"})]})]})]}),(0,De.jsxs)(Bo,{show:_,onHide:()=>N(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Delivery Details"})}),(0,De.jsx)(Bo.Body,{children:k&&(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Order Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Order Number:"}),(0,De.jsx)("br",{}),"#",k.order_number]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Customer:"}),(0,De.jsx)("br",{}),null===(i=k.customer)||void 0===i?void 0:i.name]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Phone:"}),(0,De.jsx)("br",{}),(0,De.jsx)(nr,{className:"me-2"}),null===(r=k.customer)||void 0===r?void 0:r.phone]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Production Status:"}),(0,De.jsx)("br",{}),(0,De.jsx)(Rn,{bg:"info",children:k.production_status})]})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsx)(ps.Header,{children:(0,De.jsx)("h6",{className:"mb-0",children:"Delivery Information"})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Status:"}),(0,De.jsx)("br",{}),ne(k)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Expected Delivery:"}),(0,De.jsx)("br",{}),(0,De.jsx)("span",{className:se(k)?"text-danger fw-bold":"",children:ee(k.expected_delivery_date)}),se(k)&&(0,De.jsx)(Rn,{bg:"danger",className:"ms-2",children:"OVERDUE"})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Actual Delivery:"}),(0,De.jsx)("br",{}),te(k.actual_delivery_date)]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Delivery Address:"}),(0,De.jsx)("br",{}),(0,De.jsx)($i,{className:"me-2"}),(null===(a=k.customer)||void 0===a?void 0:a.address)||"No address provided"]}),k.delivery_notes&&(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Notes:"}),(0,De.jsx)("br",{}),(0,De.jsx)("small",{className:"text-muted",children:k.delivery_notes})]})]})]})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>N(!1),children:"Close"}),(0,De.jsx)(Xs,{variant:"info",onClick:()=>{N(!1),$(k)},children:"Update Delivery"})]})]})]})]})]})},cP=e=>{let{user:t,userRole:n,onLogout:i}=e;const r=Z(),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(""),[g,v]=(0,s.useState)({total_materials:0,in_stock:0}),[x,b]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[j,_]=(0,s.useState)({assigned:0,started:0,completed:0}),[N,k]=(0,s.useState)("30");(0,s.useEffect)(()=>{S()},[]);const S=async()=>{try{m(!0);const[t,n,s]=await Promise.all([Qr(),na(),ca()]);o(t.results||t),c(n.results||n),u(s.results||s);try{const[e,t,n]=await Promise.all([Sa(),Ca(),ja()]);v(e||{total_materials:0,in_stock:0}),b((null===t||void 0===t?void 0:t.alerts)||[]);const s=Array.isArray(null===n||void 0===n?void 0:n.orders)?n.orders:Array.isArray(n)?n:[];w(s);const[i,r,a]=await Promise.all([Pa("assigned").catch(()=>[]),Pa("started").catch(()=>[]),Pa("completed").catch(()=>[])]),o=e=>Array.isArray(null===e||void 0===e?void 0:e.results)?e.results.length:Array.isArray(e)?e.length:0;_({assigned:o(i),started:o(r),completed:o(a)})}catch(e){}f("")}catch(t){f("Failed to load analytics data: "+t.message)}finally{m(!1)}},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"created_at";if(!N||"all"===N)return e;const n=new Date,s=parseInt(N),i=new Date(n.getTime()-24*s*60*60*1e3);return e.filter(e=>new Date(e[t])>=i)},A=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e||0),E=e=>"".concat(Math.round(e||0),"%"),T=(()=>{const e=C(a,"order_date"),t=e.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0),n=e.reduce((e,t)=>e+(parseFloat(t.deposit_amount)||0),0),s=e.reduce((e,t)=>e+(parseFloat(t.balance_amount)||0),0),i=e.length>0?t/e.length:0,r=e.filter(e=>"paid"===e.payment_status),o=r.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return{totalRevenue:t,totalDeposits:n,outstandingBalance:s,averageOrderValue:i,paidRevenue:o,totalOrders:e.length,paidOrders:r.length,collectionRate:e.length>0?r.length/e.length*100:0}})(),P=(()=>{const e=C(a,"order_date"),t={pending:e.filter(e=>"pending"===e.order_status).length,confirmed:e.filter(e=>"confirmed"===e.order_status).length,in_production:e.filter(e=>"in_production"===e.production_status).length,order_ready:e.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,delivered:e.filter(e=>"delivered"===e.order_status).length,cancelled:e.filter(e=>"cancelled"===e.order_status).length},n=e.filter(e=>{if(!e.expected_delivery_date)return!1;return new Date(e.expected_delivery_date)<new Date&&"delivered"!==e.order_status}).length;return Pe(Pe({},t),{},{overdue:n,total:e.length})})(),M=(()=>{const e=C(l),t=l.filter(e=>a.some(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e.id})),n=l.map(e=>{const t=a.filter(t=>{var n;return(null===(n=t.customer)||void 0===n?void 0:n.id)===e.id}),n=t.reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return Pe(Pe({},e),{},{orderCount:t.length,totalValue:n})}),s=n.sort((e,t)=>t.totalValue-e.totalValue).slice(0,5);return{total:l.length,new:e.length,active:t.length,withEmail:l.filter(e=>e.email).length,topCustomers:s,retentionRate:l.length>0?t.length/l.length*100:0}})(),L=(()=>{const e={not_started:a.filter(e=>"not_started"===e.production_status||!e.production_status).length,in_production:a.filter(e=>"in_production"===e.production_status).length,completed:a.filter(e=>"completed"===e.production_status).length},t=a.filter(e=>"delivered"===e.order_status).length,n=a.filter(e=>"delivered"===e.order_status).length,s=n>0?t/n*100:0;return Pe(Pe({},e),{},{avgProductionTime:5,onTimeRate:s})})(),R=(()=>{const e={owner:d.filter(e=>"owner"===e.role).length,admin:d.filter(e=>"admin"===e.role).length,warehouse:d.filter(e=>"warehouse"===e.role).length,delivery:d.filter(e=>"delivery"===e.role).length},t=d.filter(e=>e.is_active).length,n=d.filter(e=>{if(!e.last_login)return!1;return new Date(e.last_login)>new Date(Date.now()-6048e5)}).length;return Pe(Pe({},e),{},{active:t,total:d.length,recentLogins:n})})();return h&&0===a.length?(0,De.jsxs)(Xe,{fluid:!0,className:"py-4 text-center",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading analytics..."})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:t,userRole:n,onLogout:i}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:t,onLogout:i,dashboardType:n}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(Jm,{title:"OOX Furniture - Business Analytics",subtitle:"OOX Furniture comprehensive business intelligence and performance metrics",icon:vi,onRefresh:S,accentColor:"#f59e0b",children:(0,De.jsxs)("div",{className:"d-flex gap-3 justify-content-end align-items-center",children:[(0,De.jsxs)(Wl.Select,{value:N,onChange:e=>k(e.target.value),style:{width:"150px",borderRadius:"12px",border:"2px solid #f59e0b40",fontWeight:"600"},children:[(0,De.jsx)("option",{value:"7",children:"Last 7 days"}),(0,De.jsx)("option",{value:"30",children:"Last 30 days"}),(0,De.jsx)("option",{value:"90",children:"Last 3 months"}),(0,De.jsx)("option",{value:"365",children:"Last year"}),(0,De.jsx)("option",{value:"all",children:"All time"})]}),(0,De.jsxs)(Xs,{variant:"primary",className:"d-flex align-items-center",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:"600",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.3s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,De.jsx)(Mi,{className:"me-2"}),"Export Report"]})]})}),p&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>f(""),children:[(0,De.jsx)(Ii,{className:"me-2"}),p]}),(0,De.jsxs)(Cn,{className:"mb-4",children:["owner"===n&&(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Zi,{size:40,className:"text-success mb-3"}),(0,De.jsx)("h3",{className:"text-success mb-1",children:A(T.totalRevenue)}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Total Revenue"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(ii,{className:"text-success me-1",size:14}),(0,De.jsx)("small",{className:"text-success",children:"+12% vs last period"})]})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ki,{size:40,className:"text-primary mb-3"}),(0,De.jsx)("h3",{className:"text-primary mb-1",children:T.totalOrders}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Total Orders"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(ii,{className:"text-success me-1",size:14}),(0,De.jsx)("small",{className:"text-success",children:"+8% vs last period"})]})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Or,{size:40,className:"text-info mb-3"}),(0,De.jsx)("h3",{className:"text-info mb-1",children:M.total}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Total Customers"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(ii,{className:"text-success me-1",size:14}),(0,De.jsxs)("small",{className:"text-success",children:["+",M.new," new"]})]})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(vi,{size:40,className:"text-warning mb-3"}),(0,De.jsx)("h3",{className:"text-warning mb-1",children:A(T.averageOrderValue)}),(0,De.jsx)("p",{className:"text-muted mb-2",children:"Avg Order Value"}),(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,De.jsx)(Oi,{className:"text-secondary me-1",size:14}),(0,De.jsx)("small",{className:"text-secondary",children:"Stable"})]})]})})})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Zi,{className:"me-2 text-success"}),"Financial Overview"]}),(0,De.jsxs)(Sd,{size:"sm",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(zi,{className:"me-1"}),"Details"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(ar,{className:"me-1"}),"Print"]})]})]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{children:["owner"===n&&(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Total Revenue"}),(0,De.jsx)("span",{className:"fw-bold text-success",children:A(T.totalRevenue)})]}),(0,De.jsx)(Xo,{variant:"success",now:100,height:8})]}),(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Collected"}),(0,De.jsx)("span",{className:"fw-bold text-info",children:A(T.paidRevenue)})]}),(0,De.jsx)(Xo,{variant:"info",now:75,height:8})]}),(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Outstanding"}),(0,De.jsx)("span",{className:"fw-bold text-warning",children:A(T.outstandingBalance)})]}),(0,De.jsx)(Xo,{variant:"warning",now:50,height:8})]})]}),(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Avg Order Value"}),(0,De.jsx)("span",{className:"fw-bold text-secondary",children:A(T.averageOrderValue)})]}),(0,De.jsx)(Xo,{variant:"secondary",now:65,height:8})]}),(0,De.jsxs)("div",{className:"mb-4",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Paid Orders"}),(0,De.jsx)("span",{className:"fw-bold text-success",children:T.paidOrders})]}),(0,De.jsx)(Xo,{variant:"success",now:T.collectionRate,height:8})]})]})]})})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(xi,{className:"me-2 text-primary"}),"Order Status Breakdown"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-warning rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Pending"})]}),(0,De.jsx)(Rn,{bg:"warning",children:P.pending})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-info rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"In Production"})]}),(0,De.jsx)(Rn,{bg:"info",children:P.in_production})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Ready for Delivery"})]}),(0,De.jsx)(Rn,{bg:"primary",children:P.order_ready})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-success rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Delivered"})]}),(0,De.jsx)(Rn,{bg:"success",children:P.delivered})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-danger rounded me-2",style:{width:"12px",height:"12px"}}),(0,De.jsx)("span",{className:"text-muted",children:"Overdue"})]}),(0,De.jsx)(Rn,{bg:"danger",children:P.overdue})]})]}),(0,De.jsx)("hr",{}),(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-primary",children:P.total}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Orders"})]})]})]})})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ui,{size:36,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:g.total_materials||0}),(0,De.jsx)("small",{className:"text-muted",children:"Total Materials"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ui,{size:36,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:g.in_stock||0}),(0,De.jsx)("small",{className:"text-muted",children:"Materials In Stock"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(Ii,{size:32,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:x.length}),(0,De.jsx)("small",{className:"text-muted",children:"Low Stock Alerts"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"border-0 shadow-sm h-100",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)(ki,{size:32,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:j.started}),(0,De.jsx)("small",{className:"text-muted",children:"Active Tasks"})]})})})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsxs)(ps.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Low Stock (Top 8)"}),(0,De.jsx)(Rn,{bg:x.length?"warning":"secondary",children:x.length})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Material"}),(0,De.jsx)("th",{children:"Current"}),(0,De.jsx)("th",{children:"Threshold"})]})}),(0,De.jsxs)("tbody",{children:[x.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.material_name}),(0,De.jsxs)("td",{children:[e.current_stock," ",e.unit]}),(0,De.jsx)("td",{children:e.threshold})]},e.id)),0===x.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"None"})})]})]})})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsxs)(ps.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Orders Snapshot"}),(0,De.jsxs)(Rn,{bg:"success",children:["Ready: ",y.filter(e=>"ready_for_delivery"===e.production_status).length]})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Customer"}),(0,De.jsx)("th",{children:"Production"})]})}),(0,De.jsxs)("tbody",{children:[y.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.order_number}),(0,De.jsx)("td",{children:e.customer_name}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"ready_for_delivery"===e.production_status?"success":"in_production"===e.production_status?"warning":"secondary",children:e.production_status})})]},e.id)),0===y.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"No orders"})})]})]})})]})})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Or,{className:"me-2 text-info"}),"Customer Analytics"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Cn,{className:"mb-3",children:[(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-info",children:M.total}),(0,De.jsx)("small",{className:"text-muted",children:"Total Customers"})]})}),(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-success",children:M.active}),(0,De.jsx)("small",{className:"text-muted",children:"Active Customers"})]})})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Customer Retention Rate"}),(0,De.jsx)(Rn,{bg:"success",children:E(M.retentionRate)})]}),(0,De.jsx)(Xo,{variant:"success",now:M.retentionRate,height:6})]}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Customers with Email"}),(0,De.jsx)("span",{className:"fw-bold",children:M.withEmail})]})}),(0,De.jsx)("div",{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"New Customers (Period)"}),(0,De.jsx)(Rn,{bg:"info",children:M.new})]})})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(ui,{className:"me-2 text-warning"}),"Production Metrics"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Cn,{className:"mb-3",children:[(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-warning",children:L.in_production}),(0,De.jsx)("small",{className:"text-muted",children:"In Production"})]})}),(0,De.jsx)(Pn,{xs:6,children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h4",{className:"text-success",children:L.completed}),(0,De.jsx)("small",{className:"text-muted",children:"Completed"})]})})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"On-Time Delivery Rate"}),(0,De.jsx)(Rn,{bg:"success",children:E(L.onTimeRate)})]}),(0,De.jsx)(Xo,{variant:"success",now:L.onTimeRate,height:6})]}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Not Started"}),(0,De.jsx)(Rn,{bg:"secondary",children:L.not_started})]})}),(0,De.jsx)("div",{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Ready for Delivery"}),(0,De.jsx)(Rn,{bg:"primary",children:L.ready_for_delivery})]})})]})]})})]}),(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(wr,{className:"me-2 text-warning"}),"Top Customers by Revenue"]})}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsx)("div",{className:"table-responsive",children:(0,De.jsxs)(Vr,{className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Rank"}),(0,De.jsx)("th",{children:"Customer"}),(0,De.jsx)("th",{children:"Orders"}),(0,De.jsx)("th",{children:"Total Revenue"}),(0,De.jsx)("th",{children:"Avg Order Value"})]})}),(0,De.jsxs)("tbody",{children:[M.topCustomers.map((e,t)=>{var n,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)(Rn,{bg:0===t?"warning":1===t?"secondary":"light",children:["#",t+1]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{className:"bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"32px",height:"32px",fontSize:"0.9rem",fontWeight:"bold"},children:(null===(n=e.name)||void 0===n||null===(s=n.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-medium",children:e.name}),(0,De.jsx)("small",{className:"text-muted",children:e.phone})]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"info",children:e.orderCount})}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"fw-bold text-success",children:A(e.totalValue)})}),(0,De.jsx)("td",{children:(0,De.jsx)("span",{className:"text-muted",children:A(e.orderCount>0?e.totalValue/e.orderCount:0)})})]},e.id)}),0===M.topCustomers.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:"5",className:"text-center text-muted py-4",children:"No customer data available"})})]})]})})})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm h-100",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Or,{className:"me-2 text-secondary"}),"Team Overview"]})}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("div",{className:"mb-4",children:(0,De.jsxs)("div",{className:"text-center",children:[(0,De.jsx)("h3",{className:"text-primary",children:R.total}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Total Team Members"})]})}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Active Users"}),(0,De.jsx)(Rn,{bg:"success",children:R.active})]})}),(0,De.jsx)("div",{className:"mb-3",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,De.jsx)("span",{className:"text-muted",children:"Recent Logins (7 days)"}),(0,De.jsx)(Rn,{bg:"info",children:R.recentLogins})]})}),(0,De.jsx)("hr",{}),(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Owners"}),(0,De.jsx)(Rn,{bg:"warning",children:R.owner})]})}),(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Admins"}),(0,De.jsx)(Rn,{bg:"primary",children:R.admin})]})}),(0,De.jsx)("div",{className:"mb-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Warehouse"}),(0,De.jsx)(Rn,{bg:"success",children:R.warehouse})]})}),(0,De.jsx)("div",{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{className:"text-muted",children:"Delivery"}),(0,De.jsx)(Rn,{bg:"info",children:R.delivery})]})})]})]})})]}),(0,De.jsx)(Cn,{children:(0,De.jsx)(Pn,{children:(0,De.jsxs)(ps,{className:"border-0 shadow-sm",children:[(0,De.jsx)(ps.Header,{className:"bg-white border-bottom",children:(0,De.jsxs)("h5",{className:"mb-0",children:[(0,De.jsx)(Bi,{className:"me-2 text-primary"}),"Quick Actions"]})}),(0,De.jsx)(ps.Body,{children:(0,De.jsxs)("div",{className:"d-flex gap-3 flex-wrap",children:[(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>r("/owner/orders"),children:[(0,De.jsx)(ki,{className:"me-2"}),"View All Orders"]}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>r("/owner/customers"),children:[(0,De.jsx)(Or,{className:"me-2"}),"Manage Customers"]}),(0,De.jsxs)(Xs,{variant:"info",onClick:()=>r("/owner/payments"),children:[(0,De.jsx)(Zi,{className:"me-2"}),"Payment Overview"]}),(0,De.jsxs)(Xs,{variant:"warning",onClick:()=>r("/owner/deliveries"),children:[(0,De.jsx)(Er,{className:"me-2"}),"Delivery Status"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(Mi,{className:"me-2"}),"Export Full Report"]}),(0,De.jsxs)(Xs,{variant:"outline-secondary",children:[(0,De.jsx)(ar,{className:"me-2"}),"Print Dashboard"]})]})})]})})})]})]})]})},dP={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"https://internaloox-1.onrender.com/api",uP=e=>{let{onLogin:t}=e;const n=Z(),[i,r]=(0,s.useState)({username:"",password:"",role:"admin"}),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{const e=()=>{f(window.innerWidth<768)};e(),window.addEventListener("resize",e);const t=setInterval(()=>v(new Date),6e4);return()=>{window.removeEventListener("resize",e),clearInterval(t)}},[]);const x=e=>{const{name:t,value:n}=e.target;r(e=>Pe(Pe({},e),{},{[t]:n})),d&&u("")};return(0,De.jsxs)("div",{className:"oox-mobile-container",style:{minHeight:"100vh",background:"#f8f9fa",position:"relative",overflow:"hidden"},children:[(0,De.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"\n            radial-gradient(circle at 20% 80%, rgba(245, 158, 11, 0.3) 0%, transparent 50%),\n            radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.3) 0%, transparent 50%),\n            radial-gradient(circle at 40% 40%, rgba(59, 130, 246, 0.2) 0%, transparent 50%)\n          ",animation:"float 20s ease-in-out infinite"}}),(0,De.jsx)("div",{className:"oox-floating-particles",children:[...Array(20)].map((e,t)=>(0,De.jsx)("div",{style:{position:"absolute",width:"".concat(10*Math.random()+5,"px"),height:"".concat(10*Math.random()+5,"px"),background:"rgba(255, 255, 255, 0.1)",borderRadius:"50%",top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),animation:"float ".concat(10*Math.random()+10,"s ease-in-out infinite"),animationDelay:"".concat(5*Math.random(),"s")}},t))}),(0,De.jsxs)("div",{className:"oox-animate-fadeInUp",style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100vh",padding:p?"1rem":"2rem"},children:[(0,De.jsxs)("div",{className:"oox-mobile-text-center oox-mobile-mb-4",children:[(0,De.jsxs)("div",{className:"oox-logo",style:{width:p?"100px":"120px",height:p?"100px":"120px",margin:"0 auto 1.5rem",position:"relative"},children:[(0,De.jsx)(Ei,{size:p?50:60,style:{color:"white"}}),(0,De.jsx)("div",{style:{position:"absolute",top:"-10px",left:"-10px",right:"-10px",bottom:"-10px",border:"3px solid rgba(255, 255, 255, 0.3)",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite"}})]}),(0,De.jsx)("h1",{className:"oox-brand-gradient",style:{fontSize:p?"2.5rem":"3.5rem",fontWeight:"900",margin:"0 0 0.5rem 0",textShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",background:"linear-gradient(135deg, #ffffff 0%, #f59e0b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"OOX FURNITURE"}),(0,De.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:p?"1.1rem":"1.3rem",fontWeight:"600",margin:"0 0 0.5rem 0",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Internal Order Management System"}),(0,De.jsxs)("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,De.jsx)(li,{style:{color:"#f59e0b"}}),(0,De.jsx)("span",{children:"Powered by Innovation"}),(0,De.jsx)(Vi,{style:{color:"#10b981"}})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-card oox-animate-slideInLeft",style:{maxWidth:"400px",margin:"0 auto",position:"relative"},children:[(0,De.jsxs)("div",{className:"oox-mobile-text-center oox-mobile-mb-4",children:[(0,De.jsxs)("div",{className:"oox-mobile-flex-center oox-mobile-mb-3",children:[(0,De.jsx)(wr,{style:{color:"#f59e0b",fontSize:"1.5rem",marginRight:"0.5rem"}}),(0,De.jsx)("h2",{style:{margin:0,color:"#1e293b",fontWeight:"700",fontSize:"1.5rem"},children:"Welcome Back"}),(0,De.jsx)(wr,{style:{color:"#f59e0b",fontSize:"1.5rem",marginLeft:"0.5rem"}})]}),(0,De.jsx)("p",{style:{color:"#6b7280",margin:0,fontSize:"0.95rem"},children:"Access your OOX Furniture dashboard"}),(0,De.jsxs)("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,De.jsx)("span",{children:g.toLocaleDateString()}),(0,De.jsx)("span",{children:"\u2022"}),(0,De.jsx)("span",{children:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),d&&(0,De.jsxs)("div",{className:"oox-mobile-mb-3",style:{padding:"0.875rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,De.jsx)(Ii,{style:{color:"#dc2626",flexShrink:0}}),(0,De.jsx)("span",{style:{color:"#dc2626",fontSize:"0.875rem",fontWeight:"500"},children:d})]}),h&&(0,De.jsxs)("div",{className:"oox-mobile-mb-3",style:{padding:"0.875rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,De.jsx)(bi,{style:{color:"#059669",flexShrink:0}}),(0,De.jsx)("span",{style:{color:"#059669",fontSize:"0.875rem",fontWeight:"500"},children:h})]}),(0,De.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.username.trim()?i.password.trim()?i.role||(u("Role is required"),0):(u("Password is required"),0):(u("Username is required"),0)){c(!0),u(""),m("");try{const e=await fetch("".concat(dP,"/users/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,password:i.password,selected_role:i.role})});if(!e.ok){const t=await e.json();return u(t.error||"Login failed"),void c(!1)}const s=await e.json();localStorage.setItem("oox_token",s.access),localStorage.setItem("oox_refresh",s.refresh);const r=s.user||{};localStorage.setItem("oox_user",JSON.stringify(r)),localStorage.setItem("oox_selected_role",i.role||"");const a=r.role,o=a?a.charAt(0).toUpperCase()+a.slice(1):"Dashboard";m("Welcome to OOX Furniture ".concat(o,"!")),t(r);const l=e=>{switch(e){case"owner":return"/owner";case"admin":return"/admin";case"delivery":return"/delivery";case"warehouse_worker":return"/warehouse/worker";case"warehouse":case"warehouse_manager":return"/warehouse";default:return"/login"}};setTimeout(()=>{const e=localStorage.getItem("oox_selected_role"),t=e&&"owner"===r.role?e:a;n(l(t))},1500)}catch(s){u("Network error. Please check your connection.")}finally{c(!1)}}},children:[(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:[(0,De.jsx)(Rr,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"Username"]}),(0,De.jsx)("input",{name:"username",type:"text",value:i.username,onChange:x,className:"oox-mobile-form-input",placeholder:"Enter your username",disabled:l,style:{paddingLeft:"1rem",fontSize:p?"16px":"0.875rem"}})]}),(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:[(0,De.jsx)(Lr,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"Access Level"]}),(0,De.jsxs)("select",{name:"role",value:i.role,onChange:x,className:"oox-mobile-form-input",disabled:l,style:{fontSize:p?"16px":"0.875rem"},children:[(0,De.jsx)("option",{value:"admin",children:"Admin - Operations Control"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse - Production Floor"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery - Distribution Hub"}),(0,De.jsx)("option",{value:"owner",children:"Owner - Executive Portal"})]})]}),(0,De.jsxs)("div",{className:"oox-mobile-form-group",children:[(0,De.jsxs)("label",{className:"oox-mobile-form-label",children:[(0,De.jsx)(Qi,{style:{marginRight:"0.5rem",color:"#f59e0b"}}),"Password"]}),(0,De.jsxs)("div",{style:{position:"relative"},children:[(0,De.jsx)("input",{name:"password",type:a?"text":"password",value:i.password,onChange:x,className:"oox-mobile-form-input",placeholder:"Enter your password",disabled:l,style:{paddingRight:"3rem",fontSize:p?"16px":"0.875rem"}}),(0,De.jsx)("button",{type:"button",onClick:()=>o(!a),disabled:l,style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#6b7280",cursor:"pointer",padding:0},children:a?(0,De.jsx)(Fi,{}):(0,De.jsx)(zi,{})})]})]}),(0,De.jsx)("button",{type:"submit",disabled:l,className:"oox-mobile-btn",style:{width:"100%",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"700"},children:l?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(yr,{style:{animation:"spin 1s linear infinite"}}),"Authenticating..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Lr,{}),"Access OOX Dashboard"]})})]}),(0,De.jsxs)("div",{className:"oox-mobile-text-center",style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,De.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0 0 0.25rem 0",fontWeight:"500"},children:"\xa9 2024 OOX Furniture Management System"}),(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.7rem",color:"#d1d5db"},children:[(0,De.jsx)("span",{children:"Secure"}),(0,De.jsx)("span",{children:"\u2022"}),(0,De.jsx)("span",{children:"Reliable"}),(0,De.jsx)("span",{children:"\u2022"}),(0,De.jsx)("span",{children:"Mobile-First"})]})]})]}),p&&(0,De.jsxs)("div",{className:"oox-mobile-text-center oox-animate-fadeInUp",style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255, 255, 255, 0.1)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[(0,De.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem",margin:0,fontWeight:"500"},children:"\ud83d\udcf1 Optimized for mobile experience"}),(0,De.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.8rem",margin:"0.25rem 0 0 0"},children:"Tap any dashboard above for instant access"})]})]}),(0,De.jsx)("style",{jsx:!0,children:"\n        @keyframes float {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          33% { transform: translateY(-10px) rotate(1deg); }\n          66% { transform: translateY(5px) rotate(-1deg); }\n        }\n        \n        @keyframes pulse {\n          0%, 100% { \n            transform: scale(1);\n            opacity: 0.7;\n          }\n          50% { \n            transform: scale(1.05);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})},hP={name:"",sku:"",description:"",price:"",currency:"ZAR",colors:[],fabrics:[],attributes:{}},mP=e=>{let{user:t}=e;const n=Z(),[i,r]=(0,s.useState)(hP),[a,o]=(0,s.useState)({}),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[p,f]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[x,b]=(0,s.useState)(!0),[y,w]=(0,s.useState)(""),[j,_]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{const[e,t]=await Promise.all([fa().catch(()=>({results:[]})),ga().catch(()=>({results:[]}))]),n=e=>e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[];f(n(e)),v(n(t))}catch(OP){}finally{b(!1)}})()},[]);const N=(0,s.useMemo)(()=>e=>{const t={};if((!e.name||e.name.trim().length<2)&&(t.name="Product name is required"),""===e.price||null===e.price)t.price="Price in Rands is required";else{const n=Number(e.price);(Number.isNaN(n)||n<0)&&(t.price="Enter a valid price (>= 0)")}return Array.isArray(e.colors)&&0!==e.colors.length||(t.colors="Select at least one color"),Object.keys(e.attributes||{}).forEach(e=>{e&&""!==e.trim()||(t.attributes="Attribute names cannot be empty")}),t},[]),k=(e,t)=>{r(n=>Pe(Pe({},n),{},{[e]:t})),a[e]&&o(t=>Pe(Pe({},t),{},{[e]:void 0}))},S=(e,t)=>{const n=Array.from(t.target.selectedOptions).map(e=>e.value);r(t=>Pe(Pe({},t),{},{[e]:n})),a[e]&&o(t=>Pe(Pe({},t),{},{[e]:void 0}))},C=Array.isArray(p)?p:[],A=Array.isArray(g)?g:[];return(0,De.jsxs)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[(0,De.jsx)(Ym,{user:t,onLogout:()=>n("/login"),dashboardType:"owner"===(null===t||void 0===t?void 0:t.role)?"owner":(null===t||void 0===t?void 0:t.role)||"warehouse"}),(0,De.jsxs)(Xe,{className:"py-4",children:[(0,De.jsxs)(Xs,{variant:"link",className:"mb-3",onClick:()=>n(-1),children:[(0,De.jsx)(si,{className:"me-2"})," Back"]}),(0,De.jsx)(Cn,{className:"justify-content-center",children:(0,De.jsx)(Pn,{lg:10,xl:8,children:(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsxs)(ps.Header,{className:"d-flex align-items-center",children:[(0,De.jsx)(ci,{className:"me-2 text-primary"}),(0,De.jsx)("h5",{className:"mb-0",children:"Create New Product"}),(0,De.jsx)(Rn,{bg:"secondary",className:"ms-3",children:"Warehouse Manager"})]}),(0,De.jsxs)(ps.Body,{children:[d&&(0,De.jsxs)(Nn,{variant:"success",className:"d-flex align-items-center",children:[(0,De.jsx)(bi,{className:"me-2"})," ",d]}),h&&(0,De.jsx)(Nn,{variant:"danger",children:h}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault(),m(null);const s=N(i);if(o(s),!(Object.keys(s).filter(e=>s[e]).length>0)){c(!0);try{var a;const e={name:i.name.trim(),sku:i.sku?i.sku.trim():void 0,description:(null===(a=i.description)||void 0===a?void 0:a.trim())||"",price:Number(i.price),currency:i.currency||"ZAR",colors:(i.colors||[]).map(e=>Number(e)),fabrics:(i.fabrics||[]).map(e=>Number(e)),attributes:i.attributes||{}};Object.keys(e).forEach(t=>void 0===e[t]&&delete e[t]);const s=await va(e);u('Product "'.concat((null===s||void 0===s?void 0:s.name)||e.name,'" created successfully')),setTimeout(()=>{r(hP);const e=null===t||void 0===t?void 0:t.role;n("owner"===e?"/owner":"admin"===e?"/admin":"/warehouse")},1e3)}catch(l){m((null===l||void 0===l?void 0:l.message)||"Failed to create product")}finally{c(!1)}}},noValidate:!0,children:[(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(Wl.Group,{controlId:"name",children:[(0,De.jsx)(Wl.Label,{children:"Product Name"}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"e.g., L-Shaped Couch",value:i.name,onChange:e=>k("name",e.target.value),isInvalid:!!a.name,required:!0}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:a.name})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{controlId:"sku",children:[(0,De.jsx)(Wl.Label,{children:"SKU (optional)"}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"e.g., OOX-LC-001",value:i.sku,onChange:e=>k("sku",e.target.value)})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{controlId:"price",children:[(0,De.jsx)(Wl.Label,{children:"Price (Rands)"}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:"R"}),(0,De.jsx)(Wl.Control,{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:i.price,onChange:e=>k("price",e.target.value),isInvalid:!!a.price,required:!0}),(0,De.jsx)(sc.Text,{children:"ZAR"}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:a.price})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{controlId:"colors",children:[(0,De.jsx)(Wl.Label,{children:"Colors (select one or more)"}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(er,{})}),(0,De.jsxs)(Wl.Select,{multiple:!0,value:i.colors,onChange:e=>S("colors",e),isInvalid:!!a.colors,required:!0,children:[x&&(0,De.jsx)("option",{children:"Loading..."}),!x&&C.map((e,t)=>{var n,s,i,r;const a=null!==(n=null!==(s=null===e||void 0===e?void 0:e.id)&&void 0!==s?s:null===e||void 0===e?void 0:e.name)&&void 0!==n?n:e,o=null!==(i=null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:null===e||void 0===e?void 0:e.label)&&void 0!==i?i:String(a);return(0,De.jsx)("option",{value:a,children:o},"".concat(a,"-").concat(t))})]}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:a.colors})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{controlId:"fabrics",children:[(0,De.jsx)(Wl.Label,{children:"Fabrics (optional, multiple)"}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(Ei,{})}),(0,De.jsxs)(Wl.Select,{multiple:!0,value:i.fabrics,onChange:e=>S("fabrics",e),children:[x&&(0,De.jsx)("option",{children:"Loading..."}),!x&&A.map((e,t)=>{var n,s,i,r;const a=null!==(n=null!==(s=null===e||void 0===e?void 0:e.id)&&void 0!==s?s:null===e||void 0===e?void 0:e.name)&&void 0!==n?n:e,o=null!==(i=null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:null===e||void 0===e?void 0:e.label)&&void 0!==i?i:String(a);return(0,De.jsx)("option",{value:a,children:o},"".concat(a,"-").concat(t))})]})]})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{controlId:"description",children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:4,placeholder:"Short description of the product",value:i.description,onChange:e=>k("description",e.target.value)})]})})]}),(0,De.jsx)("hr",{className:"my-4"}),(0,De.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,De.jsx)("h6",{className:"mb-0",children:"Additional Fields"}),(0,De.jsx)(Rn,{bg:"info",className:"ms-2",children:"Optional"})]}),a.attributes&&(0,De.jsx)(Nn,{variant:"warning",className:"py-2",children:a.attributes}),Object.keys(i.attributes||{}).length>0&&(0,De.jsx)("div",{className:"mb-3",children:Object.entries(i.attributes).map(e=>{let[t,n]=e;return(0,De.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,De.jsx)("div",{className:"me-2",style:{minWidth:180},children:(0,De.jsx)(Rn,{bg:"secondary",className:"text-uppercase",children:t})}),(0,De.jsx)(Wl.Control,{type:"text",value:n,onChange:e=>r(n=>Pe(Pe({},n),{},{attributes:Pe(Pe({},n.attributes||{}),{},{[t]:e.target.value})}))}),(0,De.jsx)(Xs,{variant:"outline-danger",className:"ms-2",onClick:()=>(e=>{r(t=>{const n=Pe({},t.attributes||{});return delete n[e],Pe(Pe({},t),{},{attributes:n})})})(t),children:(0,De.jsx)(Ar,{})})]},t)})}),(0,De.jsxs)(sc,{className:"mb-3",children:[(0,De.jsx)(Wl.Control,{placeholder:"New field name (e.g., Wood Type)",value:y,onChange:e=>w(e.target.value)}),(0,De.jsx)(Wl.Control,{placeholder:"Value",value:j,onChange:e=>_(e.target.value)}),(0,De.jsxs)(Xs,{variant:"outline-primary",onClick:()=>{const e=y.trim();e&&(r(t=>Pe(Pe({},t),{},{attributes:Pe(Pe({},t.attributes||{}),{},{[e]:j})})),w(""),_(""),o(e=>Pe(Pe({},e),{},{attributes:void 0})))},disabled:!y.trim(),children:[(0,De.jsx)(rr,{className:"me-1"})," Add Field"]})]}),(0,De.jsx)("div",{className:"d-flex justify-content-end",children:(0,De.jsx)(Xs,{type:"submit",variant:"primary",disabled:l,className:"px-4",children:l?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Wr,{animation:"border",size:"sm",className:"me-2"}),"Saving..."]}):"Create Product"})})]})]})]})})})]})]})},pP={name:"",unit:"",unit_price:"",minimum_stock:"",description:""},fP=["units","metres","meters","boards","rolls","kilograms","kg","litres","liters"],gP=()=>{const[e,t]=(0,s.useState)([]),[n,i]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(pP),[f,g]=(0,s.useState)(!1),[v,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{a(!0),l(null);try{const[e,n]=await Promise.all([ka(),Aa().catch(()=>[])]);t(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.results)||[]),i(Array.isArray(n)?n:(null===n||void 0===n?void 0:n.results)||[])}catch(OP){l("Failed to load materials")}finally{a(!1)}})()},[]);const b=async e=>{var n;if(window.confirm('Delete material "'.concat(e.name,'"?')))try{await(n=e.id,Yr("/inventory/materials/".concat(n,"/"),{method:"DELETE"})),t(t=>t.filter(t=>t.id!==e.id))}catch(OP){alert("Delete failed: "+((null===OP||void 0===OP?void 0:OP.message)||"Unknown error"))}},y=(0,s.useMemo)(()=>e=>{var t,n;const s={};return null!==(t=e.name)&&void 0!==t&&t.trim()||(s.name="Name is required"),null!==(n=e.unit)&&void 0!==n&&n.trim()||(s.unit="Unit is required"),(""===e.unit_price||Number.isNaN(Number(e.unit_price))||Number(e.unit_price)<0)&&(s.unit_price="Valid unit price required"),""!==e.minimum_stock&&(Number.isNaN(Number(e.minimum_stock))||Number(e.minimum_stock)<0)&&(s.minimum_stock="Minimum stock must be >= 0"),s},[]),[w,j]=(0,s.useState)({}),_=(e,t)=>{p(n=>Pe(Pe({},n),{},{[e]:t})),j(t=>Pe(Pe({},t),{},{[e]:void 0}))};return(0,De.jsx)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:(0,De.jsxs)(Xe,{className:"py-4",children:[(0,De.jsx)(Cn,{className:"mb-3",children:(0,De.jsxs)(Pn,{className:"d-flex align-items-center justify-content-between",children:[(0,De.jsxs)("h4",{className:"mb-0",children:[(0,De.jsx)(ui,{className:"me-2 text-primary"}),"Inventory Materials"]}),(0,De.jsxs)(Xs,{variant:"success",onClick:()=>{h(null),p(pP),d(!0)},children:[(0,De.jsx)(rr,{className:"me-2"})," Add Material"]})]})}),o&&(0,De.jsx)(Nn,{variant:"danger",children:o}),v&&(0,De.jsx)(Nn,{variant:"success",children:v}),(0,De.jsx)(ps,{className:"shadow-sm",children:(0,De.jsx)(ps.Body,{children:r?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})}):(0,De.jsxs)(Vr,{responsive:!0,hover:!0,size:"sm",className:"align-middle",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Name"}),(0,De.jsx)("th",{children:"Category"}),(0,De.jsx)("th",{children:"Unit"}),(0,De.jsx)("th",{children:"Unit Price"}),(0,De.jsx)("th",{children:"Min Stock"}),(0,De.jsx)("th",{children:"Description"}),(0,De.jsx)("th",{style:{width:140}})]})}),(0,De.jsx)("tbody",{children:0===e.length?(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:7,className:"text-center text-muted py-4",children:"No materials"})}):e.map(e=>{var t,s;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.name}),(0,De.jsx)("td",{children:(null===(t=n.find(t=>{var n;return t.id===(null!==(n=e.category_id)&&void 0!==n?n:e.category)}))||void 0===t?void 0:t.name)||"-"}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"secondary",children:e.unit})}),(0,De.jsxs)("td",{children:["R ",Number(e.unit_price||0).toFixed(2)]}),(0,De.jsx)("td",{children:null!==(s=e.minimum_stock)&&void 0!==s?s:"-"}),(0,De.jsx)("td",{className:"text-truncate",style:{maxWidth:260},children:e.description}),(0,De.jsxs)("td",{className:"text-end",children:[(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>(e=>{var t,n;h(e),p({name:e.name||"",unit:e.unit||"",unit_price:null!==(t=e.unit_price)&&void 0!==t?t:"",minimum_stock:null!==(n=e.minimum_stock)&&void 0!==n?n:"",description:e.description||""}),d(!0)})(e),children:(0,De.jsx)(Li,{})}),(0,De.jsx)(Xs,{variant:"outline-danger",size:"sm",onClick:()=>b(e),children:(0,De.jsx)(Ar,{})})]})]},e.id)})})]})})}),(0,De.jsxs)(Bo,{show:c,onHide:()=>d(!1),backdrop:"static",size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:u?"Edit Material":"Add Material"})}),(0,De.jsxs)(Bo.Body,{children:[w.general&&(0,De.jsx)(Nn,{variant:"danger",children:w.general}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault(),x(null);const n=y(m);if(j(n),!Object.values(n).filter(Boolean).length){g(!0);try{var s;const e={name:m.name.trim(),unit:m.unit,cost_per_unit:Number(m.unit_price),minimum_stock:""===m.minimum_stock?null:Number(m.minimum_stock),description:(null===(s=m.description)||void 0===s?void 0:s.trim())||""};let n;u?(n=await((e,t)=>Yr("/inventory/materials/".concat(e,"/"),{method:"PUT",data:t}))(u.id,e),t(e=>e.map(e=>e.id===u.id?n:e)),x("Material updated")):(n=await(e=>Yr("/inventory/materials/",{method:"POST",data:e}))(e),t(e=>[n,...e]),x("Material created")),d(!1),h(null),p(pP)}catch(e){j({general:(null===e||void 0===e?void 0:e.message)||"Save failed"})}finally{g(!1)}}},children:[(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsxs)(Wl.Label,{children:[(0,De.jsx)(Nr,{className:"me-2"}),"Name"]}),(0,De.jsx)(Wl.Control,{value:m.name,onChange:e=>_("name",e.target.value),isInvalid:!!w.name}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:w.name})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsxs)(Wl.Label,{children:[(0,De.jsx)(cr,{className:"me-2"}),"Unit"]}),(0,De.jsxs)(Wl.Select,{value:m.unit,onChange:e=>_("unit",e.target.value),isInvalid:!!w.unit,children:[(0,De.jsx)("option",{value:"",children:"Select unit"}),fP.map(e=>(0,De.jsx)("option",{value:e,children:e},e))]}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:w.unit})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsxs)(Wl.Label,{children:[(0,De.jsx)(Pi,{className:"me-2"}),"Unit Price (ZAR)"]}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:"R"}),(0,De.jsx)(Wl.Control,{type:"number",min:"0",step:"0.01",value:m.unit_price,onChange:e=>_("unit_price",e.target.value),isInvalid:!!w.unit_price}),(0,De.jsx)(sc.Text,{children:"ZAR"}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:w.unit_price})]})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Minimum Stock"}),(0,De.jsx)(Wl.Control,{type:"number",min:"0",step:"0.01",value:m.minimum_stock,onChange:e=>_("minimum_stock",e.target.value),isInvalid:!!w.minimum_stock}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:w.minimum_stock})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,value:m.description,onChange:e=>_("description",e.target.value)})]})})]}),(0,De.jsxs)("div",{className:"d-flex justify-content-end mt-4",children:[(0,De.jsx)(Xs,{variant:"secondary",className:"me-2",onClick:()=>d(!1),disabled:f,children:"Cancel"}),(0,De.jsx)(Xs,{type:"submit",variant:"primary",disabled:f,children:f?"Saving...":"Save"})]})]})]})]})]})})},vP=()=>{const[e,t]=(0,s.useState)([]),[n,i]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)({material_id:"",direction:"in",quantity:"",unit_cost:"",note:""}),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{a(!0);try{const[e,n]=await Promise.all([ka(),Yr("/inventory/stock-movements/")]);t(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.results)||[]),i(Array.isArray(n)?n:(null===n||void 0===n?void 0:n.results)||[])}catch(OP){l("Failed to load stock data")}finally{a(!1)}})()},[]);const f=(0,s.useMemo)(()=>e=>{const t={};return e.material_id||(t.material_id="Select a material"),(!e.quantity||Number.isNaN(Number(e.quantity))||Number(e.quantity)<=0)&&(t.quantity="Enter a valid quantity"),"in"===e.direction&&(""===e.unit_cost||Number.isNaN(Number(e.unit_cost))||Number(e.unit_cost)<0)&&(t.unit_cost="Enter valid unit cost for stock-in"),t},[]),g=(e,t)=>{d(n=>Pe(Pe({},n),{},{[e]:t})),p(t=>Pe(Pe({},t),{},{[e]:void 0}))},v=t=>{var n;return(null===(n=e.find(e=>e.id===t))||void 0===n?void 0:n.name)||"-"},x=t=>{var n;return(null===(n=e.find(e=>e.id===t))||void 0===n?void 0:n.unit)||""};return(0,De.jsx)("div",{style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:(0,De.jsxs)(Xe,{className:"py-4",children:[(0,De.jsx)(Cn,{className:"mb-3",children:(0,De.jsx)(Pn,{className:"d-flex align-items-center justify-content-between",children:(0,De.jsxs)("h4",{className:"mb-0",children:[(0,De.jsx)(Di,{className:"me-2 text-primary"}),"Stock In-House"]})})}),(0,De.jsxs)(ps,{className:"shadow-sm mb-4",children:[(0,De.jsx)(ps.Header,{children:"Record Stock Movement"}),(0,De.jsxs)(ps.Body,{children:[m.general&&(0,De.jsx)(Nn,{variant:"danger",children:m.general}),(0,De.jsxs)(Wl,{onSubmit:async e=>{e.preventDefault();const t=f(c);if(p(t),!Object.values(t).filter(Boolean).length){h(!0);try{var n;const e={material:Number(c.material_id),direction:c.direction,quantity:Number(c.quantity),unit_cost:"in"===c.direction?Number(c.unit_cost):null,note:(null===(n=c.note)||void 0===n?void 0:n.trim())||""},t=await(e=>Yr("/inventory/stock-movements/",{method:"POST",data:e}))(e);i(e=>[t,...e]),d({material_id:"",direction:"in",quantity:"",unit_cost:"",note:""})}catch(e){p({general:(null===e||void 0===e?void 0:e.message)||"Failed to save stock movement"})}finally{h(!1)}}},children:[(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:5,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Material"}),(0,De.jsxs)(Wl.Select,{value:c.material_id,onChange:e=>g("material_id",e.target.value),isInvalid:!!m.material_id,children:[(0,De.jsx)("option",{value:"",children:"Select material"}),e.map(e=>(0,De.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:m.material_id})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Direction"}),(0,De.jsxs)(Wl.Select,{value:c.direction,onChange:e=>g("direction",e.target.value),children:[(0,De.jsx)("option",{value:"in",children:"Stock In"}),(0,De.jsx)("option",{value:"out",children:"Stock Out"})]})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Quantity"}),(0,De.jsx)(Wl.Control,{type:"number",min:"0",step:"0.01",value:c.quantity,onChange:e=>g("quantity",e.target.value),isInvalid:!!m.quantity}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:m.quantity}),c.material_id&&(0,De.jsxs)("div",{className:"small text-muted mt-1",children:["Unit: ",x(Number(c.material_id))]})]})}),"in"===c.direction&&(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Unit Cost (ZAR)"}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:"R"}),(0,De.jsx)(Wl.Control,{type:"number",min:"0",step:"0.01",value:c.unit_cost,onChange:e=>g("unit_cost",e.target.value),isInvalid:!!m.unit_cost}),(0,De.jsx)(sc.Text,{children:"ZAR"}),(0,De.jsx)(Wl.Control.Feedback,{type:"invalid",children:m.unit_cost})]})]})}),(0,De.jsx)(Pn,{md:12,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Note"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:2,value:c.note,onChange:e=>g("note",e.target.value)})]})})]}),(0,De.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,De.jsxs)(Xs,{type:"submit",variant:"primary",disabled:u,children:[(0,De.jsx)(rr,{className:"me-2"})," Save Movement"]})})]})]})]}),(0,De.jsxs)(ps,{className:"shadow-sm",children:[(0,De.jsx)(ps.Header,{children:"Recent Movements"}),(0,De.jsx)(ps.Body,{children:r?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})}):(0,De.jsxs)(Vr,{responsive:!0,hover:!0,size:"sm",className:"align-middle",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Material"}),(0,De.jsx)("th",{children:"Direction"}),(0,De.jsx)("th",{children:"Quantity"}),(0,De.jsx)("th",{children:"Unit Cost"}),(0,De.jsx)("th",{children:"Total Value"}),(0,De.jsx)("th",{children:"Note"}),(0,De.jsx)("th",{children:"Date"})]})}),(0,De.jsx)("tbody",{children:0===n.length?(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:7,className:"text-center text-muted py-4",children:"No movements"})}):n.map(e=>{var t;const n=null!==(t=e.material_id)&&void 0!==t?t:e.material;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:v(n)}),(0,De.jsx)("td",{children:"in"===e.direction?(0,De.jsxs)(Rn,{bg:"success",children:[(0,De.jsx)(ni,{className:"me-1"}),"In"]}):(0,De.jsxs)(Rn,{bg:"warning",text:"dark",children:[(0,De.jsx)(ii,{className:"me-1"}),"Out"]})}),(0,De.jsxs)("td",{children:[e.quantity," ",x(n)]}),(0,De.jsx)("td",{children:null!=e.unit_cost?"R ".concat(Number(e.unit_cost).toFixed(2)):"-"}),(0,De.jsx)("td",{children:null!=e.unit_cost?"R ".concat((Number(e.unit_cost)*Number(e.quantity)).toFixed(2)):"-"}),(0,De.jsx)("td",{className:"text-truncate",style:{maxWidth:260},children:e.note||"-"}),(0,De.jsx)("td",{children:e.created_at||"-"})]},e.id)})})]})})]})]})})},xP=e=>{var t,n,i,r;let{user:a,onLogout:o,activeTab:l,onTabChange:c,notifications:d=[],isMobile:u=!1}=e;const[h,m]=(0,s.useState)(!1),p=d.filter(e=>!e.is_read).length,f=[{id:"overview",label:"Overview",icon:qi,color:"#007bff",route:"/warehouse"},{id:"orders",label:"Orders",icon:ki,color:"#28a745",route:"/warehouse/orders"},{id:"task-management",label:"Task Management",icon:kr,color:"#ffc107",route:"/warehouse/tasks"},{id:"inventory",label:"Inventory",icon:ui,color:"#17a2b8",route:"/warehouse/products"},{id:"workers",label:"Workers",icon:Or,color:"#6f42c1",route:"/warehouse/workers"},{id:"analytics",label:"Analytics",icon:gi,color:"#fd7e14",route:"/warehouse/analytics"},{id:"delivery",label:"Delivery",icon:Er,color:"#e83e8c",route:"/warehouse/delivery"},{id:"warehouse",label:"Warehouse Stock",icon:Ir,color:"#20c997",route:"/warehouse/stock"}],g=(0,De.jsxs)("div",{className:"warehouse-side-nav",style:{width:"100%",height:"100vh",backgroundColor:"#2c3e50",color:"white",display:"flex",flexDirection:"column",overflowY:"auto",boxShadow:"2px 0 10px rgba(0,0,0,0.1)"},children:[(0,De.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #34495e",textAlign:"center",flexShrink:0},children:[(0,De.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#3498db",marginBottom:"5px"},children:[(0,De.jsx)(Ir,{className:"me-2"}),"OOX Warehouse"]}),(0,De.jsx)("div",{style:{fontSize:"14px",color:"#bdc3c7"},children:"Production Management System"})]}),(0,De.jsx)("div",{style:{padding:"15px 20px",borderBottom:"1px solid #34495e",backgroundColor:"#34495e",flexShrink:0},children:(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,De.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3498db",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold"},children:(null===a||void 0===a||null===(t=a.username)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase())||"U"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px"},children:(null===a||void 0===a||null===(i=a.get_full_name)||void 0===i?void 0:i.call(a))||(null===a||void 0===a?void 0:a.username)||"User"}),(0,De.jsx)("div",{style:{fontSize:"12px",color:"#bdc3c7"},children:(null===a||void 0===a||null===(r=a.role)||void 0===r?void 0:r.replace("_"," ").toUpperCase())||"ROLE"})]})]})}),(0,De.jsx)("div",{style:{flex:1,overflow:"auto"},children:(0,De.jsx)(Gs,{className:"flex-column",style:{padding:"20px 0"},children:f.map(e=>{const t=e.icon,n=l===e.id;return(0,De.jsx)(Gs.Item,{children:(0,De.jsxs)(Gs.Link,{onClick:()=>{return t=e.id,n=e.route,c(t),n&&window.location.pathname!==n&&(window.location.href=n),void(u&&m(!1));var t,n},style:{color:n?"white":"#bdc3c7",backgroundColor:n?e.color:"transparent",border:"none",padding:"15px 25px",margin:"2px 15px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px",fontSize:"16px"},onMouseEnter:e=>{n||(e.target.style.backgroundColor="#34495e",e.target.style.color="white")},onMouseLeave:e=>{n||(e.target.style.backgroundColor="transparent",e.target.style.color="#bdc3c7")},children:[(0,De.jsx)(t,{size:18}),e.label,"orders"===e.id&&(0,De.jsx)(Rn,{bg:"danger",style:{marginLeft:"auto",fontSize:"10px",padding:"4px 6px"},children:"New"})]})},e.id)})})}),(0,De.jsxs)("div",{style:{padding:"20px",borderTop:"1px solid #34495e",backgroundColor:"#34495e",flexShrink:0},children:[(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px",padding:"10px",backgroundColor:"#2c3e50",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#1a252f"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#2c3e50"},children:[(0,De.jsx)(oi,{size:16,color:"#3498db"}),(0,De.jsx)("span",{style:{fontSize:"14px"},children:"Notifications"}),p>0&&(0,De.jsx)(Rn,{bg:"danger",style:{marginLeft:"auto",fontSize:"10px",padding:"4px 6px"},children:p})]}),(0,De.jsxs)("div",{onClick:o,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",backgroundColor:"#e74c3c",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#c0392b",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#e74c3c",e.currentTarget.style.transform="translateY(0)"},children:[(0,De.jsx)(fr,{size:16}),(0,De.jsx)("span",{style:{fontSize:"14px"},children:"Logout"})]})]})]}),v=()=>(0,De.jsx)("div",{onClick:()=>m(!0),style:{position:"fixed",top:"20px",left:"20px",zIndex:1050,backgroundColor:"#2c3e50",color:"white",padding:"12px",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:window.innerWidth<=768?"block":"none"},children:(0,De.jsx)(ai,{size:20})});return"undefined"!==typeof window&&window.innerWidth<=768?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(v,{}),(0,De.jsxs)(yd,{show:h,onHide:()=>m(!1),placement:"start",style:{width:"280px"},children:[(0,De.jsxs)(yd.Header,{style:{backgroundColor:"#2c3e50",color:"white",border:"none"},children:[(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,De.jsx)(Ir,{color:"#3498db"}),(0,De.jsx)("strong",{children:"OOX Warehouse"})]}),(0,De.jsx)("div",{onClick:()=>m(!1),style:{cursor:"pointer",padding:"5px",color:"white",fontSize:"20px"},children:(0,De.jsx)(Cr,{})})]}),(0,De.jsx)(yd.Body,{style:{padding:0},children:g})]})]}):(0,De.jsx)("div",{style:{width:"280px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1e3},children:g})},bP=e=>{let{user:t,onLogout:n}=e;const i=$(),[r,a]=(0,s.useState)(new Date),[o,l]=(0,s.useState)("overview"),[c,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=()=>{d(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{const e=i.pathname;e.includes("/warehouse/products")?l("inventory"):e.includes("/warehouse/orders")?l("orders"):e.includes("/warehouse/tasks")?l("task-management"):e.includes("/warehouse/workers")?l("workers"):e.includes("/warehouse/analytics")?l("analytics"):e.includes("/warehouse/delivery")?l("delivery"):e.includes("/warehouse/stock")?l("warehouse"):l("overview")},[i]),(0,s.useEffect)(()=>{const e=setInterval(()=>a(new Date),1e3);return()=>clearInterval(e)},[]);return(0,De.jsxs)("div",{className:"warehouse-dashboard",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[(0,De.jsx)(xP,{user:t,onLogout:n,activeTab:o,onTabChange:e=>{l(e)},currentTime:r,isMobile:c}),(0,De.jsx)("div",{style:{marginLeft:c?"0":"280px",minHeight:"100vh",paddingTop:c?"60px":"0"},children:(0,De.jsx)(Xe,{fluid:!0,className:"p-4",children:(0,De.jsx)(ge,{context:{user:t,onLogout:n}})})})]})},yP=e=>{let{show:t,onHide:n,product:i,onProductUpdate:r,user:a}=e;const[o,l]=(0,s.useState)("colors"),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,g]=(0,s.useState)([]),[v,x]=(0,s.useState)([]),[b,y]=(0,s.useState)({name:"",code:"",hex_value:"#000000"}),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)([]),[k,S]=(0,s.useState)([]),[C,A]=(0,s.useState)({name:"",code:"",description:""}),[E,T]=(0,s.useState)(null),[P,M]=(0,s.useState)(!1),[L,R]=(0,s.useState)(!1),O=()=>["owner","admin","warehouse_manager","warehouse"].includes(null===a||void 0===a?void 0:a.role);(0,s.useEffect)(()=>{t&&i&&D()},[t,i]);const D=async()=>{try{d(!0),h("");const[e,t]=await Promise.all([fa().catch(()=>({results:[]})),ga().catch(()=>({results:[]}))]),n=e=>e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[];g(n(e)),N(n(t)),x((null===i||void 0===i?void 0:i.available_colors)||[]),S((null===i||void 0===i?void 0:i.available_fabrics)||[])}catch(e){h("Failed to load colors and fabrics: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}finally{d(!1)}},I=async()=>{if(b.name.trim())try{h("");const e=await(e=>Yr("/orders/colors/",{method:"POST",data:e}))(b);g([...f,e]),y({name:"",code:"",hex_value:"#000000"}),M(!1),p("Color added successfully!")}catch(e){h("Failed to add color: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}else h("Color name is required")},F=async(e,t)=>{try{h("");const n=await((e,t)=>Yr("/orders/colors/".concat(e,"/"),{method:"PUT",data:t}))(e,t);g(f.map(t=>t.id===e?n:t)),j(null),p("Color updated successfully!")}catch(n){h("Failed to update color: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},z=async e=>{var t;if(window.confirm("Are you sure you want to delete this color?"))try{h(""),await(t=e,Yr("/orders/colors/".concat(t,"/"),{method:"DELETE"})),g(f.filter(t=>t.id!==e)),x(v.filter(t=>t.id!==e)),p("Color deleted successfully!")}catch(n){h("Failed to delete color: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},B=async()=>{if(C.name.trim())try{h("");const e=await(e=>Yr("/orders/fabrics/",{method:"POST",data:e}))(C);N([..._,e]),A({name:"",code:"",description:""}),R(!1),p("Fabric added successfully!")}catch(e){h("Failed to add fabric: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}else h("Fabric name is required")},W=async(e,t)=>{try{h("");const n=await((e,t)=>Yr("/orders/fabrics/".concat(e,"/"),{method:"PUT",data:t}))(e,t);N(_.map(t=>t.id===e?n:t)),T(null),p("Fabric updated successfully!")}catch(n){h("Failed to update fabric: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},H=async e=>{var t;if(window.confirm("Are you sure you want to delete this fabric?"))try{h(""),await(t=e,Yr("/orders/fabrics/".concat(t,"/"),{method:"DELETE"})),N(_.filter(t=>t.id!==e)),S(k.filter(t=>t.id!==e)),p("Fabric deleted successfully!")}catch(n){h("Failed to delete fabric: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}};return(0,De.jsxs)(Bo,{show:t,onHide:n,size:"xl",scrollable:!0,children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsxs)(Bo.Title,{children:[(0,De.jsx)(Yi,{className:"me-2"}),"Manage Colors & Fabrics",i&&(0,De.jsxs)("div",{className:"fs-6 text-muted mt-1",children:["Product: ",i.name]})]})}),(0,De.jsxs)(Bo.Body,{children:[u&&(0,De.jsxs)(Nn,{variant:"danger",dismissible:!0,onClose:()=>h(""),children:[(0,De.jsx)(Ii,{className:"me-2"}),u]}),m&&(0,De.jsxs)(Nn,{variant:"success",dismissible:!0,onClose:()=>p(""),children:[(0,De.jsx)(yi,{className:"me-2"}),m]}),c?(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading colors and fabrics..."})]}):(0,De.jsxs)(Rc,{activeKey:o,onSelect:l,className:"mb-4",children:[(0,De.jsx)(Bc,{eventKey:"colors",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(er,{className:"me-2"}),"Colors (",v.length,")"]}),children:(0,De.jsxs)("div",{children:[(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(er,{className:"me-2"}),"Product Colors (",v.length,")"]}),(0,De.jsx)("small",{className:"text-muted",children:"Colors assigned to this product"})]}),(0,De.jsx)(ps.Body,{children:0===v.length?(0,De.jsxs)("div",{className:"text-center text-muted py-3",children:[(0,De.jsx)(er,{size:32,className:"mb-2"}),(0,De.jsx)("p",{children:"No colors assigned to this product"})]}):(0,De.jsx)(Cn,{children:v.map(e=>(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border",style:{borderLeftColor:e.hex_value||"#000",borderLeftWidth:"4px"},children:(0,De.jsx)(ps.Body,{className:"py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:e.hex_value||"#000",border:"1px solid #ddd",borderRadius:"3px"}}),O()&&(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>{return t=e.id,void x(v.filter(e=>e.id!==t));var t},children:(0,De.jsx)(Cr,{})})]})]})})})},e.id))})})]}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(er,{className:"me-2"}),"All Available Colors (",f.length,")"]}),O()&&(0,De.jsxs)(Xs,{size:"sm",variant:"primary",onClick:()=>M(!P),children:[(0,De.jsx)(rr,{className:"me-1"}),"Add New Color"]})]}),(0,De.jsxs)(ps.Body,{children:[P&&O()&&(0,De.jsx)(ps,{className:"mb-3 border-primary",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Color Name *"}),(0,De.jsx)(Wl.Control,{type:"text",value:b.name,onChange:e=>y(Pe(Pe({},b),{},{name:e.target.value})),placeholder:"e.g., Royal Blue"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Color Code"}),(0,De.jsx)(Wl.Control,{type:"text",value:b.code,onChange:e=>y(Pe(Pe({},b),{},{code:e.target.value})),placeholder:"e.g., RB001"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Hex Color"}),(0,De.jsx)(Wl.Control,{type:"color",value:b.hex_value,onChange:e=>y(Pe(Pe({},b),{},{hex_value:e.target.value}))})]})}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsx)(Wl.Label,{children:"\xa0"}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"success",onClick:I,children:(0,De.jsx)(yi,{})}),(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>M(!1),children:(0,De.jsx)(Cr,{})})]})]})]})})}),(0,De.jsx)(Cn,{children:f.map(e=>{const t=v.find(t=>t.id===e.id),n=w===e.id;return(0,De.jsx)(Pn,{md:6,lg:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border ".concat(t?"border-success bg-light":""),children:(0,De.jsx)(ps.Body,{className:"py-2",children:n?(0,De.jsxs)(Wl,{children:[(0,De.jsx)(Wl.Group,{className:"mb-2",children:(0,De.jsx)(Wl.Control,{size:"sm",type:"text",defaultValue:e.name,onBlur:t=>F(e.id,{name:t.target.value})})}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{size:"sm",variant:"success",onClick:()=>j(null),children:(0,De.jsx)(yi,{})}),(0,De.jsx)(Xs,{size:"sm",variant:"secondary",onClick:()=>j(null),children:(0,De.jsx)(Cr,{})})]})]}):(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:e.hex_value||"#000",border:"1px solid #ddd",borderRadius:"3px"}}),(0,De.jsxs)(Sd,{size:"sm",children:[!t&&O()&&(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Add to Product"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>(e=>{v.find(t=>t.id===e.id)||x([...v,e])})(e),children:(0,De.jsx)(rr,{})})}),O()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Edit Color"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>j(e.id),children:(0,De.jsx)(Li,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Delete Color"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>z(e.id),children:(0,De.jsx)(Ar,{})})})]})]})]})]})})})},e.id)})}),0===f.length&&(0,De.jsxs)("div",{className:"text-center text-muted py-4",children:[(0,De.jsx)(er,{size:48,className:"mb-3"}),(0,De.jsx)("h6",{children:"No Colors Available"}),(0,De.jsx)("p",{children:"Add the first color to get started"})]})]})]})]})}),(0,De.jsx)(Bc,{eventKey:"fabrics",title:(0,De.jsxs)("span",{children:[(0,De.jsx)(Ei,{className:"me-2"}),"Fabrics (",k.length,")"]}),children:(0,De.jsxs)("div",{children:[(0,De.jsxs)(ps,{className:"mb-4",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(Ei,{className:"me-2"}),"Product Fabrics (",k.length,")"]}),(0,De.jsx)("small",{className:"text-muted",children:"Fabrics assigned to this product"})]}),(0,De.jsx)(ps.Body,{children:0===k.length?(0,De.jsxs)("div",{className:"text-center text-muted py-3",children:[(0,De.jsx)(Ei,{size:32,className:"mb-2"}),(0,De.jsx)("p",{children:"No fabrics assigned to this product"})]}):(0,De.jsx)(Cn,{children:k.map(e=>(0,De.jsx)(Pn,{md:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border border-secondary",children:(0,De.jsx)(ps.Body,{className:"py-2",children:(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]}),e.description&&(0,De.jsx)("div",{className:"small text-muted",children:e.description})]}),O()&&(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>{return t=e.id,void S(k.filter(e=>e.id!==t));var t},children:(0,De.jsx)(Cr,{})})]})})})},e.id))})})]}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("h6",{className:"mb-0",children:[(0,De.jsx)(Yi,{className:"me-2"}),"All Available Fabrics (",_.length,")"]}),O()&&(0,De.jsxs)(Xs,{size:"sm",variant:"primary",onClick:()=>R(!L),children:[(0,De.jsx)(rr,{className:"me-1"}),"Add New Fabric"]})]}),(0,De.jsxs)(ps.Body,{children:[L&&O()&&(0,De.jsx)(ps,{className:"mb-3 border-primary",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Fabric Name *"}),(0,De.jsx)(Wl.Control,{type:"text",value:C.name,onChange:e=>A(Pe(Pe({},C),{},{name:e.target.value})),placeholder:"e.g., Cotton Blend"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Fabric Code"}),(0,De.jsx)(Wl.Control,{type:"text",value:C.code,onChange:e=>A(Pe(Pe({},C),{},{code:e.target.value})),placeholder:"e.g., CB001"})]})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{type:"text",value:C.description,onChange:e=>A(Pe(Pe({},C),{},{description:e.target.value})),placeholder:"Brief description"})]})}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsx)(Wl.Label,{children:"\xa0"}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{variant:"success",onClick:B,children:(0,De.jsx)(yi,{})}),(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>R(!1),children:(0,De.jsx)(Cr,{})})]})]})]})})}),(0,De.jsx)(Cn,{children:_.map(e=>{const t=k.find(t=>t.id===e.id),n=E===e.id;return(0,De.jsx)(Pn,{md:6,lg:4,className:"mb-3",children:(0,De.jsx)(ps,{className:"border ".concat(t?"border-success bg-light":""),children:(0,De.jsx)(ps.Body,{className:"py-2",children:n?(0,De.jsxs)(Wl,{children:[(0,De.jsx)(Wl.Group,{className:"mb-2",children:(0,De.jsx)(Wl.Control,{size:"sm",type:"text",defaultValue:e.name,onBlur:t=>W(e.id,{name:t.target.value})})}),(0,De.jsxs)("div",{className:"d-flex gap-1",children:[(0,De.jsx)(Xs,{size:"sm",variant:"success",onClick:()=>T(null),children:(0,De.jsx)(yi,{})}),(0,De.jsx)(Xs,{size:"sm",variant:"secondary",onClick:()=>T(null),children:(0,De.jsx)(Cr,{})})]})]}):(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),e.code&&(0,De.jsxs)("small",{className:"text-muted",children:["Code: ",e.code]}),e.description&&(0,De.jsx)("div",{className:"small text-muted",children:e.description})]}),(0,De.jsxs)(Sd,{size:"sm",children:[!t&&O()&&(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Add to Product"}),children:(0,De.jsx)(Xs,{variant:"outline-success",onClick:()=>(e=>{k.find(t=>t.id===e.id)||S([...k,e])})(e),children:(0,De.jsx)(rr,{})})}),O()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Edit Fabric"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>T(e.id),children:(0,De.jsx)(Li,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Delete Fabric"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>H(e.id),children:(0,De.jsx)(Ar,{})})})]})]})]})})})},e.id)})}),0===_.length&&(0,De.jsxs)("div",{className:"text-center text-muted py-4",children:[(0,De.jsx)(Ei,{size:48,className:"mb-3"}),(0,De.jsx)("h6",{children:"No Fabrics Available"}),(0,De.jsx)("p",{children:"Add the first fabric to get started"})]})]})]})]})})]})]}),(0,De.jsx)(Bo.Footer,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,De.jsx)("div",{className:"text-muted small",children:O()?"You can manage colors and fabrics for this product":"View-only mode - contact your manager to make changes"}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:n,children:"Close"}),O()&&(0,De.jsxs)(Xs,{variant:"primary",onClick:async()=>{try{h(""),d(!0);const e=Pe(Pe({},i),{},{available_colors:v,available_fabrics:k});await xa(i.id,{available_colors:v.map(e=>e.id),available_fabrics:k.map(e=>e.id)}),r(e),p("Product colors and fabrics updated successfully!"),setTimeout(()=>{n()},1500)}catch(e){h("Failed to update product: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}finally{d(!1)}},disabled:c,children:[(0,De.jsx)(dr,{className:"me-1"}),"Save Changes"]})]})]})})]})},wP=()=>{var e,t;Z();const{user:n,onLogout:i}=te(),[r,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(""),[v,x]=(0,s.useState)("name"),[b,y]=(0,s.useState)("asc"),[w,j]=(0,s.useState)("all"),[_,N]=(0,s.useState)("grid"),[k,S]=(0,s.useState)(!1),[C,A]=(0,s.useState)(!1),[E,T]=(0,s.useState)(null),[P,M]=(0,s.useState)("view"),[L,R]=(0,s.useState)([]),[O,D]=(0,s.useState)([]),[I,F]=(0,s.useState)(""),[z,B]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[U,V]=(0,s.useState)(""),[G,q]=(0,s.useState)({name:"",sku:"",description:"",price:"",currency:"ZAR",available_colors:[],available_fabrics:[],attributes:{}}),[K,X]=(0,s.useState)(null),Y=()=>["owner","admin","warehouse_manager","warehouse"].includes(null===n||void 0===n?void 0:n.role),Q=()=>["owner","admin","warehouse_manager","warehouse","warehouse_worker"].includes(null===n||void 0===n?void 0:n.role),$=(0,s.useCallback)(async()=>{try{a(!0),l("");const[t,n,s,i]=await Promise.all([pa(),fa().catch(()=>({results:[]})),ga().catch(()=>({results:[]})),Yr("/inventory/materials/dashboard/").catch(()=>null)]);let r=[];r=[...Array.isArray(null===t||void 0===t?void 0:t.results)?t.results:Array.isArray(t)?t:[]];let o=null===t||void 0===t?void 0:t.next;const c=localStorage.getItem("oox_token"),d={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"https://internaloox-1.onrender.com/api";for(;o;)try{const e=o.startsWith("http")?o:"".concat(d).concat(o),t=await fetch(e,{headers:c?{Authorization:"Bearer ".concat(c)}:{}});if(!t.ok)break;const n=await t.json(),s=Array.isArray(null===n||void 0===n?void 0:n.results)?n.results:Array.isArray(n)?n:[];r.push(...s),o=(null===n||void 0===n?void 0:n.next)||null}catch(e){break}h(r),p(r);const u=e=>e?Array.isArray(e)?e:Array.isArray(e.results)?e.results:[]:[];R(u(n)),D(u(s)),X(i)}catch(e){l("Failed to load products: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}finally{a(!1)}},[]);(0,s.useEffect)(()=>{Q()?$():(l("You do not have permission to view products."),a(!1))},[$,n]),(0,s.useEffect)(()=>{let e=[...u];if(f.trim()){const t=f.toLowerCase();e=e.filter(e=>(e.name||"").toLowerCase().includes(t)||(e.sku||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.available_colors||[]).some(e=>(e.name||"").toLowerCase().includes(t))||(e.available_fabrics||[]).some(e=>(e.name||"").toLowerCase().includes(t)))}"all"!==w&&("with-colors"===w?e=e.filter(e=>e.available_colors&&e.available_colors.length>0):"with-fabrics"===w?e=e.filter(e=>e.available_fabrics&&e.available_fabrics.length>0):"no-colors"===w?e=e.filter(e=>!e.available_colors||0===e.available_colors.length):"no-fabrics"===w&&(e=e.filter(e=>!e.available_fabrics||0===e.available_fabrics.length))),e.sort((e,t)=>{let n=e[v]||"",s=t[v]||"";return"price"===v?(n=parseFloat(n)||0,s=parseFloat(s)||0):"string"===typeof n&&(n=n.toLowerCase(),s=s.toLowerCase()),"asc"===b?n>s?1:-1:n<s?1:-1}),p(e)},[u,f,w,v,b]);const J=e=>{T(e),M("view"),S(!0)},ee=e=>{Y()?(T(e),q({name:e.name||"",sku:e.sku||"",description:e.description||"",price:e.price||"",currency:e.currency||"ZAR",available_colors:e.available_colors||[],available_fabrics:e.available_fabrics||[],attributes:e.attributes||{}}),M("edit"),S(!0)):l("You do not have permission to edit products.")},ne=()=>{Y()?(T(null),q({name:"",sku:"",description:"",price:"",currency:"ZAR",available_colors:[],available_fabrics:[],attributes:{}}),M("create"),S(!0)):l("You do not have permission to create products.")},se=async e=>{var t;if(Y()){if(window.confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await(t=e.id,Yr("/orders/products/".concat(t,"/"),{method:"DELETE"})),d("Product deleted successfully!"),$()}catch(n){l("Failed to delete product: "+((null===n||void 0===n?void 0:n.message)||"Unknown error"))}}else l("You do not have permission to delete products.")},ie=e=>{Y()?(T(e),A(!0)):l("You do not have permission to manage colors and fabrics.")},re=e=>e&&0!==e.length?e.slice(0,3).map((e,t)=>(0,De.jsx)(Rn,{bg:"primary",className:"me-1",children:e.name||e},t)):"No colors",ae=e=>e&&0!==e.length?e.slice(0,3).map((e,t)=>(0,De.jsx)(Rn,{bg:"secondary",className:"me-1",children:e.name||e},t)):"No fabrics",oe=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e||0);return r?(0,De.jsxs)("div",{className:"text-center py-5",children:[(0,De.jsx)(Wr,{animation:"border",variant:"primary"}),(0,De.jsx)("p",{className:"mt-2",children:"Loading products..."})]}):Q()?(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("h3",{className:"mb-1",children:[(0,De.jsx)(ui,{className:"me-2 text-primary"}),"Product Management"]}),(0,De.jsx)("p",{className:"text-muted mb-0",children:"Manage products with colors and fabric variations"})]}),Y()&&(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Xs,{variant:"outline-secondary",onClick:$,children:[(0,De.jsx)(_r,{className:"me-1"}),"Refresh"]}),(0,De.jsxs)(Xs,{variant:"primary",onClick:ne,children:[(0,De.jsx)(rr,{className:"me-1"}),"Add Product"]})]})]}),K&&(0,De.jsxs)(Cn,{className:"mb-4",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(ui,{size:32,className:"text-primary mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:K.total_products||m.length}),(0,De.jsx)("small",{className:"text-muted",children:"Total Products"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(er,{size:32,className:"text-info mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:L.length}),(0,De.jsx)("small",{className:"text-muted",children:"Available Colors"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(Ei,{size:32,className:"text-warning mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:O.length}),(0,De.jsx)("small",{className:"text-muted",children:"Available Fabrics"})]})})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(ps,{className:"text-center border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(gi,{size:32,className:"text-success mb-2"}),(0,De.jsx)("h4",{className:"mb-1",children:oe(m.reduce((e,t)=>e+(parseFloat(t.price)||0),0))}),(0,De.jsx)("small",{className:"text-muted",children:"Total Value"})]})})})]}),o&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>l(""),children:o}),c&&(0,De.jsx)(Nn,{variant:"success",dismissible:!0,onClose:()=>d(""),children:c}),(0,De.jsx)(ps,{className:"mb-4",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(Cn,{className:"g-3 align-items-end",children:[(0,De.jsxs)(Pn,{md:4,children:[(0,De.jsx)(Wl.Label,{children:"Search Products"}),(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{type:"text",placeholder:"Search by name, SKU, color, fabric...",value:f,onChange:e=>g(e.target.value)})]})]}),(0,De.jsxs)(Pn,{md:3,children:[(0,De.jsx)(Wl.Label,{children:"Filter By"}),(0,De.jsxs)(Wl.Select,{value:w,onChange:e=>j(e.target.value),children:[(0,De.jsx)("option",{value:"all",children:"All Products"}),(0,De.jsx)("option",{value:"with-colors",children:"With Colors"}),(0,De.jsx)("option",{value:"with-fabrics",children:"With Fabrics"}),(0,De.jsx)("option",{value:"no-colors",children:"No Colors"}),(0,De.jsx)("option",{value:"no-fabrics",children:"No Fabrics"})]})]}),(0,De.jsxs)(Pn,{md:3,children:[(0,De.jsx)(Wl.Label,{children:"Sort By"}),(0,De.jsxs)(Wl.Select,{value:"".concat(v,"-").concat(b),onChange:e=>{const[t,n]=e.target.value.split("-");x(t),y(n)},children:[(0,De.jsx)("option",{value:"name-asc",children:"Name A-Z"}),(0,De.jsx)("option",{value:"name-desc",children:"Name Z-A"}),(0,De.jsx)("option",{value:"price-asc",children:"Price Low-High"}),(0,De.jsx)("option",{value:"price-desc",children:"Price High-Low"})]})]}),(0,De.jsxs)(Pn,{md:2,children:[(0,De.jsx)(Wl.Label,{children:"View"}),(0,De.jsxs)(Sd,{className:"w-100",children:[(0,De.jsx)(Xs,{variant:"grid"===_?"primary":"outline-primary",onClick:()=>N("grid"),children:(0,De.jsx)(Yi,{})}),(0,De.jsx)(Xs,{variant:"table"===_?"primary":"outline-primary",onClick:()=>N("table"),children:(0,De.jsx)(ui,{})})]})]})]})})}),0===m.length?(0,De.jsx)(ps,{className:"text-center py-5",children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)(ui,{size:64,className:"text-muted mb-3"}),(0,De.jsx)("h5",{className:"text-muted",children:"No Products Found"}),(0,De.jsx)("p",{className:"text-muted",children:f?"Try adjusting your search criteria":"No products available yet"}),Y()&&(0,De.jsxs)(Xs,{variant:"primary",onClick:ne,children:[(0,De.jsx)(rr,{className:"me-1"}),"Create First Product"]})]})}):"grid"===_?(0,De.jsx)(Cn,{children:m.map(e=>(0,De.jsx)(Pn,{lg:4,md:6,className:"mb-4",children:(0,De.jsx)(ps,{className:"h-100 shadow-sm product-card",style:{transition:"all 0.3s ease"},children:(0,De.jsxs)(ps.Body,{className:"d-flex flex-column",children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("h5",{className:"card-title mb-1",children:e.name}),(0,De.jsxs)("small",{className:"text-muted",children:["SKU: ",e.sku||"N/A"]})]}),(0,De.jsx)(Rn,{bg:"success",className:"fs-6",children:oe(e.price)})]}),(0,De.jsx)("p",{className:"card-text text-muted mb-3",style:{height:"60px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description||"No description available"}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)("div",{className:"mb-2",children:[(0,De.jsx)("small",{className:"fw-bold",children:"Colors:"}),(0,De.jsx)("div",{children:re(e.available_colors)})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("small",{className:"fw-bold",children:"Fabrics:"}),(0,De.jsx)("div",{children:ae(e.available_fabrics)})]})]}),(0,De.jsx)("div",{className:"mt-auto",children:(0,De.jsxs)(Sd,{className:"w-100",children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>J(e),children:(0,De.jsx)(zi,{})})}),Y()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Manage Colors & Fabrics"}),children:(0,De.jsx)(Xs,{variant:"outline-info",onClick:()=>ie(e),children:(0,De.jsx)(er,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Edit Product"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>ee(e),children:(0,De.jsx)(Li,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Delete Product"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>se(e),children:(0,De.jsx)(Ar,{})})})]})]})})]})})},e.id))}):(0,De.jsx)(ps,{children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"table-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>{x("name"),y("name"===v&&"asc"===b?"desc":"asc")},children:["Product Name ","name"===v&&("asc"===b?(0,De.jsx)(vr,{}):(0,De.jsx)(gr,{}))]}),(0,De.jsx)("th",{children:"SKU"}),(0,De.jsxs)("th",{style:{cursor:"pointer"},onClick:()=>{x("price"),y("price"===v&&"asc"===b?"desc":"asc")},children:["Price ","price"===v&&("asc"===b?(0,De.jsx)(vr,{}):(0,De.jsx)(gr,{}))]}),(0,De.jsx)("th",{children:"Colors"}),(0,De.jsx)("th",{children:"Fabrics"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:m.map(e=>{var t;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:e.name}),(0,De.jsxs)("small",{className:"text-muted",children:[null===(t=e.description)||void 0===t?void 0:t.slice(0,50),"..."]})]})}),(0,De.jsx)("td",{children:(0,De.jsx)("code",{children:e.sku||"N/A"})}),(0,De.jsx)("td",{className:"fw-bold text-success",children:oe(e.price)}),(0,De.jsx)("td",{children:re(e.available_colors)}),(0,De.jsx)("td",{children:ae(e.available_fabrics)}),(0,De.jsx)("td",{children:(0,De.jsxs)(Sd,{size:"sm",children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"View Details"}),children:(0,De.jsx)(Xs,{variant:"outline-primary",onClick:()=>J(e),children:(0,De.jsx)(zi,{})})}),Y()&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Manage Colors & Fabrics"}),children:(0,De.jsx)(Xs,{variant:"outline-info",onClick:()=>ie(e),children:(0,De.jsx)(er,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Edit Product"}),children:(0,De.jsx)(Xs,{variant:"outline-warning",onClick:()=>ee(e),children:(0,De.jsx)(Li,{})})}),(0,De.jsx)(Th,{overlay:(0,De.jsx)(Nh,{children:"Delete Product"}),children:(0,De.jsx)(Xs,{variant:"outline-danger",onClick:()=>se(e),children:(0,De.jsx)(Ar,{})})})]})]})})]},e.id)})})]})}),(0,De.jsxs)(Bo,{show:k,onHide:()=>S(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"create"===P?"Create New Product":"edit"===P?"Edit Product":"Product Details"})}),(0,De.jsx)(Bo.Body,{children:"view"===P&&E?(0,De.jsx)("div",{children:(0,De.jsxs)(Cn,{children:[(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsx)("h5",{children:E.name}),(0,De.jsx)("p",{className:"text-muted",children:E.description}),(0,De.jsxs)("p",{children:[(0,De.jsx)("strong",{children:"SKU:"})," ",E.sku||"N/A"]}),(0,De.jsxs)("p",{children:[(0,De.jsx)("strong",{children:"Price:"})," ",oe(E.price)]})]}),(0,De.jsxs)(Pn,{md:6,children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)("strong",{children:"Available Colors:"}),(0,De.jsx)("div",{className:"mt-2",children:(null===(e=E.available_colors)||void 0===e?void 0:e.length)>0?E.available_colors.map((e,t)=>(0,De.jsxs)(Rn,{bg:"primary",className:"me-1 mb-1",children:[(0,De.jsx)(er,{className:"me-1"}),e.name||e]},t)):"No colors available"})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("strong",{children:"Available Fabrics:"}),(0,De.jsx)("div",{className:"mt-2",children:(null===(t=E.available_fabrics)||void 0===t?void 0:t.length)>0?E.available_fabrics.map((e,t)=>(0,De.jsxs)(Rn,{bg:"secondary",className:"me-1 mb-1",children:[(0,De.jsx)(Ei,{className:"me-1"}),e.name||e]},t)):"No fabrics available"})]})]})]})}):(0,De.jsxs)(Wl,{children:[(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Product Name *"}),(0,De.jsx)(Wl.Control,{type:"text",value:G.name,onChange:e=>q(Pe(Pe({},G),{},{name:e.target.value})),required:!0})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"SKU"}),(0,De.jsx)(Wl.Control,{type:"text",value:G.sku,onChange:e=>q(Pe(Pe({},G),{},{sku:e.target.value}))})]})})]}),(0,De.jsxs)(Cn,{children:[(0,De.jsx)(Pn,{md:8,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Description"}),(0,De.jsx)(Wl.Control,{as:"textarea",rows:3,value:G.description,onChange:e=>q(Pe(Pe({},G),{},{description:e.target.value}))})]})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Price (ZAR) *"}),(0,De.jsx)(Wl.Control,{type:"number",step:"0.01",value:G.price,onChange:e=>q(Pe(Pe({},G),{},{price:e.target.value})),required:!0})]})})]}),(0,De.jsx)("div",{className:"text-muted",children:(0,De.jsx)("small",{children:"Colors and fabrics can be managed after saving the product."})})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),"view"!==P&&(0,De.jsx)(Xs,{variant:"primary",onClick:async()=>{try{l(""),"create"===P?(await va(G),d("Product created successfully!")):"edit"===P&&(await xa(E.id,G),d("Product updated successfully!")),S(!1),$()}catch(e){l("Failed to save product: "+((null===e||void 0===e?void 0:e.message)||"Unknown error"))}},children:"create"===P?"Create Product":"Save Changes"}),"view"===P&&Y()&&(0,De.jsxs)(Xs,{variant:"warning",onClick:()=>ee(E),children:[(0,De.jsx)(Li,{className:"me-1"}),"Edit Product"]})]})]}),(0,De.jsx)(yP,{show:C,onHide:()=>A(!1),product:E,onProductUpdate:e=>{h(u.map(t=>t.id===e.id?e:t)),d("Product updated successfully!")},user:n})]}):(0,De.jsxs)(Nn,{variant:"danger",children:[(0,De.jsx)(ui,{className:"me-2"}),"You do not have permission to view products."]})},jP=()=>{const e=Z();return(0,De.jsxs)("div",{children:[(0,De.jsx)("h4",{className:"mb-4",children:"Stock Management"}),(0,De.jsxs)("div",{className:"d-flex flex-wrap gap-3",children:[(0,De.jsx)(ps,{style:{minWidth:280},children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("h5",{children:[(0,De.jsx)(ui,{className:"me-2 text-primary"}),"Materials"]}),(0,De.jsx)("p",{className:"text-muted",children:"Manage materials catalog, suppliers and inventory thresholds."}),(0,De.jsx)(Xs,{variant:"primary",onClick:()=>e("/warehouse/inventory/materials"),children:"Open Materials"})]})}),(0,De.jsx)(ps,{style:{minWidth:280},children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("h5",{children:[(0,De.jsx)(Ir,{className:"me-2 text-warning"}),"Stock In-House"]}),(0,De.jsx)("p",{className:"text-muted",children:"Update and track stock levels at locations."}),(0,De.jsx)(Xs,{variant:"warning",onClick:()=>e("/warehouse/inventory/stock-in-house"),children:"Open Stock In-House"})]})}),(0,De.jsx)(ps,{style:{minWidth:280},children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)("h5",{children:[(0,De.jsx)(rr,{className:"me-2 text-success"}),"Quick Stock Entry"]}),(0,De.jsx)("p",{className:"text-muted",children:"Add stock quickly from the dashboard."}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>e("/warehouse"),children:"Go to Dashboard"})]})})]})]})},_P=["warehouse_worker","warehouse","delivery","admin","owner"];const NP=e=>{let{currentUser:t}=e;const[n,i]=(0,s.useState)(!0),[r,a]=(0,s.useState)(""),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)("warehouse_worker"),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[v,x]=(0,s.useState)({username:"",password:"",confirmPassword:"",role:"warehouse_worker",first_name:"",last_name:"",email:""}),[b,y]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),[_,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)([]),C=(0,s.useMemo)(()=>function(e){const t="warehouse_manager"===e?"warehouse":e;return"owner"===t?_P:"admin"===t?["warehouse","warehouse_worker","delivery"]:"warehouse"===t?["warehouse_worker"]:[]}(null===t||void 0===t?void 0:t.role),[t]),A=async()=>{i(!0),a("");try{const e="warehouse_manager"===u?"warehouse":u,t=await da("role=".concat(e)),n=Array.isArray(null===t||void 0===t?void 0:t.results)?t.results:Array.isArray(t)?t:[];l(n)}catch(OP){a((null===OP||void 0===OP?void 0:OP.message)||"Failed to load users")}finally{i(!1)}};(0,s.useEffect)(()=>{A()},[u]);const E=o.filter(e=>{const t=c.toLowerCase();return!t||"".concat(e.username," ").concat(e.first_name||""," ").concat(e.last_name||""," ").concat(e.email||"").toLowerCase().includes(t)}),T=async e=>{j(!0),N(!0),S([]);try{const n=await(t=e.id,Yr("/tasks/tasks/?assigned_worker=".concat(t))).catch(()=>({results:[]})),s=Array.isArray(null===n||void 0===n?void 0:n.results)?n.results:Array.isArray(n)?n:[];S(s)}catch(n){S([])}finally{N(!1)}var t};return(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,De.jsx)("h4",{className:"mb-0",children:"Workers"}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsxs)(Wl.Select,{size:"sm",value:u,onChange:e=>h(e.target.value),children:[(0,De.jsx)("option",{value:"warehouse_worker",children:"Warehouse Workers"}),(0,De.jsx)("option",{value:"warehouse",children:"Warehouse Staff (Managers)"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery Personnel"})]}),C.length>0&&(0,De.jsxs)(Xs,{onClick:()=>{g(null),x({username:"",password:"",confirmPassword:"",role:C[0]||"warehouse_worker",first_name:"",last_name:"",email:""}),p(!0)},variant:"primary",children:[(0,De.jsx)(Mr,{className:"me-2"}),"Add"]})]})]}),(0,De.jsx)(ps,{className:"mb-3",children:(0,De.jsx)(ps.Body,{children:(0,De.jsxs)(sc,{children:[(0,De.jsx)(sc.Text,{children:(0,De.jsx)(mr,{})}),(0,De.jsx)(Wl.Control,{placeholder:"Search workers...",value:c,onChange:e=>d(e.target.value)})]})})}),r&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>a(""),children:r}),n?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})}):(0,De.jsx)(ps,{children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Username"}),(0,De.jsx)("th",{children:"Name"}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsx)("th",{children:"Role"}),(0,De.jsx)("th",{style:{width:220},children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[E.map(e=>{var t;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.username}),(0,De.jsxs)("td",{children:[e.first_name," ",e.last_name]}),(0,De.jsx)("td",{children:e.email}),(0,De.jsx)("td",{className:"text-capitalize",children:null===(t=e.role)||void 0===t?void 0:t.replace("_"," ")}),(0,De.jsxs)("td",{children:[(0,De.jsxs)(Xs,{size:"sm",variant:"outline-secondary",className:"me-2",onClick:()=>T(e),children:[(0,De.jsx)(Gi,{className:"me-1"}),"History"]}),C.includes(e.role)&&(0,De.jsxs)(Xs,{size:"sm",variant:"outline-primary",className:"me-2",onClick:()=>(e=>{g(e),x({username:e.username,password:"",confirmPassword:"",role:e.role,first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||""}),p(!0)})(e),children:[(0,De.jsx)(Li,{className:"me-1"}),"Edit"]}),C.includes(e.role)&&(0,De.jsxs)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>(async e=>{if(window.confirm("Delete user ".concat(e.username,"?")))try{await ma(e.id),await A()}catch(OP){alert((null===OP||void 0===OP?void 0:OP.message)||"Failed to delete user")}})(e),children:[(0,De.jsx)(Ar,{className:"me-1"}),"Delete"]})]})]},e.id)}),0===E.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:5,className:"text-center text-muted py-4",children:"No users found"})})]})]})}),(0,De.jsxs)(Bo,{show:m,onHide:()=>p(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:f?"Edit User":"Create User"})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)(Wl,{children:[(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Username"}),(0,De.jsx)(Wl.Control,{value:v.username,onChange:e=>x(Pe(Pe({},v),{},{username:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)(Wl.Label,{children:["Password ",f?"(leave blank to keep)":""]}),(0,De.jsx)(Wl.Control,{type:"password",value:v.password,onChange:e=>x(Pe(Pe({},v),{},{password:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsxs)(Wl.Label,{children:["Confirm Password ",f?"(leave blank if unchanged)":""]}),(0,De.jsx)(Wl.Control,{type:"password",value:v.confirmPassword,onChange:e=>x(Pe(Pe({},v),{},{confirmPassword:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"First Name"}),(0,De.jsx)(Wl.Control,{value:v.first_name,onChange:e=>x(Pe(Pe({},v),{},{first_name:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Last Name"}),(0,De.jsx)(Wl.Control,{value:v.last_name,onChange:e=>x(Pe(Pe({},v),{},{last_name:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Email"}),(0,De.jsx)(Wl.Control,{type:"email",value:v.email,onChange:e=>x(Pe(Pe({},v),{},{email:e.target.value}))})]}),(0,De.jsxs)("div",{className:"mb-2",children:[(0,De.jsx)(Wl.Label,{children:"Role"}),(0,De.jsx)(Wl.Select,{value:v.role,onChange:e=>x(Pe(Pe({},v),{},{role:e.target.value})),children:C.map(e=>(0,De.jsx)("option",{value:e,children:e.replace("_"," ")},e))})]})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",disabled:b,onClick:async()=>{if(f){if(v.password&&v.password!==v.confirmPassword)return void alert("Passwords do not match")}else{if(!v.password||v.password.length<4)return void alert("Password is required (min 4 chars)");if(v.password!==v.confirmPassword)return void alert("Passwords do not match")}y(!0);try{if(f){const e=Pe({},v);e.password?e.password_confirm=v.confirmPassword:delete e.password,delete e.confirmPassword,await ha(f.id,e)}else{const e=Pe({},v);e.password_confirm=v.confirmPassword,delete e.confirmPassword,await ua(e)}p(!1),await A()}catch(OP){alert((null===OP||void 0===OP?void 0:OP.message)||"Save failed")}finally{y(!1)}},children:b?"Saving...":"Save"})]})]}),(0,De.jsxs)(Bo,{show:w,onHide:()=>j(!1),size:"lg",children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Task History"})}),(0,De.jsx)(Bo.Body,{children:_?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})}):(0,De.jsxs)(Vr,{responsive:!0,hover:!0,children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Task"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Order"}),(0,De.jsx)("th",{children:"Updated"})]})}),(0,De.jsxs)("tbody",{children:[k.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.title||e.name||"Task ".concat(e.id)}),(0,De.jsx)("td",{children:e.status}),(0,De.jsx)("td",{children:e.order_number||e.order||"-"}),(0,De.jsx)("td",{children:new Date(e.updated_at||e.modified||Date.now()).toLocaleString()})]},e.id)),0===k.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:4,className:"text-center text-muted py-4",children:"No history"})})]})]})}),(0,De.jsx)(Bo.Footer,{children:(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>j(!1),children:"Close"})})]})]})},kP=()=>{var e;const[t,n]=(0,s.useState)(!0),[i,r]=(0,s.useState)(""),[a,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!1),d=(0,s.useRef)(null),[u,h]=(0,s.useState)(0),m=async()=>{n(!0),r("");try{var e,t;const n=await Yr("/tasks/tasks/my_tasks/");o(n),null!==n&&void 0!==n&&null!==(e=n.summary)&&void 0!==e&&null!==(t=e.currently_running)&&void 0!==t&&t.time_elapsed?h(n.summary.currently_running.time_elapsed):h(0)}catch(OP){r((null===OP||void 0===OP?void 0:OP.message)||"Failed to load worker dashboard")}finally{n(!1)}};(0,s.useEffect)(()=>{m()},[]),(0,s.useEffect)(()=>{var e;return null!==a&&void 0!==a&&null!==(e=a.summary)&&void 0!==e&&e.currently_running?d.current||(d.current=setInterval(()=>h(e=>e+1),1e3)):d.current&&(clearInterval(d.current),d.current=null,h(0)),()=>{d.current&&clearInterval(d.current)}},[null===a||void 0===a||null===(e=a.summary)||void 0===e?void 0:e.currently_running]);const p=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c(!0);try{await function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Yr("/tasks/tasks/".concat(e,"/worker_action/"),{method:"POST",data:Pe({action:t},n)})}(e,t,n),await m()}catch(OP){alert((null===OP||void 0===OP?void 0:OP.message)||"Action failed")}finally{c(!1)}};if(t)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})});if(i)return(0,De.jsx)(Nn,{variant:"danger",children:i});const f=(null===a||void 0===a?void 0:a.summary)||{},g=(null===a||void 0===a?void 0:a.assigned_tasks)||[],v=(null===a||void 0===a?void 0:a.active_tasks)||[],x=(null===a||void 0===a?void 0:a.completed_tasks)||[],b=f.currently_running||null;return(0,De.jsxs)("div",{className:"worker-dashboard",children:[(0,De.jsxs)(Cn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-muted",children:"Assigned"}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:f.assigned_count||0})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-muted",children:"Active"}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:f.active_count||0})]})})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(ps,{children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-muted",children:"Completed Today"}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:f.completed_today||0})]})})})]}),(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-warning",children:[(0,De.jsx)(ps.Header,{children:"Current Task"}),(0,De.jsx)(ps.Body,{children:b?(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:b.title}),(0,De.jsxs)("div",{className:"text-muted",children:["Elapsed: ",(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60;return"".concat(t,"h ").concat(n,"m ").concat(s,"s")})(u)]}),(0,De.jsxs)("div",{className:"mt-3 d-flex gap-2",children:[(0,De.jsx)(Xs,{variant:"warning",disabled:l,onClick:()=>p(b.id,"pause",{reason:"Manual pause"}),children:"Pause"}),(0,De.jsx)(Xs,{variant:"primary",disabled:l,onClick:()=>p(b.id,"complete",{completion_notes:""}),children:"Complete"}),(0,De.jsx)(Xs,{variant:"outline-danger",disabled:l,onClick:()=>p(b.id,"flag",{reason:"Issue"}),children:"Flag"})]})]}):(0,De.jsx)("div",{className:"text-muted",children:"No current running task"})})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{className:"border-info",children:[(0,De.jsx)(ps.Header,{children:"Assigned Tasks"}),(0,De.jsxs)(Xl,{variant:"flush",children:[g.slice(0,5).map(e=>(0,De.jsxs)(Xl.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsxs)("small",{className:"text-muted",children:["Due: ",e.due_date?new Date(e.due_date).toLocaleString():"-"]})]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsx)(Xs,{size:"sm",variant:"success",disabled:l,onClick:()=>p(e.id,"start"),children:"Start"}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",disabled:l,onClick:()=>p(e.id,"flag",{reason:"Issue"}),children:"Flag"})]})]},e.id)),0===g.length&&(0,De.jsx)(Xl.Item,{className:"text-muted",children:"No assigned tasks"})]})]})})]}),(0,De.jsxs)(Cn,{className:"g-3 mt-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Header,{children:"Active Tasks"}),(0,De.jsxs)(Xl,{variant:"flush",children:[v.slice(0,5).map(e=>(0,De.jsxs)(Xl.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsxs)("small",{className:"text-muted",children:["Status: ",e.status]})]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:["paused"===e.status&&(0,De.jsx)(Xs,{size:"sm",variant:"success",disabled:l,onClick:()=>p(e.id,"resume"),children:"Resume"}),"started"===e.status&&(0,De.jsx)(Xs,{size:"sm",variant:"warning",disabled:l,onClick:()=>p(e.id,"pause",{reason:"Manual pause"}),children:"Pause"}),(0,De.jsx)(Xs,{size:"sm",variant:"primary",disabled:l,onClick:()=>p(e.id,"complete",{completion_notes:""}),children:"Complete"})]})]},e.id)),0===v.length&&(0,De.jsx)(Xl.Item,{className:"text-muted",children:"No active tasks"})]})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Header,{children:"Recently Completed"}),(0,De.jsxs)(Xl,{variant:"flush",children:[x.slice(0,5).map(e=>(0,De.jsx)(Xl.Item,{className:"d-flex justify-content-between align-items-center",children:(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.title}),(0,De.jsx)("small",{className:"text-muted",children:"Completed"})]})},e.id)),0===x.length&&(0,De.jsx)(Xl.Item,{className:"text-muted",children:"No completed tasks"})]})]})})]})]})},SP=e=>{let{title:t,value:n,variant:s="primary",footer:i}=e;return(0,De.jsx)(ps,{className:"border-".concat(s),children:(0,De.jsxs)(ps.Body,{children:[(0,De.jsx)("div",{className:"text-muted small mb-1",children:t}),(0,De.jsx)("div",{className:"fs-3 fw-bold",children:n}),i&&(0,De.jsx)("div",{className:"text-muted small mt-2",children:i})]})})},CP=()=>{const[e,t]=(0,s.useState)(!0),[n,i]=(0,s.useState)(""),[r,a]=(0,s.useState)({total_materials:0,in_stock:0}),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)({assigned:0,started:0,completed:0}),m=async()=>{t(!0),i("");try{let t=null;try{t=await Yr("/orders/warehouse_analytics/")}catch(e){}if(t&&"object"===typeof t){const e=t.stock_analytics||{},n=t.order_analytics||{},s=t.task_analytics||{};a({total_materials:e.total_materials||0,in_stock:e.in_stock||0});const i=await Ca().catch(()=>null);l((null===i||void 0===i?void 0:i.alerts)||[]);const r=Array.isArray(n.orders)?n.orders:Array.isArray(t.orders)?t.orders:[];r.length>0&&d(r),h({assigned:s.assigned||s.total_tasks||0,started:s.tasks_in_progress||0,completed:s.tasks_completed_week||0})}else{const[e,t,n]=await Promise.all([Sa(),Ca(),ja()]);a(e||{total_materials:0,in_stock:0}),l((null===t||void 0===t?void 0:t.alerts)||[]);const s=Array.isArray(null===n||void 0===n?void 0:n.orders)?n.orders:Array.isArray(n)?n:[];d(s);const[i,r,o]=await Promise.all([Pa("assigned").catch(()=>[]),Pa("started").catch(()=>[]),Pa("completed").catch(()=>[])]),c=e=>Array.isArray(null===e||void 0===e?void 0:e.results)?e.results.length:Array.isArray(e)?e.length:0;h({assigned:c(i),started:c(r),completed:c(o)})}}catch(OP){i((null===OP||void 0===OP?void 0:OP.message)||"Failed to load analytics")}finally{t(!1)}};if((0,s.useEffect)(()=>{m()},[]),e)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})});if(n)return(0,De.jsx)(Nn,{variant:"danger",onClose:()=>i(""),dismissible:!0,children:n});const p=c.filter(e=>"order_ready"===e.order_status||"completed"===e.production_status).length,f=c.filter(e=>"in_production"===e.production_status).length;return(0,De.jsxs)("div",{children:[(0,De.jsxs)(Cn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(SP,{title:"Total Materials",value:r.total_materials||0,variant:"primary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(SP,{title:"Materials In Stock",value:r.in_stock||0,variant:"success"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(SP,{title:"Low Stock Items",value:o.length,variant:"warning"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(SP,{title:"Orders In Production",value:f,variant:"info"})})]}),(0,De.jsxs)(Cn,{className:"g-3 mb-4",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(SP,{title:"Tasks Assigned",value:u.assigned,variant:"secondary"})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(SP,{title:"Tasks In Progress",value:u.started,variant:"warning"})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(SP,{title:"Tasks Completed Today",value:u.completed,variant:"success"})})]}),(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Low Stock Alerts"}),(0,De.jsx)(Rn,{bg:o.length>0?"warning":"secondary",children:o.length})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Material"}),(0,De.jsx)("th",{children:"Current"}),(0,De.jsx)("th",{children:"Threshold"})]})}),(0,De.jsxs)("tbody",{children:[o.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.material_name}),(0,De.jsxs)("td",{children:[e.current_stock," ",e.unit]}),(0,De.jsx)("td",{children:e.threshold})]},e.id)),0===o.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"No low stock alerts"})})]})]})})]})}),(0,De.jsx)(Pn,{md:6,children:(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Orders Snapshot"}),(0,De.jsxs)(Rn,{bg:"success",children:["Ready: ",p]})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Customer"}),(0,De.jsx)("th",{children:"Production"})]})}),(0,De.jsxs)("tbody",{children:[c.slice(0,8).map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.order_number}),(0,De.jsx)("td",{children:e.customer_name}),(0,De.jsx)("td",{children:(0,De.jsx)(Rn,{bg:"completed"===e.production_status||"order_ready"===e.order_status?"success":"in_production"===e.production_status?"warning":"secondary",children:"completed"===e.production_status?"completed":"order_ready"===e.order_status?"order_ready":e.production_status||"not_started"})})]},e.id)),0===c.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:3,className:"text-center text-muted py-3",children:"No orders"})})]})]})})]})})]})]})},AP=()=>{const[e,t]=(0,s.useState)(!0),[n,i]=(0,s.useState)(""),[r,a]=(0,s.useState)(""),[o,l]=(0,s.useState)([]),c=async()=>{t(!0),i("");try{const e=await(async()=>{try{const e=await Yr("/tasks/tasks/?status=pending_review");return Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:Array.isArray(e)?e:[]}catch(OP){try{const e=await Yr("/tasks/tasks/pending_approval/");return Array.isArray(null===e||void 0===e?void 0:e.results)?e.results:Array.isArray(e)?e:[]}catch(e){return[]}}})();l(e)}catch(OP){i((null===OP||void 0===OP?void 0:OP.message)||"Failed to load approvals")}finally{t(!1)}};(0,s.useEffect)(()=>{c()},[]);return e?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})}):(0,De.jsxs)("div",{children:[n&&(0,De.jsx)(Nn,{variant:"danger",onClose:()=>i(""),dismissible:!0,children:n}),r&&(0,De.jsx)(Nn,{variant:"success",onClose:()=>a(""),dismissible:!0,children:r}),(0,De.jsxs)(ps,{children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:"Tasks Pending Approval"}),(0,De.jsx)(Rn,{bg:o.length?"warning":"secondary",children:o.length})]}),(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsxs)(Vr,{responsive:!0,hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Task"}),(0,De.jsx)("th",{children:"Worker"}),(0,De.jsx)("th",{children:"Order"}),(0,De.jsx)("th",{children:"Completed"}),(0,De.jsx)("th",{className:"text-end",children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[o.map(e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:e.title}),(0,De.jsx)("td",{children:e.assigned_worker_name||"-"}),(0,De.jsx)("td",{children:e.order_number||"-"}),(0,De.jsx)("td",{children:e.completed_at?new Date(e.completed_at).toLocaleString():"-"}),(0,De.jsxs)("td",{className:"text-end",children:[(0,De.jsx)(Xs,{size:"sm",variant:"outline-success",className:"me-2",onClick:()=>(async e=>{try{await Ra(e,"approve"),a("Task approved"),c()}catch(OP){i((null===OP||void 0===OP?void 0:OP.message)||"Failed to approve")}})(e.id),children:"Approve"}),(0,De.jsx)(Xs,{size:"sm",variant:"outline-danger",onClick:()=>(async e=>{const t=window.prompt("Rejection reason (optional):")||"";try{await Ra(e,"reject",{reason:t}),a("Task rejected"),c()}catch(OP){i((null===OP||void 0===OP?void 0:OP.message)||"Failed to reject")}})(e.id),children:"Reject"})]})]},e.id)),0===o.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:5,className:"text-center text-muted py-4",children:"No tasks pending approval"})})]})]})})]})]})},EP=e=>{let{title:t,count:n,orders:s,onAdvance:i}=e;return(0,De.jsxs)(ps,{className:"h-100",children:[(0,De.jsxs)(ps.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsx)("span",{children:t}),(0,De.jsx)(Rn,{bg:"secondary",children:n||0})]}),(0,De.jsxs)(Xl,{variant:"flush",children:[(s||[]).map(e=>(0,De.jsxs)(Xl.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-semibold",children:e.order_number}),(0,De.jsx)("small",{className:"text-muted",children:e.customer_name})]}),i&&(0,De.jsx)(Xs,{size:"sm",variant:"outline-primary",onClick:()=>i(e.id),children:"Advance"})]},e.id)),(!s||0===s.length)&&(0,De.jsx)(Xl.Item,{className:"text-muted",children:"None"})]})]})},TP=e=>{var t,n,i,r,a,o,l,c,d,u,h,m;let{user:p,onLogout:f,userRole:g="owner"}=e;const[v,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(null),[_,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[C,A]=(0,s.useState)("warehouse"),[E,T]=(0,s.useState)(""),[P,M]=(0,s.useState)({warehouse_users:[],delivery_users:[]}),L=async()=>{x(!0),y("");try{const e=await Yr("/orders/workflow_dashboard/");j(e);const t=await Jr().catch(()=>null);null!==t&&void 0!==t&&t.assignment_options&&M(t.assignment_options)}catch(OP){y((null===OP||void 0===OP?void 0:OP.message)||"Failed to load workflow dashboard")}finally{x(!1)}};(0,s.useEffect)(()=>{L()},[]);const R=async e=>{try{await Zr(e),await L()}catch(OP){y((null===OP||void 0===OP?void 0:OP.message)||"Advance failed")}};if(v)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})});if(b)return(0,De.jsx)(Nn,{variant:"danger",onClose:()=>y(""),dismissible:!0,children:b});const O=(null===w||void 0===w?void 0:w.workflow_stages)||{},D=(0,De.jsxs)("div",{className:"p-3",children:[(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(EP,{title:"New",count:null===(t=O.new_orders)||void 0===t?void 0:t.count,orders:null===(n=O.new_orders)||void 0===n?void 0:n.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(EP,{title:"Paid",count:null===(i=O.paid_orders)||void 0===i?void 0:i.count,orders:null===(r=O.paid_orders)||void 0===r?void 0:r.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(EP,{title:"In Production",count:null===(a=O.in_production)||void 0===a?void 0:a.count,orders:null===(o=O.in_production)||void 0===o?void 0:o.orders,onAdvance:R})})]}),(0,De.jsxs)(Cn,{className:"g-3 mt-3",children:[(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(EP,{title:"Ready for Delivery",count:null===(l=O.ready_for_delivery)||void 0===l?void 0:l.count,orders:null===(c=O.ready_for_delivery)||void 0===c?void 0:c.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(EP,{title:"Out for Delivery",count:null===(d=O.out_for_delivery)||void 0===d?void 0:d.count,orders:null===(u=O.out_for_delivery)||void 0===u?void 0:u.orders,onAdvance:R})}),(0,De.jsx)(Pn,{md:4,children:(0,De.jsx)(EP,{title:"Completed",count:null===(h=O.completed)||void 0===h?void 0:h.count,orders:null===(m=O.completed)||void 0===m?void 0:m.orders})})]}),(0,De.jsxs)(Bo,{show:_,onHide:()=>N(!1),children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Assign Order"})}),(0,De.jsx)(Bo.Body,{children:(0,De.jsxs)(Wl,{children:[(0,De.jsxs)(Wl.Group,{className:"mb-3",children:[(0,De.jsx)(Wl.Label,{children:"Assignment Type"}),(0,De.jsxs)(Wl.Select,{value:C,onChange:e=>A(e.target.value),children:[(0,De.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,De.jsx)("option",{value:"delivery",children:"Delivery"})]})]}),(0,De.jsxs)(Wl.Group,{children:[(0,De.jsx)(Wl.Label,{children:"Assign To"}),(0,De.jsxs)(Wl.Select,{value:E,onChange:e=>T(e.target.value),children:[(0,De.jsx)("option",{value:"",children:"Select user..."}),("warehouse"===C?P.warehouse_users:P.delivery_users).map(e=>(0,De.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.role,")"]},e.id))]})]})]})}),(0,De.jsxs)(Bo.Footer,{children:[(0,De.jsx)(Xs,{variant:"secondary",onClick:()=>N(!1),children:"Cancel"}),(0,De.jsx)(Xs,{variant:"primary",disabled:!E,onClick:async()=>{try{await(e=k,t=C,n=Number(E),Yr("/orders/".concat(e,"/assign/"),{method:"POST",data:{assignment_type:t,assigned_user_id:n}})),N(!1),await L()}catch(OP){y((null===OP||void 0===OP?void 0:OP.message)||"Assign failed")}var e,t,n},children:"Assign"})]})]})]});return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:p,userRole:g,onLogout:f}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:p,onLogout:f,dashboardType:g}),D]})]})},PP=e=>{let{title:t,value:n,color:s="primary"}=e;return(0,De.jsx)(ps,{className:"h-100 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"text-center",children:[(0,De.jsx)("div",{className:"text-".concat(s," fs-3 fw-bold"),children:n}),(0,De.jsx)("div",{className:"text-muted",children:t})]})})},MP=e=>{var t,n,i,r,a,o,l,c,d,u,h,m,p,f;let{user:g,onLogout:v}=e;const x=Z(),[b,y]=(0,s.useState)(!0),[w,j]=(0,s.useState)(""),[_,N]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{y(!0),j("");try{const e=await Yr("/orders/admin_warehouse_overview/");N(e)}catch(OP){j((null===OP||void 0===OP?void 0:OP.message)||"Failed to load overview")}finally{y(!1)}})()},[]),b)return(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})});if(w)return(0,De.jsx)(Nn,{variant:"danger",children:w});const k=(null===_||void 0===_?void 0:_.production_pipeline)||{},S=(null===_||void 0===_?void 0:_.task_overview)||{},C=(null===_||void 0===_?void 0:_.workforce_summary)||{},A=(null===_||void 0===_?void 0:_.navigation_message)||{};return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:g,userRole:"admin",onLogout:v}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:g,onLogout:v,dashboardType:"admin"}),(0,De.jsxs)("div",{className:"p-3",children:[(0,De.jsxs)(Cn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(PP,{title:"Cutting",value:null!==(t=k.cutting)&&void 0!==t?t:0,color:"primary"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(PP,{title:"Sewing",value:null!==(n=k.sewing)&&void 0!==n?n:0,color:"info"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(PP,{title:"Finishing",value:null!==(i=k.finishing)&&void 0!==i?i:0,color:"warning"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(PP,{title:"Quality",value:null!==(r=k.quality_check)&&void 0!==r?r:0,color:"secondary"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(PP,{title:"Completed",value:null!==(a=k.completed)&&void 0!==a?a:0,color:"success"})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(PP,{title:"In Prod",value:null!==(o=k.total_in_production)&&void 0!==o?o:0,color:"dark"})})]}),(0,De.jsxs)(Cn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Active Tasks",value:null!==(l=S.total_active_tasks)&&void 0!==l?l:0,color:"primary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Pending",value:null!==(c=S.pending_tasks)&&void 0!==c?c:0,color:"secondary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"In Progress",value:null!==(d=S.in_progress_tasks)&&void 0!==d?d:0,color:"info"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Paused",value:null!==(u=S.paused_tasks)&&void 0!==u?u:0,color:"warning"})})]}),(0,De.jsxs)(Cn,{className:"g-3 mb-3",children:[(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Workers",value:null!==(h=C.total_workers)&&void 0!==h?h:0,color:"dark"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Managers",value:null!==(m=C.managers)&&void 0!==m?m:0,color:"secondary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Workers",value:null!==(p=C.workers)&&void 0!==p?p:0,color:"primary"})}),(0,De.jsx)(Pn,{md:3,children:(0,De.jsx)(PP,{title:"Active",value:null!==(f=C.active_workers)&&void 0!==f?f:0,color:"success"})})]}),(0,De.jsxs)(ps,{className:"mb-3",children:[(0,De.jsx)(ps.Header,{children:"Warehouse Bottlenecks"}),(0,De.jsxs)(Xl,{variant:"flush",children:[((null===_||void 0===_?void 0:_.bottleneck_analysis)||[]).map((e,t)=>(0,De.jsx)(Xl.Item,{children:e},t)),(!(null!==_&&void 0!==_&&_.bottleneck_analysis)||0===_.bottleneck_analysis.length)&&(0,De.jsx)(Xl.Item,{className:"text-muted",children:"No bottlenecks"})]})]}),(0,De.jsx)(ps,{className:"border-success",children:(0,De.jsxs)(ps.Body,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{children:[(0,De.jsx)("div",{className:"fw-bold",children:A.title||"Warehouse Operations"}),(0,De.jsx)("div",{className:"text-muted",children:A.description||"Use the Warehouse Dashboard for operations."})]}),(0,De.jsx)(Xs,{variant:"success",onClick:()=>x(A.action_url||"/warehouse"),children:A.action_text||"Go to Warehouse Dashboard"})]})})]})]})]})},LP=e=>{let{user:t,onLogout:n}=e;const[i,r]=(0,s.useState)(!0),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(1),[h,m]=(0,s.useState)(20),[p,f]=(0,s.useState)(0),[g,v]=(0,s.useState)({order:"",customer:"",method:"",status:"",user:"",since:"",until:""}),[x,b]=(0,s.useState)({open:!1,url:"",name:""}),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;r(!0),o("");try{const s={page:e,page_size:t};Object.entries(n).forEach(e=>{let[t,n]=e;n&&(s[t]=n)});const i=await aa(s),r=Array.isArray(null===i||void 0===i?void 0:i.results)?i.results:Array.isArray(i)?i:[];c(r),f(void 0!==(null===i||void 0===i?void 0:i.count)?i.count:Array.isArray(i)?i.length:0),u(e),m(t)}catch(OP){o((null===OP||void 0===OP?void 0:OP.message)||"Failed to load transactions")}finally{r(!1)}};(0,s.useEffect)(()=>{y(1,h,g)},[]);const w=e=>v(t=>Pe(Pe({},t),{},{[e.target.name]:e.target.value}));return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(jd,{user:t,userRole:"owner",onLogout:n}),(0,De.jsxs)("div",{className:"main-content",children:[(0,De.jsx)(Ym,{user:t,onLogout:n,dashboardType:"owner"}),(0,De.jsxs)(Xe,{fluid:!0,className:"py-4",children:[(0,De.jsx)(ps,{className:"mb-3 border-0 shadow-sm",children:(0,De.jsxs)(ps.Body,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(Zi,{className:"text-success"}),(0,De.jsx)("h5",{className:"mb-0",children:"Payment Transactions"})]}),(0,De.jsx)("div",{className:"d-flex gap-2",children:(0,De.jsxs)(Xs,{variant:"outline-secondary",onClick:()=>y(d,h,g),children:[(0,De.jsx)(_r,{className:"me-1"}),"Refresh"]})})]})}),(0,De.jsxs)(ps,{className:"mb-3",children:[(0,De.jsxs)(ps.Header,{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(Hi,{})," Filters"]}),(0,De.jsxs)(ps.Body,{children:[(0,De.jsxs)(Cn,{className:"g-3",children:[(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(Wl.Control,{placeholder:"Order #",name:"order",value:g.order,onChange:w})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(Wl.Control,{placeholder:"Customer",name:"customer",value:g.customer,onChange:w})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{name:"method",value:g.method,onChange:w,children:[(0,De.jsx)("option",{value:"",children:"Method"}),(0,De.jsx)("option",{value:"cash",children:"Cash"}),(0,De.jsx)("option",{value:"card",children:"Card"}),(0,De.jsx)("option",{value:"EFT",children:"EFT"}),(0,De.jsx)("option",{value:"cheque",children:"Cheque"}),(0,De.jsx)("option",{value:"other",children:"Other"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsxs)(Wl.Select,{name:"status",value:g.status,onChange:w,children:[(0,De.jsx)("option",{value:"",children:"Status"}),(0,De.jsx)("option",{value:"deposit_pending",children:"Deposit Pending"}),(0,De.jsx)("option",{value:"deposit_paid",children:"Deposit Paid"}),(0,De.jsx)("option",{value:"partial",children:"Partial"}),(0,De.jsx)("option",{value:"paid",children:"Paid"}),(0,De.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,De.jsx)(Pn,{md:2,children:(0,De.jsx)(Wl.Control,{placeholder:"User ID",name:"user",value:g.user,onChange:w})}),(0,De.jsx)(Pn,{md:1,children:(0,De.jsx)(Wl.Control,{type:"date",name:"since",value:g.since,onChange:w})}),(0,De.jsx)(Pn,{md:1,children:(0,De.jsx)(Wl.Control,{type:"date",name:"until",value:g.until,onChange:w})})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 mt-3",children:[(0,De.jsxs)(Xs,{variant:"primary",onClick:()=>y(1,h,g),children:[(0,De.jsx)(mr,{className:"me-1"}),"Apply"]}),(0,De.jsx)(Xs,{variant:"outline-secondary",onClick:()=>{const e={order:"",customer:"",method:"",status:"",user:"",since:"",until:""};v(e),y(1,h,e)},children:"Reset"})]})]})]}),a&&(0,De.jsx)(Nn,{variant:"danger",onClose:()=>o(""),dismissible:!0,children:a}),i?(0,De.jsx)("div",{className:"text-center py-5",children:(0,De.jsx)(Wr,{animation:"border"})}):(0,De.jsxs)(ps,{children:[(0,De.jsx)(ps.Body,{className:"p-0",children:(0,De.jsx)("div",{className:"table-responsive",children:(0,De.jsxs)(Vr,{hover:!0,className:"mb-0",children:[(0,De.jsx)("thead",{className:"bg-light",children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Date"}),(0,De.jsx)("th",{children:"Order #"}),(0,De.jsx)("th",{children:"Actor"}),(0,De.jsx)("th",{children:"Method"}),(0,De.jsx)("th",{children:"Amount \u0394"}),(0,De.jsx)("th",{children:"New Balance"}),(0,De.jsx)("th",{children:"Status"}),(0,De.jsx)("th",{children:"Proof"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsxs)("tbody",{children:[l.map(e=>{var t,n,s,i,r,a;return(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{children:new Date(e.created_at).toLocaleString()}),(0,De.jsx)("td",{children:e.order_number||e.order}),(0,De.jsx)("td",{children:(null===(t=e.actor_user)||void 0===t?void 0:t.username)||"".concat((null===(n=e.actor_user)||void 0===n?void 0:n.first_name)||""," ").concat((null===(s=e.actor_user)||void 0===s?void 0:s.last_name)||"")}),(0,De.jsx)("td",{children:e.payment_method}),(0,De.jsx)("td",{children:"number"===typeof e.amount_delta?"R".concat(e.amount_delta.toFixed(2)):e.amount_delta}),(0,De.jsx)("td",{children:"number"===typeof e.new_balance?"R".concat(e.new_balance.toFixed(2)):e.new_balance}),(0,De.jsx)("td",{children:e.payment_status}),(0,De.jsx)("td",{children:null!==(i=e.proof)&&void 0!==i&&i.id?(0,De.jsx)("a",{href:e.proof.absolute_url||e.proof.proof_image||e.proof.id&&((null===(r=window)||void 0===r?void 0:r.OOX_API_BASE)||"https://internaloox-1.onrender.com/api")+"/payment-proofs/".concat(e.proof.id,"/file/"),target:"_blank",rel:"noreferrer",children:"View"}):"-"}),(0,De.jsx)("td",{children:null!==(a=e.proof)&&void 0!==a&&a.id?(0,De.jsx)(Xs,{variant:"outline-primary",size:"sm",onClick:()=>(async e=>{const t=null===e||void 0===e?void 0:e.proof;if(null!==t&&void 0!==t&&t.id)try{let e="";try{const n=await la(t.id,300);e=(null===n||void 0===n?void 0:n.url)||""}catch(n){}e||(e=oa(t.id));const s=(null===t||void 0===t?void 0:t.file_name)||"proof_".concat(t.id,".pdf");b({open:!0,url:e,name:s})}catch(OP){o((null===OP||void 0===OP?void 0:OP.message)||"Unable to open proof")}})(e),children:"Preview"}):"-"})]},e.id)}),0===l.length&&(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:9,className:"text-center text-muted py-4",children:"No transactions"})})]})]})})}),p>h&&(0,De.jsxs)(ps.Footer,{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"text-muted small",children:["Page ",d," of ",Math.ceil(p/h)]}),(0,De.jsxs)("div",{className:"d-flex gap-2",children:[(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:d<=1,onClick:()=>y(d-1,h,g),children:"Prev"}),(0,De.jsx)(Xs,{variant:"outline-secondary",size:"sm",disabled:d*h>=p,onClick:()=>y(d+1,h,g),children:"Next"})]})]})]})]}),(0,De.jsxs)(Bo,{show:x.open,onHide:()=>b({open:!1,url:"",name:""}),size:"lg",centered:!0,children:[(0,De.jsx)(Bo.Header,{closeButton:!0,children:(0,De.jsx)(Bo.Title,{children:"Proof of Payment"})}),(0,De.jsx)(Bo.Body,{children:x.url?(0,De.jsx)(aP,{url:x.url,fileName:x.name,height:"75vh"}):(0,De.jsx)("div",{className:"text-muted",children:"No document"})})]})]})]})};const RP=function(){const[e,t]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0),[r,a]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=localStorage.getItem("oox_user");if(e)try{const n=JSON.parse(e);t(n)}catch(r){console.error("Error parsing saved user:",r),localStorage.removeItem("oox_user"),a("Session expired. Please login again.")}i(!1)},[]);const o=e=>{t(e),a(null),localStorage.setItem("oox_user",JSON.stringify(e))},l=()=>{t(null),a(null),localStorage.removeItem("oox_user"),localStorage.removeItem("oox_token")},c=t=>{let{children:n,allowedRoles:s}=t;return e?s&&!s.includes(e.role)?(0,De.jsx)(fe,{to:"/login",replace:!0}):n:(0,De.jsx)(fe,{to:"/login",replace:!0})};return n?(0,De.jsx)(Xe,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:(0,De.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,De.jsx)(Gc,{children:(0,De.jsx)(Ne,{children:(0,De.jsxs)("div",{className:"App",children:[r&&(0,De.jsx)(Nn,{variant:"danger",dismissible:!0,onClose:()=>a(null),className:"position-fixed top-0 start-50 translate-middle-x mt-3",style:{zIndex:9999},children:r}),(0,De.jsxs)(be,{children:[(0,De.jsx)(ve,{path:"/login",element:e?(0,De.jsx)(fe,{to:(e=>{switch(e){case"owner":return"/owner";case"admin":return"/admin";case"delivery":return"/delivery";case"warehouse":case"warehouse_manager":case"warehouse_worker":return"/warehouse";default:return"/login"}})(e.role),replace:!0}):(0,De.jsx)(uP,{onLogin:o})}),(0,De.jsx)(ve,{path:"/owner",element:(0,De.jsx)(c,{allowedRoles:["owner"],children:(0,De.jsx)(_d,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(Oa,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/customers",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(Zm,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/payments",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(oP,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/deliveries",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(lP,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/warehouse",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(MP,{user:e,onLogout:l})})}),(0,De.jsxs)(ve,{path:"/warehouse/*",element:(0,De.jsx)(c,{allowedRoles:["warehouse","warehouse_manager","warehouse_worker","owner","admin"],children:(0,De.jsx)(bP,{user:e,onLogout:l})}),children:[(0,De.jsx)(ve,{index:!0,element:(0,De.jsx)(Xc,{user:e,onLogout:l})}),(0,De.jsx)(ve,{path:"products",element:(0,De.jsx)(wP,{})}),(0,De.jsx)(ve,{path:"products/new",element:(0,De.jsx)(mP,{user:e})}),(0,De.jsx)(ve,{path:"stock",element:(0,De.jsx)(jP,{})}),(0,De.jsx)(ve,{path:"workers",element:(0,De.jsx)(NP,{currentUser:e})}),(0,De.jsx)(ve,{path:"worker",element:(0,De.jsx)(kP,{})}),(0,De.jsx)(ve,{path:"analytics",element:(0,De.jsx)(CP,{})}),(0,De.jsx)(ve,{path:"approvals",element:(0,De.jsx)(c,{allowedRoles:["owner","admin","warehouse"],children:(0,De.jsx)(AP,{})})}),(0,De.jsx)(ve,{path:"inventory/materials",element:(0,De.jsx)(gP,{})}),(0,De.jsx)(ve,{path:"inventory/stock",element:(0,De.jsx)(vP,{})}),(0,De.jsx)(ve,{path:"orders",element:(0,De.jsx)($m,{user:e,userRole:null===e||void 0===e?void 0:e.role,onLogout:l})})]}),(0,De.jsx)(ve,{path:"/delivery",element:(0,De.jsx)(c,{allowedRoles:["delivery","owner","admin"],children:(0,De.jsx)(Yc,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/orders",element:(0,De.jsx)(c,{allowedRoles:["owner"],children:(0,De.jsx)($m,{user:e,userRole:"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/orders",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)($m,{user:e,userRole:"admin",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/customers",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(Zm,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/users",element:(0,De.jsx)(c,{allowedRoles:["owner"],children:(0,De.jsx)(ep,{user:e,userRole:"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/payments",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(oP,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/transactions",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(LP,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/admin/transactions",element:(0,De.jsx)(c,{allowedRoles:["admin","owner"],children:(0,De.jsx)(LP,{user:e,onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/deliveries",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(lP,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/analytics",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(cP,{user:e,userRole:(null===e||void 0===e?void 0:e.role)||"owner",onLogout:l})})}),(0,De.jsx)(ve,{path:"/owner/workflow",element:(0,De.jsx)(c,{allowedRoles:["owner","admin"],children:(0,De.jsx)(TP,{user:e,onLogout:l,userRole:(null===e||void 0===e?void 0:e.role)||"owner"})})}),(0,De.jsx)(ve,{path:"/",element:(0,De.jsx)(uP,{onLogin:o})}),(0,De.jsx)(ve,{path:"*",element:(0,De.jsx)(fe,{to:"/login",replace:!0})})]})]})})})};r.createRoot(document.getElementById("root")).render((0,De.jsx)(s.StrictMode,{children:(0,De.jsx)(RP,{})}))})()})();
//# sourceMappingURL=main.39ad1a61.js.map